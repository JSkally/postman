{
	"info": {
		"_postman_id": "c52a20c3-e21a-4979-b3e2-d7a160518489",
		"name": "Golden_Path_Mojaloop",
		"description": "Author: Sridevi Miriyala\nDescription: Golden Path Tests using Mojaloop Simulators",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "funds in before all transfers",
			"item": [
				{
					"name": "Deposit Funds in Settlement Account - SIMPAYER",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "a14256d3-c086-4f92-a53a-bb8c95fefafa",
								"exec": [
									"var uuid = require('uuid');",
									"var generatedUUID = uuid.v4();",
									"pm.environment.set('fundsInPrepareTransferId', generatedUUID);",
									"pm.environment.set('fundsInPrepareAmount', 100000);",
									"",
									"",
									"const payerfspGetStatusRequest = {",
									"  url: pm.environment.get(\"HOST_CENTRAL_LEDGER\")+pm.environment.get(\"BASE_CENTRAL_LEDGER_ADMIN\")+'/participants/' + pm.environment.get('SIMPAYER_NAME') + '/accounts',",
									"  method: 'GET',",
									"  header: {",
									"      \"Authorization\":\"Bearer \"+pm.environment.get(\"HUB_OPERATOR_BEARER_TOKEN\"),",
									"      \"FSPIOP-Source\": pm.environment.get(\"hub_operator\"),",
									"      \"Content-Type\": \"application/json\"",
									"  }",
									"};",
									"pm.sendRequest(payerfspGetStatusRequest, function (err, response) {",
									"    console.log(response.json())",
									"    var jsonData = response.json()",
									"    for(var i in jsonData) {",
									"        if(jsonData[i].ledgerAccountType === 'SETTLEMENT' && jsonData[i].currency === pm.environment.get('SIMPAYER_CURRENCY')) {",
									"            pm.environment.set(`${pm.environment.get('SIMPAYER_NAME')}SettlementAccountId`,jsonData[i].id)",
									"            pm.environment.set(`${pm.environment.get('SIMPAYER_NAME')}SettlementAccountBalanceBeforeFundsIn`,jsonData[i].value)",
									"        }",
									"    }",
									"});",
									"",
									"const hubGetStatusRequest = {",
									"  url: pm.environment.get(\"HOST_CENTRAL_LEDGER\")+pm.environment.get(\"BASE_CENTRAL_LEDGER_ADMIN\")+'/participants/Hub/accounts',",
									"  method: 'GET',",
									"  header: {",
									"      \"Authorization\":\"Bearer \"+pm.environment.get(\"HUB_OPERATOR_BEARER_TOKEN\"),",
									"      \"FSPIOP-Source\": pm.environment.get(\"hub_operator\"),",
									"      \"Content-Type\": \"application/json\"",
									"  }",
									"};",
									"pm.sendRequest(hubGetStatusRequest, function (err, response) {",
									"    console.log(response.json())",
									"    //var jsonData = response.json()",
									"    response.json()",
									"        .filter( ledgerAccount => (ledgerAccount.currency === pm.environment.get('SIMPAYER_CURRENCY') && ledgerAccount.ledgerAccountType === 'HUB_RECONCILIATION'))",
									"        .forEach(account => pm.environment.set(\"hubReconAccountBalanceBeforeFundsIn\",account.value))",
									"    // for(var i in jsonData) {",
									"    //     if(jsonData[i].ledgerAccountType === 'HUB_RECONCILIATION') {",
									"    //         pm.environment.set(\"hubReconAccountBalanceBeforeFundsIn\",jsonData[i].value)",
									"    //     }",
									"    // }",
									"});",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "90f7b1ed-f71c-4eea-a671-ce0be10c37de",
								"exec": [
									"pm.test(\"Status code is 202\", function () {",
									"    pm.response.to.have.status(202);",
									"});",
									"",
									"setTimeout(function () {",
									"    const payerfspGetStatusRequest = {",
									"      url: pm.environment.get(\"HOST_CENTRAL_LEDGER\")+pm.environment.get(\"BASE_CENTRAL_LEDGER_ADMIN\")+'/participants/'+pm.environment.get(\"SIMPAYER_NAME\")+'/accounts',",
									"      method: 'GET',",
									"      header: {",
									"          \"Authorization\":\"Bearer \"+pm.environment.get(\"HUB_OPERATOR_BEARER_TOKEN\"),",
									"          \"FSPIOP-Source\": pm.environment.get(\"hub_operator\"),",
									"          \"Content-Type\": \"application/json\"",
									"      }",
									"    };",
									"    pm.sendRequest(payerfspGetStatusRequest, function (err, response) {",
									"        console.log(response.json())",
									"        var jsonData = response.json()",
									"        var payerfspSettlementAccountBalanceAfterFundsIn",
									"        for(var i in jsonData) {",
									"            if(jsonData[i].ledgerAccountType === 'SETTLEMENT' && jsonData[i].currency === pm.environment.get('SIMPAYER_CURRENCY')) {",
									"                payerfspSettlementAccountBalanceAfterFundsIn = jsonData[i].value",
									"            }",
									"        } ",
									"        var payerfspExpectedBalance = Number((pm.environment.get(`${pm.environment.get('SIMPAYER_NAME')}SettlementAccountBalanceBeforeFundsIn`) - pm.environment.get('fundsInPrepareAmount')).toFixed(4));",
									"        pm.test(`Final ${pm.environment.get('SIMPAYER_NAME')} Settlement Account Balance should be same as before FundsIn + fundsInPrepareAmount`, function () {",
									"            pm.expect(payerfspSettlementAccountBalanceAfterFundsIn).to.eql(payerfspExpectedBalance);",
									"          });    ",
									"    ",
									"    });",
									"    ",
									"    const hubGetStatusRequest = {",
									"      url: pm.environment.get(\"HOST_CENTRAL_LEDGER\")+pm.environment.get(\"BASE_CENTRAL_LEDGER_ADMIN\")+'/participants/Hub/accounts',",
									"      method: 'GET',",
									"      header: {",
									"          \"Authorization\":\"Bearer \"+pm.environment.get(\"HUB_OPERATOR_BEARER_TOKEN\"),",
									"          \"FSPIOP-Source\": pm.environment.get(\"hub_operator\"),",
									"          \"Content-Type\": \"application/json\"",
									"      }",
									"    };",
									"    pm.sendRequest(hubGetStatusRequest, function (err, response) {",
									"        console.log(response.json())",
									"        var jsonData = response.json()",
									"        var currentHubReconAccountBalance",
									"        response.json()",
									"        .filter( ledgerAccount => (ledgerAccount.currency === pm.environment.get('SIMPAYER_CURRENCY') && ledgerAccount.ledgerAccountType === 'HUB_RECONCILIATION'))",
									"        .forEach(account => hubReconAccountBalanceAfterFundsIn = account.value)",
									"        var hubExpectedBalance = Number((pm.environment.get(\"hubReconAccountBalanceBeforeFundsIn\")+pm.environment.get('fundsInPrepareAmount')).toFixed(4));",
									"        console.log(hubExpectedBalance)",
									"        pm.test(\"Final Hub Reconciliation Account Balance should increase by FundsIn Amount\", function () {",
									"            pm.expect(hubReconAccountBalanceAfterFundsIn).to.eql(hubExpectedBalance);",
									"          });  ",
									"    });",
									"}, 3000)"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "FSPIOP-Source",
								"type": "text",
								"value": "{{hub_operator}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"transferId\": \"{{fundsInPrepareTransferId}}\",\n  \"externalReference\": \"string\",\n  \"action\": \"recordFundsIn\",\n  \"reason\": \"string\",\n  \"amount\": {\n    \"amount\": {{fundsInPrepareAmount}},\n    \"currency\": \"{{SIMPAYER_CURRENCY}}\"\n  },\n  \"extensionList\": {\n    \"extension\": [\n      {\n        \"key\": \"string\",\n        \"value\": \"string\"\n      }\n    ]\n  }\n}"
						},
						"url": {
							"raw": "{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}/participants/{{SIMPAYER_NAME}}/accounts/{{{{SIMPAYER_NAME}}SettlementAccountId}}",
							"host": [
								"{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}"
							],
							"path": [
								"participants",
								"{{SIMPAYER_NAME}}",
								"accounts",
								"{{{{SIMPAYER_NAME}}SettlementAccountId}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Deposit Funds in Settlement Account - SIMPAYEE",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "33371171-803b-4a60-b8de-deade551cd5e",
								"exec": [
									"var uuid = require('uuid');",
									"var generatedUUID = uuid.v4();",
									"pm.environment.set('fundsInPrepareTransferId', generatedUUID);",
									"pm.environment.set('fundsInPrepareAmount', 100000);",
									"",
									"",
									"const payeefspGetStatusRequest = {",
									"  url: pm.environment.get(\"HOST_CENTRAL_LEDGER\")+pm.environment.get(\"BASE_CENTRAL_LEDGER_ADMIN\")+'/participants/' + pm.environment.get('SIMPAYEE_NAME') + '/accounts',",
									"  method: 'GET',",
									"  header: {",
									"      \"Authorization\":\"Bearer \"+pm.environment.get(\"HUB_OPERATOR_BEARER_TOKEN\"),",
									"      \"FSPIOP-Source\": pm.environment.get(\"hub_operator\"),",
									"      \"Content-Type\": \"application/json\"",
									"  }",
									"};",
									"pm.sendRequest(payeefspGetStatusRequest, function (err, response) {",
									"    console.log(response.json())",
									"    var jsonData = response.json()",
									"    for(var i in jsonData) {",
									"        if(jsonData[i].ledgerAccountType === 'SETTLEMENT'  && jsonData[i].currency === pm.environment.get('SIMPAYEE_CURRENCY')) {",
									"            pm.environment.set(`${pm.environment.get('SIMPAYEE_NAME')}SettlementAccountId`,jsonData[i].id)",
									"            pm.environment.set(`${pm.environment.get('SIMPAYEE_NAME')}SettlementAccountBalanceBeforeFundsIn`,jsonData[i].value)",
									"        }",
									"    }",
									"});",
									"",
									"const hubGetStatusRequest = {",
									"  url: pm.environment.get(\"HOST_CENTRAL_LEDGER\")+pm.environment.get(\"BASE_CENTRAL_LEDGER_ADMIN\")+'/participants/Hub/accounts',",
									"  method: 'GET',",
									"  header: {",
									"      \"Authorization\":\"Bearer \"+pm.environment.get(\"HUB_OPERATOR_BEARER_TOKEN\"),",
									"      \"FSPIOP-Source\": pm.environment.get(\"hub_operator\"),",
									"      \"Content-Type\": \"application/json\"",
									"  }",
									"};",
									"pm.sendRequest(hubGetStatusRequest, function (err, response) {",
									"    console.log(response.json())",
									"    //var jsonData = response.json()",
									"    response.json()",
									"        .filter( ledgerAccount => (ledgerAccount.currency === pm.environment.get('SIMPAYEE_CURRENCY') && ledgerAccount.ledgerAccountType === 'HUB_RECONCILIATION'))",
									"        .forEach(account => pm.environment.set(\"hubReconAccountBalanceBeforeFundsIn\",account.value))",
									"    // for(var i in jsonData) {",
									"    //     if(jsonData[i].ledgerAccountType === 'HUB_RECONCILIATION') {",
									"    //         pm.environment.set(\"hubReconAccountBalanceBeforeFundsIn\",jsonData[i].value)",
									"    //     }",
									"    // }",
									"});",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "50506994-4ae5-48e0-b797-04057d860e5f",
								"exec": [
									"pm.test(\"Status code is 202\", function () {",
									"    pm.response.to.have.status(202);",
									"});",
									"",
									"setTimeout(function () {",
									"    const payeefspGetStatusRequest = {",
									"      url: pm.environment.get(\"HOST_CENTRAL_LEDGER\")+pm.environment.get(\"BASE_CENTRAL_LEDGER_ADMIN\")+'/participants/'+pm.environment.get(\"SIMPAYEE_NAME\")+'/accounts',",
									"      method: 'GET',",
									"      header: {",
									"          \"Authorization\":\"Bearer \"+pm.environment.get(\"HUB_OPERATOR_BEARER_TOKEN\"),",
									"          \"FSPIOP-Source\": pm.environment.get(\"hub_operator\"),",
									"          \"Content-Type\": \"application/json\"",
									"      }",
									"    };",
									"    pm.sendRequest(payeefspGetStatusRequest, function (err, response) {",
									"        console.log(response.json())",
									"        var jsonData = response.json()",
									"        var payeefspSettlementAccountBalanceAfterFundsIn",
									"        for(var i in jsonData) {",
									"            if(jsonData[i].ledgerAccountType === 'SETTLEMENT'  && jsonData[i].currency === pm.environment.get('SIMPAYEE_CURRENCY')) {",
									"                payeefspSettlementAccountBalanceAfterFundsIn = jsonData[i].value",
									"            }",
									"        }",
									"        var payeefspExpectedBalance = Number((pm.environment.get(`${pm.environment.get('SIMPAYEE_NAME')}SettlementAccountBalanceBeforeFundsIn`) - pm.environment.get('fundsInPrepareAmount')).toFixed(4));",
									"        pm.test(`Final ${pm.environment.get('SIMPAYEE_NAME')} Settlement Account Balance should be same as before FundsIn + fundsInPrepareAmount`, function () {",
									"            pm.expect(payeefspSettlementAccountBalanceAfterFundsIn).to.eql(payeefspExpectedBalance);",
									"          });    ",
									"    ",
									"    });",
									"    ",
									"    const hubGetStatusRequest = {",
									"      url: pm.environment.get(\"HOST_CENTRAL_LEDGER\")+pm.environment.get(\"BASE_CENTRAL_LEDGER_ADMIN\")+'/participants/Hub/accounts',",
									"      method: 'GET',",
									"      header: {",
									"          \"Authorization\":\"Bearer \"+pm.environment.get(\"HUB_OPERATOR_BEARER_TOKEN\"),",
									"          \"FSPIOP-Source\": pm.environment.get(\"hub_operator\"),",
									"          \"Content-Type\": \"application/json\"",
									"      }",
									"    };",
									"    pm.sendRequest(hubGetStatusRequest, function (err, response) {",
									"        console.log(response.json())",
									"        var jsonData = response.json()",
									"        var currentHubReconAccountBalance",
									"        response.json()",
									"        .filter( ledgerAccount => (ledgerAccount.currency === pm.environment.get('SIMPAYEE_CURRENCY') && ledgerAccount.ledgerAccountType === 'HUB_RECONCILIATION'))",
									"        .forEach(account => hubReconAccountBalanceAfterFundsIn = account.value)",
									"        var hubExpectedBalance = Number((pm.environment.get(\"hubReconAccountBalanceBeforeFundsIn\")+pm.environment.get('fundsInPrepareAmount')).toFixed(4));",
									"        console.log(hubExpectedBalance)",
									"        pm.test(\"Final Hub Reconciliation Account Balance should increase by FundsIn Amount\", function () {",
									"            pm.expect(hubReconAccountBalanceAfterFundsIn).to.eql(hubExpectedBalance);",
									"          });  ",
									"    });",
									"}, 2000)"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "FSPIOP-Source",
								"type": "text",
								"value": "{{hub_operator}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"transferId\": \"{{fundsInPrepareTransferId}}\",\n  \"externalReference\": \"string\",\n  \"action\": \"recordFundsIn\",\n  \"reason\": \"string\",\n  \"amount\": {\n    \"amount\": {{fundsInPrepareAmount}},\n    \"currency\": \"{{SIMPAYEE_CURRENCY}}\"\n  },\n  \"extensionList\": {\n    \"extension\": [\n      {\n        \"key\": \"string\",\n        \"value\": \"string\"\n      }\n    ]\n  }\n}"
						},
						"url": {
							"raw": "{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}/participants/{{SIMPAYEE_NAME}}/accounts/{{{{SIMPAYEE_NAME}}SettlementAccountId}}",
							"host": [
								"{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}"
							],
							"path": [
								"participants",
								"{{SIMPAYEE_NAME}}",
								"accounts",
								"{{{{SIMPAYEE_NAME}}SettlementAccountId}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Deposit Funds in Settlement Account - SIM1",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "352e44da-af50-45e7-ba94-9ebf5262ac89",
								"exec": [
									"var uuid = require('uuid');",
									"var generatedUUID = uuid.v4();",
									"pm.environment.set('fundsInPrepareTransferId', generatedUUID);",
									"pm.environment.set('fundsInPrepareAmount', 100000);",
									"",
									"",
									"const testfsp1GetStatusRequest = {",
									"  url: pm.environment.get(\"HOST_CENTRAL_LEDGER\")+pm.environment.get(\"BASE_CENTRAL_LEDGER_ADMIN\")+'/participants/' + pm.environment.get('SIM1_NAME') + '/accounts',",
									"  method: 'GET',",
									"  header: {",
									"      \"Authorization\":\"Bearer \"+pm.environment.get(\"HUB_OPERATOR_BEARER_TOKEN\"),",
									"      \"FSPIOP-Source\": pm.environment.get(\"hub_operator\"),",
									"      \"Content-Type\": \"application/json\"",
									"  }",
									"};",
									"pm.sendRequest(testfsp1GetStatusRequest, function (err, response) {",
									"    console.log(response.json())",
									"    var jsonData = response.json()",
									"    for(var i in jsonData) {",
									"        if(jsonData[i].ledgerAccountType === 'SETTLEMENT'  && jsonData[i].currency === pm.environment.get('SIM1_CURRENCY')) {",
									"            pm.environment.set(`${pm.environment.get('SIM1_NAME')}SettlementAccountId`,jsonData[i].id)",
									"            pm.environment.set(`${pm.environment.get('SIM1_NAME')}SettlementAccountBalanceBeforeFundsIn`,jsonData[i].value)",
									"        }",
									"    }",
									"});",
									"",
									"const hubGetStatusRequest = {",
									"  url: pm.environment.get(\"HOST_CENTRAL_LEDGER\")+pm.environment.get(\"BASE_CENTRAL_LEDGER_ADMIN\")+'/participants/Hub/accounts',",
									"  method: 'GET',",
									"  header: {",
									"      \"Authorization\":\"Bearer \"+pm.environment.get(\"HUB_OPERATOR_BEARER_TOKEN\"),",
									"      \"FSPIOP-Source\": pm.environment.get(\"hub_operator\"),",
									"      \"Content-Type\": \"application/json\"",
									"  }",
									"};",
									"pm.sendRequest(hubGetStatusRequest, function (err, response) {",
									"    console.log(response.json())",
									"    //var jsonData = response.json()",
									"    response.json()",
									"        .filter( ledgerAccount => (ledgerAccount.currency === pm.environment.get('SIM1_CURRENCY') && ledgerAccount.ledgerAccountType === 'HUB_RECONCILIATION'))",
									"        .forEach(account => pm.environment.set(\"hubReconAccountBalanceBeforeFundsIn\",account.value))",
									"    // for(var i in jsonData) {",
									"    //     if(jsonData[i].ledgerAccountType === 'HUB_RECONCILIATION') {",
									"    //         pm.environment.set(\"hubReconAccountBalanceBeforeFundsIn\",jsonData[i].value)",
									"    //     }",
									"    // }",
									"});",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "26f7402c-e0b3-49d1-bfef-8c6c94480b87",
								"exec": [
									"pm.test(\"Status code is 202\", function () {",
									"    pm.response.to.have.status(202);",
									"});",
									"",
									"setTimeout(function () {",
									"    const testfsp1GetStatusRequest = {",
									"      url: pm.environment.get(\"HOST_CENTRAL_LEDGER\")+pm.environment.get(\"BASE_CENTRAL_LEDGER_ADMIN\")+'/participants/' + pm.environment.get('SIM1_NAME') + '/accounts',",
									"      method: 'GET',",
									"      header: {",
									"          \"Authorization\":\"Bearer \"+pm.environment.get(\"HUB_OPERATOR_BEARER_TOKEN\"),",
									"          \"FSPIOP-Source\": pm.environment.get(\"hub_operator\"),",
									"          \"Content-Type\": \"application/json\"",
									"      }",
									"    };",
									"    pm.sendRequest(testfsp1GetStatusRequest, function (err, response) {",
									"        console.log(response.json())",
									"        var jsonData = response.json()",
									"        var testfsp1SettlementAccountBalanceAfterFundsIn",
									"        for(var i in jsonData) {",
									"            if(jsonData[i].ledgerAccountType === 'SETTLEMENT'  && jsonData[i].currency === pm.environment.get('SIM1_CURRENCY')) {",
									"                testfsp1SettlementAccountBalanceAfterFundsIn = jsonData[i].value",
									"            }",
									"        }",
									"        var testfsp1ExpectedBalance = Number((pm.environment.get(`${pm.environment.get('SIM1_NAME')}SettlementAccountBalanceBeforeFundsIn`) - pm.environment.get('fundsInPrepareAmount')).toFixed(4));",
									"        pm.test(`Final ${pm.environment.get('SIM1_NAME')} Settlement Account Balance should be same as before FundsIn + fundsInPrepareAmount`, function () {",
									"            pm.expect(testfsp1SettlementAccountBalanceAfterFundsIn).to.eql(testfsp1ExpectedBalance);",
									"          });    ",
									"    ",
									"    });",
									"    ",
									"    const hubGetStatusRequest = {",
									"      url: pm.environment.get(\"HOST_CENTRAL_LEDGER\")+pm.environment.get(\"BASE_CENTRAL_LEDGER_ADMIN\")+'/participants/Hub/accounts',",
									"      method: 'GET',",
									"      header: {",
									"          \"Authorization\":\"Bearer \"+pm.environment.get(\"HUB_OPERATOR_BEARER_TOKEN\"),",
									"          \"FSPIOP-Source\": pm.environment.get(\"hub_operator\"),",
									"          \"Content-Type\": \"application/json\"",
									"      }",
									"    };",
									"    pm.sendRequest(hubGetStatusRequest, function (err, response) {",
									"        console.log(response.json())",
									"        var jsonData = response.json()",
									"        var currentHubReconAccountBalance",
									"        response.json()",
									"        .filter( ledgerAccount => (ledgerAccount.currency === pm.environment.get('SIM1_CURRENCY') && ledgerAccount.ledgerAccountType === 'HUB_RECONCILIATION'))",
									"        .forEach(account => hubReconAccountBalanceAfterFundsIn = account.value)",
									"        // for(var i in jsonData) {",
									"        //     if(jsonData[i].ledgerAccountType === 'HUB_RECONCILIATION') {",
									"        //         hubReconAccountBalanceAfterFundsIn = jsonData[i].value",
									"        //     }",
									"        // }",
									"        var hubExpectedBalance = Number((pm.environment.get(\"hubReconAccountBalanceBeforeFundsIn\")+pm.environment.get('fundsInPrepareAmount')).toFixed(4));",
									"        console.log(hubExpectedBalance)",
									"        pm.test(\"Final Hub Reconciliation Account Balance should increase by FundsIn Amount\", function () {",
									"            pm.expect(hubReconAccountBalanceAfterFundsIn).to.eql(hubExpectedBalance);",
									"          });  ",
									"    });",
									"}, 2000)"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "FSPIOP-Source",
								"type": "text",
								"value": "{{hub_operator}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"transferId\": \"{{fundsInPrepareTransferId}}\",\n  \"externalReference\": \"string\",\n  \"action\": \"recordFundsIn\",\n  \"reason\": \"string\",\n  \"amount\": {\n    \"amount\": {{fundsInPrepareAmount}},\n    \"currency\": \"{{SIM1_CURRENCY}}\"\n  },\n  \"extensionList\": {\n    \"extension\": [\n      {\n        \"key\": \"string\",\n        \"value\": \"string\"\n      }\n    ]\n  }\n}"
						},
						"url": {
							"raw": "{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}/participants/{{SIM1_NAME}}/accounts/{{{{SIM1_NAME}}SettlementAccountId}}",
							"host": [
								"{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}"
							],
							"path": [
								"participants",
								"{{SIM1_NAME}}",
								"accounts",
								"{{{{SIM1_NAME}}SettlementAccountId}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Deposit Funds in Settlement Account - SIM2",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "3e30329f-0799-4e65-ab28-ee076516472f",
								"exec": [
									"var uuid = require('uuid');",
									"var generatedUUID = uuid.v4();",
									"pm.environment.set('fundsInPrepareTransferId', generatedUUID);",
									"pm.environment.set('fundsInPrepareAmount', 100000);",
									"",
									"",
									"const testfsp2GetStatusRequest = {",
									"  url: pm.environment.get(\"HOST_CENTRAL_LEDGER\")+pm.environment.get(\"BASE_CENTRAL_LEDGER_ADMIN\")+'/participants/' + pm.environment.get('SIM2_NAME') + '/accounts',",
									"  method: 'GET',",
									"  header: {",
									"      \"Authorization\":\"Bearer \"+pm.environment.get(\"HUB_OPERATOR_BEARER_TOKEN\"),",
									"      \"FSPIOP-Source\": pm.environment.get(\"hub_operator\"),",
									"      \"Content-Type\": \"application/json\"",
									"  }",
									"};",
									"pm.sendRequest(testfsp2GetStatusRequest, function (err, response) {",
									"    console.log(response.json())",
									"    var jsonData = response.json()",
									"    for(var i in jsonData) {",
									"        if(jsonData[i].ledgerAccountType === 'SETTLEMENT'  && jsonData[i].currency === pm.environment.get('SIM2_CURRENCY')) {",
									"            pm.environment.set(`${pm.environment.get('SIM2_NAME')}SettlementAccountId`,jsonData[i].id)",
									"            pm.environment.set(`${pm.environment.get('SIM2_NAME')}SettlementAccountBalanceBeforeFundsIn`,jsonData[i].value)",
									"        }",
									"    }",
									"});",
									"",
									"const hubGetStatusRequest = {",
									"  url: pm.environment.get(\"HOST_CENTRAL_LEDGER\")+pm.environment.get(\"BASE_CENTRAL_LEDGER_ADMIN\")+'/participants/Hub/accounts',",
									"  method: 'GET',",
									"  header: {",
									"      \"Authorization\":\"Bearer \"+pm.environment.get(\"HUB_OPERATOR_BEARER_TOKEN\"),",
									"      \"FSPIOP-Source\": pm.environment.get(\"hub_operator\"),",
									"      \"Content-Type\": \"application/json\"",
									"  }",
									"};",
									"pm.sendRequest(hubGetStatusRequest, function (err, response) {",
									"    console.log(response.json())",
									"    //var jsonData = response.json()",
									"    response.json()",
									"        .filter( ledgerAccount => (ledgerAccount.currency === pm.environment.get('SIM2_CURRENCY') && ledgerAccount.ledgerAccountType === 'HUB_RECONCILIATION'))",
									"        .forEach(account => pm.environment.set(\"hubReconAccountBalanceBeforeFundsIn\",account.value))",
									"    // for(var i in jsonData) {",
									"    //     if(jsonData[i].ledgerAccountType === 'HUB_RECONCILIATION') {",
									"    //         pm.environment.set(\"hubReconAccountBalanceBeforeFundsIn\",jsonData[i].value)",
									"    //     }",
									"    // }",
									"});",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "ac080971-6868-4957-993a-16fc299d8d44",
								"exec": [
									"pm.test(\"Status code is 202\", function () {",
									"    pm.response.to.have.status(202);",
									"});",
									"",
									"setTimeout(function () {",
									"    const testfsp2GetStatusRequest = {",
									"      url: pm.environment.get(\"HOST_CENTRAL_LEDGER\")+pm.environment.get(\"BASE_CENTRAL_LEDGER_ADMIN\")+'/participants/' + pm.environment.get('SIM2_NAME') + '/accounts',",
									"      method: 'GET',",
									"      header: {",
									"          \"Authorization\":\"Bearer \"+pm.environment.get(\"HUB_OPERATOR_BEARER_TOKEN\"),",
									"          \"FSPIOP-Source\": pm.environment.get(\"hub_operator\"),",
									"          \"Content-Type\": \"application/json\"",
									"      }",
									"    };",
									"    pm.sendRequest(testfsp2GetStatusRequest, function (err, response) {",
									"        console.log(response.json())",
									"        var jsonData = response.json()",
									"        var testfsp2SettlementAccountBalanceAfterFundsIn",
									"        for(var i in jsonData) {",
									"            if(jsonData[i].ledgerAccountType === 'SETTLEMENT'  && jsonData[i].currency === pm.environment.get('SIM2_CURRENCY')) {",
									"                testfsp2SettlementAccountBalanceAfterFundsIn = jsonData[i].value",
									"            }",
									"        }",
									"        var testfsp2ExpectedBalance = Number((pm.environment.get(`${pm.environment.get('SIM2_NAME')}SettlementAccountBalanceBeforeFundsIn`) - pm.environment.get('fundsInPrepareAmount')).toFixed(4));",
									"        pm.test(`Final ${pm.environment.get('SIM2_NAME')} Settlement Account Balance should be same as before FundsIn + fundsInPrepareAmount`, function () {",
									"            pm.expect(testfsp2SettlementAccountBalanceAfterFundsIn).to.eql(testfsp2ExpectedBalance);",
									"          });    ",
									"    ",
									"    });",
									"    ",
									"    const hubGetStatusRequest = {",
									"      url: pm.environment.get(\"HOST_CENTRAL_LEDGER\")+pm.environment.get(\"BASE_CENTRAL_LEDGER_ADMIN\")+'/participants/Hub/accounts',",
									"      method: 'GET',",
									"      header: {",
									"          \"Authorization\":\"Bearer \"+pm.environment.get(\"HUB_OPERATOR_BEARER_TOKEN\"),",
									"          \"FSPIOP-Source\": pm.environment.get(\"hub_operator\"),",
									"          \"Content-Type\": \"application/json\"",
									"      }",
									"    };",
									"    pm.sendRequest(hubGetStatusRequest, function (err, response) {",
									"        console.log(response.json())",
									"        var jsonData = response.json()",
									"        var currentHubReconAccountBalance",
									"        response.json()",
									"        .filter( ledgerAccount => (ledgerAccount.currency === pm.environment.get('SIM2_CURRENCY') && ledgerAccount.ledgerAccountType === 'HUB_RECONCILIATION'))",
									"        .forEach(account => hubReconAccountBalanceAfterFundsIn = account.value)",
									"        // for(var i in jsonData) {",
									"        //     if(jsonData[i].ledgerAccountType === 'HUB_RECONCILIATION') {",
									"        //         hubReconAccountBalanceAfterFundsIn = jsonData[i].value",
									"        //     }",
									"        // }",
									"        var hubExpectedBalance = Number((pm.environment.get(\"hubReconAccountBalanceBeforeFundsIn\")+pm.environment.get('fundsInPrepareAmount')).toFixed(4));",
									"        console.log(hubExpectedBalance)",
									"        pm.test(\"Final Hub Reconciliation Account Balance should increase by FundsIn Amount\", function () {",
									"            pm.expect(hubReconAccountBalanceAfterFundsIn).to.eql(hubExpectedBalance);",
									"          });  ",
									"    });",
									"}, 2000)"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "FSPIOP-Source",
								"type": "text",
								"value": "{{hub_operator}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"transferId\": \"{{fundsInPrepareTransferId}}\",\n  \"externalReference\": \"string\",\n  \"action\": \"recordFundsIn\",\n  \"reason\": \"string\",\n  \"amount\": {\n    \"amount\": {{fundsInPrepareAmount}},\n    \"currency\": \"{{SIM2_CURRENCY}}\"\n  },\n  \"extensionList\": {\n    \"extension\": [\n      {\n        \"key\": \"string\",\n        \"value\": \"string\"\n      }\n    ]\n  }\n}"
						},
						"url": {
							"raw": "{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}/participants/{{SIM2_NAME}}/accounts/{{{{SIM2_NAME}}SettlementAccountId}}",
							"host": [
								"{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}"
							],
							"path": [
								"participants",
								"{{SIM2_NAME}}",
								"accounts",
								"{{{{SIM2_NAME}}SettlementAccountId}}"
							]
						}
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "feature-tests",
			"item": [
				{
					"name": "p2p_money_transfer",
					"item": [
						{
							"name": "p2p_happy_path_RECEIVE_quote",
							"item": [
								{
									"name": "Download JWS Signature Generation Package",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "c9d23210-69e6-4dea-a239-b025442d043c",
												"exec": [
													"",
													"pm.environment.set(\"jrsassign\", pm.response.text());",
													"",
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "http://kjur.github.io/jsrsasign/jsrsasign-latest-all-min.js",
											"protocol": "http",
											"host": [
												"kjur",
												"github",
												"io"
											],
											"path": [
												"jsrsasign",
												"jsrsasign-latest-all-min.js"
											]
										}
									},
									"response": []
								},
								{
									"name": "Add SIMPAYEE_MSISDN to SIMPAYEE",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "264f3d23-f2b0-458f-b443-ec308f464dd5",
												"exec": [
													"pm.environment.set('fullName', 'PayeeFirst PayeeLast');",
													"pm.environment.set('firstName', 'PayeeFirst');",
													"pm.environment.set('middleName', 'PayeeMiddle');",
													"pm.environment.set('lastName', 'PayeeLast');",
													"pm.environment.set('dob', '2010-10-10');"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"id": "d379bae9-8e6d-476c-8ccf-058403db3a91",
												"exec": [
													"pm.test(\"Successful POST request\", function () {",
													"    pm.expect(pm.response.code).to.be.oneOf([204, 500]);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "noauth"
										},
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n    \"displayName\": \"{{fullName}}\",\n    \"firstName\": \"{{firstName}}\",\n    \"middleName\": \"{{middleName}}\",\n    \"lastName\": \"{{lastName}}\",\n    \"dateOfBirth\": \"{{dob}}\",\n    \"idType\": \"MSISDN\",\n    \"idValue\": \"{{SIMPAYEE_MSISDN}}\"\n}"
										},
										"url": {
											"raw": "{{SIMPAYEE_BACKEND_TESTAPI_URL}}/repository/parties",
											"host": [
												"{{SIMPAYEE_BACKEND_TESTAPI_URL}}"
											],
											"path": [
												"repository",
												"parties"
											]
										},
										"description": "Create a party in payeefsp. So that GET /parties can be successful."
									},
									"response": []
								},
								{
									"name": "Get Party - MSISDN",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "569cc526-6167-4a2b-951e-f8b7332224b6",
												"exec": [
													"pm.test(\"Status code is 202\", function () {",
													"    pm.response.to.have.status(202);",
													"});",
													"",
													"//Check data on payee side",
													"setTimeout(function () {",
													"  pm.sendRequest(pm.environment.get(\"SIMPAYEE_SDK_TESTAPI_URL\")+\"/requests/\"+pm.environment.get(\"SIMPAYEE_MSISDN\"), function (err, response) {",
													"       ",
													"       if(response.responseSize !== 0) { ",
													"       //Checking headers",
													"        var headers = response.json().headers;",
													"        pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-source is ${pm.environment.get('SIMPAYER_NAME')}`, function () {",
													"            pm.expect(headers['fspiop-source']).to.eql(pm.environment.get('SIMPAYER_NAME'));",
													"        });",
													"        ",
													"        pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-destination is ${pm.environment.get('SIMPAYEE_NAME')}`, function () {",
													"            pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('SIMPAYEE_NAME'));",
													"        });",
													"        ",
													"        pm.test(`${pm.environment.get('SIMPAYEE_NAME')} content-type should be application/vnd.interoperability.parties+json;version=1.0`, function () {",
													"            pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.parties+json;version=1.0');",
													"        });",
													"        ",
													"        pm.test(`${pm.environment.get('SIMPAYEE_NAME')} accept should be application/vnd.interoperability.parties+json;version=1.0`, function () {",
													"            pm.expect(headers['accept']).to.match(/application\\/vnd\\.interoperability\\.parties\\+json;version=1(\\.\\d)?/);",
													"        });",
													"        ",
													"        pm.test.skip(`${pm.environment.get('SIMPAYEE_NAME')} FSPIOP-URI to be /parties`, function () {",
													"            pm.expect(headers['fspiop-uri']).to.eql('/parties');",
													"        });",
													"        ",
													"        pm.test.skip(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-http-method is GET`, function () {",
													"            pm.expect(headers['fspiop-http-method']).to.eql('GET');",
													"        });",
													"        ",
													"       } else {",
													"           pm.test(`Parties FAILED - ${pm.environment.get('SIMPAYEE_NAME')}`, function () {",
													"            throw new Error('Did not receive response');",
													"           });",
													"           ",
													"       }",
													"      ",
													"    });",
													"}, 2000)",
													"",
													"//Check data on payer side",
													"setTimeout(function () {",
													"  pm.sendRequest(pm.environment.get(\"SIMPAYER_SDK_TESTAPI_URL\")+\"/callbacks/\"+pm.environment.get(\"SIMPAYEE_MSISDN\"), function (err, response) {",
													"       ",
													"       if(response.responseSize !== 0) { ",
													"       //Checking headers",
													"        var headers = response.json().headers;",
													"        pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-source is ${pm.environment.get('SIMPAYEE_NAME')}`, function () {",
													"            pm.expect(headers['fspiop-source']).to.eql(pm.environment.get('SIMPAYEE_NAME'));",
													"        });",
													"        ",
													"        pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-destination is ${pm.environment.get('SIMPAYER_NAME')}`, function () {",
													"            pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('SIMPAYER_NAME'));",
													"        });",
													"        ",
													"        pm.test(`${pm.environment.get('SIMPAYER_NAME')} content-type should be application/vnd.interoperability.parties+json;version=1.0`, function () {",
													"            pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.parties+json;version=1.0');",
													"        });",
													"        ",
													"        pm.test(`${pm.environment.get('SIMPAYER_NAME')} accept is empty`, function () {",
													"            pm.expect(headers['accept']).to.eql(undefined);",
													"        });",
													"        ",
													"        ",
													"        ",
													"        //Validate protected header inside Signature",
													"        var {signature,protectedHeader} = JSON.parse(headers['fspiop-signature'])",
													"        var decodedProtectedHeaders = JSON.parse(atob(protectedHeader))",
													"        console.log('decodedProtectedHeaders:',decodedProtectedHeaders)",
													"        ",
													"        // pm.test(\"FSPIOP-Signature signature is returned\", function () {",
													"        //     pm.expect(signature).to.eql(pm.environment.get(\"payeefsp-signature\"));",
													"        // });",
													"        ",
													"        pm.test(\"FSPIOP-Signature Protected Header alg to be RS256\", function () {",
													"            pm.expect(decodedProtectedHeaders['alg']).to.eql('RS256');",
													"        });",
													"        pm.test(\"FSPIOP-Signature Protected Header FSPIOP-URI to be /parties/MSISDN/\"+pm.environment.get(\"SIMPAYEE_MSISDN\"), function () {",
													"            pm.expect(decodedProtectedHeaders['FSPIOP-URI']).to.eql('/parties/MSISDN/'+pm.environment.get(\"SIMPAYEE_MSISDN\"));",
													"        });",
													"        ",
													"",
													"        pm.test(\"FSPIOP-Signature Protected Header FSPIOP-HTTP-Method to be PUT\", function () {",
													"            pm.expect(decodedProtectedHeaders['FSPIOP-HTTP-Method']).to.eql('PUT');",
													"        });",
													"        pm.test(\"FSPIOP-Signature Protected Header FSPIOP-Source to be mojaloop-sdk\", function () {",
													"            pm.expect(decodedProtectedHeaders['FSPIOP-Source']).to.eql(pm.environment.get('SIMPAYEE_NAME'));",
													"        });",
													"        pm.test(`FSPIOP-Signature Protected Header FSPIOP-Destination to be ${pm.environment.get('SIMPAYER_NAME')}`, function () {",
													"            pm.expect(decodedProtectedHeaders['FSPIOP-Destination']).to.eql(pm.environment.get('SIMPAYER_NAME'));",
													"        });",
													"        pm.test(\"FSPIOP-Signature Protected Header Date is present\", function () {",
													"            pm.expect(decodedProtectedHeaders['Date']).to.not.eql(undefined);",
													"        });",
													"       ",
													"        //pm.test(`${pm.environment.get('SIMPAYER_NAME')} FSPIOP-URI to be /parties/MSISDN/${pm.environment.get(\"pathfinderMSISDN\")}`, function () {",
													"        //    pm.expect(headers['fspiop-uri']).to.eql('/parties/MSISDN/'+pm.environment.get(\"pathfinderMSISDN\"));",
													"        //});",
													"        ",
													"        pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-http-method is PUT`, function () {",
													"            pm.expect(headers['fspiop-http-method']).to.eql('PUT');",
													"        });",
													"        ",
													"        //Checking data",
													"        var jsonData = response.json().data;",
													"       pm.test(\"Expected receiver first name is: \"+pm.variables.get(\"expectedFirstName\"), function () {",
													"           pm.expect(jsonData.party.personalInfo.complexName.firstName).to.eql(pm.variables.get(\"expectedFirstName\"));",
													"        });",
													"        pm.test(\"Expected receiver last name is: \"+pm.variables.get(\"expectedLastName\"), function () {",
													"          pm.expect(jsonData.party.personalInfo.complexName.lastName).to.eql(pm.variables.get(\"expectedLastName\"));",
													"        });",
													"        pm.test(\"Expected receiver DOB: \"+pm.variables.get(\"expectedDOB\"), function () {",
													"          pm.expect(jsonData.party.personalInfo.dateOfBirth).to.eql(pm.variables.get(\"expectedDOB\"));",
													"        });  ",
													"        ",
													"       } else {",
													"           pm.test(`Parties FAILED - ${pm.environment.get('SIMPAYER_NAME')}`, function () {",
													"            throw new Error('Did not receive response');",
													"           });",
													"           ",
													"       }",
													"      ",
													"    });",
													"}, 2000)",
													"",
													"",
													"",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "prerequest",
											"script": {
												"id": "49876ea9-7061-4591-a45b-642dd8ac9912",
												"exec": [
													"pm.variables.set('expectedFullName', 'PayeeFirst PayeeLast');",
													"pm.variables.set('expectedFirstName', 'PayeeFirst');",
													"pm.variables.set('expectedLastName', 'PayeeLast');",
													"pm.variables.set('expectedDOB', '2010-10-10');",
													"",
													"",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{SIMPAYER_BEARER_TOKEN}}",
													"type": "string"
												}
											]
										},
										"method": "GET",
										"header": [
											{
												"key": "Accept",
												"value": "application/vnd.interoperability.parties+json;version=1"
											},
											{
												"key": "Content-Type",
												"value": "application/vnd.interoperability.parties+json;version=1.0"
											},
											{
												"key": "FSPIOP-Source",
												"value": "{{SIMPAYER_NAME}}"
											},
											{
												"key": "Date",
												"value": "{{dateHeader}}"
											},
											{
												"key": "",
												"value": "",
												"type": "text",
												"disabled": true
											}
										],
										"url": {
											"raw": "{{HOST_ACCOUNT_LOOKUP_SERVICE}}/parties/MSISDN/{{SIMPAYEE_MSISDN}}",
											"host": [
												"{{HOST_ACCOUNT_LOOKUP_SERVICE}}"
											],
											"path": [
												"parties",
												"MSISDN",
												"{{SIMPAYEE_MSISDN}}"
											]
										},
										"description": "Author: Sridevi Miriyala\n\nThe payer is requesting the information of the payee. The response shd include payee's firstname, lastname, DOB."
									},
									"response": []
								},
								{
									"name": "Get SIMPAYER position before TheTransfer",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "42d14077-0157-480f-b986-540c8e90e711",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"pm.environment.set(\"variable_key\", \"variable_value\");",
													"  pm.response.to.have.status(200);",
													"});",
													"",
													"var jsonData = pm.response.json();",
													"",
													"",
													"for (var i in jsonData) {",
													"  if (jsonData[i].currency === pm.environment.get('SIMPAYER_CURRENCY')) {",
													"    pm.test(\"Atleast one account position should be returned\", function () {",
													"      pm.environment.set(`${pm.environment.get('SIMPAYER_NAME')}PositionBeforeTransferhp`, jsonData[i].value);",
													"      pm.expect(jsonData).to.be.not.empty;",
													"    });",
													"  }",
													"",
													"}",
													"",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
													"type": "string"
												}
											]
										},
										"method": "GET",
										"header": [
											{
												"key": "FSPIOP-Source",
												"type": "text",
												"value": "hub_operator"
											}
										],
										"url": {
											"raw": "{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}/participants/{{SIMPAYER_NAME}}/positions",
											"host": [
												"{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}"
											],
											"path": [
												"participants",
												"{{SIMPAYER_NAME}}",
												"positions"
											]
										},
										"description": "We will capture the initial position for Payerfsp before the transfer and will save this value in a variable  payerfspPositionBeforeTransferhp"
									},
									"response": []
								},
								{
									"name": "Get SIMPAYEE position before TheTransfer",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "a98b3cd2-180c-4470-8db4-cbbb45c22454",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"  pm.response.to.have.status(200);",
													"});",
													"",
													"var jsonData = pm.response.json();",
													"",
													"",
													"for (var i in jsonData) {",
													"  if (jsonData[i].currency === pm.environment.get('SIMPAYEE_CURRENCY')) {",
													"    pm.test(\"Atleast one account position should be returned\", function () {",
													"      pm.environment.set(`${pm.environment.get('SIMPAYEE_NAME')}PositionBeforeTransferhp`, jsonData[i].value);",
													"      pm.expect(jsonData).to.be.not.empty;",
													"    });",
													"  }",
													"",
													"}",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
													"type": "string"
												}
											]
										},
										"method": "GET",
										"header": [
											{
												"key": "FSPIOP-Source",
												"type": "text",
												"value": "hub_operator"
											}
										],
										"url": {
											"raw": "{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}/participants/{{SIMPAYEE_NAME}}/positions",
											"host": [
												"{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}"
											],
											"path": [
												"participants",
												"{{SIMPAYEE_NAME}}",
												"positions"
											]
										},
										"description": "We will capture the initial position for Payeefsp before the transfer and will save this value in a variable  payeefspPositionBeforeTransferhp"
									},
									"response": []
								},
								{
									"name": "Send Quote - RECEIVE",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "1cafa3db-0fdd-49fc-8a2a-720155e24106",
												"exec": [
													"var navigator = {}; ",
													"var window = {}; ",
													"eval(pm.environment.get('jrsassign'));",
													"",
													"",
													"var uuid = require('uuid');",
													"var generatedUUID = uuid.v4();",
													"pm.environment.set('quoteId', generatedUUID);",
													"generatedUUID = uuid.v4();",
													"pm.environment.set('transactionId', generatedUUID);",
													"",
													"pm.variables.set('quoteDate', (new Date()).toUTCString());",
													"pm.variables.set('payerName', 'PayerFirst PayerLast');",
													"",
													"pm.variables.set('expectedPayeeFirstName', 'GoldenFirst');",
													"pm.variables.set('expectedPayeeLastName', 'GoldenLast');",
													"pm.variables.set('expectedPayeeDOB', '2010-10-10');",
													"",
													"var oHeader = {alg: \"RS256\", \"FSPIOP-Source\": pm.environment.get('SIMPAYER_NAME'),\"FSPIOP-Destination\": pm.environment.get('SIMPAYEE_NAME'), \"FSPIOP-URI\":\"/quotes\", \"FSPIOP-HTTP-Method\":\"POST\", \"Date\":pm.variables.get('quoteDate')};",
													"var sHeader = JSON.stringify(oHeader);",
													"console.log(`sHeader: ${sHeader}`)",
													"",
													"var objPayload = {",
													"  \"quoteId\": pm.environment.get('quoteId'),",
													"  \"transactionId\": pm.environment.get('transactionId'),",
													"  \"payer\": {",
													"    \"partyIdInfo\": {",
													"      \"partyIdType\": \"MSISDN\",",
													"      \"partyIdentifier\": pm.environment.get('SIMPAYER_MSISDN'),",
													"      \"fspId\": pm.environment.get('SIMPAYER_NAME')",
													"    },",
													"    \"personalInfo\": {",
													"      \"complexName\": {",
													"        \"firstName\": \"Mats\",",
													"        \"lastName\": \"Hagman\"",
													"      },",
													"      \"dateOfBirth\": \"1983-10-25\"",
													"    }",
													"  },",
													"  \"payee\": {",
													"    \"partyIdInfo\": {",
													"      \"partyIdType\": \"MSISDN\",",
													"      \"partyIdentifier\": pm.environment.get('SIMPAYEE_MSISDN'),",
													"      \"fspId\": pm.environment.get('SIMPAYEE_NAME')",
													"    }",
													"  },",
													"  \"amountType\": \"RECEIVE\",",
													"  \"amount\": {",
													"    \"amount\": \"10\",",
													"    \"currency\": pm.environment.get('SIMPAYEE_CURRENCY')",
													"  },",
													"  \"transactionType\": {",
													"    \"scenario\": \"TRANSFER\",",
													"    \"initiator\": \"PAYER\",",
													"    \"initiatorType\": \"CONSUMER\"",
													"  },",
													"  \"note\": \"hej\"",
													"}",
													"",
													"var sPayload = JSON.stringify(objPayload)",
													"console.log(`sPayload: ${sPayload}`)",
													"pm.variables.set(\"quoteRequest\", sPayload);",
													"var token = KJUR.jws.JWS.sign(\"RS256\", sHeader, sPayload, pm.environment.get('SIMPAYER_JWS_KEY'));",
													"console.log(`token: ${token}`)",
													"",
													"// var encodedHeaders = btoa(sHeader)",
													"",
													"// var ofspiopSignature = {signature: vSignature, protectedHeader: encodedHeaders}",
													"// var token = JSON.stringify(ofspiopSignature)",
													"",
													"const [ protectedHeaderBase64, , signature ] = token.split('.');",
													"",
													"const signatureObject = {",
													"    signature: signature.replace('\"', ''),",
													"    protectedHeader: protectedHeaderBase64.replace('\"', '')",
													"};",
													"",
													"console.log(JSON.stringify(signatureObject))",
													"",
													"pm.variables.set('fspiopSignature',JSON.stringify(signatureObject))",
													"",
													"",
													"",
													"",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"id": "3cde8590-b6c9-45c6-a000-2208acccd254",
												"exec": [
													"pm.test(\"Status code is 202\", function () {",
													"    pm.response.to.have.status(202);",
													"});",
													"",
													"setTimeout(function () {",
													"  pm.sendRequest(pm.environment.get(\"SIMPAYEE_SDK_TESTAPI_URL\")+\"/requests/\"+pm.variables.get(\"quoteId\"), function (err, response) {",
													"          if(response.responseSize !== 0) {",
													"              ",
													"              //Check the Headers",
													"              var headers = response.json().headers;",
													"              ",
													"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-source is ${pm.environment.get('SIMPAYER_NAME')}`, function () {",
													"                    pm.expect(headers['fspiop-source']).to.eql(`${pm.environment.get('SIMPAYER_NAME')}`);",
													"                });",
													"                ",
													"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-destination is ${pm.environment.get('SIMPAYEE_NAME')}`, function () {",
													"                    pm.expect(headers['fspiop-destination']).to.eql(`${pm.environment.get('SIMPAYEE_NAME')}`);",
													"                });",
													"                ",
													"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-signature is same as sent in the request`, function () {",
													"                    pm.expect(headers['fspiop-signature']).to.eql(pm.variables.get(\"fspiopSignature\"));",
													"                });",
													"                ",
													"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} accept is same as sent in the request`, function () {",
													"                    pm.expect(headers['accept']).to.match(/application\\/vnd\\.interoperability\\.quotes\\+json;version=1(\\.\\d)?/);",
													"                });",
													"                ",
													"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} content-typeis same as sent in the request`, function () {",
													"                    pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.quotes+json;version=1.0');",
													"                });",
													"                ",
													"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-uri is /quotes`, function () {",
													"                    pm.expect(headers['fspiop-uri']).to.eql('/quotes');",
													"                });",
													"                ",
													"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-http-method is POST`, function () {",
													"                    pm.expect(headers['fspiop-http-method']).to.eql('POST');",
													"                });",
													"                ",
													"          } else {",
													"              pm.test(\"Quote FAILED\", function () {",
													"                throw new Error('Did not receive request on payee side');",
													"              });",
													"              // postman.setNextRequest(null)",
													"          }",
													"   });",
													"}, pm.environment.get(\"SET_TIMEOUT_QUOTES\"))",
													"",
													"setTimeout(function () {",
													"  pm.sendRequest(pm.environment.get(\"SIMPAYER_SDK_TESTAPI_URL\")+\"/callbacks/\"+pm.environment.get(\"quoteId\"), function (err, response) {",
													"      if(response.responseSize !== 0) {",
													"          //Checking headers",
													"            var headers = response.json().headers;",
													"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-source is ${pm.environment.get('SIMPAYEE_NAME')}`, function () {",
													"                pm.expect(headers['fspiop-source']).to.eql(`${pm.environment.get('SIMPAYEE_NAME')}`);",
													"            });",
													"            ",
													"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-destination is ${pm.environment.get('SIMPAYER_NAME')}`, function () {",
													"                pm.expect(headers['fspiop-destination']).to.eql(`${pm.environment.get('SIMPAYER_NAME')}`);",
													"            });",
													"            ",
													"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} content-type should be application/vnd.interoperability.quotes+json;version=1.0`, function () {",
													"                pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.quotes+json;version=1.0');",
													"            });",
													"            ",
													"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} accept is empty`, function () {",
													"                pm.expect(headers['accept']).to.eql(undefined);",
													"            });",
													"            ",
													"            ",
													"            ",
													"            var {signature,protectedHeader} = JSON.parse(headers['fspiop-signature'])",
													"            // var strData = JSON.stringify(response.json().data)",
													"            // const token = `${protectedHeader}.${btoa(strData)}.${signature}`",
													"            // console.log(`token: ${token}`)",
													"            // var isValid = KJUR.jws.JWS.verify(token, pm.environment.get('goldenpayeefspJWSPubKey'), {alg: ['RS256']})",
													"            // console.log(`isValid: ${isValid}`)",
													"            // pm.test(\"Check if the response is JWS valid\", function () {",
													"            //     pm.expect(isValid).to.eql(true);",
													"            // });",
													"            ",
													"            //Validate protected header inside Signature",
													"            var decodedProtectedHeaders = JSON.parse(atob(protectedHeader))",
													"            console.log('decodedProtectedHeaders:',decodedProtectedHeaders)",
													"            ",
													"            pm.test(\"FSPIOP-Signature Protected Header alg to be RS256\", function () {",
													"                pm.expect(decodedProtectedHeaders['alg']).to.eql('RS256');",
													"            });",
													"            pm.test(\"FSPIOP-Signature Protected Header FSPIOP-URI to be /quotes/\"+pm.environment.get(\"quoteId\"), function () {",
													"                pm.expect(decodedProtectedHeaders['FSPIOP-URI']).to.eql('/quotes/'+pm.environment.get(\"quoteId\"));",
													"            });",
													"            ",
													"",
													"            pm.test(\"FSPIOP-Signature Protected Header FSPIOP-HTTP-Method to be PUT\", function () {",
													"                pm.expect(decodedProtectedHeaders['FSPIOP-HTTP-Method']).to.eql('PUT');",
													"            });",
													"            pm.test(`FSPIOP-Signature Protected Header FSPIOP-Source to be ${pm.environment.get('SIMPAYEE_NAME')}`, function () {",
													"                pm.expect(decodedProtectedHeaders['FSPIOP-Source']).to.eql(`${pm.environment.get('SIMPAYEE_NAME')}`);",
													"            });",
													"            pm.test(`FSPIOP-Signature Protected Header FSPIOP-Destination to be ${pm.environment.get('SIMPAYER_NAME')}`, function () {",
													"                pm.expect(decodedProtectedHeaders['FSPIOP-Destination']).to.eql(`${pm.environment.get('SIMPAYER_NAME')}`);",
													"            });",
													"            pm.test(\"FSPIOP-Signature Protected Header Date is present\", function () {",
													"                pm.expect(decodedProtectedHeaders['Date']).to.eql(headers['date']);",
													"            });",
													"           ",
													"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} FSPIOP-URI to be /quotes/${pm.environment.get(\"quoteId\")}`, function () {",
													"                pm.expect(headers['fspiop-uri']).to.eql('/quotes/'+pm.environment.get(\"quoteId\"));",
													"            });",
													"            ",
													"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-http-method is PUT`, function () {",
													"                pm.expect(headers['fspiop-http-method']).to.eql('PUT');",
													"            });",
													"            ",
													"            var jsonData = response.json().data;",
													"            ",
													"            pm.test(\"Response quoteId is  null\", function () {",
													"                pm.expect(jsonData.quoteId).to.eql(undefined);",
													"                ",
													"            });",
													"          ",
													"            pm.test(\"Response ilpPacket is not null\", function () {",
													"                pm.expect(jsonData.ilpPacket).not.equal(undefined);",
													"                pm.environment.set(\"ilpPacket\", jsonData.ilpPacket);",
													"            });",
													"       ",
													"           pm.test(\"Response condition is not null\", function () {",
													"               pm.expect(jsonData.condition).not.equal(undefined);",
													"               pm.environment.set(\"condition\", jsonData.condition);",
													"           });",
													"      } else {",
													"          pm.test(\"Quote FAILED\", function () {",
													"            throw new Error('Did not receive response on Payer side');",
													"           });",
													"           // postman.setNextRequest(null);",
													"      }",
													"       ",
													"   });",
													"}, pm.environment.get(\"SET_TIMEOUT_QUOTES\"))",
													"",
													"",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{SIMPAYER_BEARER_TOKEN}}",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Accept",
												"value": "application/vnd.interoperability.quotes+json;version=1.0"
											},
											{
												"key": "Content-Type",
												"value": "application/vnd.interoperability.quotes+json;version=1.0"
											},
											{
												"key": "Date",
												"value": "{{quoteDate}}"
											},
											{
												"key": "FSPIOP-Source",
												"value": "{{SIMPAYER_NAME}}",
												"type": "text"
											},
											{
												"key": "FSPIOP-Destination",
												"value": "{{SIMPAYEE_NAME}}"
											},
											{
												"key": "FSPIOP-Signature",
												"type": "text",
												"value": "{{fspiopSignature}}"
											},
											{
												"key": "FSPIOP-HTTP-Method",
												"type": "text",
												"value": "POST"
											},
											{
												"key": "FSPIOP-URI",
												"type": "text",
												"value": "/quotes"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{{quoteRequest}}"
										},
										"url": {
											"raw": "{{HOST_QUOTING_SERVICE}}/quotes",
											"host": [
												"{{HOST_QUOTING_SERVICE}}"
											],
											"path": [
												"quotes"
											]
										}
									},
									"response": []
								},
								{
									"name": "Send Transfer - RECEIVE",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "b2afa024-c44f-4a6f-b74e-f1c682fa413e",
												"exec": [
													"pm.test(\"Status code is 202\", function () {",
													"    pm.response.to.have.status(202);",
													"});",
													"",
													"// //Check the request that Switch forwards to payeefsp",
													"setTimeout(function () {",
													"  pm.sendRequest(pm.environment.get(\"SIMPAYEE_SDK_TESTAPI_URL\")+\"/requests/\"+pm.environment.get(\"transfer_ID\"), function (err, response) {",
													"          if(response.responseSize !== 0) {",
													"              ",
													"              //Check the Headers",
													"              var headers = response.json().headers;",
													"              ",
													"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-source is ${pm.environment.get('SIMPAYER_NAME')}`, function () {",
													"                    pm.expect(headers['fspiop-source']).to.eql(`${pm.environment.get('SIMPAYER_NAME')}`);",
													"                });",
													"                ",
													"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-destination is ${pm.environment.get('SIMPAYEE_NAME')}`, function () {",
													"                    pm.expect(headers['fspiop-destination']).to.eql(`${pm.environment.get('SIMPAYEE_NAME')}`);",
													"                });",
													"                ",
													"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} content-typeis same as sent in the request`, function () {",
													"                    pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.transfers+json;version=1.0');",
													"                });",
													"                ",
													"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} accept is same as sent in the request`, function () {",
													"                    pm.expect(headers['accept']).to.match(/application\\/vnd\\.interoperability\\.transfers\\+json;version=1(\\.\\d)?/);",
													"                });",
													"                ",
													"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-signature is same as sent in the request`, function () {",
													"                    pm.expect(headers['fspiop-signature']).to.eql(pm.variables.get(\"fspiopSignature\"));",
													"                });",
													"                ",
													"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-http-method is POST`, function () {",
													"                    pm.expect(headers['fspiop-http-method']).to.eql('POST');",
													"                });",
													"                ",
													"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-uri is /transfers`, function () {",
													"                    pm.expect(headers['fspiop-uri']).to.eql('/transfers');",
													"                });",
													"                ",
													"                ",
													"                //Check the data",
													"                var jsonData = response.json().data;",
													"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} data should have the same transferId as request`, function () {",
													"                  pm.expect(jsonData.transferId).to.eql(pm.environment.get(\"transfer_ID\"));",
													"                });",
													"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} data should have the same payerfspId as request`, function () {",
													"                  pm.expect(jsonData.payerFsp).to.eql(`${pm.environment.get('SIMPAYER_NAME')}`);",
													"                });",
													"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} data should have the same payeefspId as request`, function () {",
													"                  pm.expect(`${pm.environment.get('SIMPAYEE_NAME')}`);",
													"                });",
													"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} data should have the same amount as request`, function () {",
													"                  pm.expect(jsonData.amount.amount).to.eql('10');",
													"                });",
													"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} data should have the same currency as request`, function () {",
													"                  pm.expect(jsonData.amount.currency).to.eql(pm.environment.get('SIMPAYEE_CURRENCY'));",
													"                });",
													"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} data should have the same expiration as request`, function () {",
													"                  pm.expect(jsonData.expiration).to.eql(pm.environment.get(\"transferExpiration\"));",
													"                });",
													"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} data should have the same ilpPacket as request`, function () {",
													"                  pm.expect(jsonData.ilpPacket).to.eql(pm.environment.get(\"ilpPacket\"));",
													"                });",
													"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} data should have the same condition as request`, function () {",
													"                  pm.expect(jsonData.condition).to.eql(pm.environment.get(\"condition\"));",
													"                });",
													"                ",
													"          } else {",
													"              pm.test(\"Transfer FAILED\", function () {",
													"                throw new Error('Did not receive response on payee side');",
													"              });",
													"              // postman.setNextRequest(null)",
													"          }",
													"  });",
													"}, pm.environment.get(\"SET_TIMEOUT_TRANSFERS\"))",
													"",
													"//Check the callback response that Switch forwards to payerfsp",
													"setTimeout(function () {",
													"  pm.sendRequest(pm.environment.get(\"SIMPAYER_SDK_TESTAPI_URL\")+\"/callbacks/\"+pm.environment.get(\"transfer_ID\"), function (err, response) {",
													"          if(response.responseSize !== 0) {",
													"            //Checking headers",
													"            var headers = response.json().headers;",
													"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-source is ${pm.environment.get('SIMPAYEE_NAME')}`, function () {",
													"                pm.expect(headers['fspiop-source']).to.eql(`${pm.environment.get('SIMPAYEE_NAME')}`);",
													"            });",
													"            ",
													"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-destination is ${pm.environment.get('SIMPAYER_NAME')}`, function () {",
													"                pm.expect(headers['fspiop-destination']).to.eql(`${pm.environment.get('SIMPAYER_NAME')}`);",
													"            });",
													"            ",
													"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} content-type should be application/vnd.interoperability.transfers+json;version=1.0`, function () {",
													"                pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.transfers+json;version=1.0');",
													"            });",
													"            ",
													"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} accept is empty`, function () {",
													"                pm.expect(headers['accept']).to.eql(undefined);",
													"            });",
													"            ",
													"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-signature is not empty`, function () {",
													"                    pm.expect(headers['fspiop-signature']).not.eql(undefined);",
													"                });",
													"            ",
													"            ",
													"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-uri includes /transfers/ ${pm.environment.get(\"transfer_ID\")}`, function () {",
													"                pm.expect(headers['fspiop-uri']).to.eql('/transfers/'+ pm.environment.get(\"transfer_ID\"));",
													"            });",
													"            ",
													"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-http-method is PUT`, function () {",
													"                pm.expect(headers['fspiop-http-method']).to.eql('PUT');",
													"            });",
													"            ",
													"            var jsonData = response.json().data;",
													"            pm.test(\"Response data does not have transferId\", function () {",
													"               pm.expect(jsonData.transferId).to.eql(undefined);",
													"            });",
													"            pm.test(\"Response status is COMMITTED\", function () {",
													"                pm.expect(jsonData.transferState).to.eql('COMMITTED');",
													"            });",
													"          } else {",
													"              pm.test(\"Transfer FAILED\", function () {",
													"                throw new Error('Did not receive response on payer side');",
													"              });",
													"              // postman.setNextRequest(null)",
													"          }",
													"   });",
													"}, pm.environment.get(\"SET_TIMEOUT_TRANSFERS\"))",
													"",
													"",
													"setTimeout(function () {",
													"  pm.sendRequest(pm.environment.get(\"SIMPAYEE_SDK_TESTAPI_URL\")+\"/callbacks/\"+pm.environment.get(\"transfer_ID\"), function (err, response) {",
													"       pm.test(`${pm.environment.get('SIMPAYER_NAME')} does not receive additional final notification`, function () {",
													"            pm.expect(response.text()).to.eql('');",
													"        });",
													"       ",
													"      ",
													"    });",
													"}, pm.environment.get(\"SET_TIMEOUT_TRANSFERS\"))",
													"",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "prerequest",
											"script": {
												"id": "85cfb880-0219-41e1-940d-17715230fc1a",
												"exec": [
													"var navigator = {}; //fake a navigator object for the lib",
													"var window = {}; //fake a window object for the lib",
													"eval(pm.environment.get('jrsassign'));",
													"",
													"var uuid = require('uuid');",
													"var generatedUUID = uuid.v4();",
													"pm.environment.set('transfer_ID', pm.environment.get('transactionId'));",
													"",
													"",
													"pm.variables.set('transferDate', (new Date()).toUTCString());",
													"",
													"pm.environment.set(\"transferExpiration\",new Date(new Date().getTime() + 60000))",
													"",
													"var oHeader = {alg: \"RS256\", \"FSPIOP-Source\": pm.environment.get('SIMPAYER_NAME'),\"FSPIOP-Destination\": pm.environment.get('SIMPAYEE_NAME'), \"FSPIOP-URI\":\"/transfers\", \"FSPIOP-HTTP-Method\":\"POST\", \"Date\":pm.variables.get('transferDate')};",
													"var sHeader = JSON.stringify(oHeader);",
													"console.log(`sHeader: ${sHeader}`)",
													"",
													"var objPayload = {",
													"  \"transferId\": pm.environment.get('transfer_ID'),",
													"  \"payerFsp\": pm.environment.get('SIMPAYER_NAME'),",
													"  \"payeeFsp\": pm.environment.get('SIMPAYEE_NAME'),",
													"  \"amount\": {",
													"    \"amount\": \"10\",",
													"    \"currency\": pm.environment.get('SIMPAYEE_CURRENCY')",
													"  },",
													"  \"expiration\": pm.environment.get('transferExpiration'),",
													"  \"ilpPacket\": pm.environment.get('ilpPacket'),",
													"  \"condition\": pm.environment.get('condition')",
													"}",
													"var sPayload = JSON.stringify(objPayload)",
													"console.log(`sPayload: ${sPayload}`)",
													"pm.variables.set(\"transferRequest\", sPayload);",
													"var token = KJUR.jws.JWS.sign(\"RS256\", sHeader, sPayload, pm.environment.get('SIMPAYER_JWS_KEY'));",
													"//console.log(`token: ${token}`)",
													"",
													"// var encodedHeaders = btoa(sHeader)",
													"",
													"// var ofspiopSignature = {signature: vSignature, protectedHeader: encodedHeaders}",
													"// var token = JSON.stringify(ofspiopSignature)",
													"",
													"const [ protectedHeaderBase64, , signature ] = token.split('.');",
													"",
													"const signatureObject = {",
													"    signature: signature.replace('\"', ''),",
													"    protectedHeader: protectedHeaderBase64.replace('\"', '')",
													"};",
													"",
													"console.log(JSON.stringify(signatureObject))",
													"",
													"pm.variables.set('fspiopSignature',JSON.stringify(signatureObject))"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{SIMPAYER_BEARER_TOKEN}}",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Accept",
												"value": "application/vnd.interoperability.transfers+json;version=1.0"
											},
											{
												"key": "Content-Type",
												"value": "application/vnd.interoperability.transfers+json;version=1.0"
											},
											{
												"key": "Date",
												"value": "{{transferDate}}"
											},
											{
												"key": "FSPIOP-Source",
												"value": "{{SIMPAYER_NAME}}"
											},
											{
												"key": "FSPIOP-Destination",
												"value": "{{SIMPAYEE_NAME}}"
											},
											{
												"key": "FSPIOP-Signature",
												"type": "text",
												"value": "{{fspiopSignature}}"
											},
											{
												"key": "FSPIOP-URI",
												"type": "text",
												"value": "/transfers"
											},
											{
												"key": "FSPIOP-HTTP-Method",
												"type": "text",
												"value": "POST"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{{transferRequest}}"
										},
										"url": {
											"raw": "{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}/transfers",
											"host": [
												"{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}"
											],
											"path": [
												"transfers"
											]
										}
									},
									"response": []
								},
								{
									"name": "Get SIMPAYER position after the transfer",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "80d74197-f214-4904-a844-3421fe256379",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"});",
													"",
													"var jsonData = pm.response.json();",
													"var expectedamount = Number.parseFloat(pm.environment.get(`${pm.environment.get('SIMPAYER_NAME')}PositionBeforeTransferhp`)) + Number.parseFloat(10);",
													"//expectedamount = expectedamount.toFixed(2);",
													"console.log(expectedamount);",
													"//console.log(jsonData[0].value);",
													"/*if (pm.environment.get('ENV') === 'uat0') {",
													"pm.test(\"Position should be changed after transfer\", function () {",
													"    pm.expect(jsonData[1].value).to.eql(Number(expectedamount));",
													"});",
													"}else{",
													"    ",
													"    pm.test(\"Position should be changed after transfer\", function () {",
													"    pm.expect(jsonData[0].value).to.eql(Number(expectedamount));",
													"});",
													"}*/",
													"",
													"",
													"for (var i in jsonData) {",
													"    if (jsonData[i].currency === pm.environment.get('SIMPAYER_CURRENCY')) {",
													"        pm.test(\"Position should be changed after transfer\", function () {",
													"            pm.expect(jsonData[i].value).to.eql(Number(expectedamount));",
													"        });",
													"    }",
													"",
													"}"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
													"type": "string"
												}
											]
										},
										"method": "GET",
										"header": [
											{
												"key": "FSPIOP-Source",
												"type": "text",
												"value": "hub_operator"
											}
										],
										"url": {
											"raw": "{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}/participants/{{SIMPAYER_NAME}}/positions",
											"host": [
												"{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}"
											],
											"path": [
												"participants",
												"{{SIMPAYER_NAME}}",
												"positions"
											]
										},
										"description": "If transfer was successful then the position for payerfsp should change, we will get the current position for payerfsp and compare this value against initial payerfsp position captured in:  payerfspPositionBeforeTransferhp\nPositon should be increased in 1 XOF"
									},
									"response": []
								},
								{
									"name": "Get SIMPAYEE position after the transfer",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "0ef14791-5f9b-4b2a-a12e-fb6c12bbaf9d",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"});",
													"",
													"var jsonData = pm.response.json();",
													"",
													"var expectedamount = Number.parseFloat(pm.environment.get(`${pm.environment.get('SIMPAYEE_NAME')}PositionBeforeTransferhp`)) - Number.parseFloat(10);",
													"//expectedamount = expectedPayerAccountBalanceAfterSettlementx.toFixed(2);",
													"/*console.log(expectedamount);",
													"pm.test(\"Position should be changed after transfer\", function () {",
													"    pm.expect(Number(jsonData[0].value)).to.eql(Number(expectedamount));",
													"});*/",
													"",
													"for (var i in jsonData) {",
													"    if (jsonData[i].currency === pm.environment.get('SIMPAYEE_CURRENCY')) {",
													"        pm.test(\"Position should be changed after transfer\", function () {",
													"            pm.expect(Number(jsonData[i].value)).to.eql(Number(expectedamount));",
													"        });",
													"    }",
													"",
													"}"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
													"type": "string"
												}
											]
										},
										"method": "GET",
										"header": [
											{
												"key": "FSPIOP-Source",
												"type": "text",
												"value": "hub_operator"
											}
										],
										"url": {
											"raw": "{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}/participants/{{SIMPAYEE_NAME}}/positions",
											"host": [
												"{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}"
											],
											"path": [
												"participants",
												"{{SIMPAYEE_NAME}}",
												"positions"
											]
										},
										"description": "If transfer was successful then the position for payeefsp should change, we will get the current position for payeefsp and compare this value against initial payeefsp position captured in:  payeefspPositionBeforeTransferhp\nPositon should be increased in 1 XOF"
									},
									"response": []
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						},
						{
							"name": "Transfer_SEND_quote",
							"item": [
								{
									"name": "Get SIMPAYER position before TheTransfer",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "a8b73678-6b2f-4578-9772-ec811fdef556",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"pm.environment.set(\"variable_key\", \"variable_value\");",
													"  pm.response.to.have.status(200);",
													"});",
													"",
													"var jsonData = pm.response.json();",
													"",
													"",
													"for (var i in jsonData) {",
													"  if (jsonData[i].currency === pm.environment.get('SIMPAYER_CURRENCY')) {",
													"    pm.test(\"Atleast one account position should be returned\", function () {",
													"      pm.environment.set(`${pm.environment.get('SIMPAYER_NAME')}PositionBeforeTransferhp`, jsonData[i].value);",
													"      pm.expect(jsonData).to.be.not.empty;",
													"    });",
													"  }",
													"",
													"}",
													"",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
													"type": "string"
												}
											]
										},
										"method": "GET",
										"header": [
											{
												"key": "FSPIOP-Source",
												"type": "text",
												"value": "hub_operator"
											}
										],
										"url": {
											"raw": "{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}/participants/{{SIMPAYER_NAME}}/positions",
											"host": [
												"{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}"
											],
											"path": [
												"participants",
												"{{SIMPAYER_NAME}}",
												"positions"
											]
										},
										"description": "We will capture the initial position for Payerfsp before the transfer and will save this value in a variable  payerfspPositionBeforeTransferhp"
									},
									"response": []
								},
								{
									"name": "Get SIMPAYEE position before TheTransfer",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "41b41435-6c29-43c3-a299-40f9d26f1188",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"  pm.response.to.have.status(200);",
													"});",
													"",
													"var jsonData = pm.response.json();",
													"",
													"",
													"for (var i in jsonData) {",
													"  if (jsonData[i].currency === pm.environment.get('SIMPAYEE_CURRENCY')) {",
													"    pm.test(\"Atleast one account position should be returned\", function () {",
													"      pm.environment.set(`${pm.environment.get('SIMPAYEE_NAME')}PositionBeforeTransferhp`, jsonData[i].value);",
													"      pm.expect(jsonData).to.be.not.empty;",
													"    });",
													"  }",
													"",
													"}",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
													"type": "string"
												}
											]
										},
										"method": "GET",
										"header": [
											{
												"key": "FSPIOP-Source",
												"type": "text",
												"value": "hub_operator"
											}
										],
										"url": {
											"raw": "{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}/participants/{{SIMPAYEE_NAME}}/positions",
											"host": [
												"{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}"
											],
											"path": [
												"participants",
												"{{SIMPAYEE_NAME}}",
												"positions"
											]
										},
										"description": "We will capture the initial position for Payeefsp before the transfer and will save this value in a variable  payeefspPositionBeforeTransferhp"
									},
									"response": []
								},
								{
									"name": "Send Quote - SEND",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "cf247802-3d06-405e-be7b-73ccabcba7e0",
												"exec": [
													"var navigator = {}; //fake a navigator object for the lib",
													"var window = {}; //fake a window object for the lib",
													"eval(pm.environment.get('jrsassign'));",
													"",
													"",
													"var uuid = require('uuid');",
													"var generatedUUID = uuid.v4();",
													"pm.environment.set('quoteId', generatedUUID);",
													"generatedUUID = uuid.v4();",
													"pm.environment.set('transactionId', generatedUUID);",
													"",
													"pm.variables.set('quoteDate', (new Date()).toUTCString());",
													"pm.variables.set('payerName', 'PayerFirst PayerLast');",
													"",
													"pm.variables.set('expectedPayeeFirstName', 'GoldenFirst');",
													"pm.variables.set('expectedPayeeLastName', 'GoldenLast');",
													"pm.variables.set('expectedPayeeDOB', '2010-10-10');",
													"",
													"var oHeader = {alg: \"RS256\", \"FSPIOP-Source\": pm.environment.get('SIMPAYER_NAME'),\"FSPIOP-Destination\": pm.environment.get('SIMPAYEE_NAME'), \"FSPIOP-URI\":\"/quotes\", \"FSPIOP-HTTP-Method\":\"POST\", \"Date\":pm.variables.get('quoteDate')};",
													"var sHeader = JSON.stringify(oHeader);",
													"console.log(`sHeader: ${sHeader}`)",
													"",
													"var objPayload = {",
													"  \"quoteId\": pm.environment.get('quoteId'),",
													"  \"transactionId\": pm.environment.get('transactionId'),",
													"  \"payer\": {",
													"    \"partyIdInfo\": {",
													"      \"partyIdType\": \"MSISDN\",",
													"      \"partyIdentifier\": pm.environment.get('SIMPAYER_MSISDN'),",
													"      \"fspId\": pm.environment.get('SIMPAYER_NAME')",
													"    },",
													"    \"personalInfo\": {",
													"      \"complexName\": {",
													"        \"firstName\": \"Mats\",",
													"        \"lastName\": \"Hagman\"",
													"      },",
													"      \"dateOfBirth\": \"1983-10-25\"",
													"    }",
													"  },",
													"  \"payee\": {",
													"    \"partyIdInfo\": {",
													"      \"partyIdType\": \"MSISDN\",",
													"      \"partyIdentifier\": pm.environment.get('SIMPAYEE_MSISDN'),",
													"      \"fspId\": pm.environment.get('SIMPAYEE_NAME')",
													"    }",
													"  },",
													"  \"amountType\": \"SEND\",",
													"  \"amount\": {",
													"    \"amount\": \"10\",",
													"    \"currency\": pm.environment.get('SIMPAYER_CURRENCY')",
													"  },",
													"  \"transactionType\": {",
													"    \"scenario\": \"TRANSFER\",",
													"    \"initiator\": \"PAYER\",",
													"    \"initiatorType\": \"CONSUMER\"",
													"  },",
													"  \"note\": \"hej\"",
													"}",
													"",
													"var sPayload = JSON.stringify(objPayload)",
													"console.log(`sPayload: ${sPayload}`)",
													"pm.variables.set(\"quoteRequest\", sPayload);",
													"var token = KJUR.jws.JWS.sign(\"RS256\", sHeader, sPayload, pm.environment.get('SIMPAYER_JWS_KEY'));",
													"console.log(`token: ${token}`)",
													"",
													"// var encodedHeaders = btoa(sHeader)",
													"",
													"// var ofspiopSignature = {signature: vSignature, protectedHeader: encodedHeaders}",
													"// var token = JSON.stringify(ofspiopSignature)",
													"",
													"const [ protectedHeaderBase64, , signature ] = token.split('.');",
													"",
													"const signatureObject = {",
													"    signature: signature.replace('\"', ''),",
													"    protectedHeader: protectedHeaderBase64.replace('\"', '')",
													"};",
													"",
													"console.log(JSON.stringify(signatureObject))",
													"",
													"pm.variables.set('fspiopSignature',JSON.stringify(signatureObject))",
													"",
													"",
													"",
													"",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"id": "abc086e2-bfe1-4a6f-aea0-b009d8936ba2",
												"exec": [
													"pm.test(\"Status code is 202\", function () {",
													"    pm.response.to.have.status(202);",
													"});",
													"",
													"setTimeout(function () {",
													"  pm.sendRequest(pm.environment.get(\"SIMPAYEE_SDK_TESTAPI_URL\")+\"/requests/\"+pm.variables.get(\"quoteId\"), function (err, response) {",
													"          if(response.responseSize !== 0) {",
													"              ",
													"              //Check the Headers",
													"              var headers = response.json().headers;",
													"              ",
													"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-source is ${pm.environment.get('SIMPAYER_NAME')}`, function () {",
													"                    pm.expect(headers['fspiop-source']).to.eql(pm.environment.get('SIMPAYER_NAME'));",
													"                });",
													"                ",
													"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-destination is ${pm.environment.get('SIMPAYEE_NAME')}`, function () {",
													"                    pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('SIMPAYEE_NAME'));",
													"                });",
													"                ",
													"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-signature is same as sent in the request`, function () {",
													"                    pm.expect(headers['fspiop-signature']).to.eql(pm.variables.get(\"fspiopSignature\"));",
													"                });",
													"                ",
													"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} accept is same as sent in the request`, function () {",
													"                    pm.expect(headers['accept']).to.match(/application\\/vnd\\.interoperability\\.quotes\\+json;version=1(\\.\\d)?/);",
													"                });",
													"                ",
													"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} content-typeis same as sent in the request`, function () {",
													"                    pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.quotes+json;version=1.0');",
													"                });",
													"                ",
													"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-uri is /quotes`, function () {",
													"                    pm.expect(headers['fspiop-uri']).to.eql('/quotes');",
													"                });",
													"                ",
													"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-http-method is POST`, function () {",
													"                    pm.expect(headers['fspiop-http-method']).to.eql('POST');",
													"                });",
													"                ",
													"          } else {",
													"              pm.test(\"Quote FAILED\", function () {",
													"                throw new Error('Did not receive request on payee side');",
													"              });",
													"              // postman.setNextRequest(null)",
													"          }",
													"   });",
													"}, pm.environment.get(\"SET_TIMEOUT_QUOTES\"))",
													"",
													"setTimeout(function () {",
													"  pm.sendRequest(pm.environment.get(\"SIMPAYER_SDK_TESTAPI_URL\")+\"/callbacks/\"+pm.environment.get(\"quoteId\"), function (err, response) {",
													"      if(response.responseSize !== 0) {",
													"          //Checking headers",
													"            var headers = response.json().headers;",
													"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-source is ${pm.environment.get('SIMPAYEE_NAME')}`, function () {",
													"                pm.expect(headers['fspiop-source']).to.eql(pm.environment.get('SIMPAYEE_NAME'));",
													"            });",
													"            ",
													"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-destination is ${pm.environment.get('SIMPAYER_NAME')}`, function () {",
													"                pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('SIMPAYER_NAME'));",
													"            });",
													"            ",
													"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} content-type should be application/vnd.interoperability.quotes+json;version=1.0`, function () {",
													"                pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.quotes+json;version=1.0');",
													"            });",
													"            ",
													"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} accept is empty`, function () {",
													"                pm.expect(headers['accept']).to.eql(undefined);",
													"            });",
													"            ",
													"            ",
													"            ",
													"            var {signature,protectedHeader} = JSON.parse(headers['fspiop-signature'])",
													"            // var strData = JSON.stringify(response.json().data)",
													"            // const token = `${protectedHeader}.${btoa(strData)}.${signature}`",
													"            // console.log(`token: ${token}`)",
													"            // var isValid = KJUR.jws.JWS.verify(token, pm.environment.get('goldenpayeefspJWSPubKey'), {alg: ['RS256']})",
													"            // console.log(`isValid: ${isValid}`)",
													"            // pm.test(\"Check if the response is JWS valid\", function () {",
													"            //     pm.expect(isValid).to.eql(true);",
													"            // });",
													"            ",
													"            //Validate protected header inside Signature",
													"            var decodedProtectedHeaders = JSON.parse(atob(protectedHeader))",
													"            console.log('decodedProtectedHeaders:',decodedProtectedHeaders)",
													"            ",
													"            pm.test(\"FSPIOP-Signature Protected Header alg to be RS256\", function () {",
													"                pm.expect(decodedProtectedHeaders['alg']).to.eql('RS256');",
													"            });",
													"            pm.test(\"FSPIOP-Signature Protected Header FSPIOP-URI to be /quotes/\"+pm.environment.get(\"quoteId\"), function () {",
													"                pm.expect(decodedProtectedHeaders['FSPIOP-URI']).to.eql('/quotes/'+pm.environment.get(\"quoteId\"));",
													"            });",
													"            ",
													"",
													"            pm.test(\"FSPIOP-Signature Protected Header FSPIOP-HTTP-Method to be PUT\", function () {",
													"                pm.expect(decodedProtectedHeaders['FSPIOP-HTTP-Method']).to.eql('PUT');",
													"            });",
													"            pm.test(`FSPIOP-Signature Protected Header FSPIOP-Source to be ${pm.environment.get('SIMPAYEE_NAME')}`, function () {",
													"                pm.expect(decodedProtectedHeaders['FSPIOP-Source']).to.eql(pm.environment.get('SIMPAYEE_NAME'));",
													"            });",
													"            pm.test(`FSPIOP-Signature Protected Header FSPIOP-Destination to be ${pm.environment.get('SIMPAYER_NAME')}`, function () {",
													"                pm.expect(decodedProtectedHeaders['FSPIOP-Destination']).to.eql(pm.environment.get('SIMPAYER_NAME'));",
													"            });",
													"            pm.test(\"FSPIOP-Signature Protected Header Date is present\", function () {",
													"                pm.expect(decodedProtectedHeaders['Date']).to.not.eql(undefined);",
													"            });",
													"           ",
													"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} FSPIOP-URI to be /quotes/`+pm.environment.get(\"quoteId\"), function () {",
													"                pm.expect(headers['fspiop-uri']).to.eql('/quotes/'+pm.environment.get(\"quoteId\"));",
													"            });",
													"            ",
													"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-http-method is PUT`, function () {",
													"                pm.expect(headers['fspiop-http-method']).to.eql('PUT');",
													"            });",
													"            ",
													"            var jsonData = response.json().data;",
													"            ",
													"            pm.test(\"Response quoteId is  null\", function () {",
													"                pm.expect(jsonData.quoteId).to.eql(undefined);",
													"                ",
													"            });",
													"          ",
													"            pm.test(\"Response ilpPacket is not null\", function () {",
													"                pm.expect(jsonData.ilpPacket).not.equal(undefined);",
													"                pm.environment.set(\"ilpPacket\", jsonData.ilpPacket);",
													"            });",
													"       ",
													"           pm.test(\"Response condition is not null\", function () {",
													"               pm.expect(jsonData.condition).not.equal(undefined);",
													"               pm.environment.set(\"condition\", jsonData.condition);",
													"           });",
													"      } else {",
													"          pm.test(\"Quote FAILED\", function () {",
													"            throw new Error('Did not receive response on Payer side');",
													"           });",
													"           // postman.setNextRequest(null);",
													"      }",
													"       ",
													"   });",
													"}, pm.environment.get(\"SET_TIMEOUT_QUOTES\"))",
													"",
													"",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{SIMPAYER_BEARER_TOKEN}}",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Accept",
												"value": "application/vnd.interoperability.quotes+json;version=1.0"
											},
											{
												"key": "Content-Type",
												"value": "application/vnd.interoperability.quotes+json;version=1.0"
											},
											{
												"key": "Date",
												"value": "{{quoteDate}}"
											},
											{
												"key": "FSPIOP-Source",
												"value": "{{SIMPAYER_NAME}}"
											},
											{
												"key": "FSPIOP-Destination",
												"value": "{{SIMPAYEE_NAME}}"
											},
											{
												"key": "FSPIOP-Signature",
												"type": "text",
												"value": "{{fspiopSignature}}"
											},
											{
												"key": "FSPIOP-HTTP-Method",
												"type": "text",
												"value": "POST"
											},
											{
												"key": "FSPIOP-URI",
												"type": "text",
												"value": "/quotes"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{{quoteRequest}}"
										},
										"url": {
											"raw": "{{HOST_QUOTING_SERVICE}}/quotes",
											"host": [
												"{{HOST_QUOTING_SERVICE}}"
											],
											"path": [
												"quotes"
											]
										}
									},
									"response": []
								},
								{
									"name": "Send Transfer - SEND",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "9e1971a2-b59f-4333-b679-64d7cb72948d",
												"exec": [
													"pm.test(\"Status code is 202\", function () {",
													"    pm.response.to.have.status(202);",
													"});",
													"",
													"// //Check the request that Switch forwards to payeefsp",
													"setTimeout(function () {",
													"  pm.sendRequest(pm.environment.get(\"SIMPAYEE_SDK_TESTAPI_URL\")+\"/requests/\"+pm.environment.get(\"transfer_ID\"), function (err, response) {",
													"          if(response.responseSize !== 0) {",
													"              ",
													"              //Check the Headers",
													"              var headers = response.json().headers;",
													"              ",
													"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-source is ${pm.environment.get('SIMPAYER_NAME')}`, function () {",
													"                    pm.expect(headers['fspiop-source']).to.eql(pm.environment.get('SIMPAYER_NAME'));",
													"                });",
													"                ",
													"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-destination is ${pm.environment.get('SIMPAYEE_NAME')}`, function () {",
													"                    pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('SIMPAYEE_NAME'));",
													"                });",
													"                ",
													"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} content-typeis same as sent in the request`, function () {",
													"                    pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.transfers+json;version=1.0');",
													"                });",
													"                ",
													"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} accept is same as sent in the request`, function () {",
													"                    pm.expect(headers['accept']).to.match(/application\\/vnd\\.interoperability\\.transfers\\+json;version=1(\\.\\d)?/);",
													"                });",
													"                ",
													"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-signature is same as sent in the request`, function () {",
													"                    pm.expect(headers['fspiop-signature']).to.eql(pm.variables.get(\"fspiopSignature\"));",
													"                });",
													"                ",
													"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-http-method is POST`, function () {",
													"                    pm.expect(headers['fspiop-http-method']).to.eql('POST');",
													"                });",
													"                ",
													"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-uri is /transfers`, function () {",
													"                    pm.expect(headers['fspiop-uri']).to.eql('/transfers');",
													"                });",
													"                ",
													"                ",
													"                //Check the data",
													"                var jsonData = response.json().data;",
													"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} data should have the same transferId as request`, function () {",
													"                  pm.expect(jsonData.transferId).to.eql(pm.environment.get(\"transfer_ID\"));",
													"                });",
													"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} data should have the same payerfspId as request`, function () {",
													"                  pm.expect(jsonData.payerFsp).to.eql(pm.environment.get('SIMPAYER_NAME'));",
													"                });",
													"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} data should have the same ${pm.environment.get('SIMPAYEE_NAME')}Id as request`, function () {",
													"                  pm.expect(`${pm.environment.get('SIMPAYEE_NAME')}`);",
													"                });",
													"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} data should have the same amount as request`, function () {",
													"                  pm.expect(jsonData.amount.amount).to.eql('10');",
													"                });",
													"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} data should have the same currency as request`, function () {",
													"                  pm.expect(jsonData.amount.currency).to.eql(pm.environment.get(\"SIMPAYER_CURRENCY\"));",
													"                });",
													"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} data should have the same expiration as request`, function () {",
													"                  pm.expect(jsonData.expiration).to.eql(pm.environment.get(\"transferExpiration\"));",
													"                });",
													"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} data should have the same ilpPacket as request`, function () {",
													"                  pm.expect(jsonData.ilpPacket).to.eql(pm.environment.get(\"ilpPacket\"));",
													"                });",
													"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} data should have the same condition as request`, function () {",
													"                  pm.expect(jsonData.condition).to.eql(pm.environment.get(\"condition\"));",
													"                });",
													"                ",
													"          } else {",
													"              pm.test(\"Transfer FAILED\", function () {",
													"                throw new Error('Did not receive response on payee side');",
													"              });",
													"              // postman.setNextRequest(null)",
													"          }",
													"  });",
													"}, pm.environment.get(\"SET_TIMEOUT_TRANSFERS\"))",
													"",
													"//Check the callback response that Switch forwards to payerfsp",
													"setTimeout(function () {",
													"  pm.sendRequest(pm.environment.get(\"SIMPAYER_SDK_TESTAPI_URL\")+\"/callbacks/\"+pm.environment.get(\"transfer_ID\"), function (err, response) {",
													"          if(response.responseSize !== 0) {",
													"            //Checking headers",
													"            var headers = response.json().headers;",
													"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-source is ${pm.environment.get('SIMPAYEE_NAME')}`, function () {",
													"                pm.expect(headers['fspiop-source']).to.eql(pm.environment.get('SIMPAYEE_NAME'));",
													"            });",
													"            ",
													"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-destination is ${pm.environment.get('SIMPAYER_NAME')}`, function () {",
													"                pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('SIMPAYER_NAME'));",
													"            });",
													"            ",
													"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} content-type should be application/vnd.interoperability.transfers+json;version=1.0`, function () {",
													"                pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.transfers+json;version=1.0');",
													"            });",
													"            ",
													"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} accept is empty`, function () {",
													"                pm.expect(headers['accept']).to.eql(undefined);",
													"            });",
													"            ",
													"            ",
													"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-uri includes /transfers/{{transfer_ID}}`, function () {",
													"                pm.expect(headers['fspiop-uri']).to.eql('/transfers/'+ pm.environment.get(\"transfer_ID\"));",
													"            });",
													"            ",
													"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-http-method is PUT`, function () {",
													"                pm.expect(headers['fspiop-http-method']).to.eql('PUT');",
													"            });",
													"            ",
													"            var jsonData = response.json().data;",
													"            pm.test(\"Response data does not have transferId\", function () {",
													"               pm.expect(jsonData.transferId).to.eql(undefined);",
													"            });",
													"            pm.test(\"Response status is COMMITTED\", function () {",
													"                pm.expect(jsonData.transferState).to.eql('COMMITTED');",
													"            });",
													"          } else {",
													"              pm.test(\"Transfer FAILED\", function () {",
													"                throw new Error('Did not receive response on payer side');",
													"              });",
													"              // postman.setNextRequest(null)",
													"          }",
													"   });",
													"}, pm.environment.get(\"SET_TIMEOUT_TRANSFERS\"))",
													"",
													"setTimeout(function () {",
													"  pm.sendRequest(pm.environment.get(\"SIMPAYEE_SDK_TESTAPI_URL\")+\"/callbacks/\"+pm.environment.get(\"transfer_ID\"), function (err, response) {",
													"       pm.test(`${pm.environment.get('SIMPAYEE_NAME')} does not receive additional final notification`, function () {",
													"            pm.expect(response.text()).to.eql('');",
													"        });",
													"       ",
													"      ",
													"    });",
													"}, pm.environment.get(\"SET_TIMEOUT_TRANSFERS\"))",
													"",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "prerequest",
											"script": {
												"id": "a4e8f375-a5ef-40f9-b003-73c519abba93",
												"exec": [
													"var navigator = {}; //fake a navigator object for the lib",
													"var window = {}; //fake a window object for the lib",
													"eval(pm.environment.get('jrsassign'));",
													"",
													"var uuid = require('uuid');",
													"var generatedUUID = uuid.v4();",
													"pm.environment.set('transfer_ID', pm.environment.get('transactionId'));",
													"",
													"",
													"pm.variables.set('transferDate', (new Date()).toUTCString());",
													"",
													"pm.environment.set(\"transferExpiration\",new Date(new Date().getTime() + 60000))",
													"",
													"var oHeader = {alg: \"RS256\", \"FSPIOP-Source\": pm.environment.get('SIMPAYER_NAME'),\"FSPIOP-Destination\": pm.environment.get('SIMPAYEE_NAME'), \"FSPIOP-URI\":\"/transfers\", \"FSPIOP-HTTP-Method\":\"POST\", \"Date\":pm.variables.get('transferDate')};",
													"var sHeader = JSON.stringify(oHeader);",
													"console.log(`sHeader: ${sHeader}`)",
													"",
													"var objPayload = {",
													"  \"transferId\": pm.environment.get('transfer_ID'),",
													"  \"payerFsp\": pm.environment.get('SIMPAYER_NAME'),",
													"  \"payeeFsp\": pm.environment.get('SIMPAYEE_NAME'),",
													"  \"amount\": {",
													"    \"amount\": \"10\",",
													"    \"currency\": pm.environment.get('SIMPAYER_CURRENCY')",
													"  },",
													"  \"expiration\": pm.environment.get('transferExpiration'),",
													"  \"ilpPacket\": pm.environment.get('ilpPacket'),",
													"  \"condition\": pm.environment.get('condition')",
													"}",
													"var sPayload = JSON.stringify(objPayload)",
													"console.log(`sPayload: ${sPayload}`)",
													"pm.variables.set(\"transferRequest\", sPayload);",
													"var token = KJUR.jws.JWS.sign(\"RS256\", sHeader, sPayload, pm.environment.get('SIMPAYER_JWS_KEY'));",
													"//console.log(`token: ${token}`)",
													"",
													"// var encodedHeaders = btoa(sHeader)",
													"",
													"// var ofspiopSignature = {signature: vSignature, protectedHeader: encodedHeaders}",
													"// var token = JSON.stringify(ofspiopSignature)",
													"",
													"const [ protectedHeaderBase64, , signature ] = token.split('.');",
													"",
													"const signatureObject = {",
													"    signature: signature.replace('\"', ''),",
													"    protectedHeader: protectedHeaderBase64.replace('\"', '')",
													"};",
													"",
													"console.log(JSON.stringify(signatureObject))",
													"",
													"pm.variables.set('fspiopSignature',JSON.stringify(signatureObject))"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{SIMPAYER_BEARER_TOKEN}}",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Accept",
												"value": "application/vnd.interoperability.transfers+json;version=1.0"
											},
											{
												"key": "Content-Type",
												"value": "application/vnd.interoperability.transfers+json;version=1.0"
											},
											{
												"key": "Date",
												"value": "{{transferDate}}"
											},
											{
												"key": "FSPIOP-Source",
												"value": "{{SIMPAYER_NAME}}"
											},
											{
												"key": "FSPIOP-Destination",
												"value": "{{SIMPAYEE_NAME}}"
											},
											{
												"key": "FSPIOP-Signature",
												"type": "text",
												"value": "{{fspiopSignature}}"
											},
											{
												"key": "FSPIOP-URI",
												"type": "text",
												"value": "/transfers"
											},
											{
												"key": "FSPIOP-HTTP-Method",
												"type": "text",
												"value": "POST"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{{transferRequest}}"
										},
										"url": {
											"raw": "{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}/transfers",
											"host": [
												"{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}"
											],
											"path": [
												"transfers"
											]
										}
									},
									"response": []
								},
								{
									"name": "Get SIMPAYER position after the transfer",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "2fd3316a-e8c9-4322-b763-8c990f070a62",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"});",
													"",
													"var jsonData = pm.response.json();",
													"var expectedamount = Number.parseFloat(pm.environment.get(`${pm.environment.get('SIMPAYER_NAME')}PositionBeforeTransferhp`)) + Number.parseFloat(10);",
													"//expectedamount = expectedamount.toFixed(2);",
													"console.log(expectedamount);",
													"//console.log(jsonData[0].value);",
													"/*if (pm.environment.get('ENV') === 'uat0') {",
													"pm.test(\"Position should be changed after transfer\", function () {",
													"    pm.expect(jsonData[1].value).to.eql(Number(expectedamount));",
													"});",
													"}else{",
													"    ",
													"    pm.test(\"Position should be changed after transfer\", function () {",
													"    pm.expect(jsonData[0].value).to.eql(Number(expectedamount));",
													"});",
													"}*/",
													"",
													"",
													"for (var i in jsonData) {",
													"    if (jsonData[i].currency === pm.environment.get('SIMPAYER_CURRENCY')) {",
													"        pm.test(\"Position should be changed after transfer\", function () {",
													"            pm.expect(jsonData[i].value).to.eql(Number(expectedamount));",
													"        });",
													"    }",
													"",
													"}"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
													"type": "string"
												}
											]
										},
										"method": "GET",
										"header": [
											{
												"key": "FSPIOP-Source",
												"type": "text",
												"value": "hub_operator"
											}
										],
										"url": {
											"raw": "{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}/participants/{{SIMPAYER_NAME}}/positions",
											"host": [
												"{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}"
											],
											"path": [
												"participants",
												"{{SIMPAYER_NAME}}",
												"positions"
											]
										},
										"description": "If transfer was successful then the position for payerfsp should change, we will get the current position for payerfsp and compare this value against initial payerfsp position captured in:  payerfspPositionBeforeTransferhp\nPositon should be increased in 1 XOF"
									},
									"response": []
								},
								{
									"name": "Get SIMPAYEE position after the transfer",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "65a49110-89e5-49b2-856e-1ad6382350c4",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"});",
													"",
													"var jsonData = pm.response.json();",
													"",
													"var expectedamount = Number.parseFloat(pm.environment.get(`${pm.environment.get('SIMPAYEE_NAME')}PositionBeforeTransferhp`)) - Number.parseFloat(10);",
													"//expectedamount = expectedPayerAccountBalanceAfterSettlementx.toFixed(2);",
													"/*console.log(expectedamount);",
													"pm.test(\"Position should be changed after transfer\", function () {",
													"    pm.expect(Number(jsonData[0].value)).to.eql(Number(expectedamount));",
													"});*/",
													"",
													"for (var i in jsonData) {",
													"    if (jsonData[i].currency === pm.environment.get('SIMPAYEE_CURRENCY')) {",
													"        pm.test(\"Position should be changed after transfer\", function () {",
													"            pm.expect(Number(jsonData[i].value)).to.eql(Number(expectedamount));",
													"        });",
													"    }",
													"",
													"}"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
													"type": "string"
												}
											]
										},
										"method": "GET",
										"header": [
											{
												"key": "FSPIOP-Source",
												"type": "text",
												"value": "hub_operator"
											}
										],
										"url": {
											"raw": "{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}/participants/{{SIMPAYEE_NAME}}/positions",
											"host": [
												"{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}"
											],
											"path": [
												"participants",
												"{{SIMPAYEE_NAME}}",
												"positions"
											]
										},
										"description": "If transfer was successful then the position for payeefsp should change, we will get the current position for payeefsp and compare this value against initial payeefsp position captured in:  payeefspPositionBeforeTransferhp\nPositon should be increased in 1 XOF"
									},
									"response": []
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						}
					],
					"description": "Author: Sridevi Miriyala",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "bb48c1fd-0550-4e43-9749-ecaed73d4ef8",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "05295e5e-1281-4081-b9b7-a8daaf723f10",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				},
				{
					"name": "post_scenarios",
					"item": [
						{
							"name": "positive",
							"item": [
								{
									"name": "Add party to SIMPAYEE - MSISDN",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "9044d6f3-dc16-4784-a952-47c20c0f97b3",
												"exec": [
													"pm.test(\"Successful POST request\", function () {",
													"    pm.expect(pm.response.code).to.be.oneOf([204,500]);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "noauth"
										},
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n    \"displayName\": \"PayeeFirst PayeeLast\",\n    \"firstName\": \"PayeeFirst\",\n    \"middleName\": \"PayeeMiddle\",\n    \"lastName\": \"PayeeLast\",\n    \"dateOfBirth\": \"2010-10-10\",\n    \"idType\": \"MSISDN\",\n    \"idValue\": \"{{SIMPAYEE_MSISDN}}\"\n}"
										},
										"url": {
											"raw": "{{SIMPAYEE_BACKEND_TESTAPI_URL}}/repository/parties",
											"host": [
												"{{SIMPAYEE_BACKEND_TESTAPI_URL}}"
											],
											"path": [
												"repository",
												"parties"
											]
										},
										"description": "Create a party"
									},
									"response": []
								},
								{
									"name": "Post scenarios - MSISDN - SIMPAYER to SIMPAYEE",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "915f248f-42ee-4053-b5ff-29820d8fa018",
												"exec": [
													"var uuid = require('uuid');",
													"var generatedUUID = uuid.v4();",
													"pm.environment.set('quoteId', generatedUUID);",
													"pm.environment.set('transfer_ID', pm.environment.get('transactionId'));",
													"",
													"",
													"pm.variables.set('transferDate', (new Date()).toUTCString());",
													"",
													"pm.environment.set(\"transferExpiration\",new Date(new Date().getTime() + 600000))",
													"",
													"pm.variables.set('payerName', 'PayerFirst PayerLast');",
													"",
													"pm.variables.set('expectedPayeeFirstName', 'PayeeFirst');",
													"pm.variables.set('expectedPayeeLastName', 'PayeeLast');",
													"pm.variables.set('expectedPayeeDOB', '2010-10-10');",
													"",
													"",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"id": "45557601-78f6-4139-b63a-679c17ec76d1",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"});",
													"",
													"pm.test(`Payer name is ${pm.variables.get('payerName')}`, function () {",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData.scenario1.result.from.displayName).to.eql(pm.variables.get('payerName'));",
													"});",
													"pm.test(\"payer idType is MSISDN\", function () {",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData.scenario1.result.from.idType).to.eql(\"MSISDN\");",
													"});",
													"pm.test(`payer idValue is ${pm.environment.get('SIMPAYER_MSISDN')}`, function () {",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData.scenario1.result.from.idValue).to.eql(pm.environment.get('SIMPAYER_MSISDN'));",
													"});",
													"",
													"pm.test(\"Payee idType is MSISDN\", function () {",
													"    var jsonData = pm.response.json();",
													"     pm.expect(jsonData.scenario1.result.to.idType).to.eql(\"MSISDN\");",
													"});",
													"",
													"pm.test(`Payee idValue is ${pm.environment.get('SIMPAYEE_MSISDN')}`, function () {",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData.scenario1.result.to.idValue).to.eql(pm.environment.get('SIMPAYEE_MSISDN'));",
													"});",
													"",
													"pm.test(`payee fspId is ${pm.environment.get('SIMPAYEE_NAME')}`, function () {",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData.scenario1.result.to.fspId).to.eql(pm.environment.get('SIMPAYEE_NAME'));",
													"});",
													"",
													"pm.test(`payee First name is ${pm.variables.get('expectedPayeeFirstName')}`, function () {",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData.scenario1.result.to.firstName).to.eql(pm.variables.get('expectedPayeeFirstName'));",
													"});   ",
													"",
													"pm.test(`payee Last name is ${pm.variables.get('expectedPayeeLastName')}`, function () {",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData.scenario1.result.to.lastName).to.eql(pm.variables.get('expectedPayeeLastName'));",
													"});",
													"",
													"pm.test(\"payee DOB is 2010-10-10\", function () {",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData.scenario1.result.to.dateOfBirth).to.eql(\"2010-10-10\");",
													"});",
													"",
													"pm.test(\"amount type is SEND\", function () {",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData.scenario1.result.amountType).to.eql(\"SEND\");",
													"});",
													"",
													"pm.test(`Currency is ${pm.environment.get('SIMPAYER_CURRENCY')}`, function () {",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData.scenario1.result.currency).to.eql(pm.environment.get('SIMPAYER_CURRENCY'));",
													"});",
													"",
													"pm.test(\"Transfer Amount is 10\", function () {",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData.scenario1.result.amount).to.eql(\"10\");",
													"});",
													"",
													"pm.test(\"Transaction type is Transfer\", function () {",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData.scenario1.result.transactionType).to.eql(\"TRANSFER\");",
													"});",
													"   ",
													"  pm.test(\"Initiator type is CONSUMER\", function () {",
													"    var jsonData = pm.response.json(); ",
													"    pm.expect(jsonData.scenario1.result.initiatorType).to.eql(\"CONSUMER\");",
													" });  ",
													" ",
													" pm.test(\"Note is TESTPAYMENT\", function () {",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData.scenario1.result.note).to.eql(\"test payment\");",
													"});",
													"",
													"// pm.test(`quote Id is ${pm.environment.get('quoteId')} `, function () {",
													"//     var jsonData = pm.response.json();",
													"    ",
													"//     pm.expect(jsonData.scenario1.result.quoteResponse.quoteId).to.eql(pm.environment.get('quoteId'));",
													"// });",
													"",
													"pm.test(`transferId is ${pm.environment.get('transferId')}`, function () {",
													"    var jsonData = pm.response.json();",
													"     pm.expect(jsonData.scenario1.result.transferId).to.eql(jsonData.scenario2.result.transferId);",
													"});",
													"",
													"pm.test(\"Home transaction Id is 123ABC\", function () {",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData.scenario1.result.homeTransactionId).to.eql(\"123ABC\");",
													"});",
													"    ",
													"pm.test(\"Current state on quote is COMPLETED\", function () {",
													"    var jsonData = pm.response.json();",
													"  pm.expect(jsonData.scenario1.result.currentState).to.eql(\"COMPLETED\");",
													"});",
													"",
													"pm.test(`Transfer amount is ${pm.environment.get('amount')}`, function () {",
													"    var jsonData = pm.response.json();  ",
													"  pm.expect(jsonData.scenario1.result.quoteResponse.transferAmount.amount).to.eql(\"10\");",
													"});",
													"",
													"pm.test(`Currency is ${pm.environment.get('SIMPAYER_CURRENCY')}`, function () {",
													"    var jsonData = pm.response.json();  ",
													"  pm.expect(jsonData.scenario1.result.quoteResponse.transferAmount.currency).to.eql(pm.environment.get('SIMPAYER_CURRENCY'));",
													"});",
													"  ",
													"pm.test(\"Quote response expiration is not null\", function () {",
													"var jsonData = pm.response.json();",
													"pm.expect(jsonData.scenario1.result.quoteResponse.expiration).not.eql(undefined);",
													"});",
													"",
													"pm.test(\"Qupte request ILP packet is not null\", function () {",
													"var jsonData = pm.response.json();",
													"pm.expect(jsonData.scenario1.result.quoteResponse.ilpPacket).not.eql(undefined);",
													"});",
													"",
													"pm.test(\"Quote response condition is not null\", function () {",
													"var jsonData = pm.response.json();",
													"pm.expect(jsonData.scenario1.result.quoteResponse.condition).not.eql(undefined);",
													"});",
													"  ",
													"pm.test(`${pm.environment.get('SIMPAYEE_NAME')} Fee amount is 0`, function () {",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData.scenario1.result.quoteResponse.payeeFspFee.amount).to.eql('0');",
													"});",
													"",
													"pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fee currency is ${pm.environment.get('SIMPAYEE_CURRENCY')}`, function () {",
													"var jsonData = pm.response.json();",
													"pm.expect(jsonData.scenario1.result.quoteResponse.payeeFspFee.currency).to.eql(pm.environment.get('SIMPAYEE_CURRENCY'));",
													"});",
													"",
													"pm.test(`${pm.environment.get('SIMPAYEE_NAME')} Commission amount is 0`, function () {",
													"var jsonData = pm.response.json();",
													"pm.expect(jsonData.scenario1.result.quoteResponse.payeeFspCommission.amount).to.eql(\"0\");",
													"});",
													"",
													"pm.test(`Currency is ${pm.environment.get('SIMPAYEE_CURRENCY')}`, function () {",
													"var jsonData = pm.response.json();",
													"pm.expect(jsonData.scenario1.result.quoteResponse.payeeFspCommission.currency).to.eql(pm.environment.get('SIMPAYEE_CURRENCY'));",
													"});",
													"  ",
													"// Scenario 2 tests",
													"",
													"pm.test(`payer fsp name is ${pm.variables.get('payerName')}`, function () {",
													"var jsonData = pm.response.json();",
													"pm.expect(jsonData.scenario2.result.from.displayName).to.eql(pm.variables.get('payerName'));",
													"});",
													" ",
													"pm.test(\"IdType is MSISDN\", function () {",
													"var jsonData = pm.response.json();",
													"pm.expect(jsonData.scenario2.result.from.idType).to.eql(\"MSISDN\");",
													"});",
													"   ",
													"pm.test(`Payer MSISDN is ${pm.environment.get('SIMPAYER_MSISDN')} `, function () {",
													"var jsonData = pm.response.json(); ",
													"pm.expect(jsonData.scenario2.result.from.idValue).to.eql(pm.environment.get('SIMPAYER_MSISDN'));",
													"});",
													"",
													"pm.test(\"IdType is MSISDN\", function () {",
													"var jsonData = pm.response.json();",
													"pm.expect(jsonData.scenario2.result.to.idType).to.eql(\"MSISDN\");",
													"});",
													"",
													"pm.test(`${pm.environment.get('SIMPAYEE_NAME')}ReceiverMSISDN Value is ${pm.environment.get('SIMPAYEE_MSISDN')}`, function () {",
													"var jsonData = pm.response.json();",
													"pm.expect(jsonData.scenario2.result.to.idValue).to.eql(pm.environment.get('SIMPAYEE_MSISDN'));",
													"});",
													"",
													"pm.test(`fspId is ${pm.environment.get('SIMPAYEE_NAME')}`, function () {",
													"var jsonData = pm.response.json();",
													"pm.expect(jsonData.scenario2.result.to.fspId).to.eql(pm.environment.get('SIMPAYEE_NAME'));",
													"});",
													"",
													"pm.test(\"First name of the party is PayeeFirst\", function () {",
													"var jsonData = pm.response.json();",
													"pm.expect(jsonData.scenario2.result.to.firstName).to.eql(\"PayeeFirst\");",
													"});",
													"",
													"pm.test(\"First name of the party is PayeeLast \", function () {",
													"var jsonData = pm.response.json();",
													"pm.expect(jsonData.scenario2.result.to.lastName).to.eql(\"PayeeLast\");",
													"});",
													"",
													"pm.test(\"Date of Birth of the MSISDN is 2010-10-10 \", function () {",
													"var jsonData = pm.response.json();",
													"pm.expect(jsonData.scenario2.result.to.dateOfBirth).to.eql(\"2010-10-10\");",
													"});",
													"",
													"pm.test(\"Amount-Type in Quote request is SEND\", function () {",
													"var jsonData = pm.response.json();",
													"pm.expect(jsonData.scenario2.result.amountType).to.eql(\"SEND\");",
													"});",
													"",
													"pm.test(` Currency in quotes is ${pm.environment.get('SIMPAYER_CURRENCY')}`, function () {",
													"var jsonData = pm.response.json();",
													"pm.expect(jsonData.scenario2.result.currency).to.eql(pm.environment.get('SIMPAYER_CURRENCY'));",
													"});",
													"    ",
													"pm.test(\" Transfer amount is 10\", function () {",
													"var jsonData = pm.response.json();",
													"pm.expect(jsonData.scenario2.result.amount).to.eql(\"10\");",
													"});",
													"   ",
													"pm.test(\" Transaction Type is TRANSFER\", function () {",
													"var jsonData = pm.response.json(); ",
													"pm.expect(jsonData.scenario2.result.transactionType).to.eql(\"TRANSFER\");",
													"});",
													"   ",
													"pm.test(\"Initiator type is CONSUMER\", function () {",
													"var jsonData = pm.response.json(); ",
													"pm.expect(jsonData.scenario2.result.initiatorType).to.eql(\"CONSUMER\");",
													"});",
													"   ",
													"pm.test(\"note is test payment\", function () {",
													"var jsonData = pm.response.json(); ",
													"pm.expect(jsonData.scenario2.result.note).to.eql(\"test payment\");",
													"});",
													"   ",
													"pm.test(\"HomeTransactionId is 123ABC\", function () {",
													"var jsonData = pm.response.json(); ",
													"pm.expect(jsonData.scenario2.result.homeTransactionId).to.eql(\"123ABC\");",
													"});",
													"    ",
													"pm.test(\"Current state of the transfer is COMPLETED\", function () {",
													"var jsonData = pm.response.json();",
													"pm.expect(jsonData.scenario2.result.currentState).to.eql(\"COMPLETED\");",
													"});",
													"  ",
													"pm.test(\"Transfer Amount is 10\", function () {",
													"var jsonData = pm.response.json();",
													"pm.expect(jsonData.scenario2.result.quoteResponse.transferAmount.amount).to.eql(\"10\");",
													"});",
													"",
													"pm.test(\"Response validation\", function () {",
													"var jsonData = pm.response.json();",
													"pm.expect(jsonData.scenario2.result.quoteResponse.transferAmount.currency).to.eql(pm.environment.get('SIMPAYER_CURRENCY'));",
													"});",
													"",
													"pm.test(\"Quote Expiration is not Null\", function () {",
													"var jsonData = pm.response.json();",
													"pm.expect(jsonData.scenario2.result.quoteResponse.expiration).not.eql(null);",
													"});",
													"",
													"pm.test(\"Response ilpPacket is not null\", function () {",
													"var jsonData = pm.response.json();",
													"pm.expect(jsonData.scenario2.result.quoteResponse.ilpPacket).not.eql(null);",
													"});",
													"",
													"pm.test(\"Response condition is not null\", function () {",
													"var jsonData = pm.response.json();",
													"pm.expect(jsonData.scenario2.result.quoteResponse.condition).not.eql(null);",
													"});",
													"",
													"pm.test(\"PayeeFspFee is 0\", function () {",
													"var jsonData = pm.response.json();",
													"pm.expect(jsonData.scenario2.result.quoteResponse.payeeFspFee.amount).to.eql(\"0\");",
													"});",
													"",
													"pm.test(`Payeefsp fee currency is ${pm.environment.get('SIMPAYEE_CURRENCY')}` , function () {",
													"var jsonData = pm.response.json();",
													"pm.expect(jsonData.scenario2.result.quoteResponse.payeeFspFee.currency).to.eql(pm.environment.get('SIMPAYEE_CURRENCY'));",
													"});",
													"",
													"pm.test(\"Payeefsp commission is 0\", function () {",
													"var jsonData = pm.response.json();",
													"pm.expect(jsonData.scenario2.result.quoteResponse.payeeFspCommission.amount).to.eql(\"0\");",
													"});",
													"",
													"pm.test(` Transfer currency is ${pm.environment.get('SIMPAYEE_CURRENCY')}`, function () {",
													"var jsonData = pm.response.json();",
													"pm.expect(jsonData.scenario2.result.quoteResponse.payeeFspCommission.currency).to.eql(pm.environment.get('SIMPAYEE_CURRENCY'));",
													"});",
													"",
													"pm.test(\"CompletedTimestamp is not empty\", function () {",
													"var jsonData = pm.response.json();",
													"pm.expect(jsonData.scenario2.result.fulfil.completedTimestamp).not.eql(null);",
													"});",
													"",
													"pm.test(\" transferState is COMMITTED\", function () {",
													"var jsonData = pm.response.json();",
													"pm.expect(jsonData.scenario2.result.fulfil.transferState).to.eql(\"COMMITTED\");",
													"});",
													"",
													"pm.test(\" Fulfilment is not empty\", function () {",
													"var jsonData = pm.response.json();",
													"pm.expect(jsonData.scenario2.result.fulfil.fulfilment).not.eql(null);",
													"",
													"});",
													"  ",
													"  //Check Headers for parties endpoint on payee side",
													"  setTimeout(function () {",
													"  pm.sendRequest(pm.environment.get(\"SIMPAYEE_SDK_TESTAPI_URL\")+\"/requests/\"+pm.environment.get(\"SIMPAYEE_MSISDN\"), function (err, response) {",
													"       ",
													"      if(response.responseSize !== 0) { ",
													"      //Checking headers",
													"        var headers = response.json().headers;",
													"        pm.test(`On ${pm.environment.get('SIMPAYER_NAME')} fspiop-source is ${pm.environment.get('SIMPAYER_NAME')}`, function () {",
													"            pm.expect(headers['fspiop-source']).to.eql(pm.environment.get('SIMPAYER_NAME'));",
													"        });",
													"        ",
													"        // pm.test(\"goldenpayeefsp fspiop-destination is goldenpayeefsp\", function () {",
													"        //     pm.expect(headers['fspiop-destination']).to.eql('goldenpayeefsp');",
													"        // });",
													"        ",
													"        pm.test(`On ${pm.environment.get('SIMPAYEE_NAME')} content-type should be application/vnd.interoperability.parties+json;version=1.0`, function () {",
													"            pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.parties+json;version=1.0');",
													"        });",
													"        ",
													"        pm.test(`On ${pm.environment.get('SIMPAYEE_NAME')} accept should be application/vnd.interoperability.parties+json;version=1.0`, function () {",
													"            pm.expect(headers['accept']).to.match(/application\\/vnd\\.interoperability\\.parties\\+json;version=1(\\.\\d)?/);",
													"        });",
													"        ",
													"        pm.test(`On ${pm.environment.get('SIMPAYEE_NAME')} date cannot be null`, function () {",
													"            pm.expect(headers['date']).to.not.eql(undefined);",
													"        });",
													"        ",
													"      } else {",
													"          pm.test(\"Parties FAILED - payeeFSP\", function () {",
													"            throw new Error('Did not receive response');",
													"          });",
													"           ",
													"      }",
													"      ",
													"    });",
													"}, 100)",
													"",
													"//Check Headers and data for parties endpoint on payer side",
													"setTimeout(function () {",
													"  pm.sendRequest(pm.environment.get(\"SIMPAYER_SDK_TESTAPI_URL\")+\"/callbacks/\"+pm.environment.get(\"SIMPAYEE_MSISDN\"), function (err, response) {",
													"       ",
													"      if(response.responseSize !== 0) { ",
													"      //Checking headers",
													"        var headers = response.json().headers;",
													"        pm.test(`On ${pm.environment.get('SIMPAYER_NAME')} fspiop-source is ${pm.environment.get('SIMPAYEE_NAME')}`, function () {",
													"            pm.expect(headers['fspiop-source']).to.eql(pm.environment.get('SIMPAYEE_NAME'));",
													"        });",
													"        ",
													"        pm.test(`On ${pm.environment.get('SIMPAYER_NAME')} fspiop-destination is ${pm.environment.get('SIMPAYER_NAME')}`, function () {",
													"            pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('SIMPAYER_NAME'));",
													"        });",
													"        ",
													"        pm.test(`On ${pm.environment.get('SIMPAYER_NAME')} content-type should be application/vnd.interoperability.parties+json;version=1.0`, function () {",
													"            pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.parties+json;version=1.0');",
													"        });",
													"        ",
													"        pm.test(`${pm.environment.get('SIMPAYER_NAME')} accept is empty`, function () {",
													"            pm.expect(headers['accept']).to.eql(undefined);",
													"        });",
													"        ",
													"        //Validate protected header inside Signature",
													"        var {signature,protectedHeader} = JSON.parse(headers['fspiop-signature'])",
													"        var decodedProtectedHeaders = JSON.parse(atob(protectedHeader))",
													"        console.log('decodedProtectedHeaders:',decodedProtectedHeaders)",
													"        ",
													"        // pm.test(\"FSPIOP-Signature signature is returned\", function () {",
													"        //     pm.expect(signature).to.eql(pm.environment.get(\"payeefsp-signature\"));",
													"        // });",
													"        ",
													"        pm.test(\"FSPIOP-Signature Protected Header alg to be RS256\", function () {",
													"            pm.expect(decodedProtectedHeaders['alg']).to.eql('RS256');",
													"        });",
													"        pm.test(\"FSPIOP-Signature Protected Header FSPIOP-URI to be /parties/MSISDN/\"+pm.environment.get(\"SIMPAYEE_MSISDN\"), function () {",
													"            pm.expect(decodedProtectedHeaders['FSPIOP-URI']).to.eql('/parties/MSISDN/'+pm.environment.get(\"SIMPAYEE_MSISDN\"));",
													"        });",
													"        ",
													"",
													"        pm.test(\"FSPIOP-Signature Protected Header FSPIOP-HTTP-Method to be PUT\", function () {",
													"            pm.expect(decodedProtectedHeaders['FSPIOP-HTTP-Method']).to.eql('PUT');",
													"        });",
													"        pm.test(\"FSPIOP-Signature Protected Header FSPIOP-Source to be payeefsp\", function () {",
													"            pm.expect(decodedProtectedHeaders['FSPIOP-Source']).to.eql(pm.environment.get('SIMPAYEE_NAME'));",
													"        });",
													"        pm.test(`FSPIOP-Signature Protected Header FSPIOP-Destination to be pm.environment.get('SIMPAYER_NAME')`, function () {",
													"            pm.expect(decodedProtectedHeaders['FSPIOP-Destination']).to.eql(pm.environment.get('SIMPAYER_NAME'));",
													"        });",
													"        pm.test(\"FSPIOP-Signature Protected Header Date is present\", function () {",
													"            pm.expect(decodedProtectedHeaders['Date']).to.not.eql(undefined);",
													"        });",
													"       ",
													"        pm.test(`${pm.environment.get('SIMPAYER_NAME')} FSPIOP-URI to be /parties/MSISDN/${pm.environment.get(\"SIMPAYEE_MSISDN\")}`, function () {",
													"            pm.expect(headers['fspiop-uri']).to.eql('/parties/MSISDN/'+pm.environment.get(\"SIMPAYEE_MSISDN\"));",
													"        });",
													"        ",
													"        pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-http-method is PUT`, function () {",
													"            pm.expect(headers['fspiop-http-method']).to.eql('PUT');",
													"        });",
													"        ",
													"      //Checking data",
													"      var jsonData = response.json().data;",
													"        pm.test(\"Expected partyIdType is MSISDN\", function () {",
													"          pm.expect(jsonData.party.partyIdInfo.partyIdType).to.eql('MSISDN');",
													"        });",
													"        pm.test(\"Expected partyIdentifier is \"+pm.environment.get('SIMPAYEE_MSISDN'), function () {",
													"          pm.expect(jsonData.party.partyIdInfo.partyIdentifier).to.eql(pm.environment.get('SIMPAYEE_MSISDN'));",
													"        });",
													"        pm.test(`Expected fspId is ${pm.environment.get('SIMPAYEE_NAME')}`, function () {",
													"          pm.expect(jsonData.party.partyIdInfo.fspId).to.eql(pm.environment.get('SIMPAYEE_NAME'));",
													"        });",
													"        ",
													"      pm.test(\"Expected receiver first name is: \"+pm.variables.get(\"expectedPayeeFirstName\"), function () {",
													"          pm.expect(jsonData.party.personalInfo.complexName.firstName).to.eql(pm.variables.get(\"expectedPayeeFirstName\"));",
													"        });",
													"        pm.test(\"Expected receiver last name is: \"+pm.variables.get(\"expectedPayeeLastName\"), function () {",
													"          pm.expect(jsonData.party.personalInfo.complexName.lastName).to.eql(pm.variables.get(\"expectedPayeeLastName\"));",
													"        });",
													"        pm.test(\"Expected receiver DOB: \"+pm.variables.get(\"expectedPayeeDOB\"), function () {",
													"          pm.expect(jsonData.party.personalInfo.dateOfBirth).to.eql(pm.variables.get(\"expectedPayeeDOB\"));",
													"        });  ",
													"        ",
													"      } else {",
													"          pm.test(\"Parties FAILED - payerFSP\", function () {",
													"            throw new Error('Did not receive response');",
													"          });",
													"        }",
													"    });",
													"}, 100)",
													"",
													"var transferID = pm.response.json().scenario1.result.transferId",
													"//Check the request that Switch forwards to payeefsp",
													"setTimeout(function () {",
													"  pm.sendRequest(pm.environment.get(\"SIMPAYEE_SDK_TESTAPI_URL\")+\"/requests/\"+transferID, function (err, response) {",
													"          if(response.responseSize !== 0) {",
													"              ",
													"              //Check the Headers",
													"              var headers = response.json().headers;",
													"              ",
													"                pm.test(`On ${pm.environment.get('SIMPAYEE_NAME')} fspiop-source is ${pm.environment.get('SIMPAYER_NAME')}`, function () {",
													"                    pm.expect(headers['fspiop-source']).to.eql(pm.environment.get('SIMPAYER_NAME'));",
													"                });",
													"                ",
													"                pm.test(`On ${pm.environment.get('SIMPAYEE_NAME')} fspiop-destination is ${pm.environment.get('SIMPAYEE_NAME')}`, function () {",
													"                    pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('SIMPAYEE_NAME'));",
													"                });",
													"                ",
													"                pm.test(`On ${pm.environment.get('SIMPAYEE_NAME')} content-type is same as sent in the request`, function () {",
													"                    pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.transfers+json;version=1.0');",
													"                });",
													"                ",
													"                pm.test(`On ${pm.environment.get('SIMPAYEE_NAME')} accept is same as sent in the request`, function () {",
													"                    pm.expect(headers['accept']).to.match(/application\\/vnd\\.interoperability\\.transfers\\+json;version=1(\\.\\d)?/);",
													"                });",
													"                ",
													"                pm.test(`On ${pm.environment.get('SIMPAYEE_NAME')} fspiop-http-method is POST`, function () {",
													"                    pm.expect(headers['fspiop-http-method']).to.eql('POST');",
													"                });",
													"                ",
													"                pm.test(`On ${pm.environment.get('SIMPAYEE_NAME')} fspiop-uri is /transfers`, function () {",
													"                    pm.expect(headers['fspiop-uri']).to.eql('/transfers');",
													"                });",
													"                ",
													"                ",
													"                //Check the data",
													"                var jsonData = response.json().data;",
													"                pm.test(`On ${pm.environment.get('SIMPAYEE_NAME')} data should have the same transferId as request`, function () {",
													"                  pm.expect(jsonData.transferId).to.eql(transferID);",
													"                });",
													"                pm.test(`On ${pm.environment.get('SIMPAYEE_NAME')} data should have the same ${pm.environment.get('SIMPAYER_NAME')} as request`, function () {",
													"                  pm.expect(jsonData.payerFsp).to.eql(pm.environment.get('SIMPAYER_NAME'));",
													"                });",
													"                pm.test(`On ${pm.environment.get('SIMPAYEE_NAME')} data should have the same ${pm.environment.get('SIMPAYEE_NAME')} as request`, function () {",
													"                  pm.expect(jsonData.payeeFsp).to.eql(pm.environment.get('SIMPAYEE_NAME'));",
													"                });",
													"                pm.test(`On ${pm.environment.get('SIMPAYEE_NAME')} data should have the same amount as request`, function () {",
													"                  pm.expect(jsonData.amount.amount).to.eql('10');",
													"                });",
													"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} data should have the same currency as request`, function () {",
													"                  pm.expect(jsonData.amount.currency).to.eql(pm.environment.get('SIMPAYER_CURRENCY'));",
													"                });",
													"                // pm.test(\"payeefsp data should have the same expiration as request\", function () {",
													"                //   pm.expect(jsonData.expiration).to.eql(pm.environment.get(\"transferExpiration\"));",
													"                // });",
													"                // pm.test(\"payeefsp data should have the same ilpPacket as request\", function () {",
													"                //   pm.expect(jsonData.ilpPacket).to.eql(pm.environment.get(\"ilpPacket\"));",
													"                // });",
													"                // pm.test(\"payeefsp data should have the same condition as request\", function () {",
													"                //   pm.expect(jsonData.condition).to.eql(pm.environment.get(\"condition\"));",
													"                // });",
													"                ",
													"          } else {",
													"              pm.test(\"Transfer FAILED\", function () {",
													"                throw new Error('Did not receive response');",
													"              });",
													"",
													"          }",
													"  });",
													"}, pm.environment.get(\"SET_TIMEOUT_TRANSFERS\"))",
													"",
													"//Check the callback response that Switch forwards to payerfsp",
													"setTimeout(function () {",
													"  pm.sendRequest(pm.environment.get(\"SIMPAYER_SDK_TESTAPI_URL\")+\"/callbacks/\"+transferID, function (err, response) {",
													"          if(response.responseSize !== 0) {",
													"            //Checking headers",
													"            var headers = response.json().headers;",
													"            pm.test(`On ${pm.environment.get('SIMPAYEE_NAME')} fspiop-source is ${pm.environment.get('SIMPAYEE_NAME')}`, function () {",
													"                pm.expect(headers['fspiop-source']).to.eql(pm.environment.get('SIMPAYEE_NAME'));",
													"            });",
													"            ",
													"            pm.test(`On ${pm.environment.get('SIMPAYER_NAME')} fspiop-destination is ${pm.environment.get('SIMPAYER_NAME')}`, function () {",
													"                pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('SIMPAYER_NAME'));",
													"            });",
													"            ",
													"            pm.test(`On ${pm.environment.get('SIMPAYER_NAME')} content-type should be application/vnd.interoperability.transfers+json;version=1.0`, function () {",
													"                pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.transfers+json;version=1.0');",
													"            });",
													"            ",
													"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} accept is empty`, function () {",
													"                pm.expect(headers['accept']).to.eql(undefined);",
													"            });",
													"            ",
													"            // pm.test(\"fspiop-signature is returned\", function () {",
													"            //     pm.expect(headers['fspiop-signature']).to.eql(pm.environment.get(\"SIMPAYEE_FSPIOP_SIGNATURE\"));",
													"            // });",
													"           ",
													"            ",
													"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-uri includes transfers`, function () {",
													"                pm.expect(headers['fspiop-uri']).to.include('/transfers');",
													"            });",
													"            ",
													"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-http-method is PUT`, function () {",
													"                pm.expect(headers['fspiop-http-method']).to.eql('PUT');",
													"            });",
													"            ",
													"            var jsonData = response.json().data;",
													"            pm.test(\"Response data does not have transferId\", function () {",
													"              pm.expect(jsonData.transferId).to.eql(undefined);",
													"            });",
													"            pm.test(\"Response status is COMMITTED\", function () {",
													"                pm.expect(jsonData.transferState).to.eql('COMMITTED');",
													"            });",
													"          } else {",
													"              pm.test(\"Transfer FAILED\", function () {",
													"                throw new Error('Did not receive response');",
													"              });",
													"",
													"          }",
													"  });",
													"}, pm.environment.get(\"SET_TIMEOUT_TRANSFERS\"))",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Accept",
												"type": "text",
												"value": "application/vnd.interoperability.transfers+json;version=1.0",
												"disabled": true
											},
											{
												"key": "Content-Type",
												"type": "text",
												"value": "application/vnd.interoperability.transfers+json;version=1.0",
												"disabled": true
											},
											{
												"key": "Date",
												"type": "text",
												"value": "{{transferDate}}",
												"disabled": true
											},
											{
												"key": "FSPIOP-Source",
												"type": "text",
												"value": "{{SIMPAYER_NAME}}",
												"disabled": true
											},
											{
												"key": "FSPIOP-Destination",
												"type": "text",
												"value": "{{SIMPAYEE_NAME}}",
												"disabled": true
											},
											{
												"key": "Content-Type",
												"type": "text",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "[\n    {\n        \"name\": \"scenario1\",\n        \"operation\": \"postTransfers\",\n        \"body\": {\n            \"from\": {\n                \"displayName\": \"{{payerName}}\",\n                \"idType\": \"MSISDN\",\n                \"idValue\": \"{{SIMPAYER_MSISDN}}\"\n            },\n            \"to\": {\n                \"idType\": \"MSISDN\",\n                \"idValue\": \"{{SIMPAYEE_MSISDN}}\"\n            },\n            \"amountType\": \"SEND\",\n            \"currency\": \"{{SIMPAYER_CURRENCY}}\",\n            \"amount\": \"10\",\n            \"transactionType\": \"TRANSFER\",\n            \"initiatorType\":\"CONSUMER\",\n            \"note\": \"test payment\",\n            \"homeTransactionId\": \"123ABC\"\n        }\n    },\n    {\n        \"name\": \"scenario2\",\n        \"operation\": \"putTransfers\",\n        \n        \"params\": {\n            \"transferId\": \"{{scenario1.result.transferId}}\"\n        },\n        \"body\": {\n            \"acceptQuote\": true\n        }\n    }\n]"
										},
										"url": {
											"raw": "{{SIMPAYER_BACKEND_TESTAPI_URL}}/scenarios",
											"host": [
												"{{SIMPAYER_BACKEND_TESTAPI_URL}}"
											],
											"path": [
												"scenarios"
											]
										}
									},
									"response": []
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						}
					],
					"description": "Author: Sridevi Miriyala\nDescription: Contains scripts that test with post /scenarios on majaloop sim backend",
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				},
				{
					"name": "block_transfer",
					"item": [
						{
							"name": "GET limits - SIMPAYER",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "786a1acb-94a4-41e3-a31f-571efbdc2be4",
										"exec": [
											"pm.test(\"Status code is 200\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"var jsonData = pm.response.json();",
											"jsonData.forEach( ndcPerCurrency => {",
											"    pm.environment.set(`${pm.environment.get('SIMPAYER_NAME')}${ndcPerCurrency.currency}NDC`, `${ndcPerCurrency.limit.value}`)",
											"})",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "FSPIOP-Source",
										"value": "hub_operator",
										"type": "text"
									}
								],
								"url": {
									"raw": "{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}/participants/{{SIMPAYER_NAME}}/limits",
									"host": [
										"{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}"
									],
									"path": [
										"participants",
										"{{SIMPAYER_NAME}}",
										"limits"
									]
								},
								"description": "review the payerfsp limits/NDC"
							},
							"response": []
						},
						{
							"name": "GET limits - SIMPAYEE",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "047b943c-cc41-4677-b244-ae0d40d700d0",
										"exec": [
											"pm.test(\"Status code is 200\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"var jsonData = pm.response.json();",
											"var payeeNDC = jsonData[0].limit.value",
											"pm.environment.set('payeeNDC',payeeNDC)"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "FSPIOP-Source",
										"value": "hub_operator",
										"type": "text"
									}
								],
								"url": {
									"raw": "{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}/participants/{{SIMPAYEE_NAME}}/limits",
									"host": [
										"{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}"
									],
									"path": [
										"participants",
										"{{SIMPAYEE_NAME}}",
										"limits"
									]
								},
								"description": "review payeefsp limits/NDC"
							},
							"response": []
						},
						{
							"name": "Get SIMPAYER position before TheTransfer",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "8ca6288e-61d6-44e2-8ba3-873da7a299b9",
										"exec": [
											"pm.test(\"Status code is 200\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"var jsonData = pm.response.json();",
											"/*var result;",
											"",
											"jsonData.forEach( entry => {(entry.currency === pm.environment.get(\"currency\")) ? result = entry.value: result =",
											" undefined})",
											"",
											"pm.test(\"Atleast one account position should be returned\", function () {",
											"    pm.environment.set(`${pm.environment.get('SIMPAYER_NAME')}PositionBeforeTransfer`, result);",
											"    pm.expect(jsonData).to.be.not.empty;",
											"});",
											"*/",
											"",
											"// for (var i in jsonData){",
											"//     if(jsonData[i].currency === pm.environment.get('currency')) {",
											"//   pm.test(\"Atleast one account position should be returned\", function () {",
											"//     pm.environment.set(`${pm.environment.get('SIMPAYER_NAME')}PositionBeforeTransfer`, jsonData[i].value);",
											"//     pm.expect(jsonData).to.be.not.empty;",
											"//   });",
											"//     }",
											"   ",
											"// }",
											"",
											"jsonData.forEach(positionPerCurrency => {",
											"    pm.environment.set(`${pm.environment.get('SIMPAYER_NAME')}${positionPerCurrency.currency}PositionBeforeTransfer`, positionPerCurrency.value);",
											"})",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "FSPIOP-Source",
										"type": "text",
										"value": "hub_operator"
									}
								],
								"url": {
									"raw": "{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}/participants/{{SIMPAYER_NAME}}/positions",
									"host": [
										"{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}"
									],
									"path": [
										"participants",
										"{{SIMPAYER_NAME}}",
										"positions"
									]
								},
								"description": "view payerfsp current position before sending the transfer"
							},
							"response": []
						},
						{
							"name": "Get SIMPAYEE position before TheTransfer",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "496c3980-2e03-4e94-9148-53e8bade7825",
										"exec": [
											"pm.test(\"Status code is 200\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"var jsonData = pm.response.json();",
											"/*var result;",
											"",
											"jsonData.forEach( entry => {(entry.currency === pm.environment.get(\"currency\")) ? result = entry.value: result =",
											" undefined})",
											"",
											"pm.test(\"Atleast one account position should be returned\", function () {",
											"    pm.environment.set(\"payeefspPositionBeforeTransfer\", result);",
											"    pm.expect(jsonData).to.be.not.empty;",
											"});*/",
											"",
											"for (var i in jsonData){",
											"    if(jsonData[i].currency === pm.environment.get('SIMPAYEE_CURRENCY')) {",
											"  pm.test(\"Atleast one account position should be returned\", function () {",
											"    pm.environment.set(`${pm.environment.get('SIMPAYEE_NAME')}PositionBeforeTransfer`, jsonData[i].value);",
											"    pm.expect(jsonData).to.be.not.empty;",
											"  });",
											"    }",
											"   ",
											"}",
											"",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "FSPIOP-Source",
										"type": "text",
										"value": "hub_operator"
									}
								],
								"url": {
									"raw": "{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}/participants/{{SIMPAYEE_NAME}}/positions",
									"host": [
										"{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}"
									],
									"path": [
										"participants",
										"{{SIMPAYEE_NAME}}",
										"positions"
									]
								},
								"description": "Get payeefsp current position before sending the transfer"
							},
							"response": []
						},
						{
							"name": "Send Quote",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "da48378c-c054-424f-9ef4-035b9b94844a",
										"exec": [
											"var navigator = {}; ",
											"var window = {}; ",
											"eval(pm.environment.get('jrsassign'));",
											"",
											"",
											"var uuid = require('uuid');",
											"var generatedUUID = uuid.v4();",
											"pm.environment.set('quoteId', generatedUUID);",
											"generatedUUID = uuid.v4();",
											"pm.environment.set('transactionId', generatedUUID);",
											"",
											"pm.variables.set('quoteDate', (new Date()).toUTCString());",
											"pm.variables.set('payerName', 'PayerFirst PayerLast');",
											"",
											"pm.variables.set('expectedPayeeFirstName', 'GoldenFirst');",
											"pm.variables.set('expectedPayeeLastName', 'GoldenLast');",
											"pm.variables.set('expectedPayeeDOB', '2010-10-10');",
											"",
											"var oHeader = {alg: \"RS256\", \"FSPIOP-Source\": pm.environment.get('SIMPAYER_NAME'),\"FSPIOP-Destination\":pm.environment.get('SIMPAYEE_NAME'), \"FSPIOP-URI\":\"/quotes\", \"FSPIOP-HTTP-Method\":\"POST\", \"Date\":pm.variables.get('quoteDate')};",
											"var sHeader = JSON.stringify(oHeader);",
											"console.log(`sHeader: ${sHeader}`)",
											"",
											"var objPayload = {",
											"  \"quoteId\": pm.environment.get('quoteId'),",
											"  \"transactionId\": pm.environment.get('transactionId'),",
											"  \"payer\": {",
											"    \"partyIdInfo\": {",
											"      \"partyIdType\": \"MSISDN\",",
											"      \"partyIdentifier\": pm.environment.get('SIMPAYER_MSISDN'),",
											"      \"fspId\": pm.environment.get('SIMPAYER_NAME')",
											"    },",
											"    \"personalInfo\": {",
											"      \"complexName\": {",
											"        \"firstName\": \"Mats\",",
											"        \"lastName\": \"Hagman\"",
											"      },",
											"      \"dateOfBirth\": \"1983-10-25\"",
											"    }",
											"  },",
											"  \"payee\": {",
											"    \"partyIdInfo\": {",
											"      \"partyIdType\": \"MSISDN\",",
											"      \"partyIdentifier\": pm.environment.get('SIMPAYEE_MSISDN'),",
											"      \"fspId\": pm.environment.get('SIMPAYEE_NAME')",
											"    }",
											"  },",
											"  \"amountType\": \"RECEIVE\",",
											"  \"amount\": {",
											"    \"amount\": \"60\",",
											"    \"currency\": pm.environment.get('SIMPAYEE_CURRENCY')",
											"  },",
											"  \"transactionType\": {",
											"    \"scenario\": \"TRANSFER\",",
											"    \"initiator\": \"PAYER\",",
											"    \"initiatorType\": \"CONSUMER\"",
											"  },",
											"  \"note\": \"hej\"",
											"}",
											"",
											"var sPayload = JSON.stringify(objPayload)",
											"console.log(`sPayload: ${sPayload}`)",
											"pm.variables.set(\"quoteRequest\", sPayload);",
											"var token = KJUR.jws.JWS.sign(\"RS256\", sHeader, sPayload, pm.environment.get('SIMPAYER_JWS_KEY'));",
											"console.log(`token: ${token}`)",
											"",
											"// var encodedHeaders = btoa(sHeader)",
											"",
											"// var ofspiopSignature = {signature: vSignature, protectedHeader: encodedHeaders}",
											"// var token = JSON.stringify(ofspiopSignature)",
											"",
											"const [ protectedHeaderBase64, , signature ] = token.split('.');",
											"",
											"const signatureObject = {",
											"    signature: signature.replace('\"', ''),",
											"    protectedHeader: protectedHeaderBase64.replace('\"', '')",
											"};",
											"",
											"console.log(JSON.stringify(signatureObject))",
											"",
											"pm.variables.set('fspiopSignature',JSON.stringify(signatureObject))",
											"",
											"",
											"",
											"",
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "aea47571-c0e1-492d-92c7-a03cd835b6a3",
										"exec": [
											"pm.test(\"Status code is 202\", function () {",
											"    pm.response.to.have.status(202);",
											"});",
											"",
											"setTimeout(function () {",
											"  pm.sendRequest(pm.environment.get(\"SIMPAYEE_SDK_TESTAPI_URL\")+\"/requests/\"+pm.variables.get(\"quoteId\"), function (err, response) {",
											"          if(response.responseSize !== 0) {",
											"              ",
											"              //Check the Headers",
											"              var headers = response.json().headers;",
											"              ",
											"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-source is ${pm.environment.get('SIMPAYER_NAME')}`, function () {",
											"                    pm.expect(headers['fspiop-source']).to.eql(pm.environment.get('SIMPAYER_NAME'));",
											"                });",
											"                ",
											"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-destination is ${pm.environment.get('SIMPAYEE_NAME')}`, function () {",
											"                    pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('SIMPAYEE_NAME'));",
											"                });",
											"                ",
											"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-signature is same as sent in the request`, function () {",
											"                    pm.expect(headers['fspiop-signature']).to.eql(pm.variables.get(\"fspiopSignature\"));",
											"                });",
											"                ",
											"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} accept is same as sent in the request`, function () {",
											"                    pm.expect(headers['accept']).to.match(/application\\/vnd\\.interoperability\\.quotes\\+json;version=1(\\.\\d)?/);",
											"                });",
											"                ",
											"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} content-typeis same as sent in the request`, function () {",
											"                    pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.quotes+json;version=1.0');",
											"                });",
											"                ",
											"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-uri is /quotes`, function () {",
											"                    pm.expect(headers['fspiop-uri']).to.eql('/quotes');",
											"                });",
											"                ",
											"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-http-method is POST`, function () {",
											"                    pm.expect(headers['fspiop-http-method']).to.eql('POST');",
											"                });",
											"                ",
											"          } else {",
											"              pm.test(\"Quote FAILED\", function () {",
											"                throw new Error('Did not receive request on payee side');",
											"              });",
											"              // postman.setNextRequest(null)",
											"          }",
											"   });",
											"}, pm.environment.get(\"SET_TIMEOUT_QUOTES\"))",
											"",
											"setTimeout(function () {",
											"  pm.sendRequest(pm.environment.get(\"SIMPAYER_SDK_TESTAPI_URL\")+\"/callbacks/\"+pm.environment.get(\"quoteId\"), function (err, response) {",
											"      if(response.responseSize !== 0) {",
											"          //Checking headers",
											"            var headers = response.json().headers;",
											"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-source is ${pm.environment.get('SIMPAYEE_NAME')}`, function () {",
											"                pm.expect(headers['fspiop-source']).to.eql(pm.environment.get('SIMPAYEE_NAME'));",
											"            });",
											"            ",
											"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-destination is ${pm.environment.get('SIMPAYER_NAME')}`, function () {",
											"                pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('SIMPAYER_NAME'));",
											"            });",
											"            ",
											"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} content-type should be application/vnd.interoperability.quotes+json;version=1.0`, function () {",
											"                pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.quotes+json;version=1.0');",
											"            });",
											"            ",
											"            pm.test(`${pm.environment.get('SIMPAYER_NAME')}  accept is empty`, function () {",
											"                pm.expect(headers['accept']).to.eql(undefined);",
											"            });",
											"            ",
											"            ",
											"            ",
											"            var {signature,protectedHeader} = JSON.parse(headers['fspiop-signature'])",
											"            // var strData = JSON.stringify(response.json().data)",
											"            // const token = `${protectedHeader}.${btoa(strData)}.${signature}`",
											"            // console.log(`token: ${token}`)",
											"            // var isValid = KJUR.jws.JWS.verify(token, pm.environment.get('goldenpayeefspJWSPubKey'), {alg: ['RS256']})",
											"            // console.log(`isValid: ${isValid}`)",
											"            // pm.test(\"Check if the response is JWS valid\", function () {",
											"            //     pm.expect(isValid).to.eql(true);",
											"            // });",
											"            ",
											"            //Validate protected header inside Signature",
											"            var decodedProtectedHeaders = JSON.parse(atob(protectedHeader))",
											"            console.log('decodedProtectedHeaders:',decodedProtectedHeaders)",
											"            ",
											"            pm.test(\"FSPIOP-Signature Protected Header alg to be RS256\", function () {",
											"                pm.expect(decodedProtectedHeaders['alg']).to.eql('RS256');",
											"            });",
											"            pm.test(\"FSPIOP-Signature Protected Header FSPIOP-URI to be /quotes/\"+pm.environment.get(\"quoteId\"), function () {",
											"                pm.expect(decodedProtectedHeaders['FSPIOP-URI']).to.eql('/quotes/'+pm.environment.get(\"quoteId\"));",
											"            });",
											"            ",
											"",
											"            pm.test(\"FSPIOP-Signature Protected Header FSPIOP-HTTP-Method to be PUT\", function () {",
											"                pm.expect(decodedProtectedHeaders['FSPIOP-HTTP-Method']).to.eql('PUT');",
											"            });",
											"            pm.test(`FSPIOP-Signature Protected Header FSPIOP-Source to be ${pm.environment.get('SIMPAYEE_NAME')}`, function () {",
											"                pm.expect(decodedProtectedHeaders['FSPIOP-Source']).to.eql(pm.environment.get('SIMPAYEE_NAME'));",
											"            });",
											"            pm.test(`FSPIOP-Signature Protected Header FSPIOP-Destination to be ${pm.environment.get('SIMPAYER_NAME')}`, function () {",
											"                pm.expect(decodedProtectedHeaders['FSPIOP-Destination']).to.eql(pm.environment.get('SIMPAYER_NAME'));",
											"            });",
											"            pm.test(\"FSPIOP-Signature Protected Header Date is present\", function () {",
											"                pm.expect(decodedProtectedHeaders['Date']).to.not.eql(undefined);",
											"            });",
											"           ",
											"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} FSPIOP-URI to be /quotes/${pm.environment.get(\"quoteId\")}`, function () {",
											"                pm.expect(headers['fspiop-uri']).to.eql('/quotes/'+pm.environment.get(\"quoteId\"));",
											"            });",
											"            ",
											"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-http-method is PUT`, function () {",
											"                pm.expect(headers['fspiop-http-method']).to.eql('PUT');",
											"            });",
											"            ",
											"            var jsonData = response.json().data;",
											"            ",
											"            pm.test(\"Response quoteId is  null\", function () {",
											"                pm.expect(jsonData.quoteId).to.eql(undefined);",
											"                ",
											"            });",
											"          ",
											"            pm.test(\"Response ilpPacket is not null\", function () {",
											"                pm.expect(jsonData.ilpPacket).not.equal(undefined);",
											"                pm.environment.set(\"ilpPacket\", jsonData.ilpPacket);",
											"            });",
											"       ",
											"           pm.test(\"Response condition is not null\", function () {",
											"               pm.expect(jsonData.condition).not.equal(undefined);",
											"               pm.environment.set(\"condition\", jsonData.condition);",
											"           });",
											"      } else {",
											"          pm.test(\"Quote FAILED\", function () {",
											"            throw new Error('Did not receive response on Payer side');",
											"           });",
											"           // postman.setNextRequest(null);",
											"      }",
											"       ",
											"   });",
											"}, pm.environment.get(\"SET_TIMEOUT_QUOTES\"))",
											"",
											"",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{SIMPAYER_BEARER_TOKEN}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Accept",
										"value": "application/vnd.interoperability.quotes+json;version=1.0"
									},
									{
										"key": "Content-Type",
										"value": "application/vnd.interoperability.quotes+json;version=1.0"
									},
									{
										"key": "Date",
										"value": "{{quoteDate}}"
									},
									{
										"key": "FSPIOP-Source",
										"value": "{{SIMPAYER_NAME}}"
									},
									{
										"key": "FSPIOP-Destination",
										"value": "{{SIMPAYEE_NAME}}"
									},
									{
										"key": "FSPIOP-Signature",
										"type": "text",
										"value": "{{fspiopSignature}}"
									},
									{
										"key": "FSPIOP-HTTP-Method",
										"type": "text",
										"value": "POST"
									},
									{
										"key": "FSPIOP-URI",
										"type": "text",
										"value": "/quotes"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{{quoteRequest}}"
								},
								"url": {
									"raw": "{{HOST_QUOTING_SERVICE}}/quotes",
									"host": [
										"{{HOST_QUOTING_SERVICE}}"
									],
									"path": [
										"quotes"
									]
								}
							},
							"response": []
						},
						{
							"name": "Send Block Transfer",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "8ba2d1fe-6564-4274-8d6e-d511ad8938f5",
										"exec": [
											"pm.test(\"Status code is 202\", function () {",
											"    pm.response.to.have.status(202);",
											"});",
											"",
											"// pm.test(\"Check that Content-Type is present\", function () {",
											"//     pm.response.to.have.header(\"Content-Type\");",
											"//     pm.response.to.be.header(\"Content-Type\", \"application/vnd.interoperability.transfers+json;version=1.0\");",
											"// });",
											"",
											"setTimeout(function () {",
											"  pm.sendRequest(pm.environment.get(\"SIMPAYER_SDK_TESTAPI_URL\")+\"/callbacks/\"+pm.environment.get(\"transfer_ID\"), function (err, response) {",
											"          if(response.responseSize !== 0) {",
											"              var jsonData = response.json().data;",
											"              var headers = response.json().headers;",
											"              pm.test(\"Error Code should be returned\", function () {",
											"                pm.expect(jsonData.errorInformation.errorCode).to.eql('4001');",
											"              });",
											"              pm.test(\"Error Description should be returned\", function () {",
											"                pm.expect(jsonData.errorInformation.errorDescription).to.eql('Payer FSP insufficient liquidity');",
											"              });",
											"              pm.test(\"fspiop-source is switch\", function () {",
											"                pm.expect(headers['fspiop-source']).to.eql('switch');",
											"            });",
											"",
											"            pm.test(`fspiop-destination is ${pm.environment.get('SIMPAYER_NAME')}`, function () {",
											"                pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('SIMPAYER_NAME'));",
											"            });",
											"            ",
											"            pm.test(\"accept is empty\", function () {",
											"                pm.expect(headers['accept']).to.eql(undefined);",
											"            });",
											"            ",
											"            pm.test(\"content-type should be application/vnd.interoperability.transfers+json;version=1.0\", function () {",
											"                pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.transfers+json;version=1.0');",
											"            });",
											"            ",
											"            pm.test(\"fspiop-signature is present\", function () {",
											"                pm.expect(headers['fspiop-signature']).to.not.eql(undefined);",
											"            });",
											"            ",
											"            pm.test(`fspiop-uri is /transfers/${pm.environment.get('transfer_ID')}/error`, function () {",
											"                pm.expect(headers['fspiop-uri']).to.eql(`/transfers/${pm.environment.get('transfer_ID')}/error`);",
											"            });",
											"            ",
											"            pm.test(\"fspiop-http-method is PUT\", function () {",
											"                pm.expect(headers['fspiop-http-method']).to.eql('PUT');",
											"            });",
											"            ",
											"          } else {",
											"              pm.test(\"Transfer FAILED\", function () {",
											"                throw new Error('Did not receive response');",
											"              });",
											"              // postman.setNextRequest(null)",
											"          }",
											"   });",
											"}, pm.environment.get(\"SET_TIMEOUT_TRANSFERS\"))",
											"",
											"pm.environment.set('transferAmount', 100);",
											"",
											"",
											"",
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "c5f2e2c2-4ea6-47d9-8f47-eb5bb817f1ac",
										"exec": [
											"var navigator = {}; //fake a navigator object for the lib",
											"var window = {}; //fake a window object for the lib",
											"eval(pm.environment.get('jrsassign'));",
											"",
											"var uuid = require('uuid');",
											"var generatedUUID = uuid.v4();",
											"pm.environment.set('transfer_ID', pm.environment.get('transactionId'));",
											"pm.environment.set('transferDate', (new Date()).toUTCString());",
											"",
											"pm.environment.set(\"transferExpiration\",new Date(new Date().getTime() + 600000));",
											"",
											"var payerfspDefCurNDC = `${pm.environment.get('SIMPAYER_NAME')}${pm.environment.get('SIMPAYER_CURRENCY')}NDC`;",
											"var payerfspDefCurPositionBeforeTransfer = `${pm.environment.get('SIMPAYER_NAME')}${pm.environment.get('SIMPAYER_CURRENCY')}PositionBeforeTransfer`;",
											"",
											"var amount = Number(pm.environment.get(payerfspDefCurNDC))-Number(pm.environment.get(payerfspDefCurPositionBeforeTransfer))+100;",
											"",
											"var oHeader = {alg: \"RS256\", \"FSPIOP-Source\": pm.environment.get('SIMPAYER_NAME'),\"FSPIOP-Destination\": pm.environment.get('SIMPAYEE_NAME'), \"FSPIOP-URI\":\"/transfers\", \"FSPIOP-HTTP-Method\":\"POST\", \"Date\":pm.variables.get('transferDate')};",
											"var sHeader = JSON.stringify(oHeader);",
											"console.log(`sHeader: ${sHeader}`)",
											"",
											"var objPayload = {",
											"  \"transferId\": pm.environment.get('transfer_ID'),",
											"  \"payerFsp\": pm.environment.get('SIMPAYER_NAME'),",
											"  \"payeeFsp\": pm.environment.get('SIMPAYEE_NAME'),",
											"  \"amount\": {",
											"    \"amount\": `${amount}`,",
											"    \"currency\": pm.environment.get('SIMPAYEE_CURRENCY')",
											"  },",
											"  \"expiration\": pm.environment.get('transferExpiration'),",
											"  \"ilpPacket\": pm.environment.get('ilpPacket'),",
											"  \"condition\": pm.environment.get('condition')",
											"}",
											"var sPayload = JSON.stringify(objPayload)",
											"console.log(`sPayload: ${sPayload}`)",
											"pm.variables.set(\"transferRequest\", sPayload);",
											"var token = KJUR.jws.JWS.sign(\"RS256\", sHeader, sPayload, pm.environment.get('SIMPAYER_JWS_KEY'));",
											"//console.log(`token: ${token}`)",
											"",
											"// var encodedHeaders = btoa(sHeader)",
											"",
											"// var ofspiopSignature = {signature: vSignature, protectedHeader: encodedHeaders}",
											"// var token = JSON.stringify(ofspiopSignature)",
											"",
											"const [ protectedHeaderBase64, , signature ] = token.split('.');",
											"",
											"const signatureObject = {",
											"    signature: signature.replace('\"', ''),",
											"    protectedHeader: protectedHeaderBase64.replace('\"', '')",
											"};",
											"",
											"console.log(JSON.stringify(signatureObject))",
											"",
											"pm.variables.set('fspiopSignature',JSON.stringify(signatureObject))"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{SIMPAYER_BEARER_TOKEN}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Accept",
										"value": "application/vnd.interoperability.transfers+json;version=1.0"
									},
									{
										"key": "Content-Type",
										"value": "application/vnd.interoperability.transfers+json;version=1.0"
									},
									{
										"key": "Date",
										"value": "{{transferDate}}"
									},
									{
										"key": "FSPIOP-Source",
										"value": "{{SIMPAYER_NAME}}"
									},
									{
										"key": "FSPIOP-Destination",
										"value": "{{SIMPAYEE_NAME}}"
									},
									{
										"key": "FSPIOP-Signature",
										"value": "{{fspiopSignature}}",
										"type": "text"
									},
									{
										"key": "FSPIOP-HTTP-Method",
										"value": "POST",
										"type": "text"
									},
									{
										"key": "FSPIOP-URI",
										"value": "/transfers",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{{transferRequest}}"
								},
								"url": {
									"raw": "{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}/transfers",
									"host": [
										"{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}"
									],
									"path": [
										"transfers"
									]
								},
								"description": "send a tranfer request with ilp packet and condition that are generated in quotes response along with expiry, fspiop source,fspiop destination, amount and currency."
							},
							"response": []
						},
						{
							"name": "Get SIMPAYER position after the transfer",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "ce00f373-708f-428f-aa1a-46ee3fedba2c",
										"exec": [
											"pm.test(\"Status code is 200\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"var jsonData = pm.response.json();",
											"",
											"/*pm.test(\"Position before and after the transfer should be the same\", function () {",
											"    pm.expect(jsonData[0].value).to.eql(pm.environment.get(`${pm.environment.get('SIMPAYER_NAME')}PositionBeforeTransfer`));",
											"});*/",
											"",
											"for (var i in jsonData){",
											"    if(jsonData[i].currency === pm.environment.get('SIMPAYER_CURRENCY')) {",
											"  pm.test(\"Position before and after the transfer should be the same\", function () {",
											"    pm.expect(jsonData[i].value).to.eql(pm.environment.get(`${pm.environment.get('SIMPAYER_NAME')}${pm.environment.get('SIMPAYER_CURRENCY')}PositionBeforeTransfer`));",
											"  });",
											"    }",
											"   ",
											"}"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "FSPIOP-Source",
										"type": "text",
										"value": "hub_operator"
									}
								],
								"url": {
									"raw": "{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}/participants/{{SIMPAYER_NAME}}/positions",
									"host": [
										"{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}"
									],
									"path": [
										"participants",
										"{{SIMPAYER_NAME}}",
										"positions"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get SIMPAYEE position after the transfer",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "603bd379-6184-41f2-8641-7c9b75269306",
										"exec": [
											"pm.test(\"Status code is 200\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"var jsonData = pm.response.json();",
											"",
											"/*pm.test(\"Position before and after the transfer should be the same\", function () {",
											"    pm.expect(Number(jsonData[0].value)).to.eql(Number(pm.environment.get(\"payeefspPositionBeforeTransfer\")));",
											"});*/",
											"",
											"for (var i in jsonData){",
											"    if(jsonData[i].currency === pm.environment.get('SIMPAYEE_CURRENCY')) {",
											"  pm.test(\"Position before and after the transfer should be the same\", function () {",
											"    pm.expect(Number(jsonData[i].value)).to.eql(Number(pm.environment.get(`${pm.environment.get('SIMPAYEE_NAME')}PositionBeforeTransfer`)));",
											"  });",
											"    }",
											"   ",
											"}"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "FSPIOP-Source",
										"type": "text",
										"value": "hub_operator"
									}
								],
								"url": {
									"raw": "{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}/participants/{{SIMPAYEE_NAME}}/positions",
									"host": [
										"{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}"
									],
									"path": [
										"participants",
										"{{SIMPAYEE_NAME}}",
										"positions"
									]
								}
							},
							"response": []
						}
					],
					"description": "Author: Sridevi Miriyala\n\nThis features testes, if a transfer is blocked when position of a participant exceeds the Net Debit Cap for the transfer amount.\n\nSTEPS:\n\nGET Limits\nGET Positions for payer and payee\nset amount=(NDC-P) + 10\nPOST Quotes - send to payee that responds COMMITTED\nPOST Transfers-Prepare\n      -Payerfsp should get error msg \"insufficient liquidity in payerfsp to perform transfer \" \nGET positions - \n  current payer position = prev position \n  current payee position = prev position \n(Failure of the transfer due to insufficient liquidity from payerfsp, results no change in positions)",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "07f0959d-06db-48ed-bba6-43b264722308",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "83d2e7ad-7f3f-4c69-b81e-4f560ef95142",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				},
				{
					"name": "get_transfers",
					"item": [
						{
							"name": "Send Quote",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "41fe9baa-d306-447d-800d-669b5264df24",
										"exec": [
											"var navigator = {}; ",
											"var window = {}; ",
											"eval(pm.environment.get('jrsassign'));",
											"",
											"",
											"var uuid = require('uuid');",
											"var generatedUUID = uuid.v4();",
											"pm.environment.set('quoteId', generatedUUID);",
											"generatedUUID = uuid.v4();",
											"pm.environment.set('transactionId', generatedUUID);",
											"",
											"pm.variables.set('quoteDate', (new Date()).toUTCString());",
											"pm.variables.set('payerName', 'PayerFirst PayerLast');",
											"",
											"pm.variables.set('expectedPayeeFirstName', 'GoldenFirst');",
											"pm.variables.set('expectedPayeeLastName', 'GoldenLast');",
											"pm.variables.set('expectedPayeeDOB', '2010-10-10');",
											"",
											"var oHeader = {alg: \"RS256\", \"FSPIOP-Source\": pm.environment.get('SIMPAYER_NAME'),\"FSPIOP-Destination\": pm.environment.get('SIMPAYEE_NAME'), \"FSPIOP-URI\":\"/quotes\", \"FSPIOP-HTTP-Method\":\"POST\", \"Date\":pm.variables.get('quoteDate')};",
											"var sHeader = JSON.stringify(oHeader);",
											"console.log(`sHeader: ${sHeader}`)",
											"",
											"var objPayload = {",
											"  \"quoteId\": pm.environment.get('quoteId'),",
											"  \"transactionId\": pm.environment.get('transactionId'),",
											"  \"payer\": {",
											"    \"partyIdInfo\": {",
											"      \"partyIdType\": \"MSISDN\",",
											"      \"partyIdentifier\": pm.environment.get('SIMPAYER_MSISDN'),",
											"      \"fspId\": pm.environment.get('SIMPAYER_NAME')",
											"    },",
											"    \"personalInfo\": {",
											"      \"complexName\": {",
											"        \"firstName\": \"Mats\",",
											"        \"lastName\": \"Hagman\"",
											"      },",
											"      \"dateOfBirth\": \"1983-10-25\"",
											"    }",
											"  },",
											"  \"payee\": {",
											"    \"partyIdInfo\": {",
											"      \"partyIdType\": \"MSISDN\",",
											"      \"partyIdentifier\": pm.environment.get('SIMPAYEE_MSISDN'),",
											"      \"fspId\": pm.environment.get('SIMPAYEE_NAME')",
											"    }",
											"  },",
											"  \"amountType\": \"RECEIVE\",",
											"  \"amount\": {",
											"    \"amount\": \"60\",",
											"    \"currency\": pm.environment.get('SIMPAYEE_CURRENCY')",
											"  },",
											"  \"transactionType\": {",
											"    \"scenario\": \"TRANSFER\",",
											"    \"initiator\": \"PAYER\",",
											"    \"initiatorType\": \"CONSUMER\"",
											"  },",
											"  \"note\": \"hej\"",
											"}",
											"",
											"var sPayload = JSON.stringify(objPayload)",
											"console.log(`sPayload: ${sPayload}`)",
											"pm.variables.set(\"quoteRequest\", sPayload);",
											"var token = KJUR.jws.JWS.sign(\"RS256\", sHeader, sPayload, pm.environment.get('SIMPAYER_JWS_KEY'));",
											"console.log(`token: ${token}`)",
											"",
											"// var encodedHeaders = btoa(sHeader)",
											"",
											"// var ofspiopSignature = {signature: vSignature, protectedHeader: encodedHeaders}",
											"// var token = JSON.stringify(ofspiopSignature)",
											"",
											"const [ protectedHeaderBase64, , signature ] = token.split('.');",
											"",
											"const signatureObject = {",
											"    signature: signature.replace('\"', ''),",
											"    protectedHeader: protectedHeaderBase64.replace('\"', '')",
											"};",
											"",
											"console.log(JSON.stringify(signatureObject))",
											"",
											"pm.variables.set('fspiopSignature',JSON.stringify(signatureObject))",
											"",
											"",
											"",
											"",
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "e92b6ff4-ec0b-4148-859d-11a72670003c",
										"exec": [
											"pm.test(\"Status code is 202\", function () {",
											"    pm.response.to.have.status(202);",
											"});",
											"",
											"setTimeout(function () {",
											"  pm.sendRequest(pm.environment.get(\"SIMPAYEE_SDK_TESTAPI_URL\")+\"/requests/\"+pm.variables.get(\"quoteId\"), function (err, response) {",
											"          if(response.responseSize !== 0) {",
											"              ",
											"              //Check the Headers",
											"              var headers = response.json().headers;",
											"              ",
											"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-source is ${pm.environment.get('SIMPAYER_NAME')}`, function () {",
											"                    pm.expect(headers['fspiop-source']).to.eql(pm.environment.get('SIMPAYER_NAME'));",
											"                });",
											"                ",
											"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-destination is ${pm.environment.get('SIMPAYEE_NAME')}`, function () {",
											"                    pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('SIMPAYEE_NAME'));",
											"                });",
											"                ",
											"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-signature is same as sent in the request`, function () {",
											"                    pm.expect(headers['fspiop-signature']).to.eql(pm.variables.get(\"fspiopSignature\"));",
											"                });",
											"                ",
											"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} accept is same as sent in the request`, function () {",
											"                    pm.expect(headers['accept']).to.match(/application\\/vnd\\.interoperability\\.quotes\\+json;version=1(\\.\\d)?/);",
											"                });",
											"                ",
											"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} content-typeis same as sent in the request`, function () {",
											"                    pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.quotes+json;version=1.0');",
											"                });",
											"                ",
											"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-uri is /quotes`, function () {",
											"                    pm.expect(headers['fspiop-uri']).to.eql('/quotes');",
											"                });",
											"                ",
											"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-http-method is POST`, function () {",
											"                    pm.expect(headers['fspiop-http-method']).to.eql('POST');",
											"                });",
											"                ",
											"          } else {",
											"              pm.test(\"Quote FAILED\", function () {",
											"                throw new Error('Did not receive request on payee side');",
											"              });",
											"              // postman.setNextRequest(null)",
											"          }",
											"   });",
											"}, pm.environment.get(\"SET_TIMEOUT_QUOTES\"))",
											"",
											"setTimeout(function () {",
											"  pm.sendRequest(pm.environment.get(\"SIMPAYER_SDK_TESTAPI_URL\")+\"/callbacks/\"+pm.environment.get(\"quoteId\"), function (err, response) {",
											"      if(response.responseSize !== 0) {",
											"          //Checking headers",
											"            var headers = response.json().headers;",
											"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-source is ${pm.environment.get('SIMPAYEE_NAME')}`, function () {",
											"                pm.expect(headers['fspiop-source']).to.eql(pm.environment.get('SIMPAYEE_NAME'));",
											"            });",
											"            ",
											"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-destination is ${pm.environment.get('SIMPAYER_NAME')}`, function () {",
											"                pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('SIMPAYER_NAME'));",
											"            });",
											"            ",
											"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} content-type should be application/vnd.interoperability.quotes+json;version=1.0`, function () {",
											"                pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.quotes+json;version=1.0');",
											"            });",
											"            ",
											"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} accept is empty`, function () {",
											"                pm.expect(headers['accept']).to.eql(undefined);",
											"            });",
											"            ",
											"            ",
											"            ",
											"            var {signature,protectedHeader} = JSON.parse(headers['fspiop-signature'])",
											"            // var strData = JSON.stringify(response.json().data)",
											"            // const token = `${protectedHeader}.${btoa(strData)}.${signature}`",
											"            // console.log(`token: ${token}`)",
											"            // var isValid = KJUR.jws.JWS.verify(token, pm.environment.get('goldenpayeefspJWSPubKey'), {alg: ['RS256']})",
											"            // console.log(`isValid: ${isValid}`)",
											"            // pm.test(\"Check if the response is JWS valid\", function () {",
											"            //     pm.expect(isValid).to.eql(true);",
											"            // });",
											"            ",
											"            //Validate protected header inside Signature",
											"            var decodedProtectedHeaders = JSON.parse(atob(protectedHeader))",
											"            console.log('decodedProtectedHeaders:',decodedProtectedHeaders)",
											"            ",
											"            pm.test(\"FSPIOP-Signature Protected Header alg to be RS256\", function () {",
											"                pm.expect(decodedProtectedHeaders['alg']).to.eql('RS256');",
											"            });",
											"            pm.test(\"FSPIOP-Signature Protected Header FSPIOP-URI to be /quotes/\"+pm.environment.get(\"quoteId\"), function () {",
											"                pm.expect(decodedProtectedHeaders['FSPIOP-URI']).to.eql('/quotes/'+pm.environment.get(\"quoteId\"));",
											"            });",
											"            ",
											"",
											"            pm.test(\"FSPIOP-Signature Protected Header FSPIOP-HTTP-Method to be PUT\", function () {",
											"                pm.expect(decodedProtectedHeaders['FSPIOP-HTTP-Method']).to.eql('PUT');",
											"            });",
											"            pm.test(`FSPIOP-Signature Protected Header FSPIOP-Source to be {pm.environment.get('SIMPAYEE_NAME')}`, function () {",
											"                pm.expect(decodedProtectedHeaders['FSPIOP-Source']).to.eql(pm.environment.get('SIMPAYEE_NAME'));",
											"            });",
											"            pm.test(`FSPIOP-Signature Protected Header FSPIOP-Destination to be ${pm.environment.get('SIMPAYER_NAME')}`, function () {",
											"                pm.expect(decodedProtectedHeaders['FSPIOP-Destination']).to.eql(pm.environment.get('SIMPAYER_NAME'));",
											"            });",
											"            pm.test(\"FSPIOP-Signature Protected Header Date is present\", function () {",
											"                pm.expect(decodedProtectedHeaders['Date']).to.eql(headers['date']);",
											"            });",
											"           ",
											"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} FSPIOP-URI to be /quotes/${pm.environment.get(\"quoteId\")}`, function () {",
											"                pm.expect(headers['fspiop-uri']).to.eql(`/quotes/${pm.environment.get(\"quoteId\")}`);",
											"            });",
											"            ",
											"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-http-method is PUT`, function () {",
											"                pm.expect(headers['fspiop-http-method']).to.eql('PUT');",
											"            });",
											"            ",
											"            var jsonData = response.json().data;",
											"            ",
											"            pm.test(\"Response quoteId is  null\", function () {",
											"                pm.expect(jsonData.quoteId).to.eql(undefined);",
											"                ",
											"            });",
											"          ",
											"            pm.test(\"Response ilpPacket is not null\", function () {",
											"                pm.expect(jsonData.ilpPacket).not.equal(undefined);",
											"                pm.environment.set(\"ilpPacket\", jsonData.ilpPacket);",
											"            });",
											"       ",
											"           pm.test(\"Response condition is not null\", function () {",
											"               pm.expect(jsonData.condition).not.equal(undefined);",
											"               pm.environment.set(\"condition\", jsonData.condition);",
											"           });",
											"      } else {",
											"          pm.test(\"Quote FAILED\", function () {",
											"            throw new Error('Did not receive response on Payer side');",
											"           });",
											"           // postman.setNextRequest(null);",
											"      }",
											"       ",
											"   });",
											"}, pm.environment.get(\"SET_TIMEOUT_QUOTES\"))",
											"",
											"",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{SIMPAYER_BEARER_TOKEN}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Accept",
										"value": "application/vnd.interoperability.quotes+json;version=1.0"
									},
									{
										"key": "Content-Type",
										"value": "application/vnd.interoperability.quotes+json;version=1.0"
									},
									{
										"key": "Date",
										"value": "{{quoteDate}}"
									},
									{
										"key": "FSPIOP-Source",
										"value": "{{SIMPAYER_NAME}}"
									},
									{
										"key": "FSPIOP-Destination",
										"value": "{{SIMPAYEE_NAME}}"
									},
									{
										"key": "FSPIOP-Signature",
										"type": "text",
										"value": "{{fspiopSignature}}"
									},
									{
										"key": "FSPIOP-HTTP-Method",
										"type": "text",
										"value": "POST"
									},
									{
										"key": "FSPIOP-URI",
										"type": "text",
										"value": "/quotes"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{{quoteRequest}}"
								},
								"url": {
									"raw": "{{HOST_QUOTING_SERVICE}}/quotes",
									"host": [
										"{{HOST_QUOTING_SERVICE}}"
									],
									"path": [
										"quotes"
									]
								}
							},
							"response": []
						},
						{
							"name": "Send Transfer",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "ea024009-b53e-4ba1-99eb-e46422fdf9fc",
										"exec": [
											"pm.test(\"Status code is 202\", function () {",
											"    pm.response.to.have.status(202);",
											"});",
											"",
											"// //Check the request that Switch forwards to payeefsp",
											"setTimeout(function () {",
											"  pm.sendRequest(pm.environment.get(\"SIMPAYEE_SDK_TESTAPI_URL\")+\"/requests/\"+pm.environment.get(\"transfer_ID\"), function (err, response) {",
											"          if(response.responseSize !== 0) {",
											"              ",
											"              //Check the Headers",
											"              var headers = response.json().headers;",
											"              ",
											"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-source is ${pm.environment.get('SIMPAYER_NAME')}`, function () {",
											"                    pm.expect(headers['fspiop-source']).to.eql(pm.environment.get('SIMPAYER_NAME'));",
											"                });",
											"                ",
											"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-destination is ${pm.environment.get('SIMPAYEE_NAME')}`, function () {",
											"                    pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('SIMPAYEE_NAME'));",
											"                });",
											"                ",
											"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} content-typeis same as sent in the request`, function () {",
											"                    pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.transfers+json;version=1.0');",
											"                });",
											"                ",
											"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} accept is same as sent in the request`, function () {",
											"                    pm.expect(headers['accept']).to.match(/application\\/vnd\\.interoperability\\.transfers\\+json;version=1(\\.\\d)?/);",
											"                });",
											"                ",
											"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-signature is same as sent in the request`, function () {",
											"                    pm.expect(headers['fspiop-signature']).to.eql(pm.variables.get(\"fspiopSignature\"));",
											"                });",
											"                ",
											"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-http-method is POST`, function () {",
											"                    pm.expect(headers['fspiop-http-method']).to.eql('POST');",
											"                });",
											"                ",
											"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-uri is /transfers`, function () {",
											"                    pm.expect(headers['fspiop-uri']).to.eql('/transfers');",
											"                });",
											"                ",
											"                ",
											"                //Check the data",
											"                var jsonData = response.json().data;",
											"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} data should have the same transferId as request`, function () {",
											"                  pm.expect(jsonData.transferId).to.eql(pm.environment.get(\"transfer_ID\"));",
											"                });",
											"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} data should have the same payerfspId as request`, function () {",
											"                  pm.expect(jsonData.payerFsp).to.eql(pm.environment.get('SIMPAYER_NAME'));",
											"                });",
											"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} data should have the same payeefspId as request`, function () {",
											"                  pm.expect(pm.environment.get('SIMPAYEE_NAME'));",
											"                });",
											"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} data should have the same amount as request`, function () {",
											"                  pm.expect(jsonData.amount.amount).to.eql('10');",
											"                });",
											"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} data should have the same currency as request`, function () {",
											"                  pm.expect(jsonData.amount.currency).to.eql(pm.environment.get(\"SIMPAYEE_CURRENCY\"));",
											"                });",
											"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} data should have the same expiration as request`, function () {",
											"                  pm.expect(jsonData.expiration).to.eql(pm.environment.get(\"transferExpiration\"));",
											"                });",
											"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} data should have the same ilpPacket as request`, function () {",
											"                  pm.expect(jsonData.ilpPacket).to.eql(pm.environment.get(\"ilpPacket\"));",
											"                });",
											"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} data should have the same condition as request`, function () {",
											"                  pm.expect(jsonData.condition).to.eql(pm.environment.get(\"condition\"));",
											"                });",
											"                ",
											"          } else {",
											"              pm.test(\"Transfer FAILED\", function () {",
											"                throw new Error('Did not receive response on payee side');",
											"              });",
											"              // postman.setNextRequest(null)",
											"          }",
											"  });",
											"}, pm.environment.get(\"SET_TIMEOUT_TRANSFERS\"))",
											"",
											"//Check the callback response that Switch forwards to payerfsp",
											"setTimeout(function () {",
											"  pm.sendRequest(pm.environment.get(\"SIMPAYER_SDK_TESTAPI_URL\")+\"/callbacks/\"+pm.environment.get(\"transfer_ID\"), function (err, response) {",
											"          if(response.responseSize !== 0) {",
											"            //Checking headers",
											"            var headers = response.json().headers;",
											"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-source is ${pm.environment.get('SIMPAYEE_NAME')}`, function () {",
											"                pm.expect(headers['fspiop-source']).to.eql(pm.environment.get('SIMPAYEE_NAME'));",
											"            });",
											"            ",
											"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-destination is ${pm.environment.get('SIMPAYER_NAME')}`, function () {",
											"                pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('SIMPAYER_NAME'));",
											"            });",
											"            ",
											"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} content-type should be application/vnd.interoperability.transfers+json;version=1.0`, function () {",
											"                pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.transfers+json;version=1.0');",
											"            });",
											"            ",
											"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} accept is empty`, function () {",
											"                pm.expect(headers['accept']).to.eql(undefined);",
											"            });",
											"            ",
											"            ",
											"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-uri includes /transfers/${pm.environment.get(\"transfer_ID\")}`, function () {",
											"                pm.expect(headers['fspiop-uri']).to.eql('/transfers/'+ pm.environment.get(\"transfer_ID\"));",
											"            });",
											"            ",
											"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-http-method is PUT`, function () {",
											"                pm.expect(headers['fspiop-http-method']).to.eql('PUT');",
											"            });",
											"            ",
											"            var jsonData = response.json().data;",
											"            pm.test(\"Response data does not have transferId\", function () {",
											"               pm.expect(jsonData.transferId).to.eql(undefined);",
											"            });",
											"            pm.test(\"Response status is COMMITTED\", function () {",
											"                pm.expect(jsonData.transferState).to.eql('COMMITTED');",
											"            });",
											"          } else {",
											"              pm.test(\"Transfer FAILED\", function () {",
											"                throw new Error('Did not receive response on payer side');",
											"              });",
											"              // postman.setNextRequest(null)",
											"          }",
											"   });",
											"}, pm.environment.get(\"SET_TIMEOUT_TRANSFERS\"))",
											"",
											"",
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "daee80b0-b457-46c4-9cf2-0307a39286df",
										"exec": [
											"var navigator = {}; //fake a navigator object for the lib",
											"var window = {}; //fake a window object for the lib",
											"eval(pm.environment.get('jrsassign'));",
											"",
											"var uuid = require('uuid');",
											"var generatedUUID = uuid.v4();",
											"pm.environment.set('transfer_ID', pm.environment.get('transactionId'));",
											"",
											"",
											"pm.variables.set('transferDate', (new Date()).toUTCString());",
											"",
											"pm.environment.set(\"transferExpiration\",new Date(new Date().getTime() + 60000))",
											"",
											"var oHeader = {alg: \"RS256\", \"FSPIOP-Source\": pm.environment.get('SIMPAYER_NAME'),\"FSPIOP-Destination\": pm.environment.get('SIMPAYEE_NAME'), \"FSPIOP-URI\":\"/transfers\", \"FSPIOP-HTTP-Method\":\"POST\", \"Date\":pm.variables.get('transferDate')};",
											"var sHeader = JSON.stringify(oHeader);",
											"console.log(`sHeader: ${sHeader}`)",
											"",
											"var objPayload = {",
											"  \"transferId\": pm.environment.get('transfer_ID'),",
											"  \"payerFsp\": pm.environment.get('SIMPAYER_NAME'),",
											"  \"payeeFsp\": pm.environment.get('SIMPAYEE_NAME'),",
											"  \"amount\": {",
											"    \"amount\": \"10\",",
											"    \"currency\": pm.environment.get('SIMPAYEE_CURRENCY')",
											"  },",
											"  \"expiration\": pm.environment.get('transferExpiration'),",
											"  \"ilpPacket\": pm.environment.get('ilpPacket'),",
											"  \"condition\": pm.environment.get('condition')",
											"}",
											"var sPayload = JSON.stringify(objPayload)",
											"console.log(`sPayload: ${sPayload}`)",
											"pm.variables.set(\"transferRequest\", sPayload);",
											"var token = KJUR.jws.JWS.sign(\"RS256\", sHeader, sPayload, pm.environment.get('SIMPAYER_JWS_KEY'));",
											"//console.log(`token: ${token}`)",
											"",
											"// var encodedHeaders = btoa(sHeader)",
											"",
											"// var ofspiopSignature = {signature: vSignature, protectedHeader: encodedHeaders}",
											"// var token = JSON.stringify(ofspiopSignature)",
											"",
											"const [ protectedHeaderBase64, , signature ] = token.split('.');",
											"",
											"const signatureObject = {",
											"    signature: signature.replace('\"', ''),",
											"    protectedHeader: protectedHeaderBase64.replace('\"', '')",
											"};",
											"",
											"console.log(JSON.stringify(signatureObject))",
											"",
											"pm.variables.set('fspiopSignature',JSON.stringify(signatureObject))"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{SIMPAYER_BEARER_TOKEN}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Accept",
										"value": "application/vnd.interoperability.transfers+json;version=1.0"
									},
									{
										"key": "Content-Type",
										"value": "application/vnd.interoperability.transfers+json;version=1.0"
									},
									{
										"key": "Date",
										"value": "{{transferDate}}"
									},
									{
										"key": "FSPIOP-Source",
										"value": "{{SIMPAYER_NAME}}"
									},
									{
										"key": "FSPIOP-Destination",
										"value": "{{SIMPAYEE_NAME}}"
									},
									{
										"key": "FSPIOP-Signature",
										"type": "text",
										"value": "{{fspiopSignature}}"
									},
									{
										"key": "FSPIOP-URI",
										"type": "text",
										"value": "/transfers"
									},
									{
										"key": "FSPIOP-HTTP-Method",
										"type": "text",
										"value": "POST"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{{transferRequest}}"
								},
								"url": {
									"raw": "{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}/transfers",
									"host": [
										"{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}"
									],
									"path": [
										"transfers"
									]
								}
							},
							"response": []
						},
						{
							"name": "GET transfer - COMMITTED",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "a7d88f09-6092-43ab-99ba-b4186c7dff8a",
										"exec": [
											"",
											"pm.variables.set('transferDate', (new Date()).toUTCString());",
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "872eced4-9040-4a46-b154-0e11ce56e456",
										"exec": [
											"pm.test(\"Status code is 202\", function () {",
											"    pm.response.to.have.status(202);",
											"});",
											"",
											"//Check the callback response that Switch forwards to payerfsp",
											"setTimeout(function () {",
											"  pm.sendRequest(pm.environment.get(\"SIMPAYER_SDK_TESTAPI_URL\")+\"/callbacks/\"+pm.environment.get(\"transfer_ID\"), function (err, response) {",
											"          if(response.responseSize !== 0) {",
											"            //Checking headers",
											"            var headers = response.json().headers;",
											"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-source is switch`, function () {",
											"                pm.expect(headers['fspiop-source']).to.eql('switch');",
											"            });",
											"            ",
											"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-destination is ${pm.environment.get('SIMPAYER_NAME')}`, function () {",
											"                pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('SIMPAYER_NAME'));",
											"            });",
											"            ",
											"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} content-type should be application/vnd.interoperability.transfers+json;version=1.0`, function () {",
											"                pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.transfers+json;version=1.0');",
											"            });",
											"            ",
											"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} accept is empty`, function () {",
											"                pm.expect(headers['accept']).to.eql(undefined);",
											"            });",
											"            ",
											"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-signature is not empty`, function () {",
											"                pm.expect(headers['fspiop-signature']).not.eql(undefined);",
											"            });",
											"            ",
											"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-uri includes /transfers/${pm.environment.get('transfer_ID')}`, function () {",
											"                pm.expect(headers['fspiop-uri']).to.eql('/transfers/'+ pm.environment.get(\"transfer_ID\"));",
											"            });",
											"            ",
											"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-http-method is PUT`, function () {",
											"                pm.expect(headers['fspiop-http-method']).to.eql('PUT');",
											"            });",
											"            ",
											"            var jsonData = response.json().data;",
											"            pm.test(\"Response data does not have transferId\", function () {",
											"               pm.expect(jsonData.transferId).to.eql(undefined);",
											"            });",
											"            pm.test(\"Response status is COMMITTED\", function () {",
											"                pm.expect(jsonData.transferState).to.eql('COMMITTED');",
											"            });",
											"          } else {",
											"              pm.test(\"Transfer FAILED\", function () {",
											"                throw new Error('Did not receive response on payer side');",
											"              });",
											"              // postman.setNextRequest(null)",
											"          }",
											"   });",
											"}, 1300)",
											"",
											"",
											"",
											"",
											"",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{SIMPAYER_BEARER_TOKEN}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Accept",
										"value": "application/vnd.interoperability.transfers+json;version=1.0"
									},
									{
										"key": "Content-Type",
										"value": "application/vnd.interoperability.transfers+json;version=1.0"
									},
									{
										"key": "Date",
										"value": "{{transferDate}}"
									},
									{
										"key": "FSPIOP-Source",
										"value": "{{SIMPAYER_NAME}}"
									},
									{
										"key": "FSPIOP-Destination",
										"value": "{{SIMPAYEE_NAME}}",
										"disabled": true
									}
								],
								"url": {
									"raw": "{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}/transfers/{{transfer_ID}}",
									"host": [
										"{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}"
									],
									"path": [
										"transfers",
										"{{transfer_ID}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Source is original receiver",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "8cd9a1b3-d765-4edc-ac8d-7893a345830c",
										"exec": [
											"var uuid = require('uuid');",
											"var generatedUUID = uuid.v4();",
											"pm.environment.set('nonExistingtransferID', generatedUUID);",
											"pm.environment.set('dateHeader', (new Date()).toUTCString());"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "6dac85c3-1403-401f-b784-0dac7975ba5c",
										"exec": [
											"pm.test(\"Status code is 202\", function () {",
											"    pm.response.to.have.status(202);",
											"});",
											"",
											"setTimeout(function () {",
											"  pm.sendRequest(pm.environment.get(\"SIMPAYEE_SDK_TESTAPI_URL\")+\"/callbacks/\"+pm.environment.get(\"transfer_ID\"), function (err, response) {",
											"          if(response.responseSize !== 0) {",
											"            //Checking headers",
											"            var headers = response.json().headers;",
											"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-source is switch`, function () {",
											"                pm.expect(headers['fspiop-source']).to.eql('switch');",
											"            });",
											"            ",
											"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-destination is ${pm.environment.get('SIMPAYER_NAME')}`, function () {",
											"                pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('SIMPAYEE_NAME'));",
											"            });",
											"            ",
											"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} content-type should be application/vnd.interoperability.transfers+json;version=1.0`, function () {",
											"                pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.transfers+json;version=1.0');",
											"            });",
											"            ",
											"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} accept is empty`, function () {",
											"                pm.expect(headers['accept']).to.eql(undefined);",
											"            });",
											"            ",
											"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-uri includes /transfers/${pm.environment.get('transfer_ID')}`, function () {",
											"                pm.expect(headers['fspiop-uri']).to.eql('/transfers/'+ pm.environment.get(\"transfer_ID\"));",
											"            });",
											"            ",
											"            pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-signature is not null`, function () {",
											"                pm.expect(headers['fspiop-signature']).not.eql(undefined);",
											"            });",
											"            ",
											"            pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-http-method is PUT`, function () {",
											"                pm.expect(headers['fspiop-http-method']).to.eql('PUT');",
											"            });",
											"            ",
											"            var jsonData = response.json().data;",
											"            pm.test(\"Transfer State is COMMITTED\", function () {",
											"                pm.expect(jsonData.transferState).to.eql('COMMITTED');",
											"              });",
											"              ",
											"          } else {",
											"              pm.test(\"Transfer FAILED\", function () {",
											"                throw new Error('Did not receive response');",
											"              });",
											"              // postman.setNextRequest(null)",
											"          }",
											"   });",
											"}, 2000)",
											"",
											"// setTimeout(function () {",
											"//   pm.sendRequest(pm.environment.get(\"HOST_SIMULATOR\")+\"/{{SIMPAYER_NAME}}/callbacks/\"+pm.environment.get(\"nonExistingtransferID\"), function (err, response) {",
											"//           if(response.responseSize !== 0) {",
											"//             //Checking headers",
											"//             var headers = response.json().headers;",
											"//             pm.test(\"payerfsp fspiop-source is switch\", function () {",
											"//                 pm.expect(headers['fspiop-source']).to.eql('switch');",
											"//             });",
											"            ",
											"//             pm.test(\"payerfsp fspiop-destination is payerfsp\", function () {",
											"//                 pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('SIMPAYER_NAME'));",
											"//             });",
											"            ",
											"//             pm.test(\"payerfsp content-type should be application/vnd.interoperability.transfers+json;version=1.0\", function () {",
											"//                 pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.transfers+json;version=1.0');",
											"//             });",
											"            ",
											"//             pm.test(\"payerfsp accept is empty\", function () {",
											"//                 pm.expect(headers['accept']).to.eql(undefined);",
											"//             });",
											"            ",
											"//         //    pm.test(\"fspiop-signature is returned\", function () {",
											"//          //       pm.expect(headers['fspiop-signature']).to.eql(pm.environment.get(\"SIMPAYEE_FSPIOP_SIGNATURE\"));",
											"//         //    });",
											"        ",
											"//           pm.test(\"fspiop-signature is returned\", function () {",
											"//             pm.expect(headers['fspiop-signature']).to.eql(undefined);",
											"//           });",
											"           ",
											"            ",
											"//          /*   pm.test(\"payerfsp fspiop-uri includes transfers\", function () {",
											"//                 pm.expect(headers['fspiop-uri']).to.include('/transfers');",
											"//             });",
											"            ",
											"//             pm.test(\"payerfsp fspiop-http-method is PUT\", function () {",
											"//                 pm.expect(headers['fspiop-http-method']).to.eql('PUT');",
											"//             });*/",
											"            ",
											"//             var jsonData = response.json().data;",
											"//             pm.test(\"Error Code should be returned\", function () {",
											"//                 pm.expect(jsonData.errorInformation.errorCode).to.eql('3208');",
											"//               });",
											"//               pm.test(\"Error Description should be returned\", function () {",
											"//                 pm.expect(jsonData.errorInformation.errorDescription).to.eql('Provided Transfer ID was not found on the server.');",
											"//               });",
											"//           } else {",
											"//               pm.test(\"Transfer FAILED\", function () {",
											"//                 throw new Error('Did not receive response');",
											"//               });",
											"//               // postman.setNextRequest(null)",
											"//           }",
											"//   });",
											"// }, 2000)",
											"",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{SIMPAYEE_BEARER_TOKEN}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Accept",
										"value": "application/vnd.interoperability.transfers+json;version=1.0"
									},
									{
										"key": "Content-Type",
										"value": "application/vnd.interoperability.transfers+json;version=1.0"
									},
									{
										"key": "Date",
										"value": "{{dateHeader}}"
									},
									{
										"key": "FSPIOP-Source",
										"value": "{{SIMPAYEE_NAME}}"
									}
								],
								"url": {
									"raw": "{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}/transfers/{{transfer_ID}}",
									"host": [
										"{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}"
									],
									"path": [
										"transfers",
										"{{transfer_ID}}"
									]
								},
								"description": "The HTTP request GET /transfers/<ID> is used to get information regarding an earlier created or requested transfer. The <ID> in the URI should contain the transferId that was used for the creation of the transfer.\n\nTake a new UUID which does not exist in DB.i.e valid format but shd not exist in DB.\nor\nchange (not remove) one letter or digit from a transfer ID that exists in DB."
							},
							"response": []
						},
						{
							"name": "Source is not part of original sender/receiver",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "03c73d21-c1eb-4304-ae5c-30b634ad040c",
										"exec": [
											"var uuid = require('uuid');",
											"var generatedUUID = uuid.v4();",
											"pm.environment.set('nonExistingtransferID', generatedUUID);",
											"pm.environment.set('dateHeader', (new Date()).toUTCString());"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "dced8e7b-dfab-4476-9773-e76442d9660b",
										"exec": [
											"pm.test(\"Status code is 202\", function () {",
											"    pm.response.to.have.status(202);",
											"});",
											"",
											"setTimeout(function () {",
											"  pm.sendRequest(pm.environment.get(\"SIM1_SDK_TESTAPI_URL\")+\"/callbacks/\"+pm.environment.get(\"transfer_ID\"), function (err, response) {",
											"          if(response.responseSize !== 0) {",
											"            //Checking headers",
											"            var headers = response.json().headers;",
											"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-source is switch`, function () {",
											"                pm.expect(headers['fspiop-source']).to.eql('switch');",
											"            });",
											"            ",
											"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-destination is ${pm.environment.get('SIM1_NAME')}`, function () {",
											"                pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('SIM1_NAME'));",
											"            });",
											"            ",
											"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} content-type should be application/vnd.interoperability.transfers+json;version=1.0`, function () {",
											"                pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.transfers+json;version=1.0');",
											"            });",
											"            ",
											"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} accept is empty`, function () {",
											"                pm.expect(headers['accept']).to.eql(undefined);",
											"            });",
											"            ",
											"            pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-uri includes /transfers/${pm.environment.get('transfer_ID')}`, function () {",
											"                pm.expect(headers['fspiop-uri']).to.eql('/transfers/'+ pm.environment.get(\"transfer_ID\")+'/error');",
											"            });",
											"            ",
											"            pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-signature is not null`, function () {",
											"                pm.expect(headers['fspiop-signature']).not.eql(undefined);",
											"            });",
											"            ",
											"            pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-http-method is PUT`, function () {",
											"                pm.expect(headers['fspiop-http-method']).to.eql('PUT');",
											"            });",
											"            ",
											"            var jsonData = response.json().data;",
											"            pm.test(\"Error Code should be returned\", function () {",
											"                pm.expect(jsonData.errorInformation.errorCode).to.eql('3000');",
											"              });",
											"              pm.test(\"Error Description should be returned\", function () {",
											"                pm.expect(jsonData.errorInformation.errorDescription).to.eql('Generic client error');",
											"              });",
											"          } else {",
											"              pm.test(\"Transfer FAILED\", function () {",
											"                throw new Error('Did not receive response');",
											"              });",
											"              // postman.setNextRequest(null)",
											"          }",
											"   });",
											"}, 2000)",
											"",
											"// setTimeout(function () {",
											"//   pm.sendRequest(pm.environment.get(\"HOST_SIMULATOR\")+\"/payerfsp/callbacks/\"+pm.environment.get(\"nonExistingtransferID\"), function (err, response) {",
											"//           if(response.responseSize !== 0) {",
											"//             //Checking headers",
											"//             var headers = response.json().headers;",
											"//             pm.test(\"payerfsp fspiop-source is switch\", function () {",
											"//                 pm.expect(headers['fspiop-source']).to.eql('switch');",
											"//             });",
											"            ",
											"//             pm.test(\"payerfsp fspiop-destination is payerfsp\", function () {",
											"//                 pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('SIMPAYER_NAME'));",
											"//             });",
											"            ",
											"//             pm.test(\"payerfsp content-type should be application/vnd.interoperability.transfers+json;version=1.0\", function () {",
											"//                 pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.transfers+json;version=1.0');",
											"//             });",
											"            ",
											"//             pm.test(\"payerfsp accept is empty\", function () {",
											"//                 pm.expect(headers['accept']).to.eql(undefined);",
											"//             });",
											"            ",
											"//         //    pm.test(\"fspiop-signature is returned\", function () {",
											"//          //       pm.expect(headers['fspiop-signature']).to.eql(pm.environment.get(\"SIMPAYEE_FSPIOP_SIGNATURE\"));",
											"//         //    });",
											"        ",
											"//           pm.test(\"fspiop-signature is returned\", function () {",
											"//             pm.expect(headers['fspiop-signature']).to.eql(undefined);",
											"//           });",
											"           ",
											"            ",
											"//          /*   pm.test(\"payerfsp fspiop-uri includes transfers\", function () {",
											"//                 pm.expect(headers['fspiop-uri']).to.include('/transfers');",
											"//             });",
											"            ",
											"//             pm.test(\"payerfsp fspiop-http-method is PUT\", function () {",
											"//                 pm.expect(headers['fspiop-http-method']).to.eql('PUT');",
											"//             });*/",
											"            ",
											"//             var jsonData = response.json().data;",
											"//             pm.test(\"Error Code should be returned\", function () {",
											"//                 pm.expect(jsonData.errorInformation.errorCode).to.eql('3208');",
											"//               });",
											"//               pm.test(\"Error Description should be returned\", function () {",
											"//                 pm.expect(jsonData.errorInformation.errorDescription).to.eql('Provided Transfer ID was not found on the server.');",
											"//               });",
											"//           } else {",
											"//               pm.test(\"Transfer FAILED\", function () {",
											"//                 throw new Error('Did not receive response');",
											"//               });",
											"//               // postman.setNextRequest(null)",
											"//           }",
											"//   });",
											"// }, 2000)",
											"",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{SIM1_BEARER_TOKEN}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Accept",
										"value": "application/vnd.interoperability.transfers+json;version=1.0"
									},
									{
										"key": "Content-Type",
										"value": "application/vnd.interoperability.transfers+json;version=1.0"
									},
									{
										"key": "Date",
										"value": "{{dateHeader}}"
									},
									{
										"key": "FSPIOP-Source",
										"value": "{{SIM1_NAME}}"
									}
								],
								"url": {
									"raw": "{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}/transfers/{{transfer_ID}}",
									"host": [
										"{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}"
									],
									"path": [
										"transfers",
										"{{transfer_ID}}"
									]
								},
								"description": "The HTTP request GET /transfers/<ID> is used to get information regarding an earlier created or requested transfer. The <ID> in the URI should contain the transferId that was used for the creation of the transfer.\n\nTake a new UUID which does not exist in DB.i.e valid format but shd not exist in DB.\nor\nchange (not remove) one letter or digit from a transfer ID that exists in DB."
							},
							"response": []
						},
						{
							"name": "200 - 3208 - TransferId not found",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "f2bfb202-a544-48ab-9874-e5172527d2ed",
										"exec": [
											"var uuid = require('uuid');",
											"var generatedUUID = uuid.v4();",
											"pm.environment.set('nonExistingtransferID', generatedUUID);",
											"pm.environment.set('dateHeader', (new Date()).toUTCString());"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "fcb3dde6-49a8-4db2-8881-f20f7bb758bf",
										"exec": [
											"pm.test(\"Status code is 202\", function () {",
											"    pm.response.to.have.status(202);",
											"});",
											"",
											"",
											"//Check the callback response that Switch forwards to payerfsp",
											"setTimeout(function () {",
											"  pm.sendRequest(pm.environment.get(\"SIMPAYER_SDK_TESTAPI_URL\")+\"/callbacks/\"+pm.environment.get(\"nonExistingtransferID\"), function (err, response) {",
											"          if(response.responseSize !== 0) {",
											"            //Checking headers",
											"            var headers = response.json().headers;",
											"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-source is switch`, function () {",
											"                pm.expect(headers['fspiop-source']).to.eql('switch');",
											"            });",
											"            ",
											"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-destination is ${pm.environment.get('SIMPAYER_NAME')}`, function () {",
											"                pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('SIMPAYER_NAME'));",
											"            });",
											"            ",
											"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} content-type should be application/vnd.interoperability.transfers+json;version=1.0`, function () {",
											"                pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.transfers+json;version=1.0');",
											"            });",
											"            ",
											"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} accept is empty`, function () {",
											"                pm.expect(headers['accept']).to.eql(undefined);",
											"            });",
											"            ",
											"            pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-uri includes /transfers/${pm.environment.get('transfer_ID')}/error`, function () {",
											"                pm.expect(headers['fspiop-uri']).to.eql('/transfers/'+ pm.environment.get(\"nonExistingtransferID\")+'/error');",
											"            });",
											"            ",
											"            pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-signature is not null`, function () {",
											"                pm.expect(headers['fspiop-signature']).not.eql(undefined);",
											"            });",
											"            ",
											"            pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-http-method is PUT`, function () {",
											"                pm.expect(headers['fspiop-http-method']).to.eql('PUT');",
											"            });",
											"            ",
											"            var jsonData = response.json().data;",
											"            pm.test(\"Error Code should be returned 3208\", function () {",
											"                pm.expect(jsonData.errorInformation.errorCode).to.eql('3208');",
											"              });",
											"              pm.test(\"Error Description Transfer ID not found should be returned\", function () {",
											"                pm.expect(jsonData.errorInformation.errorDescription).to.eql('Transfer ID not found - Provided Transfer ID was not found on the server.');",
											"              });",
											"          } else {",
											"              pm.test(\"Transfer FAILED\", function () {",
											"                throw new Error('Did not receive response');",
											"              });",
											"              // postman.setNextRequest(null)",
											"          }",
											"   });",
											"}, 2000)",
											"",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{SIMPAYER_BEARER_TOKEN}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Accept",
										"value": "application/vnd.interoperability.transfers+json;version=1.0"
									},
									{
										"key": "Content-Type",
										"value": "application/vnd.interoperability.transfers+json;version=1.0"
									},
									{
										"key": "Date",
										"value": "{{dateHeader}}"
									},
									{
										"key": "FSPIOP-Source",
										"value": "{{SIMPAYER_NAME}}"
									}
								],
								"url": {
									"raw": "{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}/transfers/{{nonExistingtransferID}}",
									"host": [
										"{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}"
									],
									"path": [
										"transfers",
										"{{nonExistingtransferID}}"
									]
								},
								"description": "The HTTP request GET /transfers/<ID> is used to get information regarding an earlier created or requested transfer. The <ID> in the URI should contain the transferId that was used for the creation of the transfer.\n\nTake a new UUID which does not exist in DB.i.e valid format but shd not exist in DB.\nor\nchange (not remove) one letter or digit from a transfer ID that exists in DB."
							},
							"response": []
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				},
				{
					"name": "funds_out",
					"item": [
						{
							"name": "Reserve&Commit",
							"item": [
								{
									"name": "Record Funds Out Prepare&Reserve- SIMPAYER",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "a06fe574-eaf8-43c8-b956-bd6b9d5c912f",
												"exec": [
													"var uuid = require('uuid');",
													"var generatedUUID = uuid.v4();",
													"pm.environment.set('fundsOutPrepareReserveTransferId', generatedUUID);",
													"pm.environment.set('fundsOutPrepareReserveAmount', 1000);",
													"",
													"",
													"const payerfspGetStatusRequest = {",
													"  url: pm.environment.get(\"HOST_CENTRAL_LEDGER\")+pm.environment.get(\"BASE_CENTRAL_LEDGER_ADMIN\")+'/participants/'+pm.environment.get(\"SIMPAYER_NAME\")+'/accounts',",
													"  method: 'GET',",
													"  header: {",
													"      \"Authorization\":\"Bearer \"+pm.environment.get(\"HUB_OPERATOR_BEARER_TOKEN\"),",
													"      \"FSPIOP-Source\": \"hub_operator\",",
													"      \"Content-Type\": \"application/json\"",
													"  }",
													"};",
													"pm.sendRequest(payerfspGetStatusRequest, function (err, response) {",
													"    console.log(response.json())",
													"    var jsonData = response.json()",
													"    for(var i in jsonData) {",
													"        if(jsonData[i].ledgerAccountType === 'SETTLEMENT' && (jsonData[i].currency === pm.environment.get(\"SIMPAYER_CURRENCY\"))) {",
													"            pm.environment.set(`${pm.environment.get('SIMPAYER_NAME')}SettlementAccountId`,jsonData[i].id)",
													"            pm.environment.set(`${pm.environment.get('SIMPAYER_NAME')}SettlementAccountBalanceBeforeFundsOutPrepare`,jsonData[i].value)",
													"        }",
													"    }",
													"});",
													"",
													"const hubGetStatusRequest = {",
													"  url: pm.environment.get(\"HOST_CENTRAL_LEDGER\")+pm.environment.get(\"BASE_CENTRAL_LEDGER_ADMIN\")+'/participants/Hub/accounts',",
													"  method: 'GET',",
													"  header: {",
													"      \"Authorization\":\"Bearer \"+pm.environment.get(\"HUB_OPERATOR_BEARER_TOKEN\"),",
													"      \"FSPIOP-Source\": \"hub_operator\",",
													"      \"Content-Type\": \"application/json\"",
													"  }",
													"};",
													"pm.sendRequest(hubGetStatusRequest, function (err, response) {",
													"    console.log(response.json())",
													"    var jsonData = response.json()",
													"    for(var i in jsonData) {",
													"        if(jsonData[i].ledgerAccountType === 'HUB_RECONCILIATION' && (jsonData[i].currency === pm.environment.get(\"SIMPAYER_CURRENCY\"))) {",
													"            pm.environment.set(\"hubReconAccountBalanceBeforeFundsOutPrepare\",jsonData[i].value)",
													"        }",
													"    }",
													"});",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"id": "78dab31c-ca7f-4889-8248-baf8b9fb1ade",
												"exec": [
													"pm.test(\"Status code is 202\", function () {",
													"    pm.response.to.have.status(202);",
													"});",
													"",
													"setTimeout(function () {",
													"    const payerfspGetStatusRequest = {",
													"      url: pm.environment.get(\"HOST_CENTRAL_LEDGER\")+pm.environment.get(\"BASE_CENTRAL_LEDGER_ADMIN\")+'/participants/'+pm.environment.get(\"SIMPAYER_NAME\")+'/accounts',",
													"      method: 'GET',",
													"      header: {",
													"          \"Authorization\":\"Bearer \"+pm.environment.get(\"HUB_OPERATOR_BEARER_TOKEN\"),",
													"          \"FSPIOP-Source\": \"hub_operator\",",
													"          \"Content-Type\": \"application/json\"",
													"      }",
													"    };",
													"    pm.sendRequest(payerfspGetStatusRequest, function (err, response) {",
													"        console.log(response.json())",
													"        var jsonData = response.json()",
													"        var payerfspSettlementAccountBalanceAfterFundsOutPrepare",
													"        for(var i in jsonData) {",
													"            if(jsonData[i].ledgerAccountType === 'SETTLEMENT' && (jsonData[i].currency === pm.environment.get(\"SIMPAYER_CURRENCY\"))) {",
													"                payerfspSettlementAccountBalanceAfterFundsOutPrepare = jsonData[i].value",
													"            }",
													"        }",
													"        var payerfspExpectedBalance = -(-Number(pm.environment.get(`${pm.environment.get('SIMPAYER_NAME')}SettlementAccountBalanceBeforeFundsOutPrepare`))- Number(pm.environment.get(\"fundsOutPrepareReserveAmount\")))",
													"        pm.test(`Final ${pm.environment.get('SIMPAYER_NAME')} Settlement Account Balance should decrease by the transfer amount`, function () {",
													"            pm.expect(payerfspSettlementAccountBalanceAfterFundsOutPrepare).to.eql(payerfspExpectedBalance);",
													"          });    ",
													"    ",
													"    });",
													"    ",
													"    const hubGetStatusRequest = {",
													"      url: pm.environment.get(\"HOST_CENTRAL_LEDGER\")+pm.environment.get(\"BASE_CENTRAL_LEDGER_ADMIN\")+'/participants/Hub/accounts',",
													"      method: 'GET',",
													"      header: {",
													"          \"Authorization\":\"Bearer \"+pm.environment.get(\"HUB_OPERATOR_BEARER_TOKEN\"),",
													"          \"FSPIOP-Source\": pm.environment.get(\"hub_operator\"),",
													"          \"Content-Type\": \"application/json\"",
													"      }",
													"    };",
													"    pm.sendRequest(hubGetStatusRequest, function (err, response) {",
													"        console.log(response.json())",
													"        var jsonData = response.json()",
													"        var hubReconAccountBalanceAfterFundsOutPrepare",
													"        for(var i in jsonData) {",
													"            if(jsonData[i].ledgerAccountType === 'HUB_RECONCILIATION' && (jsonData[i].currency === pm.environment.get(\"SIMPAYER_CURRENCY\"))) {",
													"                hubReconAccountBalanceAfterFundsOutPrepare = jsonData[i].value",
													"            }",
													"        }",
													"        var hubExpectedBalance = pm.environment.get(\"hubReconAccountBalanceBeforeFundsOutPrepare\")//-pm.environment.get(\"fundsOutPrepareReserveAmount\")",
													"        pm.test(\"Final Hub Reconciliation Account Balance should stay the same in prepare phase\", function () {",
													"            pm.expect(hubReconAccountBalanceAfterFundsOutPrepare).to.eql(hubExpectedBalance);",
													"          });  ",
													"    });",
													"}, 2000)"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"value": "application/json"
											},
											{
												"key": "FSPIOP-Source",
												"type": "text",
												"value": "hub_operator"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n  \"transferId\": \"{{fundsOutPrepareReserveTransferId}}\",\n  \"externalReference\": \"string\",\n  \"action\": \"recordFundsOutPrepareReserve\",\n  \"reason\": \"string\",\n  \"amount\": {\n    \"amount\": {{fundsOutPrepareReserveAmount}},\n    \"currency\": \"{{SIMPAYER_CURRENCY}}\"\n  },\n  \"extensionList\": {\n    \"extension\": [\n      {\n        \"key\": \"string\",\n        \"value\": \"string\"\n      }\n    ]\n  }\n}"
										},
										"url": {
											"raw": "{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}/participants/{{SIMPAYER_NAME}}/accounts/{{{{SIMPAYER_NAME}}SettlementAccountId}}",
											"host": [
												"{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}"
											],
											"path": [
												"participants",
												"{{SIMPAYER_NAME}}",
												"accounts",
												"{{{{SIMPAYER_NAME}}SettlementAccountId}}"
											]
										}
									},
									"response": []
								},
								{
									"name": "Record Funds Out Prepare&Reserve - transferStatus",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "cadefeda-a105-456f-b44e-1fafcc1730e7",
												"exec": [
													"pm.environment.set('dateHeader', (new Date()).toUTCString());"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"id": "72c3d266-dfb1-4888-b498-b68b9e63b126",
												"exec": [
													"pm.test(\"Status code is 202\", function () {",
													"    pm.response.to.have.status(202);",
													"});",
													"",
													"setTimeout(function () {",
													"    ",
													"    const getTransferResponse = {",
													"      url: pm.environment.get(\"SIMPAYER_SDK_TESTAPI_URL\")+\"/callbacks/\"+pm.environment.get(\"fundsOutPrepareReserveTransferId\"),",
													"      method: 'GET',",
													"      header: {",
													"          \"Authorization\":\"Bearer \"+pm.environment.get(\"SIMPAYER_BEARER_TOKEN\"),",
													"          \"FSPIOP-Source\": pm.environment.get(\"SIMPAYER_NAME\"),",
													"          \"Content-Type\": \"application/json\"",
													"      }",
													"    };",
													"    pm.sendRequest(getTransferResponse, function (err, response) {",
													"        if(response.responseSize !== 0) {",
													"            ",
													"            //Checking headers",
													"            var headers = response.json().headers;",
													"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-source is switch `, function () {",
													"                pm.expect(headers['fspiop-source']).to.eql('switch');",
													"            });",
													"            ",
													"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-destination is ${pm.environment.get('SIMPAYER_NAME')}`, function () {",
													"                pm.expect(headers['fspiop-destination']).to.eql(`${pm.environment.get('SIMPAYER_NAME')}`);",
													"            });",
													"            ",
													"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} content-type should be application/vnd.interoperability.transfers+json;version=1.0`, function () {",
													"                pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.transfers+json;version=1.0');",
													"            });",
													"            ",
													"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} accept is empty`, function () {",
													"                pm.expect(headers['accept']).to.eql(undefined);",
													"            });",
													"            ",
													"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-signature is not empty`, function () {",
													"                    pm.expect(headers['fspiop-signature']).not.eql(undefined);",
													"                });",
													"            ",
													"            ",
													"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-uri includes /transfers/${pm.environment.get(\"fundsOutPrepareReserveTransferId\")}`, function () {",
													"                pm.expect(headers['fspiop-uri']).to.eql('/transfers/'+ pm.environment.get(\"fundsOutPrepareReserveTransferId\"));",
													"            });",
													"            ",
													"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-http-method is PUT`, function () {",
													"                pm.expect(headers['fspiop-http-method']).to.eql('PUT');",
													"            });",
													"                ",
													"            var jsonData = response.json().data",
													"            pm.test(\"Transfer State should be RESERVED\", function () {",
													"                pm.expect(jsonData.transferState).to.eql(\"RESERVED\");",
													"              });    ",
													"        } else {",
													"            pm.test(\"Transfer FAILED\", function () {",
													"                throw new Error('Did not receive response');",
													"            });",
													"            // postman.setNextRequest(null)",
													"        }",
													"    });",
													"}, 2000);"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{SIMPAYER_BEARER_TOKEN}}",
													"type": "string"
												}
											]
										},
										"method": "GET",
										"header": [
											{
												"key": "Accept",
												"value": "application/vnd.interoperability.transfers+json;version=1.0"
											},
											{
												"key": "Content-Type",
												"value": "application/vnd.interoperability.transfers+json;version=1.0"
											},
											{
												"key": "Date",
												"value": "{{dateHeader}}"
											},
											{
												"key": "FSPIOP-Source",
												"value": "{{SIMPAYER_NAME}}"
											}
										],
										"url": {
											"raw": "{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}/transfers/{{fundsOutPrepareReserveTransferId}}",
											"host": [
												"{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}"
											],
											"path": [
												"transfers",
												"{{fundsOutPrepareReserveTransferId}}"
											]
										},
										"description": "The HTTP request GET /transfers/<ID> is used to get information regarding an earlier created or requested transfer. The <ID> in the URI should contain the transferId that was used for the creation of the transfer."
									},
									"response": []
								},
								{
									"name": "Record Funds Out Commit - SIMPAYER",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "13e7b314-dce7-47e0-98cc-48923d15a4a9",
												"exec": [
													"var uuid = require('uuid');",
													"var generatedUUID = uuid.v4();",
													"pm.environment.set('fundsOutCommitTransferId', generatedUUID);",
													"pm.environment.set('fundsOutCommitAmount', 1000);",
													"",
													"",
													"const payerfspGetStatusRequest = {",
													"    url: pm.environment.get(\"HOST_CENTRAL_LEDGER\") + pm.environment.get(\"BASE_CENTRAL_LEDGER_ADMIN\") + '/participants/' + pm.environment.get(\"SIMPAYER_NAME\") + '/accounts',",
													"    method: 'GET',",
													"    header: {",
													"        \"Authorization\": \"Bearer \" + pm.environment.get(\"HUB_OPERATOR_BEARER_TOKEN\"),",
													"        \"FSPIOP-Source\": \"hub_operator\",",
													"        \"Content-Type\": \"application/json\"",
													"    }",
													"};",
													"pm.sendRequest(payerfspGetStatusRequest, function (err, response) {",
													"    console.log(response.json())",
													"    var jsonData = response.json()",
													"    for (var i in jsonData) {",
													"        if (jsonData[i].ledgerAccountType === 'SETTLEMENT' && (jsonData[i].currency === pm.environment.get(\"SIMPAYER_CURRENCY\"))) {",
													"            pm.environment.set(`${pm.environment.get('SIMPAYER_NAME')}SettlementAccountBalanceBeforeFundsOutCommit`, jsonData[i].value)",
													"        }",
													"    }",
													"});",
													"",
													"const hubGetStatusRequest = {",
													"    url: pm.environment.get(\"HOST_CENTRAL_LEDGER\") + pm.environment.get(\"BASE_CENTRAL_LEDGER_ADMIN\") + '/participants/Hub/accounts',",
													"    method: 'GET',",
													"    header: {",
													"        \"Authorization\": \"Bearer \" + pm.environment.get(\"HUB_OPERATOR_BEARER_TOKEN\"),",
													"        \"FSPIOP-Source\": \"hub_operator\",",
													"        \"Content-Type\": \"application/json\"",
													"    }",
													"};",
													"pm.sendRequest(hubGetStatusRequest, function (err, response) {",
													"    console.log(response.json())",
													"    var jsonData = response.json()",
													"    for (var i in jsonData) {",
													"        if (jsonData[i].ledgerAccountType === 'HUB_RECONCILIATION' && (jsonData[i].currency === pm.environment.get(\"SIMPAYER_CURRENCY\"))) {",
													"            pm.environment.set(\"hubReconAccountBalanceBeforeFundsOutCommit\", jsonData[i].value)",
													"        }",
													"    }",
													"});",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"id": "2e639d8f-6668-45b8-b038-224c82679830",
												"exec": [
													"pm.test(\"Status code is 202\", function () {",
													"    pm.response.to.have.status(202);",
													"});",
													"",
													"setTimeout(function () {",
													"    const payerfspGetStatusRequest = {",
													"        url: pm.environment.get(\"HOST_CENTRAL_LEDGER\") + pm.environment.get(\"BASE_CENTRAL_LEDGER_ADMIN\") + '/participants/' + pm.environment.get(\"SIMPAYER_NAME\") + '/accounts',",
													"        method: 'GET',",
													"        header: {",
													"            \"Authorization\": \"Bearer \" + pm.environment.get(\"HUB_OPERATOR_BEARER_TOKEN\"),",
													"            \"FSPIOP-Source\": pm.environment.get(\"hub_operator\"),",
													"            \"Content-Type\": \"application/json\"",
													"        }",
													"    };",
													"    pm.sendRequest(payerfspGetStatusRequest, function (err, response) {",
													"        console.log(response.json())",
													"        var jsonData = response.json()",
													"        var payerfspSettlementAccountBalanceAfterFundsOutCommit",
													"        for (var i in jsonData) {",
													"            if (jsonData[i].ledgerAccountType === 'SETTLEMENT' && (jsonData[i].currency === pm.environment.get(\"SIMPAYER_CURRENCY\"))) {",
													"                payerfspSettlementAccountBalanceAfterFundsOutCommit = jsonData[i].value",
													"            }",
													"        }",
													"        var payerfspExpectedBalance = pm.environment.get(`${pm.environment.get('SIMPAYER_NAME')}SettlementAccountBalanceBeforeFundsOutCommit`)//-pm.environment.get(\"fundsOutPrepareAmount\")",
													"        pm.test(`Final ${pm.environment.get('SIMPAYER_NAME')} Settlement Account Balance should not change during commit phase`, function () {",
													"            pm.expect(payerfspSettlementAccountBalanceAfterFundsOutCommit).to.eql(payerfspExpectedBalance);",
													"        });",
													"",
													"    });",
													"",
													"    const hubGetStatusRequest = {",
													"        url: pm.environment.get(\"HOST_CENTRAL_LEDGER\") + pm.environment.get(\"BASE_CENTRAL_LEDGER_ADMIN\") + '/participants/Hub/accounts',",
													"        method: 'GET',",
													"        header: {",
													"            \"Authorization\": \"Bearer \" + pm.environment.get(\"HUB_OPERATOR_BEARER_TOKEN\"),",
													"            \"FSPIOP-Source\": pm.environment.get(\"hub_operator\"),",
													"            \"Content-Type\": \"application/json\"",
													"        }",
													"    };",
													"    pm.sendRequest(hubGetStatusRequest, function (err, response) {",
													"        console.log(response.json())",
													"        var jsonData = response.json()",
													"        var hubReconAccountBalanceAfterFundsOutCommit",
													"        for (var i in jsonData) {",
													"            if (jsonData[i].ledgerAccountType === 'HUB_RECONCILIATION' && (jsonData[i].currency === pm.environment.get(\"SIMPAYER_CURRENCY\"))) {",
													"                hubReconAccountBalanceAfterFundsOutCommit = jsonData[i].value",
													"            }",
													"        }",
													"        console.log(`hubReconAccountBalanceBeforeFundsOutCommit: ${Number(pm.environment.get(\"hubReconAccountBalanceBeforeFundsOutCommit\"))}`);",
													"        console.log(`fundsOutCommitAmount: ${Number(pm.environment.get(\"fundsOutCommitAmount\"))}`);",
													"",
													"        var hubExpectedBalance = Number(pm.environment.get(\"hubReconAccountBalanceBeforeFundsOutCommit\")) - Number(pm.environment.get(\"fundsOutCommitAmount\"))",
													"        pm.test(\"Final Hub Reconciliation Account Balance should decrease by the transfer amount\", function () {",
													"            pm.expect(hubReconAccountBalanceAfterFundsOutCommit).to.eql(hubExpectedBalance);",
													"        });",
													"    });",
													"}, 2000)"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
													"type": "string"
												}
											]
										},
										"method": "PUT",
										"header": [
											{
												"key": "Content-Type",
												"value": "application/json"
											},
											{
												"key": "FSPIOP-Source",
												"type": "text",
												"value": "{{hub_operator}}"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n  \"action\": \"recordFundsOutCommit\",\n  \"reason\": \"Reason for out flow of funds\"\n}"
										},
										"url": {
											"raw": "{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}/participants/{{SIMPAYER_NAME}}/accounts/{{{{SIMPAYER_NAME}}SettlementAccountId}}/transfers/{{fundsOutPrepareReserveTransferId}}",
											"host": [
												"{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}"
											],
											"path": [
												"participants",
												"{{SIMPAYER_NAME}}",
												"accounts",
												"{{{{SIMPAYER_NAME}}SettlementAccountId}}",
												"transfers",
												"{{fundsOutPrepareReserveTransferId}}"
											]
										}
									},
									"response": []
								},
								{
									"name": "Record Funds Out Commit - transfer status",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "8c603e8b-adf2-4abe-9162-d80ee787a061",
												"exec": [
													"pm.environment.set('dateHeader', (new Date()).toUTCString());"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"id": "214b3ba5-ef54-496f-9b36-ca387b9532cc",
												"exec": [
													"pm.test(\"Status code is 202\", function () {",
													"    pm.response.to.have.status(202);",
													"});",
													"",
													"setTimeout(function () {",
													"    ",
													"    const getTransferResponse = {",
													"      url: pm.environment.get(\"SIMPAYER_SDK_TESTAPI_URL\")+\"/callbacks/\"+pm.environment.get(\"fundsOutPrepareReserveTransferId\"),",
													"      method: 'GET',",
													"      header: {",
													"          \"Authorization\":\"Bearer \"+pm.environment.get(\"HUB_OPERATOR_BEARER_TOKEN\"),",
													"          \"FSPIOP-Source\": \"hub_operator\",",
													"          \"Content-Type\": \"application/json\"",
													"      }",
													"    };",
													"    pm.sendRequest(getTransferResponse, function (err, response) {",
													"        if(response.responseSize !== 0) {",
													"            //Checking headers",
													"            var headers = response.json().headers;",
													"            pm.test(`${pm.environment.get(\"SIMPAYER_NAME\")} fspiop-source is switch `, function () {",
													"                pm.expect(headers['fspiop-source']).to.eql('switch');",
													"            });",
													"            ",
													"            pm.test(`${pm.environment.get(\"SIMPAYER_NAME\")} fspiop-destination is ${pm.environment.get(\"SIMPAYER_NAME\")}`, function () {",
													"                pm.expect(headers['fspiop-destination']).to.eql(`${pm.environment.get(\"SIMPAYER_NAME\")}`);",
													"            });",
													"            ",
													"            pm.test(`${pm.environment.get(\"SIMPAYER_NAME\")} content-type should be application/vnd.interoperability.transfers+json;version=1.0`, function () {",
													"                pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.transfers+json;version=1.0');",
													"            });",
													"            ",
													"            pm.test(`${pm.environment.get(\"SIMPAYER_NAME\")} accept is empty`, function () {",
													"                pm.expect(headers['accept']).to.eql(undefined);",
													"            });",
													"            ",
													"            pm.test(`${pm.environment.get(\"SIMPAYER_NAME\")} fspiop-signature is not empty`, function () {",
													"                    pm.expect(headers['fspiop-signature']).not.eql(undefined);",
													"                });",
													"            ",
													"            ",
													"            pm.test(`${pm.environment.get(\"SIMPAYER_NAME\")} fspiop-uri includes /transfers/${pm.environment.get(\"fundsOutPrepareReserveTransferId\")}`, function () {",
													"                pm.expect(headers['fspiop-uri']).to.eql('/transfers/'+ pm.environment.get(\"fundsOutPrepareReserveTransferId\"));",
													"            });",
													"            ",
													"            pm.test(`${pm.environment.get(\"SIMPAYER_NAME\")} fspiop-http-method is PUT`, function () {",
													"                pm.expect(headers['fspiop-http-method']).to.eql('PUT');",
													"            });",
													"            ",
													"            var jsonData = response.json().data",
													"            pm.test(\"Transfer State should be COMMITTED\", function () {",
													"                pm.expect(jsonData.transferState).to.eql(\"COMMITTED\");",
													"              });    ",
													"        } else {",
													"            pm.test(\"Transfer FAILED\", function () {",
													"                throw new Error('Did not receive response');",
													"            });",
													"            // postman.setNextRequest(null)",
													"        }",
													"    });",
													"}, 2000)"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{SIMPAYER_BEARER_TOKEN}}",
													"type": "string"
												}
											]
										},
										"method": "GET",
										"header": [
											{
												"key": "Accept",
												"value": "application/vnd.interoperability.transfers+json;version=1.0"
											},
											{
												"key": "Content-Type",
												"value": "application/vnd.interoperability.transfers+json;version=1.0"
											},
											{
												"key": "Date",
												"value": "{{dateHeader}}"
											},
											{
												"key": "FSPIOP-Source",
												"value": "{{SIMPAYER_NAME}}"
											}
										],
										"url": {
											"raw": "{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}/transfers/{{fundsOutPrepareReserveTransferId}}",
											"host": [
												"{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}"
											],
											"path": [
												"transfers",
												"{{fundsOutPrepareReserveTransferId}}"
											]
										},
										"description": "The HTTP request GET /transfers/<ID> is used to get information regarding an earlier created or requested transfer. The <ID> in the URI should contain the transferId that was used for the creation of the transfer."
									},
									"response": []
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						},
						{
							"name": "Reserve&Abort",
							"item": [
								{
									"name": "Record Funds Out Prepare&Reserve- SIMPAYER",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "dd760b7e-78f9-4657-8842-b91979fa15b2",
												"exec": [
													"var uuid = require('uuid');",
													"var generatedUUID = uuid.v4();",
													"pm.environment.set('fundsOutPrepareReserveTransferId', generatedUUID);",
													"pm.environment.set('fundsOutPrepareReserveAmount', 1000);",
													"",
													"",
													"const payerfspGetStatusRequest = {",
													"    url: pm.environment.get(\"HOST_CENTRAL_LEDGER\") + pm.environment.get(\"BASE_CENTRAL_LEDGER_ADMIN\") + '/participants/' + pm.environment.get(\"SIMPAYER_NAME\") + '/accounts',",
													"    method: 'GET',",
													"    header: {",
													"        \"Authorization\": \"Bearer \" + pm.environment.get(\"HUB_OPERATOR_BEARER_TOKEN\"),",
													"        \"FSPIOP-Source\": pm.environment.get(\"hub_operator\"),",
													"        \"Content-Type\": \"application/json\"",
													"    }",
													"};",
													"pm.sendRequest(payerfspGetStatusRequest, function (err, response) {",
													"    console.log(response.json())",
													"    var jsonData = response.json()",
													"    for (var i in jsonData) {",
													"        if (jsonData[i].ledgerAccountType === 'SETTLEMENT' && (jsonData[i].currency === pm.environment.get(\"SIMPAYER_CURRENCY\"))) {",
													"            pm.environment.set(`${pm.environment.get('SIMPAYER_NAME')}SettlementAccountId`, jsonData[i].id)",
													"            pm.environment.set(`${pm.environment.get('SIMPAYER_NAME')}SettlementAccountBalanceBeforeFundsOutPrepare`, jsonData[i].value)",
													"        }",
													"    }",
													"});",
													"",
													"const hubGetStatusRequest = {",
													"    url: pm.environment.get(\"HOST_CENTRAL_LEDGER\") + pm.environment.get(\"BASE_CENTRAL_LEDGER_ADMIN\") + '/participants/Hub/accounts',",
													"    method: 'GET',",
													"    header: {",
													"        \"Authorization\": \"Bearer \" + pm.environment.get(\"HUB_OPERATOR_BEARER_TOKEN\"),",
													"        \"FSPIOP-Source\": pm.environment.get(\"hub_operator\"),",
													"        \"Content-Type\": \"application/json\"",
													"    }",
													"};",
													"pm.sendRequest(hubGetStatusRequest, function (err, response) {",
													"    console.log(response.json())",
													"    var jsonData = response.json()",
													"    for (var i in jsonData) {",
													"        if (jsonData[i].ledgerAccountType === 'HUB_RECONCILIATION' && (jsonData[i].currency === pm.environment.get(\"SIMPAYER_CURRENCY\"))) {",
													"            pm.environment.set(\"hubReconAccountBalanceBeforeFundsOutPrepare\", jsonData[i].value)",
													"        }",
													"    }",
													"});",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"id": "86338de4-a0ae-4ba3-a4e2-28ee4374c20d",
												"exec": [
													"pm.test(\"Status code is 202\", function () {",
													"    pm.response.to.have.status(202);",
													"});",
													"",
													"setTimeout(function () {",
													"    const payerfspGetStatusRequest = {",
													"        url: pm.environment.get(\"HOST_CENTRAL_LEDGER\") + pm.environment.get(\"BASE_CENTRAL_LEDGER_ADMIN\") + '/participants/' + pm.environment.get(\"SIMPAYER_NAME\") + '/accounts',",
													"        method: 'GET',",
													"        header: {",
													"            \"Authorization\": \"Bearer \" + pm.environment.get(\"HUB_OPERATOR_BEARER_TOKEN\"),",
													"            \"FSPIOP-Source\": pm.environment.get(\"hub_operator\"),",
													"            \"Content-Type\": \"application/json\"",
													"        }",
													"    };",
													"    pm.sendRequest(payerfspGetStatusRequest, function (err, response) {",
													"        console.log(response.json())",
													"        var jsonData = response.json()",
													"        var payerfspSettlementAccountBalanceAfterFundsOutPrepare",
													"        for (var i in jsonData) {",
													"            if (jsonData[i].ledgerAccountType === 'SETTLEMENT' && (jsonData[i].currency === pm.environment.get(\"SIMPAYER_CURRENCY\"))) {",
													"                payerfspSettlementAccountBalanceAfterFundsOutPrepare = jsonData[i].value",
													"            }",
													"        }",
													"        var payerfspExpectedBalance = -(-Number(pm.environment.get(`${pm.environment.get('SIMPAYER_NAME')}SettlementAccountBalanceBeforeFundsOutPrepare`)) - Number(pm.environment.get(\"fundsOutPrepareReserveAmount\")))",
													"        pm.test(`Final ${pm.environment.get('SIMPAYER_NAME')} Settlement Account Balance should decrease by the transfer amount`, function () {",
													"            pm.expect(payerfspSettlementAccountBalanceAfterFundsOutPrepare).to.eql(payerfspExpectedBalance);",
													"        });",
													"",
													"    });",
													"",
													"    const hubGetStatusRequest = {",
													"        url: pm.environment.get(\"HOST_CENTRAL_LEDGER\") + pm.environment.get(\"BASE_CENTRAL_LEDGER_ADMIN\") + '/participants/Hub/accounts',",
													"        method: 'GET',",
													"        header: {",
													"            \"Authorization\": \"Bearer \" + pm.environment.get(\"HUB_OPERATOR_BEARER_TOKEN\"),",
													"            \"FSPIOP-Source\": pm.environment.get(\"hub_operator\"),",
													"            \"Content-Type\": \"application/json\"",
													"        }",
													"    };",
													"    pm.sendRequest(hubGetStatusRequest, function (err, response) {",
													"        console.log(response.json())",
													"        var jsonData = response.json()",
													"        var hubReconAccountBalanceAfterFundsOutPrepare",
													"        for (var i in jsonData) {",
													"            if (jsonData[i].ledgerAccountType === 'HUB_RECONCILIATION' && (jsonData[i].currency === pm.environment.get(\"SIMPAYER_CURRENCY\"))) {",
													"                hubReconAccountBalanceAfterFundsOutPrepare = jsonData[i].value",
													"            }",
													"        }",
													"        var hubExpectedBalance = pm.environment.get(\"hubReconAccountBalanceBeforeFundsOutPrepare\")//-pm.environment.get(\"fundsOutPrepareReserveAmount\")",
													"        pm.test(\"Final Hub Reconciliation Account Balance should stay the same in prepare phase\", function () {",
													"            pm.expect(hubReconAccountBalanceAfterFundsOutPrepare).to.eql(hubExpectedBalance);",
													"        });",
													"    });",
													"}, 2000)"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"value": "application/json"
											},
											{
												"key": "FSPIOP-Source",
												"type": "text",
												"value": "hub_operator"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n  \"transferId\": \"{{fundsOutPrepareReserveTransferId}}\",\n  \"externalReference\": \"string\",\n  \"action\": \"recordFundsOutPrepareReserve\",\n  \"reason\": \"string\",\n  \"amount\": {\n    \"amount\": {{fundsOutPrepareReserveAmount}},\n    \"currency\": \"{{SIMPAYER_CURRENCY}}\"\n  },\n  \"extensionList\": {\n    \"extension\": [\n      {\n        \"key\": \"string\",\n        \"value\": \"string\"\n      }\n    ]\n  }\n}"
										},
										"url": {
											"raw": "{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}/participants/{{SIMPAYER_NAME}}/accounts/{{{{SIMPAYER_NAME}}SettlementAccountId}}",
											"host": [
												"{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}"
											],
											"path": [
												"participants",
												"{{SIMPAYER_NAME}}",
												"accounts",
												"{{{{SIMPAYER_NAME}}SettlementAccountId}}"
											]
										}
									},
									"response": []
								},
								{
									"name": "Record Funds Out Prepare&Reserve - transfer status (BUG)",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "734e74f5-4471-4c0f-a977-d1093d9be8be",
												"exec": [
													"pm.environment.set('dateHeader', (new Date()).toUTCString());"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"id": "90d3ddb2-51f7-4099-85ce-8bbfa4bbb0e3",
												"exec": [
													"pm.test(\"Status code is 202\", function () {",
													"    pm.response.to.have.status(202);",
													"});",
													"",
													"setTimeout(function () {",
													"    ",
													"    const getTransferResponse = {",
													"      url: pm.environment.get(\"SIMPAYER_SDK_TESTAPI_URL\")+\"/callbacks/\"+pm.environment.get(\"fundsOutPrepareReserveTransferId\"),",
													"      method: 'GET',",
													"      header: {",
													"          \"Authorization\":\"Bearer \"+pm.environment.get(\"SIMPAYER_BEARER_TOKEN\"),",
													"          \"FSPIOP-Source\": pm.environment.get('SIMPAYER_NAME'),",
													"          \"Content-Type\": \"application/json\"",
													"      }",
													"    };",
													"    pm.sendRequest(getTransferResponse, function (err, response) {",
													"        if(response.responseSize !== 0) {",
													"            ",
													"            //Checking headers",
													"            var headers = response.json().headers;",
													"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-source is switch `, function () {",
													"                pm.expect(headers['fspiop-source']).to.eql('switch');",
													"            });",
													"            ",
													"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-destination is ${pm.environment.get('SIMPAYER_NAME')}`, function () {",
													"                pm.expect(headers['fspiop-destination']).to.eql(`${pm.environment.get('SIMPAYER_NAME')}`);",
													"            });",
													"            ",
													"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} content-type should be application/vnd.interoperability.transfers+json;version=1.0`, function () {",
													"                pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.transfers+json;version=1.0');",
													"            });",
													"            ",
													"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} accept is empty`, function () {",
													"                pm.expect(headers['accept']).to.eql(undefined);",
													"            });",
													"            ",
													"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-signature is not empty`, function () {",
													"                    pm.expect(headers['fspiop-signature']).not.eql(undefined);",
													"                });",
													"            ",
													"            ",
													"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-uri includes /transfers/${pm.environment.get(\"fundsOutPrepareReserveTransferId\")}`, function () {",
													"                pm.expect(headers['fspiop-uri']).to.eql('/transfers/'+ pm.environment.get(\"fundsOutPrepareReserveTransferId\"));",
													"            });",
													"            ",
													"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-http-method is PUT`, function () {",
													"                pm.expect(headers['fspiop-http-method']).to.eql('PUT');",
													"            });",
													"            ",
													"            var jsonData = response.json().data",
													"            pm.test(\"Transfer State should be RESERVED\", function () {",
													"                pm.expect(jsonData.transferState).to.eql(\"RESERVED\");",
													"              }); ",
													"        } else {",
													"            pm.test(\"Transfer FAILED\", function () {",
													"                throw new Error('Did not receive response');",
													"            });",
													"            // postman.setNextRequest(null)",
													"        }",
													"    ",
													"    });",
													"}, 2000)"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{SIMPAYER_BEARER_TOKEN}}",
													"type": "string"
												}
											]
										},
										"method": "GET",
										"header": [
											{
												"key": "Accept",
												"value": "application/vnd.interoperability.transfers+json;version=1.0"
											},
											{
												"key": "Content-Type",
												"value": "application/vnd.interoperability.transfers+json;version=1.0"
											},
											{
												"key": "Date",
												"value": "{{dateHeader}}"
											},
											{
												"key": "FSPIOP-Source",
												"value": "{{SIMPAYER_NAME}}"
											}
										],
										"url": {
											"raw": "{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}/transfers/{{fundsOutPrepareReserveTransferId}}",
											"host": [
												"{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}"
											],
											"path": [
												"transfers",
												"{{fundsOutPrepareReserveTransferId}}"
											]
										},
										"description": "The HTTP request GET /transfers/<ID> is used to get information regarding an earlier created or requested transfer. The <ID> in the URI should contain the transferId that was used for the creation of the transfer."
									},
									"response": []
								},
								{
									"name": "Record Funds Out Abort - SIMPAYER",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "e8ca4e92-4526-4c58-a3c8-02362cc14e70",
												"exec": [
													"var uuid = require('uuid');",
													"var generatedUUID = uuid.v4();",
													"pm.environment.set('fundsOutCommitAmount', 1000);",
													"",
													"const payerfspGetStatusRequest = {",
													"    url: pm.environment.get(\"HOST_CENTRAL_LEDGER\") + pm.environment.get(\"BASE_CENTRAL_LEDGER_ADMIN\") + '/participants/' + pm.environment.get(\"SIMPAYER_NAME\") + '/accounts',",
													"    method: 'GET',",
													"    header: {",
													"        \"Authorization\": \"Bearer \" + pm.environment.get(\"HUB_OPERATOR_BEARER_TOKEN\"),",
													"        \"FSPIOP-Source\": pm.environment.get(\"hub_operator\"),",
													"        \"Content-Type\": \"application/json\"",
													"    }",
													"};",
													"pm.sendRequest(payerfspGetStatusRequest, function (err, response) {",
													"    console.log(response.json())",
													"    var jsonData = response.json()",
													"    for (var i in jsonData) {",
													"        if (jsonData[i].ledgerAccountType === 'SETTLEMENT' && (jsonData[i].currency === pm.environment.get(\"SIMPAYER_CURRENCY\"))) {",
													"            pm.environment.set(`${pm.environment.get('SIMPAYER_NAME')}SettlementAccountBalanceBeforeFundsOutAbort`, jsonData[i].value)",
													"        }",
													"    }",
													"});",
													"",
													"const hubGetStatusRequest = {",
													"    url: pm.environment.get(\"HOST_CENTRAL_LEDGER\") + pm.environment.get(\"BASE_CENTRAL_LEDGER_ADMIN\") + '/participants/Hub/accounts',",
													"    method: 'GET',",
													"    header: {",
													"        \"Authorization\": \"Bearer \" + pm.environment.get(\"HUB_OPERATOR_BEARER_TOKEN\"),",
													"        \"FSPIOP-Source\": pm.environment.get(\"hub_operator\"),",
													"        \"Content-Type\": \"application/json\"",
													"    }",
													"};",
													"pm.sendRequest(hubGetStatusRequest, function (err, response) {",
													"    console.log(response.json())",
													"    var jsonData = response.json()",
													"    for (var i in jsonData) {",
													"        if (jsonData[i].ledgerAccountType === 'HUB_RECONCILIATION' && (jsonData[i].currency === pm.environment.get(\"SIMPAYER_CURRENCY\"))) {",
													"            pm.environment.set(\"hubReconAccountBalanceBeforeFundsOutAbort\", jsonData[i].value)",
													"        }",
													"    }",
													"});",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"id": "f56fb286-4cd7-4260-951d-733dd1831664",
												"exec": [
													"pm.test(\"Status code is 202\", function () {",
													"    pm.response.to.have.status(202);",
													"});",
													"",
													"setTimeout(function () {",
													"    const payerfspGetStatusRequest = {",
													"        url: pm.environment.get(\"HOST_CENTRAL_LEDGER\") + pm.environment.get(\"BASE_CENTRAL_LEDGER_ADMIN\") + '/participants/' + pm.environment.get(\"SIMPAYER_NAME\") + '/accounts',",
													"        method: 'GET',",
													"        header: {",
													"            \"Authorization\": \"Bearer \" + pm.environment.get(\"HUB_OPERATOR_BEARER_TOKEN\"),",
													"            \"FSPIOP-Source\": pm.environment.get(\"hub_operator\"),",
													"            \"Content-Type\": \"application/json\"",
													"        }",
													"    };",
													"    pm.sendRequest(payerfspGetStatusRequest, function (err, response) {",
													"        console.log(response.json())",
													"        var jsonData = response.json()",
													"        var payerfspSettlementAccountBalanceAfterFundsOutAbort",
													"        for (var i in jsonData) {",
													"            if (jsonData[i].ledgerAccountType === 'SETTLEMENT' && (jsonData[i].currency === pm.environment.get(\"SIMPAYER_CURRENCY\"))) {",
													"                payerfspSettlementAccountBalanceAfterFundsOutAbort = jsonData[i].value",
													"            }",
													"        }",
													"        var payerfspExpectedBalance = pm.environment.get(`${pm.environment.get('SIMPAYER_NAME')}SettlementAccountBalanceBeforeFundsOutPrepare`)//-pm.environment.get(\"fundsOutPrepareAmount\")",
													"        pm.test(`Final ${pm.environment.get('SIMPAYER_NAME')} Settlement Account Balance should rollback to the value before Prepare`, function () {",
													"            pm.expect(payerfspSettlementAccountBalanceAfterFundsOutAbort).to.eql(payerfspExpectedBalance);",
													"        });",
													"",
													"    });",
													"",
													"    const hubGetStatusRequest = {",
													"        url: pm.environment.get(\"HOST_CENTRAL_LEDGER\") + pm.environment.get(\"BASE_CENTRAL_LEDGER_ADMIN\") + '/participants/Hub/accounts',",
													"        method: 'GET',",
													"        header: {",
													"            \"Authorization\": \"Bearer \" + pm.environment.get(\"HUB_OPERATOR_BEARER_TOKEN\"),",
													"            \"FSPIOP-Source\": pm.environment.get(\"hub_operator\"),",
													"            \"Content-Type\": \"application/json\"",
													"        }",
													"    };",
													"    pm.sendRequest(hubGetStatusRequest, function (err, response) {",
													"        console.log(response.json())",
													"        var jsonData = response.json()",
													"        var hubReconAccountBalanceAfterFundsOutCommit",
													"        for (var i in jsonData) {",
													"            if (jsonData[i].ledgerAccountType === 'HUB_RECONCILIATION' && (jsonData[i].currency === pm.environment.get(\"SIMPAYER_CURRENCY\"))) {",
													"                hubReconAccountBalanceAfterFundsOutAbort = jsonData[i].value",
													"            }",
													"        }",
													"        var hubExpectedBalance = Number(pm.environment.get(\"hubReconAccountBalanceBeforeFundsOutAbort\"))",
													"        pm.test(\"Final Hub Reconciliation Account Balance should not change\", function () {",
													"            pm.expect(hubReconAccountBalanceAfterFundsOutAbort).to.eql(hubExpectedBalance);",
													"        });",
													"    });",
													"}, 2000)"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
													"type": "string"
												}
											]
										},
										"method": "PUT",
										"header": [
											{
												"key": "Content-Type",
												"value": "application/json"
											},
											{
												"key": "FSPIOP-Source",
												"type": "text",
												"value": "{{hub_operator}}"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n  \"action\": \"recordFundsOutAbort\",\n  \"reason\": \"Reason for out flow of funds\"\n}"
										},
										"url": {
											"raw": "{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}/participants/{{SIMPAYER_NAME}}/accounts/{{payerfspSettlementAccountId}}/transfers/{{fundsOutPrepareReserveTransferId}}",
											"host": [
												"{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}"
											],
											"path": [
												"participants",
												"{{SIMPAYER_NAME}}",
												"accounts",
												"{{payerfspSettlementAccountId}}",
												"transfers",
												"{{fundsOutPrepareReserveTransferId}}"
											]
										}
									},
									"response": []
								},
								{
									"name": "(BUG)Record Funds Out Abort - transfer status",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "b9cf8546-934b-417c-9e4d-4a3eb84e63f1",
												"exec": [
													"pm.environment.set('dateHeader', (new Date()).toUTCString());"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"id": "fdeb375e-82f0-47fb-b61f-6078dc850c77",
												"exec": [
													"pm.test(\"Status code is 202\", function () {",
													"    pm.response.to.have.status(202);",
													"});",
													"",
													"setTimeout(function () {",
													"    ",
													"    const getTransferResponse = {",
													"      url: pm.environment.get(\"SIMPAYER_SDK_TESTAPI_URL\")+\"/callbacks/\"+pm.environment.get(\"fundsOutPrepareReserveTransferId\"),",
													"      method: 'GET',",
													"      header: {",
													"          \"Authorization\":\"Bearer \"+pm.environment.get(\"HUB_OPERATOR_BEARER_TOKEN\"),",
													"          \"FSPIOP-Source\": pm.environment.get(\"hub_operator\"),",
													"          \"Content-Type\": \"application/json\"",
													"      }",
													"    };",
													"    pm.sendRequest(getTransferResponse, function (err, response) {",
													"        if(response.responseSize !== 0) {",
													"            ",
													"            //Checking headers",
													"            var headers = response.json().headers;",
													"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-source is switch `, function () {",
													"                pm.expect(headers['fspiop-source']).to.eql('switch');",
													"            });",
													"            ",
													"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-destination is ${pm.environment.get('SIMPAYER_NAME')}`, function () {",
													"                pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('SIMPAYER_NAME'));",
													"            });",
													"            ",
													"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} content-type should be application/vnd.interoperability.transfers+json;version=1.0`, function () {",
													"                pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.transfers+json;version=1.0');",
													"            });",
													"            ",
													"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} accept is empty`, function () {",
													"                pm.expect(headers['accept']).to.eql(undefined);",
													"            });",
													"            ",
													"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-signature is not empty`, function () {",
													"                    pm.expect(headers['fspiop-signature']).not.eql(undefined);",
													"                });",
													"            ",
													"            ",
													"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-uri includes /transfers/${pm.environment.get(\"fundsOutPrepareReserveTransferId\")}`, function () {",
													"                pm.expect(headers['fspiop-uri']).to.eql(`/transfers/${pm.environment.get(\"fundsOutPrepareReserveTransferId\")}`);",
													"            });",
													"            ",
													"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-http-method is PUT`, function () {",
													"                pm.expect(headers['fspiop-http-method']).to.eql('PUT');",
													"            });",
													"            ",
													"            var jsonData = response.json().data",
													"            pm.test(\"Transfer State should be ABORTED\", function () {",
													"                pm.expect(jsonData.transferState).to.eql(\"ABORTED\");",
													"              });    ",
													"        } else {",
													"            pm.test(\"Transfer FAILED\", function () {",
													"                throw new Error('Did not receive response');",
													"            });",
													"            // postman.setNextRequest(null)",
													"        }",
													"    ",
													"    });",
													"}, 2000)"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{SIMPAYER_BEARER_TOKEN}}",
													"type": "string"
												}
											]
										},
										"method": "GET",
										"header": [
											{
												"key": "Accept",
												"value": "application/vnd.interoperability.transfers+json;version=1.0"
											},
											{
												"key": "Content-Type",
												"value": "application/vnd.interoperability.transfers+json;version=1.0"
											},
											{
												"key": "Date",
												"value": "{{dateHeader}}"
											},
											{
												"key": "FSPIOP-Source",
												"value": "{{SIMPAYER_NAME}}"
											}
										],
										"url": {
											"raw": "{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}/transfers/{{fundsOutPrepareReserveTransferId}}",
											"host": [
												"{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}"
											],
											"path": [
												"transfers",
												"{{fundsOutPrepareReserveTransferId}}"
											]
										},
										"description": "The HTTP request GET /transfers/<ID> is used to get information regarding an earlier created or requested transfer. The <ID> in the URI should contain the transferId that was used for the creation of the transfer."
									},
									"response": []
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				},
				{
					"name": "funds_in",
					"item": [
						{
							"name": "Record Funds In - prepare",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "71a9bc1a-68c3-45bb-a2ff-9160ac0495a4",
										"exec": [
											"var uuid = require('uuid');",
											"var generatedUUID = uuid.v4();",
											"pm.environment.set('fundsInPrepareTransferId', generatedUUID);",
											"pm.environment.set('fundsInPrepareAmount', 5000);",
											"",
											"",
											"const payerfspGetStatusRequest = {",
											"  url: pm.environment.get(\"HOST_CENTRAL_LEDGER\")+pm.environment.get(\"BASE_CENTRAL_LEDGER_ADMIN\")+'/participants/'+pm.environment.get(\"SIMPAYER_NAME\")+'/accounts',",
											"  method: 'GET',",
											"  header: {",
											"      \"Authorization\":\"Bearer \"+pm.environment.get(\"HUB_OPERATOR_BEARER_TOKEN\"),",
											"      \"FSPIOP-Source\": pm.environment.get(\"hub_operator\"),",
											"      \"Content-Type\": \"application/json\"",
											"  }",
											"};",
											"pm.sendRequest(payerfspGetStatusRequest, function (err, response) {",
											"    console.log(response.json())",
											"    var jsonData = response.json()",
											"    for(var i in jsonData) {",
											"        if((jsonData[i].ledgerAccountType === 'SETTLEMENT') && (jsonData[i].currency === pm.environment.get(\"SIMPAYER_CURRENCY\"))) {",
											"            pm.environment.set(`${pm.environment.get(\"SIMPAYER_NAME\")}SettlementAccountId`,jsonData[i].id)",
											"            pm.environment.set(`${pm.environment.get(\"SIMPAYER_NAME\")}SettlementAccountBalanceBeforeFundsIn`,jsonData[i].value)",
											"        }",
											"    }",
											"});",
											"",
											"const hubGetStatusRequest = {",
											"  url: pm.environment.get(\"HOST_CENTRAL_LEDGER\")+pm.environment.get(\"BASE_CENTRAL_LEDGER_ADMIN\")+'/participants/Hub/accounts',",
											"  method: 'GET',",
											"  header: {",
											"      \"Authorization\":\"Bearer \"+pm.environment.get(\"HUB_OPERATOR_BEARER_TOKEN\"),",
											"      \"FSPIOP-Source\": pm.environment.get(\"hub_operator\"),",
											"      \"Content-Type\": \"application/json\"",
											"  }",
											"};",
											"pm.sendRequest(hubGetStatusRequest, function (err, response) {",
											"    console.log(response.json())",
											"    var jsonData = response.json()",
											"    for(var i in jsonData) {",
											"        if((jsonData[i].ledgerAccountType === 'HUB_RECONCILIATION') && (jsonData[i].currency === pm.environment.get(\"SIMPAYER_CURRENCY\"))) {",
											"            pm.environment.set(\"hubReconAccountBalanceBeforeFundsIn\",jsonData[i].value)",
											"        }",
											"    }",
											"});",
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "4a2d2162-f44c-45dd-9d4b-ee7b21f56b4e",
										"exec": [
											"pm.test(\"Status code is 202\", function () {",
											"    pm.response.to.have.status(202);",
											"});",
											"",
											"setTimeout(function () {",
											"    const payerfspGetStatusRequest = {",
											"      url: pm.environment.get(\"HOST_CENTRAL_LEDGER\")+pm.environment.get(\"BASE_CENTRAL_LEDGER_ADMIN\")+'/participants/'+pm.environment.get(\"SIMPAYER_NAME\")+'/accounts',",
											"      method: 'GET',",
											"      header: {",
											"          \"Authorization\":\"Bearer \"+pm.environment.get(\"HUB_OPERATOR_BEARER_TOKEN\"),",
											"          \"FSPIOP-Source\": pm.environment.get(\"hub_operator\"),",
											"          \"Content-Type\": \"application/json\"",
											"      }",
											"    };",
											"    pm.sendRequest(payerfspGetStatusRequest, function (err, response) {",
											"        console.log(`${pm.environment.get(\"SIMPAYER_NAME\")} accounts: `,response.json())",
											"        var jsonData = response.json()",
											"        var payerfspSettlementAccountBalanceAfterFundsIn",
											"        for(var i in jsonData) {",
											"            if(jsonData[i].ledgerAccountType === 'SETTLEMENT'  && (jsonData[i].currency === pm.environment.get(\"SIMPAYER_CURRENCY\"))) {",
											"                payerfspSettlementAccountBalanceAfterFundsIn = jsonData[i].value",
											"            }",
											"        }",
											"        var payerfspExpectedBalance = -(-Number(pm.environment.get(`${pm.environment.get(\"SIMPAYER_NAME\")}SettlementAccountBalanceBeforeFundsIn`)) + Number(pm.environment.get('fundsInPrepareAmount')))",
											"        pm.test(`Final ${pm.environment.get(\"SIMPAYER_NAME\")} Settlement Account Balance should be same as before FundsIn + fundsInPrepareAmount`, function () {",
											"            pm.expect(payerfspSettlementAccountBalanceAfterFundsIn).to.eql(payerfspExpectedBalance);",
											"          });    ",
											"    ",
											"    });",
											"    ",
											"    const hubGetStatusRequest = {",
											"      url: pm.environment.get(\"HOST_CENTRAL_LEDGER\")+pm.environment.get(\"BASE_CENTRAL_LEDGER_ADMIN\")+'/participants/Hub/accounts',",
											"      method: 'GET',",
											"      header: {",
											"          \"Authorization\":\"Bearer \"+pm.environment.get(\"HUB_OPERATOR_BEARER_TOKEN\"),",
											"          \"FSPIOP-Source\": pm.environment.get(\"hub_operator\"),",
											"          \"Content-Type\": \"application/json\"",
											"      }",
											"    };",
											"    pm.sendRequest(hubGetStatusRequest, function (err, response) {",
											"        console.log('hub accounts balance: ',response.json())",
											"        var jsonData = response.json()",
											"        var currentHubReconAccountBalance",
											"        for(var i in jsonData) {",
											"            if(jsonData[i].ledgerAccountType === 'HUB_RECONCILIATION'  && (jsonData[i].currency === pm.environment.get(\"SIMPAYER_CURRENCY\"))) {",
											"                hubReconAccountBalanceAfterFundsIn = jsonData[i].value",
											"            }",
											"        }",
											"        var hubExpectedBalance = Number(pm.environment.get(\"hubReconAccountBalanceBeforeFundsIn\"))+Number(pm.environment.get('fundsInPrepareAmount'))",
											"        console.log(hubExpectedBalance)",
											"        pm.test(\"Final Hub Reconciliation Account Balance should be same as before FundsIn + fundsInPrepareAmount\", function () {",
											"            pm.expect(hubReconAccountBalanceAfterFundsIn).to.eql(hubExpectedBalance);",
											"          });  ",
											"    });",
											"}, 2000)"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "FSPIOP-Source",
										"type": "text",
										"value": "hub_operator"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"transferId\": \"{{fundsInPrepareTransferId}}\",\n  \"externalReference\": \"string\",\n  \"action\": \"recordFundsIn\",\n  \"reason\": \"string\",\n  \"amount\": {\n    \"amount\": \"{{fundsInPrepareAmount}}\",\n    \"currency\": \"{{SIMPAYER_CURRENCY}}\"\n  },\n  \"extensionList\": {\n    \"extension\": [\n      {\n        \"key\": \"string\",\n        \"value\": \"string\"\n      }\n    ]\n  }\n}"
								},
								"url": {
									"raw": "{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}/participants/{{SIMPAYER_NAME}}/accounts/{{{{SIMPAYER_NAME}}SettlementAccountId}}",
									"host": [
										"{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}"
									],
									"path": [
										"participants",
										"{{SIMPAYER_NAME}}",
										"accounts",
										"{{{{SIMPAYER_NAME}}SettlementAccountId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Record Funds In - prepare transfer status",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "734e79f8-68af-4c86-8a4e-d54fd72eef36",
										"exec": [
											"pm.environment.set('dateHeader', (new Date()).toUTCString());"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "4bd4d9a3-2da0-4672-8cb8-4d601bc1c3f7",
										"exec": [
											"pm.test(\"Status code is 202\", function () {",
											"    pm.response.to.have.status(202);",
											"});",
											"",
											"setTimeout(function () {",
											"    ",
											"    const getTransferResponse = {",
											"      url: pm.environment.get(\"SIMPAYER_SDK_TESTAPI_URL\")+\"/callbacks/\"+pm.environment.get(\"fundsInPrepareTransferId\"),",
											"      method: 'GET',",
											"      header: {",
											"          \"Authorization\":\"Bearer \"+pm.environment.get(\"SIMPAYER_BEARER_TOKEN\"),",
											"          \"FSPIOP-Source\": pm.environment.get(\"SIMPAYER_NAME\"),",
											"          \"Content-Type\": \"application/json\"",
											"      }",
											"    }",
											"    pm.sendRequest(getTransferResponse, function (err, response) {",
											"        if(response.responseSize !== 0) {",
											"            ",
											"            //Checking headers",
											"            var headers = response.json().headers;",
											"            pm.test(`${pm.environment.get(\"SIMPAYER_NAME\")} fspiop-source is switch `, function () {",
											"                pm.expect(headers['fspiop-source']).to.eql('switch');",
											"            });",
											"            ",
											"            pm.test(`${pm.environment.get(\"SIMPAYER_NAME\")} fspiop-destination is ${pm.environment.get(\"SIMPAYER_NAME\")}`, function () {",
											"                pm.expect(headers['fspiop-destination']).to.eql(`${pm.environment.get(\"SIMPAYER_NAME\")}`);",
											"            });",
											"            ",
											"            pm.test(`${pm.environment.get(\"SIMPAYER_NAME\")} content-type should be application/vnd.interoperability.transfers+json;version=1.0`, function () {",
											"                pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.transfers+json;version=1.0');",
											"            });",
											"            ",
											"            pm.test(`${pm.environment.get(\"SIMPAYER_NAME\")} accept is empty`, function () {",
											"                pm.expect(headers['accept']).to.eql(undefined);",
											"            });",
											"            ",
											"            pm.test(`${pm.environment.get(\"SIMPAYER_NAME\")} fspiop-signature is not empty`, function () {",
											"                    pm.expect(headers['fspiop-signature']).not.eql(undefined);",
											"                });",
											"            ",
											"            ",
											"            pm.test(`${pm.environment.get(\"SIMPAYER_NAME\")} fspiop-uri includes /transfers/${pm.environment.get(\"fundsInPrepareTransferId\")}`, function () {",
											"                pm.expect(headers['fspiop-uri']).to.eql('/transfers/'+ pm.environment.get(\"fundsInPrepareTransferId\"));",
											"            });",
											"            ",
											"            pm.test(`${pm.environment.get(\"SIMPAYER_NAME\")} fspiop-http-method is PUT`, function () {",
											"                pm.expect(headers['fspiop-http-method']).to.eql('PUT');",
											"            });",
											"            ",
											"            var jsonData = response.json().data",
											"            pm.test(\"Transfer State should be COMMITTED\", function () {",
											"                pm.expect(jsonData.transferState).to.eql(\"COMMITTED\");",
											"            });   ",
											"            ",
											"        } else {",
											"            pm.test(\"Transfer FAILED\", function () {",
											"                throw new Error('Did not receive response');",
											"            });",
											"            // postman.setNextRequest(null)",
											"        }",
											"    ",
											"    });",
											"}, 4000);"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{SIMPAYER_BEARER_TOKEN}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Accept",
										"value": "application/vnd.interoperability.transfers+json;version=1.0"
									},
									{
										"key": "Content-Type",
										"value": "application/vnd.interoperability.transfers+json;version=1.0"
									},
									{
										"key": "Date",
										"value": "{{dateHeader}}"
									},
									{
										"key": "FSPIOP-Source",
										"value": "{{SIMPAYER_NAME}}"
									}
								],
								"url": {
									"raw": "{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}/transfers/{{fundsInPrepareTransferId}}",
									"host": [
										"{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}"
									],
									"path": [
										"transfers",
										"{{fundsInPrepareTransferId}}"
									]
								},
								"description": "The HTTP request GET /transfers/<ID> is used to get information regarding an earlier created or requested transfer. The <ID> in the URI should contain the transferId that was used for the creation of the transfer."
							},
							"response": []
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				},
				{
					"name": "settlement_management",
					"item": [
						{
							"name": "SETTLE  settlement",
							"item": [
								{
									"name": "Setup Settlement",
									"item": [
										{
											"name": "Setup Accounts",
											"item": [
												{
													"name": "Activate currency Account",
													"event": [
														{
															"listen": "test",
															"script": {
																"id": "be7a6e6c-0826-4785-ab67-6a324fe5e412",
																"exec": [
																	"pm.test(\"Status code is 200\", function () {",
																	"    pm.response.to.have.status(200);",
																	"});",
																	"const fsps = [pm.environment.get(\"SIMPAYER_NAME\"),pm.environment.get(\"SIMPAYEE_NAME\"),pm.environment.get(\"SIM1_NAME\"),pm.environment.get(\"SIM2_NAME\")];",
																	"",
																	"pm.response.json().map(participant => {",
																	"    if(fsps.include(participant.name)) {",
																	"       const participantGetRequest = {",
																	"          url: pm.environment.get(\"HOST_CENTRAL_LEDGER\")+pm.environment.get(\"BASE_CENTRAL_LEDGER_ADMIN\")+'/participants/'+participant.name,",
																	"          method: 'GET',",
																	"          header: {",
																	"              \"Authorization\":\"Bearer \"+pm.environment.get(\"HUB_OPERATOR_BEARER_TOKEN\"),",
																	"              \"FSPIOP-Source\": pm.environment.get(\"hub_operator\"),",
																	"              \"Content-Type\": \"application/json\"",
																	"          }",
																	"        };",
																	"        pm.sendRequest(participantGetRequest, function (err, response) {",
																	"            if(response.responseSize !== 0) {",
																	"                response.json().accounts.map(account => {",
																	"                    const url = pm.environment.get(\"HOST_CENTRAL_LEDGER\")+pm.environment.get(\"BASE_CENTRAL_LEDGER_ADMIN\")+'/participants/'+participant.name+'/accounts/'+account.id;",
																	"                    const header =  {",
																	"                          \"Authorization\":\"Bearer \"+pm.environment.get(\"HUB_OPERATOR_BEARER_TOKEN\"),",
																	"                          \"FSPIOP-Source\": pm.environment.get(\"hub_operator\"),",
																	"                          \"Content-Type\": \"application/json\"",
																	"                      };",
																	"                    if(account.currency === pm.environment.get('SIMPAYER_CURRENCY')) {",
																	"                        const participantOutRequest = {",
																	"                          url: url,",
																	"                          method: 'PUT',",
																	"                          header: header,",
																	"                          body: {",
																	"                              \"isActive\": true",
																	"                            }",
																	"                        };",
																	"                    } else {",
																	"                        const participantOutRequest = {",
																	"                          url: url,",
																	"                          method: 'PUT',",
																	"                          header: header,",
																	"                          body: {",
																	"                              \"isActive\": false",
																	"                            }",
																	"                        };",
																	"                    }",
																	"                })",
																	"            } else {",
																	"                pm.test(\"Request FAILED\", function () {",
																	"                    throw new Error('Did not receive response');",
																	"                });",
																	"                // postman.setNextRequest(null)",
																	"            }",
																	"        }); ",
																	"    }",
																	"})"
																],
																"type": "text/javascript"
															}
														}
													],
													"request": {
														"auth": {
															"type": "bearer",
															"bearer": [
																{
																	"key": "token",
																	"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
																	"type": "string"
																}
															]
														},
														"method": "GET",
														"header": [
															{
																"key": "FSPIOP-Source",
																"value": "hub_operator",
																"type": "text"
															}
														],
														"url": {
															"raw": "{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}/participants",
															"host": [
																"{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}"
															],
															"path": [
																"participants"
															]
														}
													},
													"response": []
												}
											],
											"description": "Activate only XOF accounts and disable rest of the accounts",
											"protocolProfileBehavior": {},
											"_postman_isSubFolder": true
										},
										{
											"name": "Create Settlement on the current open window",
											"item": [
												{
													"name": "Get Existing Open Window",
													"event": [
														{
															"listen": "test",
															"script": {
																"id": "d3bce1a7-f93a-4f6e-918d-272c0e141ffd",
																"exec": [
																	"pm.test(\"Status code is 200\", function () {",
																	"    pm.response.to.have.status(200);",
																	"});",
																	"",
																	"pm.test(\"State should be OPEN\", function () {",
																	"    var jsonData = pm.response.json();",
																	"    pm.expect(jsonData[0].state).to.eql('OPEN');",
																	"    pm.environment.set(\"openWindowID\", jsonData[0].settlementWindowId);",
																	"    console.log('openWindowID',pm.environment.get(\"openWindowID\"));",
																	"});",
																	"",
																	""
																],
																"type": "text/javascript"
															}
														}
													],
													"request": {
														"auth": {
															"type": "bearer",
															"bearer": [
																{
																	"key": "token",
																	"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
																	"type": "string"
																}
															]
														},
														"method": "GET",
														"header": [
															{
																"key": "FSPIOP-Source",
																"value": "{{hub_operator}}",
																"type": "text"
															},
															{
																"key": "Content-Type",
																"value": "application/json",
																"type": "text"
															}
														],
														"url": {
															"raw": "{{HOST_CENTRAL_SETTLEMENT}}{{BASE_CENTRAL_SETTLEMENT}}/settlementWindows?state=OPEN",
															"host": [
																"{{HOST_CENTRAL_SETTLEMENT}}{{BASE_CENTRAL_SETTLEMENT}}"
															],
															"path": [
																"settlementWindows"
															],
															"query": [
																{
																	"key": "state",
																	"value": "OPEN"
																}
															]
														}
													},
													"response": []
												},
												{
													"name": "Close Existing Window",
													"event": [
														{
															"listen": "test",
															"script": {
																"id": "df4faa27-4163-40d3-ac90-362967f2b1be",
																"exec": [
																	"pm.test(\"Status code is 200 or 400 error window is empty\", function () {",
																	"    if (pm.response.code === 400){",
																	"        pm.expect(pm.response.code).to.equal(400);",
																	"    } else {",
																	"        pm.expect(pm.response.code).to.equal(200);",
																	"    }",
																	"});",
																	"",
																	"pm.test(\"New window State should be OPEN or current should be empty\", function () {",
																	"    if (pm.response.code === 400) {",
																	"        pm.expect(pm.response.json().errorInformation.errorCode).to.eql('3100');",
																	"        pm.expect(pm.response.json().errorInformation.errorDescription).to.eql('Generic validation error - Window ' + pm.environment.get(\"openWindowID\") + ' is empty');",
																	"        postman.setNextRequest('SIM1_balances_storeAccts');",
																	"    } else {",
																	"        var jsonData = pm.response.json();",
																	"        ",
																	"        pm.expect(pm.response.json().state).to.eql('OPEN');",
																	"        pm.expect(jsonData.settlementWindowId).not.equal(undefined);",
																	"        pm.environment.set(\"closedWindowID\",  pm.environment.get(\"openWindowID\"));",
																	"        pm.environment.set(\"openWindowID\", jsonData.settlementWindowId);",
																	"        console.log('closedWindowID',pm.environment.get(\"closedWindowID\"));",
																	"        console.log('newOpenWindowID',pm.environment.get(\"openWindowID\"));  ",
																	"    }",
																	"});",
																	"",
																	"// pm.test(\"New window State should be OPEN\", function () {",
																	"//     pm.expect(pm.response.json().state).to.eql('OPEN');",
																	"//     pm.environment.set(\"newOpenWindowID\", pm.response.json().settlementWindowId);",
																	"//     pm.environment.set(\"closedWindowID\",  pm.environment.get(\"openWindowID\"));",
																	"//     console.log('newOpenWindowID',pm.environment.get(\"newOpenWindowID\"));",
																	"//     console.log('closedWindowID',pm.environment.get(\"closedWindowID\"));",
																	"// });"
																],
																"type": "text/javascript"
															}
														}
													],
													"request": {
														"auth": {
															"type": "bearer",
															"bearer": [
																{
																	"key": "token",
																	"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
																	"type": "string"
																}
															]
														},
														"method": "POST",
														"header": [
															{
																"key": "Content-Type",
																"value": "application/json"
															},
															{
																"key": "FSPIOP-Source",
																"value": "{{hub_operator}}",
																"type": "text"
															}
														],
														"body": {
															"mode": "raw",
															"raw": "{\n  \"state\": \"CLOSED\",\n  \"reason\": \"string\"\n}"
														},
														"url": {
															"raw": "{{HOST_CENTRAL_SETTLEMENT}}{{BASE_CENTRAL_SETTLEMENT}}/settlementWindows/{{openWindowID}}",
															"host": [
																"{{HOST_CENTRAL_SETTLEMENT}}{{BASE_CENTRAL_SETTLEMENT}}"
															],
															"path": [
																"settlementWindows",
																"{{openWindowID}}"
															]
														}
													},
													"response": []
												},
												{
													"name": "Create Settlement for Closed Window",
													"event": [
														{
															"listen": "test",
															"script": {
																"id": "3b216a78-96f7-40fe-ad27-bb31e3954188",
																"exec": [
																	"pm.test(\"Status code is 200\", function () {",
																	"    pm.response.to.have.status(200);",
																	"});",
																	"",
																	"pm.environment.set(\"settlementId\", pm.response.json().id);",
																	"var jsonData = pm.response.json();",
																	"    ",
																	"pm.test(\"Settlement State should be PENDING_SETTLEMENT\", function () {",
																	"    pm.expect(jsonData.state).to.eql('PENDING_SETTLEMENT');",
																	"});",
																	"",
																	"pm.test(\"Number of associated windows should be 1\", function () {",
																	"    pm.expect(jsonData.settlementWindows.length).to.eql(1);",
																	"});",
																	"",
																	"pm.test(\"Associated Settlement Window ID should be: \"+pm.environment.get(\"closedWindowID\"), function () {",
																	"    pm.expect(jsonData.settlementWindows[0].id).to.eql(pm.environment.get(\"closedWindowID\"));",
																	"});",
																	"",
																	"pm.test(\"Associated Settlement Window state should be PENDING_SETTLEMENT \", function () {",
																	"    pm.expect(jsonData.settlementWindows[0].state).to.eql('PENDING_SETTLEMENT');",
																	"});",
																	"",
																	"",
																	"",
																	""
																],
																"type": "text/javascript"
															}
														}
													],
													"request": {
														"auth": {
															"type": "bearer",
															"bearer": [
																{
																	"key": "token",
																	"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
																	"type": "string"
																}
															]
														},
														"method": "POST",
														"header": [
															{
																"key": "Content-Type",
																"value": "application/json"
															},
															{
																"key": "FSPIOP-Source",
																"type": "text",
																"value": "{{hub_operator}}"
															}
														],
														"body": {
															"mode": "raw",
															"raw": "{\n  \"settlementModel\": \"DEFERREDNET\",\n  \"reason\": \"TESTING\",\n  \"settlementWindows\": [\n    {\n      \"id\": {{closedWindowID}}\n    }\n  ]\n}\n"
														},
														"url": {
															"raw": "{{HOST_CENTRAL_SETTLEMENT}}{{BASE_CENTRAL_SETTLEMENT}}/settlements",
															"host": [
																"{{HOST_CENTRAL_SETTLEMENT}}{{BASE_CENTRAL_SETTLEMENT}}"
															],
															"path": [
																"settlements"
															]
														}
													},
													"response": []
												},
												{
													"name": "Prepare Settlement",
													"event": [
														{
															"listen": "test",
															"script": {
																"id": "f1243bc6-a3ba-424d-9b73-1863a23fe384",
																"exec": [
																	"pm.test(\"Status code is 200\", function () {",
																	"    pm.response.to.have.status(200);",
																	"});",
																	"var jsonData = pm.response.json();",
																	"jsonData.participants.map(participant => {",
																	"  participant.accounts",
																	"    .filter(account => account.netSettlementAmount.currency === pm.environment.get('SIMPAYER_CURRENCY'))",
																	"    .forEach(curAccount => {",
																	"      const participantPutRequest = {",
																	"        url: pm.environment.get(\"HOST_CENTRAL_SETTLEMENT\") + pm.environment.get(\"BASE_CENTRAL_SETTLEMENT\") + '/settlements/' + pm.environment.get(\"settlementId\"),",
																	"        method: 'PUT',",
																	"        header: {",
																	"          \"Authorization\": \"Bearer \" + pm.environment.get(\"HUB_OPERATOR_BEARER_TOKEN\"),",
																	"          \"FSPIOP-Source\": pm.environment.get(\"hub_operator\"),",
																	"          \"Content-Type\": \"application/json\"",
																	"        },",
																	"        body: {",
																	"          mode: 'raw',",
																	"          raw: JSON.stringify(",
																	"            {",
																	"              \"participants\": [",
																	"                {",
																	"                  \"id\": participant.id,",
																	"                  \"accounts\": [",
																	"                    {",
																	"                      \"id\": curAccount.id,",
																	"                      \"reason\": \"Transfers recorded for payer\",",
																	"                      \"state\": \"PS_TRANSFERS_RECORDED\"",
																	"                    }",
																	"                  ]",
																	"                }",
																	"              ]",
																	"            }",
																	"          )",
																	"        }",
																	"      };",
																	"      pm.sendRequest(participantPutRequest, function (err, response) {",
																	"        console.log(response.json());",
																	"      });",
																	"    })",
																	"})",
																	""
																],
																"type": "text/javascript"
															}
														}
													],
													"request": {
														"auth": {
															"type": "bearer",
															"bearer": [
																{
																	"key": "token",
																	"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
																	"type": "string"
																}
															]
														},
														"method": "GET",
														"header": [
															{
																"key": "FSPIOP-Source",
																"type": "text",
																"value": "{{hub_operator}}"
															}
														],
														"url": {
															"raw": "{{HOST_CENTRAL_SETTLEMENT}}{{BASE_CENTRAL_SETTLEMENT}}/settlements/{{settlementId}}",
															"host": [
																"{{HOST_CENTRAL_SETTLEMENT}}{{BASE_CENTRAL_SETTLEMENT}}"
															],
															"path": [
																"settlements",
																"{{settlementId}}"
															]
														}
													},
													"response": []
												},
												{
													"name": "Reserve Settlement",
													"event": [
														{
															"listen": "test",
															"script": {
																"id": "0c90b243-fd00-409b-885f-9110a638634d",
																"exec": [
																	"pm.test(\"Status code is 200\", function () {",
																	"    pm.response.to.have.status(200);",
																	"});",
																	"var jsonData = pm.response.json();",
																	"jsonData.participants.map(participant => {",
																	"  participant.accounts",
																	"    .filter(account => account.netSettlementAmount.currency === pm.environment.get('SIMPAYER_CURRENCY'))",
																	"    .forEach(curAccount => {",
																	"      const participantPutRequest = {",
																	"        url: pm.environment.get(\"HOST_CENTRAL_SETTLEMENT\") + pm.environment.get(\"BASE_CENTRAL_SETTLEMENT\") + '/settlements/' + pm.environment.get(\"settlementId\"),",
																	"        method: 'PUT',",
																	"        header: {",
																	"          \"Authorization\": \"Bearer \" + pm.environment.get(\"HUB_OPERATOR_BEARER_TOKEN\"),",
																	"          \"FSPIOP-Source\": pm.environment.get(\"hub_operator\"),",
																	"          \"Content-Type\": \"application/json\"",
																	"        },",
																	"        body: {",
																	"          mode: 'raw',",
																	"          raw: JSON.stringify(",
																	"            {",
																	"              \"participants\": [",
																	"                {",
																	"                  \"id\": participant.id,",
																	"                  \"accounts\": [",
																	"                    {",
																	"                      \"id\": curAccount.id,",
																	"                      \"reason\": \"Transfers reserved\",",
																	"                      \"state\": \"PS_TRANSFERS_RESERVED\"",
																	"                    }",
																	"                  ]",
																	"                }",
																	"              ]",
																	"            }",
																	"          )",
																	"        }",
																	"      };",
																	"      pm.sendRequest(participantPutRequest, function (err, response) {",
																	"        console.log(response.json());",
																	"      });",
																	"    })",
																	"})"
																],
																"type": "text/javascript"
															}
														}
													],
													"request": {
														"auth": {
															"type": "bearer",
															"bearer": [
																{
																	"key": "token",
																	"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
																	"type": "string"
																}
															]
														},
														"method": "GET",
														"header": [
															{
																"key": "FSPIOP-Source",
																"type": "text",
																"value": "{{hub_operator}}"
															}
														],
														"url": {
															"raw": "{{HOST_CENTRAL_SETTLEMENT}}{{BASE_CENTRAL_SETTLEMENT}}/settlements/{{settlementId}}",
															"host": [
																"{{HOST_CENTRAL_SETTLEMENT}}{{BASE_CENTRAL_SETTLEMENT}}"
															],
															"path": [
																"settlements",
																"{{settlementId}}"
															]
														}
													},
													"response": []
												},
												{
													"name": "Commit Settlement",
													"event": [
														{
															"listen": "test",
															"script": {
																"id": "1cf7d562-e37e-4515-a9a2-4be4c020283b",
																"exec": [
																	"",
																	"pm.test(\"Status code is 200\", function () {",
																	"    pm.response.to.have.status(200);",
																	"});",
																	"var jsonData = pm.response.json();",
																	"jsonData.participants.map(participant => {",
																	"    participant.accounts",
																	"                    .filter(account => account.netSettlementAmount.currency === pm.environment.get('SIMPAYER_CURRENCY'))",
																	"                    .forEach(curAccount => {",
																	"                        const participantPutRequest = {",
																	"                          url: pm.environment.get(\"HOST_CENTRAL_SETTLEMENT\")+pm.environment.get(\"BASE_CENTRAL_SETTLEMENT\")+'/settlements/'+pm.environment.get(\"settlementId\"),",
																	"                          method: 'PUT',",
																	"                          header: {",
																	"                              \"Authorization\":\"Bearer \"+pm.environment.get(\"HUB_OPERATOR_BEARER_TOKEN\"),",
																	"                              \"FSPIOP-Source\": pm.environment.get(\"hub_operator\"),",
																	"                              \"Content-Type\": \"application/json\"",
																	"                          },",
																	"                          body: {",
																	"                            mode: 'raw',",
																	"                            raw: JSON.stringify(",
																	"                                {",
																	"                                  \"participants\": [",
																	"                                    {",
																	"                                      \"id\": participant.id,",
																	"                                      \"accounts\": [",
																	"                                        {",
																	"                                          \"id\": curAccount.id,",
																	"                                          \"reason\": \"Transfers committed\",",
																	"                                          \"state\": \"PS_TRANSFERS_COMMITTED\"",
																	"                                        }",
																	"                                      ]",
																	"                                    }",
																	"                                  ]",
																	"                                }",
																	"                            )",
																	"                          }",
																	"                        };",
																	"                        pm.sendRequest(participantPutRequest, function (err, response) {",
																	"                            console.log(response.json());",
																	"                        });",
																	"                    })",
																	"})",
																	"",
																	""
																],
																"type": "text/javascript"
															}
														}
													],
													"request": {
														"auth": {
															"type": "bearer",
															"bearer": [
																{
																	"key": "token",
																	"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
																	"type": "string"
																}
															]
														},
														"method": "GET",
														"header": [
															{
																"key": "FSPIOP-Source",
																"type": "text",
																"value": "{{hub_operator}}"
															}
														],
														"url": {
															"raw": "{{HOST_CENTRAL_SETTLEMENT}}{{BASE_CENTRAL_SETTLEMENT}}/settlements/{{settlementId}}",
															"host": [
																"{{HOST_CENTRAL_SETTLEMENT}}{{BASE_CENTRAL_SETTLEMENT}}"
															],
															"path": [
																"settlements",
																"{{settlementId}}"
															]
														}
													},
													"response": []
												},
												{
													"name": "Settle Settlement",
													"event": [
														{
															"listen": "test",
															"script": {
																"id": "259937f8-94a1-4f74-9dff-f21f9abf2ad6",
																"exec": [
																	"",
																	"pm.test(\"Status code is 200\", function () {",
																	"    pm.response.to.have.status(200);",
																	"});",
																	"",
																	"var jsonData = pm.response.json();",
																	"jsonData.participants.map(participant => {",
																	"    participant.accounts",
																	"                    .filter(account => account.netSettlementAmount.currency === pm.environment.get('SIMPAYER_CURRENCY'))",
																	"                    .forEach(curAccount => {",
																	"                        const participantPutRequest = {",
																	"                          url: pm.environment.get(\"HOST_CENTRAL_SETTLEMENT\")+pm.environment.get(\"BASE_CENTRAL_SETTLEMENT\")+'/settlements/'+pm.environment.get(\"settlementId\"),",
																	"                          method: 'PUT',",
																	"                          header: {",
																	"                              \"Authorization\":\"Bearer \"+pm.environment.get(\"HUB_OPERATOR_BEARER_TOKEN\"),",
																	"                              \"FSPIOP-Source\": pm.environment.get(\"hub_operator\"),",
																	"                              \"Content-Type\": \"application/json\"",
																	"                          },",
																	"                          body: {",
																	"                            mode: 'raw',",
																	"                            raw: JSON.stringify(",
																	"                                {",
																	"                                  \"participants\": [",
																	"                                    {",
																	"                                      \"id\": participant.id,",
																	"                                      \"accounts\": [",
																	"                                        {",
																	"                                          \"id\": curAccount.id,",
																	"                                          \"reason\": \"Transfers settled for payer\",",
																	"                                          \"state\": \"SETTLED\"",
																	"                                        }",
																	"                                      ]",
																	"                                    }",
																	"                                  ]",
																	"                                }",
																	"                            )",
																	"                          }",
																	"                        };",
																	"                        pm.sendRequest(participantPutRequest, function (err, response) {",
																	"                            console.log(response.json());",
																	"                        });",
																	"                    })",
																	"})",
																	"",
																	""
																],
																"type": "text/javascript"
															}
														}
													],
													"request": {
														"auth": {
															"type": "bearer",
															"bearer": [
																{
																	"key": "token",
																	"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
																	"type": "string"
																}
															]
														},
														"method": "GET",
														"header": [
															{
																"key": "FSPIOP-Source",
																"type": "text",
																"value": "{{hub_operator}}"
															}
														],
														"url": {
															"raw": "{{HOST_CENTRAL_SETTLEMENT}}{{BASE_CENTRAL_SETTLEMENT}}/settlements/{{settlementId}}",
															"host": [
																"{{HOST_CENTRAL_SETTLEMENT}}{{BASE_CENTRAL_SETTLEMENT}}"
															],
															"path": [
																"settlements",
																"{{settlementId}}"
															]
														}
													},
													"response": []
												}
											],
											"description": "This will allow us to not leave any window unsettled. Means eachwindow that we close using this collection will be gone through the whole manual settlement process and the positions gets reset.",
											"event": [
												{
													"listen": "prerequest",
													"script": {
														"id": "ba31bdfb-8c86-40d1-bf1f-ec3b182b4f26",
														"type": "text/javascript",
														"exec": [
															""
														]
													}
												},
												{
													"listen": "test",
													"script": {
														"id": "61f2abd8-d8b6-4ffe-ad78-aeee7f89c334",
														"type": "text/javascript",
														"exec": [
															""
														]
													}
												}
											],
											"protocolProfileBehavior": {},
											"_postman_isSubFolder": true
										},
										{
											"name": "Store Settlement&Position Account Balances Before Transfers",
											"item": [
												{
													"name": "SIM1_balances_storeAccts",
													"event": [
														{
															"listen": "test",
															"script": {
																"id": "5e1f474a-f1be-4935-bd01-40ab83f47257",
																"exec": [
																	"pm.test(\"Status code is 200\", function () {",
																	"    pm.response.to.have.status(200);",
																	"});",
																	"",
																	"var jsonData = pm.response.json();",
																	"jsonData",
																	"    .filter(account => account.currency === pm.environment.get('SIM1_CURRENCY'))",
																	"    .forEach(curAccount => {",
																	"        if(curAccount.ledgerAccountType === \"SETTLEMENT\") {",
																	"            pm.environment.set(`${pm.environment.get(\"SIM1_NAME\")}SettleAccountBalanceBeforeTransfer`, curAccount.value);",
																	"        }",
																	"        if(curAccount.ledgerAccountType === \"POSITION\") {",
																	"            pm.environment.set(`${pm.environment.get(\"SIM1_NAME\")}PositionAccountBalanceBeforeTransfer`, curAccount.value);",
																	"    /*        pm.test(\"testfsp1 position account balance is 0\", function () {",
																	"                pm.expect(curAccount.value).to.eql(0);",
																	"            });*/",
																	"        }",
																	"    })",
																	"",
																	""
																],
																"type": "text/javascript"
															}
														}
													],
													"request": {
														"auth": {
															"type": "bearer",
															"bearer": [
																{
																	"key": "token",
																	"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
																	"type": "string"
																}
															]
														},
														"method": "GET",
														"header": [
															{
																"key": "FSPIOP-Source",
																"value": "{{hub_operator}}",
																"type": "text"
															}
														],
														"url": {
															"raw": "{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}/participants/{{SIM1_NAME}}/accounts",
															"host": [
																"{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}"
															],
															"path": [
																"participants",
																"{{SIM1_NAME}}",
																"accounts"
															]
														}
													},
													"response": []
												},
												{
													"name": "SIM2 balances",
													"event": [
														{
															"listen": "test",
															"script": {
																"id": "675a146a-690a-4988-bdeb-852c063727c9",
																"exec": [
																	"pm.test(\"Status code is 200\", function () {",
																	"    pm.response.to.have.status(200);",
																	"});",
																	"",
																	"var jsonData = pm.response.json();",
																	"jsonData",
																	"    .filter(account => account.currency === pm.environment.get('SIM2_CURRENCY'))",
																	"    .forEach(curAccount => {",
																	"        if(curAccount.ledgerAccountType === \"SETTLEMENT\") {",
																	"            pm.environment.set(`${pm.environment.get(\"SIM2_NAME\")}SettleAccountBalanceBeforeTransfer`, curAccount.value);",
																	"        }",
																	"        if(curAccount.ledgerAccountType === \"POSITION\") {",
																	"            pm.environment.set(`${pm.environment.get(\"SIM2_NAME\")}PositionAccountBalanceBeforeTransfer`, curAccount.value);",
																	"    /*        pm.test(\"testfsp2 position account balance is 0\", function () {",
																	"                pm.expect(curAccount.value).to.eql(0);",
																	"            });*/",
																	"        }",
																	"    })",
																	"",
																	""
																],
																"type": "text/javascript"
															}
														}
													],
													"request": {
														"auth": {
															"type": "bearer",
															"bearer": [
																{
																	"key": "token",
																	"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
																	"type": "string"
																}
															]
														},
														"method": "GET",
														"header": [
															{
																"key": "FSPIOP-Source",
																"type": "text",
																"value": "{{hub_operator}}"
															}
														],
														"url": {
															"raw": "{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}/participants/{{SIM2_NAME}}/accounts",
															"host": [
																"{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}"
															],
															"path": [
																"participants",
																"{{SIM2_NAME}}",
																"accounts"
															]
														}
													},
													"response": []
												},
												{
													"name": "SIMPAYER balances",
													"event": [
														{
															"listen": "test",
															"script": {
																"id": "2d384a77-5c70-4307-b215-a518fa896256",
																"exec": [
																	"pm.test(\"Status code is 200\", function () {",
																	"    pm.response.to.have.status(200);",
																	"});",
																	"",
																	"var jsonData = pm.response.json();",
																	"jsonData",
																	"    .filter(account => account.currency === pm.environment.get('SIMPAYER_CURRENCY'))",
																	"    .forEach(curAccount => {",
																	"        if(curAccount.ledgerAccountType === \"SETTLEMENT\") {",
																	"            pm.environment.set(`${pm.environment.get(\"SIMPAYER_NAME\")}SettleAccountBalanceBeforeTransfer`, curAccount.value);",
																	"        }",
																	"        if(curAccount.ledgerAccountType === \"POSITION\") {",
																	"            pm.environment.set(`${pm.environment.get(\"SIMPAYER_NAME\")}PositionAccountBalanceBeforeTransfer`, curAccount.value);",
																	"     /*       pm.test(`${pm.environment.get('SIMPAYER_NAME')} position account balance is 0`, function () {",
																	"                pm.expect(curAccount.value).to.eql(0);",
																	"            });*/",
																	"        }",
																	"    })",
																	"",
																	"",
																	"",
																	""
																],
																"type": "text/javascript"
															}
														}
													],
													"request": {
														"auth": {
															"type": "bearer",
															"bearer": [
																{
																	"key": "token",
																	"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
																	"type": "string"
																}
															]
														},
														"method": "GET",
														"header": [
															{
																"key": "FSPIOP-Source",
																"type": "text",
																"value": "{{hub_operator}}"
															}
														],
														"url": {
															"raw": "{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}/participants/{{SIMPAYER_NAME}}/accounts",
															"host": [
																"{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}"
															],
															"path": [
																"participants",
																"{{SIMPAYER_NAME}}",
																"accounts"
															]
														}
													},
													"response": []
												},
												{
													"name": "SIMPAYEE balances",
													"event": [
														{
															"listen": "test",
															"script": {
																"id": "d799b65b-1107-4e36-b06a-2cc17d1d966b",
																"exec": [
																	"pm.test(\"Status code is 200\", function () {",
																	"    pm.response.to.have.status(200);",
																	"});",
																	"",
																	"var jsonData = pm.response.json();",
																	"jsonData",
																	"    .filter(account => account.currency === pm.environment.get('SIMPAYEE_CURRENCY'))",
																	"    .forEach(curAccount => {",
																	"        if(curAccount.ledgerAccountType === \"SETTLEMENT\") {",
																	"            pm.environment.set(`${pm.environment.get(\"SIMPAYEE_NAME\")}SettleAccountBalanceBeforeTransfer`, curAccount.value);",
																	"        }",
																	"        if(curAccount.ledgerAccountType === \"POSITION\") {",
																	"            pm.environment.set(`${pm.environment.get(\"SIMPAYEE_NAME\")}PositionAccountBalanceBeforeTransfer`, curAccount.value);",
																	"       /*     pm.test(\"payeefsp position account balance is 0\", function () {",
																	"                pm.expect(curAccount.value).to.eql(0);",
																	"            });*/",
																	"        }",
																	"    })",
																	"",
																	""
																],
																"type": "text/javascript"
															}
														}
													],
													"request": {
														"auth": {
															"type": "bearer",
															"bearer": [
																{
																	"key": "token",
																	"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
																	"type": "string"
																}
															]
														},
														"method": "GET",
														"header": [
															{
																"key": "FSPIOP-Source",
																"type": "text",
																"value": "{{hub_operator}}"
															}
														],
														"url": {
															"raw": "{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}/participants/{{SIMPAYEE_NAME}}/accounts",
															"host": [
																"{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}"
															],
															"path": [
																"participants",
																"{{SIMPAYEE_NAME}}",
																"accounts"
															]
														}
													},
													"response": []
												},
												{
													"name": "HUB balances",
													"event": [
														{
															"listen": "test",
															"script": {
																"id": "4c6619fa-ee7e-4b86-8a30-b6fab42c7bc5",
																"exec": [
																	"pm.test(\"Status code is 200\", function () {",
																	"    pm.response.to.have.status(200);",
																	"});",
																	"",
																	"var jsonData = pm.response.json();",
																	"jsonData",
																	"    .filter(account => account.currency === pm.environment.get('SIMPAYER_CURRENCY'))",
																	"    .forEach(curAccount => {",
																	"        if(curAccount.ledgerAccountType === \"HUB_RECONCILIATION\") {",
																	"            pm.environment.set(\"hubReconciliationAccountBalanceBeforeTransfer\", curAccount.value);",
																	"        }",
																	"        if(curAccount.ledgerAccountType === \"HUB_MULTILATERAL_SETTLEMENT\") {",
																	"            pm.environment.set(\"hubMultilateralAccountBalanceBeforeTransfer\", curAccount.value);",
																	"        }",
																	"    })",
																	"",
																	""
																],
																"type": "text/javascript"
															}
														}
													],
													"request": {
														"auth": {
															"type": "bearer",
															"bearer": [
																{
																	"key": "token",
																	"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
																	"type": "string"
																}
															]
														},
														"method": "GET",
														"header": [
															{
																"key": "FSPIOP-Source",
																"type": "text",
																"value": "{{hub_operator}}"
															}
														],
														"url": {
															"raw": "{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}/participants/Hub/accounts",
															"host": [
																"{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}"
															],
															"path": [
																"participants",
																"Hub",
																"accounts"
															]
														}
													},
													"response": []
												}
											],
											"protocolProfileBehavior": {},
											"_postman_isSubFolder": true
										},
										{
											"name": "Run Quote & Transfers",
											"item": [
												{
													"name": "Send Quote 1 (SIM1 to SIM2)",
													"event": [
														{
															"listen": "prerequest",
															"script": {
																"id": "41933a09-cd7e-4d6f-b3a4-92702f87e51d",
																"exec": [
																	"  var navigator = {}; ",
																	"var window = {}; ",
																	"eval(pm.environment.get('jrsassign'));",
																	"",
																	"",
																	"var uuid = require('uuid');",
																	"var generatedUUID = uuid.v4();",
																	"pm.environment.set('quoteId', generatedUUID);",
																	"generatedUUID = uuid.v4();",
																	"pm.environment.set('transactionId', generatedUUID);",
																	"",
																	"pm.variables.set('quoteDate', (new Date()).toUTCString());",
																	"pm.variables.set('payerName', 'PayerFirst PayerLast');",
																	"",
																	"pm.variables.set('expectedPayeeFirstName', 'GoldenFirst');",
																	"pm.variables.set('expectedPayeeLastName', 'GoldenLast');",
																	"pm.variables.set('expectedPayeeDOB', '2010-10-10');",
																	"",
																	"var oHeader = {alg: \"RS256\", \"FSPIOP-Source\": pm.environment.get('SIM1_NAME'),\"FSPIOP-Destination\": pm.environment.get('SIM2_NAME'), \"FSPIOP-URI\":\"/quotes\", \"FSPIOP-HTTP-Method\":\"POST\", \"Date\":pm.variables.get('quoteDate')};",
																	"var sHeader = JSON.stringify(oHeader);",
																	"console.log(`sHeader: ${sHeader}`)",
																	"",
																	"var objPayload = {",
																	"  \"quoteId\": pm.environment.get('quoteId'),",
																	"  \"transactionId\": pm.environment.get('transactionId'),",
																	"  \"payer\": {",
																	"    \"partyIdInfo\": {",
																	"      \"partyIdType\": \"MSISDN\",",
																	"      \"partyIdentifier\": pm.environment.get('SIM1_MSISDN'),",
																	"      \"fspId\": pm.environment.get('SIM1_NAME')",
																	"    },",
																	"    \"personalInfo\": {",
																	"      \"complexName\": {",
																	"        \"firstName\": \"Mats\",",
																	"        \"lastName\": \"Hagman\"",
																	"      },",
																	"      \"dateOfBirth\": \"1983-10-25\"",
																	"    }",
																	"  },",
																	"  \"payee\": {",
																	"    \"partyIdInfo\": {",
																	"      \"partyIdType\": \"MSISDN\",",
																	"      \"partyIdentifier\": pm.environment.get('SIM2_MSISDN'),",
																	"      \"fspId\": pm.environment.get('SIM2_NAME')",
																	"    }",
																	"  },",
																	"  \"amountType\": \"RECEIVE\",",
																	"  \"amount\": {",
																	"    \"amount\": \"60\",",
																	"    \"currency\": pm.environment.get('SIM2_CURRENCY')",
																	"  },",
																	"  \"transactionType\": {",
																	"    \"scenario\": \"TRANSFER\",",
																	"    \"initiator\": \"PAYER\",",
																	"    \"initiatorType\": \"CONSUMER\"",
																	"  },",
																	"  \"note\": \"hej\"",
																	"}",
																	"",
																	"var sPayload = JSON.stringify(objPayload)",
																	"console.log(`sPayload: ${sPayload}`)",
																	"pm.variables.set(\"quoteRequest\", sPayload);",
																	"var token = KJUR.jws.JWS.sign(\"RS256\", sHeader, sPayload, pm.environment.get('SIM1_JWS_KEY'));",
																	"console.log(`token: ${token}`)",
																	"",
																	"// var encodedHeaders = btoa(sHeader)",
																	"",
																	"// var ofspiopSignature = {signature: vSignature, protectedHeader: encodedHeaders}",
																	"// var token = JSON.stringify(ofspiopSignature)",
																	"",
																	"const [ protectedHeaderBase64, , signature ] = token.split('.');",
																	"",
																	"const signatureObject = {",
																	"    signature: signature.replace('\"', ''),",
																	"    protectedHeader: protectedHeaderBase64.replace('\"', '')",
																	"};",
																	"",
																	"console.log(JSON.stringify(signatureObject))",
																	"",
																	"pm.variables.set('fspiopSignature',JSON.stringify(signatureObject))",
																	""
																],
																"type": "text/javascript"
															}
														},
														{
															"listen": "test",
															"script": {
																"id": "bf080b00-a473-4b3c-bc31-79342bd01c74",
																"exec": [
																	"pm.test(\"Status code is 202\", function () {\r",
																	"    pm.response.to.have.status(202);\r",
																	"});\r",
																	"\r",
																	"setTimeout(function () {\r",
																	"    pm.sendRequest(pm.environment.get(\"SIM2_SDK_TESTAPI_URL\") + \"/requests/\" + pm.environment.get(\"quoteId\"), function (err, response) {\r",
																	"        if (response.responseSize !== 0) {\r",
																	"\r",
																	"            //Check the Headers\r",
																	"            var headers = response.json().headers;\r",
																	"\r",
																	"            pm.test(`${pm.environment.get('SIM2_NAME')} fspiop-source is ${pm.environment.get('SIM1_NAME')}`, function () {\r",
																	"                pm.expect(headers['fspiop-source']).to.eql(pm.environment.get('SIM1_NAME'));\r",
																	"            });\r",
																	"\r",
																	"            pm.test(`${pm.environment.get('SIM2_NAME')} fspiop-destination is ${pm.environment.get('SIM2_NAME')}`, function () {\r",
																	"                pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('SIM2_NAME'));\r",
																	"            });\r",
																	"\r",
																	"            pm.test(`${pm.environment.get('SIM2_NAME')} fspiop-signature is same as sent in the request`, function () {\r",
																	"                pm.expect(headers['fspiop-signature']).to.eql(pm.variables.get(\"fspiopSignature\"));\r",
																	"            });\r",
																	"\r",
																	"            pm.test(`${pm.environment.get('SIM2_NAME')} accept is same as sent in the request`, function () {\r",
																	"                pm.expect(headers['accept']).to.match(/application\\/vnd\\.interoperability\\.quotes\\+json;version=1(\\.\\d)?/);\r",
																	"            });\r",
																	"\r",
																	"            pm.test(`${pm.environment.get('SIM2_NAME')} content-typeis same as sent in the request`, function () {\r",
																	"                pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.quotes+json;version=1.0');\r",
																	"            });\r",
																	"\r",
																	"            pm.test(`${pm.environment.get('SIM2_NAME')} fspiop-uri is /quotes`, function () {\r",
																	"                pm.expect(headers['fspiop-uri']).to.eql('/quotes');\r",
																	"            });\r",
																	"\r",
																	"            pm.test(`${pm.environment.get('SIM2_NAME')} fspiop-http-method is POST`, function () {\r",
																	"                pm.expect(headers['fspiop-http-method']).to.eql('POST');\r",
																	"            });\r",
																	"\r",
																	"        } else {\r",
																	"            pm.test(\"Quote FAILED\", function () {\r",
																	"                throw new Error('Did not receive request on payee side');\r",
																	"            });\r",
																	"            // postman.setNextRequest(null)\r",
																	"        }\r",
																	"    });\r",
																	"}, pm.environment.get(\"SET_TIMEOUT_QUOTES\"))\r",
																	"\r",
																	"setTimeout(function () {\r",
																	"    pm.sendRequest(pm.environment.get(\"SIM1_SDK_TESTAPI_URL\") + \"/callbacks/\" + pm.environment.get(\"quoteId\"), function (err, response) {\r",
																	"        if (response.responseSize !== 0) {\r",
																	"            //Checking headers\r",
																	"            var headers = response.json().headers;\r",
																	"            pm.test(`${pm.environment.get('SIM1_NAME')} fspiop-source is ${pm.environment.get('SIM2_NAME')}`, function () {\r",
																	"                pm.expect(headers['fspiop-source']).to.eql(pm.environment.get('SIM2_NAME'));\r",
																	"            });\r",
																	"\r",
																	"            pm.test(`${pm.environment.get('SIM1_NAME')} fspiop-destination is ${pm.environment.get('SIM1_NAME')}`, function () {\r",
																	"                pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('SIM1_NAME'));\r",
																	"            });\r",
																	"\r",
																	"            pm.test(`${pm.environment.get('SIM1_NAME')} content-type should be application/vnd.interoperability.quotes+json;version=1.0`, function () {\r",
																	"                pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.quotes+json;version=1.0');\r",
																	"            });\r",
																	"\r",
																	"            pm.test(`${pm.environment.get('SIM1_NAME')} accept is empty`, function () {\r",
																	"                pm.expect(headers['accept']).to.eql(undefined);\r",
																	"            });\r",
																	"\r",
																	"\r",
																	"\r",
																	"            var { signature, protectedHeader } = JSON.parse(headers['fspiop-signature'])\r",
																	"            // var strData = JSON.stringify(response.json().data)\r",
																	"            // const token = `${protectedHeader}.${btoa(strData)}.${signature}`\r",
																	"            // console.log(`token: ${token}`)\r",
																	"            // var isValid = KJUR.jws.JWS.verify(token, pm.environment.get('goldentestfsp2JWSPubKey'), {alg: ['RS256']})\r",
																	"            // console.log(`isValid: ${isValid}`)\r",
																	"            // pm.test(\"Check if the response is JWS valid\", function () {\r",
																	"            //     pm.expect(isValid).to.eql(true);\r",
																	"            // });\r",
																	"\r",
																	"            //Validate protected header inside Signature\r",
																	"            var decodedProtectedHeaders = JSON.parse(atob(protectedHeader))\r",
																	"            console.log('decodedProtectedHeaders:', decodedProtectedHeaders)\r",
																	"\r",
																	"            pm.test(\"FSPIOP-Signature Protected Header alg to be RS256\", function () {\r",
																	"                pm.expect(decodedProtectedHeaders['alg']).to.eql('RS256');\r",
																	"            });\r",
																	"            pm.test(\"FSPIOP-Signature Protected Header FSPIOP-URI to be /quotes/\" + pm.environment.get(\"quoteId\"), function () {\r",
																	"                pm.expect(decodedProtectedHeaders['FSPIOP-URI']).to.eql('/quotes/' + pm.environment.get(\"quoteId\"));\r",
																	"            });\r",
																	"\r",
																	"\r",
																	"            pm.test(\"FSPIOP-Signature Protected Header FSPIOP-HTTP-Method to be PUT\", function () {\r",
																	"                pm.expect(decodedProtectedHeaders['FSPIOP-HTTP-Method']).to.eql('PUT');\r",
																	"            });\r",
																	"            pm.test(`FSPIOP-Signature Protected Header FSPIOP-Source to be ${pm.environment.get('SIM2_NAME')}`, function () {\r",
																	"                pm.expect(decodedProtectedHeaders['FSPIOP-Source']).to.eql(pm.environment.get('SIM2_NAME'));\r",
																	"            });\r",
																	"            pm.test(`FSPIOP-Signature Protected Header FSPIOP-Destination to be ${pm.environment.get('SIM1_NAME')}`, function () {\r",
																	"                pm.expect(decodedProtectedHeaders['FSPIOP-Destination']).to.eql(pm.environment.get('SIM1_NAME'));\r",
																	"            });\r",
																	"            pm.test(\"FSPIOP-Signature Protected Header Date is present\", function () {\r",
																	"                pm.expect(decodedProtectedHeaders['Date']).to.eql(headers['date']);\r",
																	"            });\r",
																	"\r",
																	"            pm.test(`${pm.environment.get('SIM1_NAME')} FSPIOP-URI to be /quotes/${pm.environment.get(\"quoteId\")}`, function () {\r",
																	"                pm.expect(headers['fspiop-uri']).to.eql(`/quotes/${pm.environment.get(\"quoteId\")}`);\r",
																	"            });\r",
																	"\r",
																	"            pm.test(`${pm.environment.get('SIM1_NAME')} fspiop-http-method is PUT`, function () {\r",
																	"                pm.expect(headers['fspiop-http-method']).to.eql('PUT');\r",
																	"            });\r",
																	"\r",
																	"            var jsonData = response.json().data;\r",
																	"\r",
																	"            pm.test(\"Response quoteId is  null\", function () {\r",
																	"                pm.expect(jsonData.quoteId).to.eql(undefined);\r",
																	"\r",
																	"            });\r",
																	"\r",
																	"            pm.test(\"Response ilpPacket is not null\", function () {\r",
																	"                pm.expect(jsonData.ilpPacket).not.equal(undefined);\r",
																	"                pm.environment.set(\"ilpPacket\", jsonData.ilpPacket);\r",
																	"            });\r",
																	"\r",
																	"            pm.test(\"Response condition is not null\", function () {\r",
																	"                pm.expect(jsonData.condition).not.equal(undefined);\r",
																	"                pm.environment.set(\"condition\", jsonData.condition);\r",
																	"            });\r",
																	"        } else {\r",
																	"            pm.test(\"Quote FAILED\", function () {\r",
																	"                throw new Error('Did not receive response on Payer side');\r",
																	"            });\r",
																	"            // postman.setNextRequest(null);\r",
																	"        }\r",
																	"\r",
																	"    });\r",
																	"}, pm.environment.get(\"SET_TIMEOUT_QUOTES\"))\r",
																	""
																],
																"type": "text/javascript"
															}
														}
													],
													"request": {
														"auth": {
															"type": "bearer",
															"bearer": [
																{
																	"key": "token",
																	"value": "{{SIM1_BEARER_TOKEN}}",
																	"type": "string"
																}
															]
														},
														"method": "POST",
														"header": [
															{
																"key": "Accept",
																"type": "text",
																"value": "application/vnd.interoperability.quotes+json;version=1.0"
															},
															{
																"key": "Content-Type",
																"type": "text",
																"value": "application/vnd.interoperability.quotes+json;version=1.0"
															},
															{
																"key": "Date",
																"type": "text",
																"value": "{{quoteDate}}"
															},
															{
																"key": "FSPIOP-Source",
																"type": "text",
																"value": "{{SIM1_NAME}}"
															},
															{
																"key": "FSPIOP-Destination",
																"type": "text",
																"value": "{{SIM2_NAME}}"
															},
															{
																"key": "FSPIOP-Signature",
																"type": "text",
																"value": "{{fspiopSignature}}"
															},
															{
																"key": "FSPIOP-HTTP-Method",
																"type": "text",
																"value": "POST"
															},
															{
																"key": "FSPIOP-URI",
																"type": "text",
																"value": "/quotes"
															}
														],
														"body": {
															"mode": "raw",
															"raw": "{{quoteRequest}}"
														},
														"url": {
															"raw": "{{HOST_QUOTING_SERVICE}}/quotes",
															"host": [
																"{{HOST_QUOTING_SERVICE}}"
															],
															"path": [
																"quotes"
															]
														}
													},
													"response": []
												},
												{
													"name": "Send Transfer 1 (SIM1 to SIM2)",
													"event": [
														{
															"listen": "prerequest",
															"script": {
																"id": "6c779e55-cdbb-42c3-a6dd-5899d40120d8",
																"exec": [
																	"var navigator = {}; //fake a navigator object for the lib\r",
																	"var window = {}; //fake a window object for the lib\r",
																	"eval(pm.environment.get('jrsassign'));\r",
																	"\r",
																	"var uuid = require('uuid');\r",
																	"var generatedUUID = uuid.v4();\r",
																	"pm.environment.set('transfer_ID', pm.environment.get('transactionId'));\r",
																	"\r",
																	"\r",
																	"pm.variables.set('transferDate', (new Date()).toUTCString());\r",
																	"\r",
																	"pm.environment.set(\"transferExpiration\",new Date(new Date().getTime() + 60000))\r",
																	"\r",
																	"var oHeader = {alg: \"RS256\", \"FSPIOP-Source\":pm.environment.get('SIM1_NAME'),\"FSPIOP-Destination\":pm.environment.get('SIM2_NAME'), \"FSPIOP-URI\":\"/transfers\", \"FSPIOP-HTTP-Method\":\"POST\", \"Date\":pm.variables.get('transferDate')};\r",
																	"var sHeader = JSON.stringify(oHeader);\r",
																	"console.log(`sHeader: ${sHeader}`)\r",
																	"\r",
																	"var objPayload = {\r",
																	"  \"transferId\": pm.environment.get('transfer_ID'),\r",
																	"  \"payerFsp\": pm.environment.get('SIM1_NAME'),\r",
																	"  \"payeeFsp\": pm.environment.get('SIM2_NAME'),\r",
																	"  \"amount\": {\r",
																	"    \"amount\": \"60\",\r",
																	"    \"currency\": pm.environment.get('SIM2_CURRENCY')\r",
																	"  },\r",
																	"  \"expiration\": pm.environment.get('transferExpiration'),\r",
																	"  \"ilpPacket\": pm.environment.get('ilpPacket'),\r",
																	"  \"condition\": pm.environment.get('condition')\r",
																	"}\r",
																	"var sPayload = JSON.stringify(objPayload)\r",
																	"console.log(`sPayload: ${sPayload}`)\r",
																	"pm.variables.set(\"transferRequest\", sPayload);\r",
																	"var token = KJUR.jws.JWS.sign(\"RS256\", sHeader, sPayload, pm.environment.get('SIM1_JWS_KEY'));\r",
																	"//console.log(`token: ${token}`)\r",
																	"\r",
																	"// var encodedHeaders = btoa(sHeader)\r",
																	"\r",
																	"// var ofspiopSignature = {signature: vSignature, protectedHeader: encodedHeaders}\r",
																	"// var token = JSON.stringify(ofspiopSignature)\r",
																	"\r",
																	"const [ protectedHeaderBase64, , signature ] = token.split('.');\r",
																	"\r",
																	"const signatureObject = {\r",
																	"    signature: signature.replace('\"', ''),\r",
																	"    protectedHeader: protectedHeaderBase64.replace('\"', '')\r",
																	"};\r",
																	"\r",
																	"console.log(JSON.stringify(signatureObject))\r",
																	"\r",
																	"pm.variables.set('fspiopSignature',JSON.stringify(signatureObject))"
																],
																"type": "text/javascript"
															}
														},
														{
															"listen": "test",
															"script": {
																"id": "4af87614-7ae9-43ad-8855-4b271929ee93",
																"exec": [
																	"pm.test(\"Status code is 202\", function () {\r",
																	"    pm.response.to.have.status(202);\r",
																	"});\r",
																	"\r",
																	"// //Check the request that Switch forwards to testfsp2\r",
																	"setTimeout(function () {\r",
																	"  pm.sendRequest(pm.environment.get(\"SIM2_SDK_TESTAPI_URL\")+\"/requests/\"+pm.environment.get(\"transfer_ID\"), function (err, response) {\r",
																	"          if(response.responseSize !== 0) {\r",
																	"              \r",
																	"              //Check the Headers\r",
																	"              var headers = response.json().headers;\r",
																	"              \r",
																	"                pm.test(`${pm.environment.get('SIM2_NAME')} fspiop-source is ${pm.environment.get('SIM1_NAME')}`, function () {\r",
																	"                    pm.expect(headers['fspiop-source']).to.eql(pm.environment.get('SIM1_NAME'));\r",
																	"                });\r",
																	"                \r",
																	"                pm.test(`${pm.environment.get('SIM2_NAME')} fspiop-destination is ${pm.environment.get('SIM2_NAME')}`, function () {\r",
																	"                    pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('SIM2_NAME'));\r",
																	"                });\r",
																	"                \r",
																	"                pm.test(`${pm.environment.get('SIM2_NAME')} content-typeis same as sent in the request`, function () {\r",
																	"                    pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.transfers+json;version=1.0');\r",
																	"                });\r",
																	"                \r",
																	"                pm.test(`${pm.environment.get('SIM2_NAME')} accept is same as sent in the request`, function () {\r",
																	"                    pm.expect(headers['accept']).to.match(/application\\/vnd\\.interoperability\\.transfers\\+json;version=1(\\.\\d)?/);\r",
																	"                });\r",
																	"                \r",
																	"                pm.test(`${pm.environment.get('SIM2_NAME')} fspiop-signature is same as sent in the request`, function () {\r",
																	"                    pm.expect(headers['fspiop-signature']).to.eql(pm.variables.get(\"fspiopSignature\"));\r",
																	"                });\r",
																	"                \r",
																	"                pm.test(`${pm.environment.get('SIM2_NAME')} fspiop-http-method is POST`, function () {\r",
																	"                    pm.expect(headers['fspiop-http-method']).to.eql('POST');\r",
																	"                });\r",
																	"                \r",
																	"                pm.test(`${pm.environment.get('SIM2_NAME')} fspiop-uri is /transfers`, function () {\r",
																	"                    pm.expect(headers['fspiop-uri']).to.eql('/transfers');\r",
																	"                });\r",
																	"                \r",
																	"                \r",
																	"                //Check the data\r",
																	"                var jsonData = response.json().data;\r",
																	"                pm.test(`${pm.environment.get('SIM2_NAME')} data should have the same transferId as request`, function () {\r",
																	"                  pm.expect(jsonData.transferId).to.eql(pm.environment.get(\"transfer_ID\"));\r",
																	"                });\r",
																	"                pm.test(`${pm.environment.get('SIM2_NAME')} data should have the same amount as request`, function () {\r",
																	"                  pm.expect(jsonData.amount.amount).to.eql('60');\r",
																	"                });\r",
																	"                pm.test(`${pm.environment.get('SIM2_NAME')} data should have the same currency as request`, function () {\r",
																	"                  pm.expect(jsonData.amount.currency).to.eql(pm.environment.get(\"currency\"));\r",
																	"                });\r",
																	"                pm.test(`${pm.environment.get('SIM2_NAME')} data should have the same expiration as request`, function () {\r",
																	"                  pm.expect(jsonData.expiration).to.eql(pm.environment.get(\"transferExpiration\"));\r",
																	"                });\r",
																	"                pm.test(`${pm.environment.get('SIM2_NAME')} data should have the same ilpPacket as request`, function () {\r",
																	"                  pm.expect(jsonData.ilpPacket).to.eql(pm.environment.get(\"ilpPacket\"));\r",
																	"                });\r",
																	"                pm.test(`${pm.environment.get('SIM2_NAME')} data should have the same condition as request`, function () {\r",
																	"                  pm.expect(jsonData.condition).to.eql(pm.environment.get(\"condition\"));\r",
																	"                });\r",
																	"                \r",
																	"          } else {\r",
																	"              pm.test(\"Transfer FAILED\", function () {\r",
																	"                throw new Error('Did not receive response on payee side');\r",
																	"              });\r",
																	"              // postman.setNextRequest(null)\r",
																	"          }\r",
																	"  });\r",
																	"}, pm.environment.get(\"SET_TIMEOUT_TRANSFERS\"))\r",
																	"\r",
																	"//Check the callback response that Switch forwards to testfsp1\r",
																	"setTimeout(function () {\r",
																	"  pm.sendRequest(pm.environment.get(\"SIM1_SDK_TESTAPI_URL\")+\"/callbacks/\"+pm.environment.get(\"transfer_ID\"), function (err, response) {\r",
																	"          if(response.responseSize !== 0) {\r",
																	"            //Checking headers\r",
																	"            var headers = response.json().headers;\r",
																	"            pm.test(`${pm.environment.get('SIM1_NAME')} fspiop-source is ${pm.environment.get('SIM2_NAME')}`, function () {\r",
																	"                pm.expect(headers['fspiop-source']).to.eql(pm.environment.get('SIM2_NAME'));\r",
																	"            });\r",
																	"            \r",
																	"            pm.test(`${pm.environment.get('SIM1_NAME')} fspiop-destination is ${pm.environment.get('SIM1_NAME')}`, function () {\r",
																	"                pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('SIM1_NAME'));\r",
																	"            });\r",
																	"            \r",
																	"            pm.test(`${pm.environment.get('SIM1_NAME')} content-type should be application/vnd.interoperability.transfers+json;version=1.0`, function () {\r",
																	"                pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.transfers+json;version=1.0');\r",
																	"            });\r",
																	"            \r",
																	"            pm.test(`${pm.environment.get('SIM1_NAME')} accept is empty`, function () {\r",
																	"                pm.expect(headers['accept']).to.eql(undefined);\r",
																	"            });\r",
																	"            \r",
																	"            \r",
																	"            pm.test(`${pm.environment.get('SIM1_NAME')} fspiop-uri includes /transfers/${pm.environment.get('transfer_ID')}`, function () {\r",
																	"                pm.expect(headers['fspiop-uri']).to.eql(`/transfers/${pm.environment.get('transfer_ID')}`);\r",
																	"            });\r",
																	"            \r",
																	"            pm.test(`${pm.environment.get('SIM1_NAME')} fspiop-http-method is PUT`, function () {\r",
																	"                pm.expect(headers['fspiop-http-method']).to.eql('PUT');\r",
																	"            });\r",
																	"            \r",
																	"            var jsonData = response.json().data;\r",
																	"            pm.test(\"Response data does not have transferId\", function () {\r",
																	"               pm.expect(jsonData.transferId).to.eql(undefined);\r",
																	"            });\r",
																	"            pm.test(\"Response status is COMMITTED\", function () {\r",
																	"                pm.expect(jsonData.transferState).to.eql('COMMITTED');\r",
																	"            });\r",
																	"          } else {\r",
																	"              pm.test(\"Transfer FAILED\", function () {\r",
																	"                throw new Error('Did not receive response on payer side');\r",
																	"              });\r",
																	"              // postman.setNextRequest(null)\r",
																	"          }\r",
																	"   });\r",
																	"}, pm.environment.get(\"SET_TIMEOUT_TRANSFERS\"))"
																],
																"type": "text/javascript"
															}
														}
													],
													"request": {
														"auth": {
															"type": "bearer",
															"bearer": [
																{
																	"key": "token",
																	"value": "{{SIM1_BEARER_TOKEN}}",
																	"type": "string"
																}
															]
														},
														"method": "POST",
														"header": [
															{
																"key": "Accept",
																"type": "text",
																"value": "application/vnd.interoperability.transfers+json;version=1.0"
															},
															{
																"key": "Content-Type",
																"type": "text",
																"value": "application/vnd.interoperability.transfers+json;version=1.0"
															},
															{
																"key": "Date",
																"type": "text",
																"value": "{{transferDate}}"
															},
															{
																"key": "FSPIOP-Source",
																"type": "text",
																"value": "{{SIM1_NAME}}"
															},
															{
																"key": "FSPIOP-Destination",
																"type": "text",
																"value": "{{SIM2_NAME}}"
															},
															{
																"key": "FSPIOP-Signature",
																"type": "text",
																"value": "{{fspiopSignature}}"
															},
															{
																"key": "FSPIOP-URI",
																"type": "text",
																"value": "/transfers"
															},
															{
																"key": "FSPIOP-HTTP-Method",
																"type": "text",
																"value": "POST"
															}
														],
														"body": {
															"mode": "raw",
															"raw": "{{transferRequest}}"
														},
														"url": {
															"raw": "{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}/transfers",
															"host": [
																"{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}"
															],
															"path": [
																"transfers"
															]
														}
													},
													"response": []
												},
												{
													"name": "Send Quote 2 (SIM1 to SIMPAYEE)",
													"event": [
														{
															"listen": "prerequest",
															"script": {
																"id": "5f70f92c-9232-468a-a0bd-21d231f54a6d",
																"exec": [
																	"var navigator = {}; ",
																	"var window = {}; ",
																	"eval(pm.environment.get('jrsassign'));",
																	"",
																	"",
																	"var uuid = require('uuid');",
																	"var generatedUUID = uuid.v4();",
																	"pm.environment.set('quoteId', generatedUUID);",
																	"generatedUUID = uuid.v4();",
																	"pm.environment.set('transactionId', generatedUUID);",
																	"",
																	"pm.variables.set('quoteDate', (new Date()).toUTCString());",
																	"pm.variables.set('payerName', 'PayerFirst PayerLast');",
																	"",
																	"pm.variables.set('expectedPayeeFirstName', 'GoldenFirst');",
																	"pm.variables.set('expectedPayeeLastName', 'GoldenLast');",
																	"pm.variables.set('expectedPayeeDOB', '2010-10-10');",
																	"",
																	"var oHeader = {alg: \"RS256\", \"FSPIOP-Source\":pm.environment.get('SIM1_NAME'),\"FSPIOP-Destination\":pm.environment.get('SIMPAYEE_NAME'), \"FSPIOP-URI\":\"/quotes\", \"FSPIOP-HTTP-Method\":\"POST\", \"Date\":pm.variables.get('quoteDate')};",
																	"var sHeader = JSON.stringify(oHeader);",
																	"console.log(`sHeader: ${sHeader}`)",
																	"",
																	"var objPayload = {",
																	"  \"quoteId\": pm.environment.get('quoteId'),",
																	"  \"transactionId\": pm.environment.get('transactionId'),",
																	"  \"payer\": {",
																	"    \"partyIdInfo\": {",
																	"      \"partyIdType\": \"MSISDN\",",
																	"      \"partyIdentifier\": pm.environment.get('SIM1_MSISDN'),",
																	"      \"fspId\": pm.environment.get('SIM1_NAME')",
																	"    },",
																	"    \"personalInfo\": {",
																	"      \"complexName\": {",
																	"        \"firstName\": \"Mats\",",
																	"        \"lastName\": \"Hagman\"",
																	"      },",
																	"      \"dateOfBirth\": \"1983-10-25\"",
																	"    }",
																	"  },",
																	"  \"payee\": {",
																	"    \"partyIdInfo\": {",
																	"      \"partyIdType\": \"MSISDN\",",
																	"      \"partyIdentifier\": pm.environment.get('SIMPAYEE_MSISDN'),",
																	"      \"fspId\": pm.environment.get('SIMPAYEE_NAME')",
																	"    }",
																	"  },",
																	"  \"amountType\": \"RECEIVE\",",
																	"  \"amount\": {",
																	"    \"amount\": \"55\",",
																	"    \"currency\": pm.environment.get('SIMPAYEE_CURRENCY')",
																	"  },",
																	"  \"transactionType\": {",
																	"    \"scenario\": \"TRANSFER\",",
																	"    \"initiator\": \"PAYER\",",
																	"    \"initiatorType\": \"CONSUMER\"",
																	"  },",
																	"  \"note\": \"hej\"",
																	"}",
																	"",
																	"var sPayload = JSON.stringify(objPayload)",
																	"console.log(`sPayload: ${sPayload}`)",
																	"pm.variables.set(\"quoteRequest\", sPayload);",
																	"var token = KJUR.jws.JWS.sign(\"RS256\", sHeader, sPayload, pm.environment.get('SIM1_JWS_KEY'));",
																	"console.log(`token: ${token}`)",
																	"",
																	"// var encodedHeaders = btoa(sHeader)",
																	"",
																	"// var ofspiopSignature = {signature: vSignature, protectedHeader: encodedHeaders}",
																	"// var token = JSON.stringify(ofspiopSignature)",
																	"",
																	"const [ protectedHeaderBase64, , signature ] = token.split('.');",
																	"",
																	"const signatureObject = {",
																	"    signature: signature.replace('\"', ''),",
																	"    protectedHeader: protectedHeaderBase64.replace('\"', '')",
																	"};",
																	"",
																	"console.log(JSON.stringify(signatureObject))",
																	"",
																	"pm.variables.set('fspiopSignature',JSON.stringify(signatureObject))",
																	""
																],
																"type": "text/javascript"
															}
														},
														{
															"listen": "test",
															"script": {
																"id": "b46b7347-e85b-41ab-a2bd-5d5749a30fcc",
																"exec": [
																	"pm.test(\"Status code is 202\", function () {\r",
																	"    pm.response.to.have.status(202);\r",
																	"});\r",
																	"\r",
																	"setTimeout(function () {\r",
																	"  pm.sendRequest(pm.environment.get(\"SIMPAYEE_SDK_TESTAPI_URL\")+\"/requests/\"+pm.variables.get(\"quoteId\"), function (err, response) {\r",
																	"          if(response.responseSize !== 0) {\r",
																	"              \r",
																	"              //Check the Headers\r",
																	"              var headers = response.json().headers;\r",
																	"              \r",
																	"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-source is ${pm.environment.get('SIM1_NAME')}`, function () {\r",
																	"                    pm.expect(headers['fspiop-source']).to.eql(pm.environment.get('SIM1_NAME'));\r",
																	"                });\r",
																	"                \r",
																	"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-destination is ${pm.environment.get('SIMPAYEE_NAME')}`, function () {\r",
																	"                    pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('SIMPAYEE_NAME'));\r",
																	"                });\r",
																	"                \r",
																	"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-signature is same as sent in the request`, function () {\r",
																	"                    pm.expect(headers['fspiop-signature']).to.eql(pm.variables.get(\"fspiopSignature\"));\r",
																	"                });\r",
																	"                \r",
																	"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} accept is same as sent in the request`, function () {\r",
																	"                    pm.expect(headers['accept']).to.match(/application\\/vnd\\.interoperability\\.quotes\\+json;version=1(\\.\\d)?/);\r",
																	"                });\r",
																	"                \r",
																	"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} content-typeis same as sent in the request`, function () {\r",
																	"                    pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.quotes+json;version=1.0');\r",
																	"                });\r",
																	"                \r",
																	"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-uri is /quotes`, function () {\r",
																	"                    pm.expect(headers['fspiop-uri']).to.eql('/quotes');\r",
																	"                });\r",
																	"                \r",
																	"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-http-method is POST`, function () {\r",
																	"                    pm.expect(headers['fspiop-http-method']).to.eql('POST');\r",
																	"                });\r",
																	"                \r",
																	"          } else {\r",
																	"              pm.test(\"Quote FAILED\", function () {\r",
																	"                throw new Error('Did not receive request on payee side');\r",
																	"              });\r",
																	"              // postman.setNextRequest(null)\r",
																	"          }\r",
																	"   });\r",
																	"}, pm.environment.get(\"SET_TIMEOUT_QUOTES\"))\r",
																	"\r",
																	"setTimeout(function () {\r",
																	"  pm.sendRequest(pm.environment.get(\"SIM1_SDK_TESTAPI_URL\")+\"/callbacks/\"+pm.environment.get(\"quoteId\"), function (err, response) {\r",
																	"      if(response.responseSize !== 0) {\r",
																	"          //Checking headers\r",
																	"            var headers = response.json().headers;\r",
																	"            pm.test(`${pm.environment.get('SIM1_NAME')} fspiop-source is ${pm.environment.get('SIMPAYEE_NAME')}`, function () {\r",
																	"                pm.expect(headers['fspiop-source']).to.eql(pm.environment.get('SIMPAYEE_NAME'));\r",
																	"            });\r",
																	"            \r",
																	"            pm.test(`${pm.environment.get('SIM1_NAME')} fspiop-destination is ${pm.environment.get('SIM1_NAME')}`, function () {\r",
																	"                pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('SIM1_NAME'));\r",
																	"            });\r",
																	"            \r",
																	"            pm.test(`${pm.environment.get('SIM1_NAME')} content-type should be application/vnd.interoperability.quotes+json;version=1.0`, function () {\r",
																	"                pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.quotes+json;version=1.0');\r",
																	"            });\r",
																	"            \r",
																	"            pm.test(`${pm.environment.get('SIM1_NAME')} accept is empty`, function () {\r",
																	"                pm.expect(headers['accept']).to.eql(undefined);\r",
																	"            });\r",
																	"            \r",
																	"            \r",
																	"            \r",
																	"            var {signature,protectedHeader} = JSON.parse(headers['fspiop-signature'])\r",
																	"            // var strData = JSON.stringify(response.json().data)\r",
																	"            // const token = `${protectedHeader}.${btoa(strData)}.${signature}`\r",
																	"            // console.log(`token: ${token}`)\r",
																	"            // var isValid = KJUR.jws.JWS.verify(token, pm.environment.get('goldenpayeefspJWSPubKey'), {alg: ['RS256']})\r",
																	"            // console.log(`isValid: ${isValid}`)\r",
																	"            // pm.test(\"Check if the response is JWS valid\", function () {\r",
																	"            //     pm.expect(isValid).to.eql(true);\r",
																	"            // });\r",
																	"            \r",
																	"            //Validate protected header inside Signature\r",
																	"            var decodedProtectedHeaders = JSON.parse(atob(protectedHeader))\r",
																	"            console.log('decodedProtectedHeaders:',decodedProtectedHeaders)\r",
																	"            \r",
																	"            pm.test(\"FSPIOP-Signature Protected Header alg to be RS256\", function () {\r",
																	"                pm.expect(decodedProtectedHeaders['alg']).to.eql('RS256');\r",
																	"            });\r",
																	"            pm.test(\"FSPIOP-Signature Protected Header FSPIOP-URI to be /quotes/\"+pm.environment.get(\"quoteId\"), function () {\r",
																	"                pm.expect(decodedProtectedHeaders['FSPIOP-URI']).to.eql('/quotes/'+pm.environment.get(\"quoteId\"));\r",
																	"            });\r",
																	"            \r",
																	"\r",
																	"            pm.test(\"FSPIOP-Signature Protected Header FSPIOP-HTTP-Method to be PUT\", function () {\r",
																	"                pm.expect(decodedProtectedHeaders['FSPIOP-HTTP-Method']).to.eql('PUT');\r",
																	"            });\r",
																	"            pm.test(`FSPIOP-Signature Protected Header FSPIOP-Source to be ${pm.environment.get('SIMPAYEE_NAME')}`, function () {\r",
																	"                pm.expect(decodedProtectedHeaders['FSPIOP-Source']).to.eql(pm.environment.get('SIMPAYEE_NAME'));\r",
																	"            });\r",
																	"            pm.test(`FSPIOP-Signature Protected Header FSPIOP-Destination to be ${pm.environment.get('SIM1_NAME')}`, function () {\r",
																	"                pm.expect(decodedProtectedHeaders['FSPIOP-Destination']).to.eql(pm.environment.get('SIM1_NAME'));\r",
																	"            });\r",
																	"            pm.test(\"FSPIOP-Signature Protected Header Date is present\", function () {\r",
																	"                pm.expect(decodedProtectedHeaders['Date']).to.eql(headers['date']);\r",
																	"            });\r",
																	"           \r",
																	"            pm.test(`${pm.environment.get('SIM1_NAME')} FSPIOP-URI to be /quotes/${pm.environment.get(\"quoteId\")}`, function () {\r",
																	"                pm.expect(headers['fspiop-uri']).to.eql(`/quotes/${pm.environment.get(\"quoteId\")}`);\r",
																	"            });\r",
																	"            \r",
																	"            pm.test(`${pm.environment.get('SIM1_NAME')} fspiop-http-method is PUT`, function () {\r",
																	"                pm.expect(headers['fspiop-http-method']).to.eql('PUT');\r",
																	"            });\r",
																	"            \r",
																	"            var jsonData = response.json().data;\r",
																	"            \r",
																	"            pm.test(\"Response quoteId is  null\", function () {\r",
																	"                pm.expect(jsonData.quoteId).to.eql(undefined);\r",
																	"                \r",
																	"            });\r",
																	"          \r",
																	"            pm.test(\"Response ilpPacket is not null\", function () {\r",
																	"                pm.expect(jsonData.ilpPacket).not.equal(undefined);\r",
																	"                pm.environment.set(\"ilpPacket\", jsonData.ilpPacket);\r",
																	"            });\r",
																	"       \r",
																	"           pm.test(\"Response condition is not null\", function () {\r",
																	"               pm.expect(jsonData.condition).not.equal(undefined);\r",
																	"               pm.environment.set(\"condition\", jsonData.condition);\r",
																	"           });\r",
																	"      } else {\r",
																	"          pm.test(\"Quote FAILED\", function () {\r",
																	"            throw new Error('Did not receive response on Payer side');\r",
																	"           });\r",
																	"           // postman.setNextRequest(null);\r",
																	"      }\r",
																	"       \r",
																	"   });\r",
																	"}, pm.environment.get(\"SET_TIMEOUT_QUOTES\"))\r",
																	""
																],
																"type": "text/javascript"
															}
														}
													],
													"request": {
														"auth": {
															"type": "bearer",
															"bearer": [
																{
																	"key": "token",
																	"value": "{{SIM1_BEARER_TOKEN}}",
																	"type": "string"
																}
															]
														},
														"method": "POST",
														"header": [
															{
																"key": "Accept",
																"type": "text",
																"value": "application/vnd.interoperability.quotes+json;version=1.0"
															},
															{
																"key": "Content-Type",
																"type": "text",
																"value": "application/vnd.interoperability.quotes+json;version=1.0"
															},
															{
																"key": "Date",
																"type": "text",
																"value": "{{quoteDate}}"
															},
															{
																"key": "FSPIOP-Source",
																"type": "text",
																"value": "{{SIM1_NAME}}"
															},
															{
																"key": "FSPIOP-Destination",
																"type": "text",
																"value": "{{SIMPAYEE_NAME}}"
															},
															{
																"key": "FSPIOP-Signature",
																"type": "text",
																"value": "{{fspiopSignature}}"
															},
															{
																"key": "FSPIOP-HTTP-Method",
																"type": "text",
																"value": "POST"
															},
															{
																"key": "FSPIOP-URI",
																"type": "text",
																"value": "/quotes"
															}
														],
														"body": {
															"mode": "raw",
															"raw": "{{quoteRequest}}"
														},
														"url": {
															"raw": "{{HOST_QUOTING_SERVICE}}/quotes",
															"host": [
																"{{HOST_QUOTING_SERVICE}}"
															],
															"path": [
																"quotes"
															]
														}
													},
													"response": []
												},
												{
													"name": "Send Transfer 2 (SIM1 to SIMPAYEE)",
													"event": [
														{
															"listen": "prerequest",
															"script": {
																"id": "269e7169-e762-4cd0-9462-4fc62db70d13",
																"exec": [
																	"var navigator = {}; //fake a navigator object for the lib\r",
																	"var window = {}; //fake a window object for the lib\r",
																	"eval(pm.environment.get('jrsassign'));\r",
																	"\r",
																	"var uuid = require('uuid');\r",
																	"var generatedUUID = uuid.v4();\r",
																	"pm.environment.set('transfer_ID', pm.environment.get('transactionId'));\r",
																	"\r",
																	"\r",
																	"pm.variables.set('transferDate', (new Date()).toUTCString());\r",
																	"\r",
																	"pm.environment.set(\"transferExpiration\",new Date(new Date().getTime() + 60000))\r",
																	"\r",
																	"var oHeader = {alg: \"RS256\", \"FSPIOP-Source\":pm.environment.get('SIM1_NAME'),\"FSPIOP-Destination\":pm.environment.get('SIMPAYEE_NAME'), \"FSPIOP-URI\":\"/transfers\", \"FSPIOP-HTTP-Method\":\"POST\", \"Date\":pm.variables.get('transferDate')};\r",
																	"var sHeader = JSON.stringify(oHeader);\r",
																	"console.log(`sHeader: ${sHeader}`)\r",
																	"\r",
																	"var objPayload = {\r",
																	"  \"transferId\": pm.environment.get('transfer_ID'),\r",
																	"  \"payerFsp\": pm.environment.get('SIM1_NAME'),\r",
																	"  \"payeeFsp\": pm.environment.get('SIMPAYEE_NAME'),\r",
																	"  \"amount\": {\r",
																	"    \"amount\": \"55\",\r",
																	"    \"currency\": pm.environment.get('SIMPAYEE_CURRENCY')\r",
																	"  },\r",
																	"  \"expiration\": pm.environment.get('transferExpiration'),\r",
																	"  \"ilpPacket\": pm.environment.get('ilpPacket'),\r",
																	"  \"condition\": pm.environment.get('condition')\r",
																	"}\r",
																	"var sPayload = JSON.stringify(objPayload)\r",
																	"console.log(`sPayload: ${sPayload}`)\r",
																	"pm.variables.set(\"transferRequest\", sPayload);\r",
																	"var token = KJUR.jws.JWS.sign(\"RS256\", sHeader, sPayload, pm.environment.get('SIM1_JWS_KEY'));\r",
																	"//console.log(`token: ${token}`)\r",
																	"\r",
																	"// var encodedHeaders = btoa(sHeader)\r",
																	"\r",
																	"// var ofspiopSignature = {signature: vSignature, protectedHeader: encodedHeaders}\r",
																	"// var token = JSON.stringify(ofspiopSignature)\r",
																	"\r",
																	"const [ protectedHeaderBase64, , signature ] = token.split('.');\r",
																	"\r",
																	"const signatureObject = {\r",
																	"    signature: signature.replace('\"', ''),\r",
																	"    protectedHeader: protectedHeaderBase64.replace('\"', '')\r",
																	"};\r",
																	"\r",
																	"console.log(JSON.stringify(signatureObject))\r",
																	"\r",
																	"pm.variables.set('fspiopSignature',JSON.stringify(signatureObject))"
																],
																"type": "text/javascript"
															}
														},
														{
															"listen": "test",
															"script": {
																"id": "acb21c1a-7f60-4800-9ee2-96839d173d2d",
																"exec": [
																	"pm.test(\"Status code is 202\", function () {\r",
																	"    pm.response.to.have.status(202);\r",
																	"});\r",
																	"\r",
																	"// //Check the request that Switch forwards to payeefsp\r",
																	"setTimeout(function () {\r",
																	"  pm.sendRequest(pm.environment.get(\"SIMPAYEE_SDK_TESTAPI_URL\")+\"/requests/\"+pm.environment.get(\"transfer_ID\"), function (err, response) {\r",
																	"          if(response.responseSize !== 0) {\r",
																	"              \r",
																	"              //Check the Headers\r",
																	"              var headers = response.json().headers;\r",
																	"              \r",
																	"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-source is ${pm.environment.get('SIM1_NAME')}`, function () {\r",
																	"                    pm.expect(headers['fspiop-source']).to.eql(pm.environment.get('SIM1_NAME'));\r",
																	"                });\r",
																	"                \r",
																	"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-destination is ${pm.environment.get('SIMPAYEE_NAME')}`, function () {\r",
																	"                    pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('SIMPAYEE_NAME'));\r",
																	"                });\r",
																	"                \r",
																	"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} content-typeis same as sent in the request`, function () {\r",
																	"                    pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.transfers+json;version=1.0');\r",
																	"                });\r",
																	"                \r",
																	"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} accept is same as sent in the request`, function () {\r",
																	"                    pm.expect(headers['accept']).to.match(/application\\/vnd\\.interoperability\\.transfers\\+json;version=1(\\.\\d)?/);\r",
																	"                });\r",
																	"                \r",
																	"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-signature is same as sent in the request`, function () {\r",
																	"                    pm.expect(headers['fspiop-signature']).to.eql(pm.variables.get(\"fspiopSignature\"));\r",
																	"                });\r",
																	"                \r",
																	"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-http-method is POST`, function () {\r",
																	"                    pm.expect(headers['fspiop-http-method']).to.eql('POST');\r",
																	"                });\r",
																	"                \r",
																	"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-uri is /transfers`, function () {\r",
																	"                    pm.expect(headers['fspiop-uri']).to.eql('/transfers');\r",
																	"                });\r",
																	"                \r",
																	"                \r",
																	"                //Check the data\r",
																	"                var jsonData = response.json().data;\r",
																	"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} data should have the same transferId as request`, function () {\r",
																	"                  pm.expect(jsonData.transferId).to.eql(pm.environment.get(\"transfer_ID\"));\r",
																	"                });\r",
																	"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} data should have the same amount as request`, function () {\r",
																	"                  pm.expect(jsonData.amount.amount).to.eql('55');\r",
																	"                });\r",
																	"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} data should have the same currency as request`, function () {\r",
																	"                  pm.expect(jsonData.amount.currency).to.eql(pm.environment.get(\"currency\"));\r",
																	"                });\r",
																	"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} data should have the same expiration as request`, function () {\r",
																	"                  pm.expect(jsonData.expiration).to.eql(pm.environment.get(\"transferExpiration\"));\r",
																	"                });\r",
																	"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} data should have the same ilpPacket as request`, function () {\r",
																	"                  pm.expect(jsonData.ilpPacket).to.eql(pm.environment.get(\"ilpPacket\"));\r",
																	"                });\r",
																	"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} data should have the same condition as request`, function () {\r",
																	"                  pm.expect(jsonData.condition).to.eql(pm.environment.get(\"condition\"));\r",
																	"                });\r",
																	"                \r",
																	"          } else {\r",
																	"              pm.test(\"Transfer FAILED\", function () {\r",
																	"                throw new Error('Did not receive response on payee side');\r",
																	"              });\r",
																	"              // postman.setNextRequest(null)\r",
																	"          }\r",
																	"  });\r",
																	"}, pm.environment.get(\"SET_TIMEOUT_TRANSFERS\"))\r",
																	"\r",
																	"//Check the callback response that Switch forwards to testfsp1\r",
																	"setTimeout(function () {\r",
																	"  pm.sendRequest(pm.environment.get(\"SIM1_SDK_TESTAPI_URL\")+\"/callbacks/\"+pm.environment.get(\"transfer_ID\"), function (err, response) {\r",
																	"          if(response.responseSize !== 0) {\r",
																	"            //Checking headers\r",
																	"            var headers = response.json().headers;\r",
																	"            pm.test(`${pm.environment.get('SIM1_NAME')} fspiop-source is ${pm.environment.get('SIMPAYEE_NAME')}`, function () {\r",
																	"                pm.expect(headers['fspiop-source']).to.eql(pm.environment.get('SIMPAYEE_NAME'));\r",
																	"            });\r",
																	"            \r",
																	"            pm.test(`${pm.environment.get('SIM1_NAME')} fspiop-destination is ${pm.environment.get('SIM1_NAME')}`, function () {\r",
																	"                pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('SIM1_NAME'));\r",
																	"            });\r",
																	"            \r",
																	"            pm.test(`${pm.environment.get('SIM1_NAME')} content-type should be application/vnd.interoperability.transfers+json;version=1.0`, function () {\r",
																	"                pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.transfers+json;version=1.0');\r",
																	"            });\r",
																	"            \r",
																	"            pm.test(`${pm.environment.get('SIM1_NAME')} accept is empty`, function () {\r",
																	"                pm.expect(headers['accept']).to.eql(undefined);\r",
																	"            });\r",
																	"            \r",
																	"            \r",
																	"            pm.test(`${pm.environment.get('SIM1_NAME')} fspiop-uri includes /transfers/${pm.environment.get('transfer_ID')}`, function () {\r",
																	"                pm.expect(headers['fspiop-uri']).to.eql(`/transfers/${pm.environment.get('transfer_ID')}`);\r",
																	"            });\r",
																	"            \r",
																	"            pm.test(`${pm.environment.get('SIM1_NAME')} fspiop-http-method is PUT`, function () {\r",
																	"                pm.expect(headers['fspiop-http-method']).to.eql('PUT');\r",
																	"            });\r",
																	"            \r",
																	"            var jsonData = response.json().data;\r",
																	"            pm.test(\"Response data does not have transferId\", function () {\r",
																	"               pm.expect(jsonData.transferId).to.eql(undefined);\r",
																	"            });\r",
																	"            pm.test(\"Response status is COMMITTED\", function () {\r",
																	"                pm.expect(jsonData.transferState).to.eql('COMMITTED');\r",
																	"            });\r",
																	"          } else {\r",
																	"              pm.test(\"Transfer FAILED\", function () {\r",
																	"                throw new Error('Did not receive response on payer side');\r",
																	"              });\r",
																	"              // postman.setNextRequest(null)\r",
																	"          }\r",
																	"   });\r",
																	"}, pm.environment.get(\"SET_TIMEOUT_TRANSFERS\"))"
																],
																"type": "text/javascript"
															}
														}
													],
													"request": {
														"auth": {
															"type": "bearer",
															"bearer": [
																{
																	"key": "token",
																	"value": "{{SIM1_BEARER_TOKEN}}",
																	"type": "string"
																}
															]
														},
														"method": "POST",
														"header": [
															{
																"key": "Accept",
																"type": "text",
																"value": "application/vnd.interoperability.transfers+json;version=1.0"
															},
															{
																"key": "Content-Type",
																"type": "text",
																"value": "application/vnd.interoperability.transfers+json;version=1.0"
															},
															{
																"key": "Date",
																"type": "text",
																"value": "{{transferDate}}"
															},
															{
																"key": "FSPIOP-Source",
																"type": "text",
																"value": "{{SIM1_NAME}}"
															},
															{
																"key": "FSPIOP-Destination",
																"type": "text",
																"value": "{{SIMPAYEE_NAME}}"
															},
															{
																"key": "FSPIOP-Signature",
																"type": "text",
																"value": "{{fspiopSignature}}"
															},
															{
																"key": "FSPIOP-URI",
																"type": "text",
																"value": "/transfers"
															},
															{
																"key": "FSPIOP-HTTP-Method",
																"type": "text",
																"value": "POST"
															}
														],
														"body": {
															"mode": "raw",
															"raw": "{{transferRequest}}"
														},
														"url": {
															"raw": "{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}/transfers",
															"host": [
																"{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}"
															],
															"path": [
																"transfers"
															]
														}
													},
													"response": []
												},
												{
													"name": "Send Quote 3 (SIMPAYER to SIM1)",
													"event": [
														{
															"listen": "prerequest",
															"script": {
																"id": "f4e114dc-8e88-43ac-9a5d-c67c2e0000f2",
																"exec": [
																	"var navigator = {}; \r",
																	"var window = {}; \r",
																	"eval(pm.environment.get('jrsassign'));\r",
																	"\r",
																	"\r",
																	"var uuid = require('uuid');\r",
																	"var generatedUUID = uuid.v4();\r",
																	"pm.environment.set('quoteId', generatedUUID);\r",
																	"generatedUUID = uuid.v4();\r",
																	"pm.environment.set('transactionId', generatedUUID);\r",
																	"\r",
																	"pm.variables.set('quoteDate', (new Date()).toUTCString());\r",
																	"pm.variables.set('payerName', 'PayerFirst PayerLast');\r",
																	"\r",
																	"pm.variables.set('expectedPayeeFirstName', 'GoldenFirst');\r",
																	"pm.variables.set('expectedPayeeLastName', 'GoldenLast');\r",
																	"pm.variables.set('expectedPayeeDOB', '2010-10-10');\r",
																	"\r",
																	"var oHeader = {alg: \"RS256\", \"FSPIOP-Source\":pm.environment.get('SIMPAYER_NAME'),\"FSPIOP-Destination\":pm.environment.get('SIM1_NAME'), \"FSPIOP-URI\":\"/quotes\", \"FSPIOP-HTTP-Method\":\"POST\", \"Date\":pm.variables.get('quoteDate')};\r",
																	"var sHeader = JSON.stringify(oHeader);\r",
																	"console.log(`sHeader: ${sHeader}`)\r",
																	"\r",
																	"var objPayload = {\r",
																	"  \"quoteId\": pm.environment.get('quoteId'),\r",
																	"  \"transactionId\": pm.environment.get('transactionId'),\r",
																	"  \"payer\": {\r",
																	"    \"partyIdInfo\": {\r",
																	"      \"partyIdType\": \"MSISDN\",\r",
																	"      \"partyIdentifier\": pm.environment.get('SIMPAYER_MSISDN'),\r",
																	"      \"fspId\": pm.environment.get('SIMPAYER_NAME')\r",
																	"    },\r",
																	"    \"personalInfo\": {\r",
																	"      \"complexName\": {\r",
																	"        \"firstName\": \"Mats\",\r",
																	"        \"lastName\": \"Hagman\"\r",
																	"      },\r",
																	"      \"dateOfBirth\": \"1983-10-25\"\r",
																	"    }\r",
																	"  },\r",
																	"  \"payee\": {\r",
																	"    \"partyIdInfo\": {\r",
																	"      \"partyIdType\": \"MSISDN\",\r",
																	"      \"partyIdentifier\": pm.environment.get('SIM1_MSISDN'),\r",
																	"      \"fspId\": pm.environment.get('SIM1_NAME')\r",
																	"    }\r",
																	"  },\r",
																	"  \"amountType\": \"RECEIVE\",\r",
																	"  \"amount\": {\r",
																	"    \"amount\": \"35\",\r",
																	"    \"currency\": pm.environment.get('SIM1_CURRENCY')\r",
																	"  },\r",
																	"  \"transactionType\": {\r",
																	"    \"scenario\": \"TRANSFER\",\r",
																	"    \"initiator\": \"PAYER\",\r",
																	"    \"initiatorType\": \"CONSUMER\"\r",
																	"  },\r",
																	"  \"note\": \"hej\"\r",
																	"}\r",
																	"\r",
																	"var sPayload = JSON.stringify(objPayload)\r",
																	"console.log(`sPayload: ${sPayload}`)\r",
																	"pm.variables.set(\"quoteRequest\", sPayload);\r",
																	"var token = KJUR.jws.JWS.sign(\"RS256\", sHeader, sPayload, pm.environment.get('SIMPAYER_JWS_KEY'));\r",
																	"console.log(`token: ${token}`)\r",
																	"\r",
																	"// var encodedHeaders = btoa(sHeader)\r",
																	"\r",
																	"// var ofspiopSignature = {signature: vSignature, protectedHeader: encodedHeaders}\r",
																	"// var token = JSON.stringify(ofspiopSignature)\r",
																	"\r",
																	"const [ protectedHeaderBase64, , signature ] = token.split('.');\r",
																	"\r",
																	"const signatureObject = {\r",
																	"    signature: signature.replace('\"', ''),\r",
																	"    protectedHeader: protectedHeaderBase64.replace('\"', '')\r",
																	"};\r",
																	"\r",
																	"console.log(JSON.stringify(signatureObject))\r",
																	"\r",
																	"pm.variables.set('fspiopSignature',JSON.stringify(signatureObject))"
																],
																"type": "text/javascript"
															}
														},
														{
															"listen": "test",
															"script": {
																"id": "14592ef5-20d0-4f63-bb04-edb00118f271",
																"exec": [
																	"pm.test(\"Status code is 202\", function () {\r",
																	"    pm.response.to.have.status(202);\r",
																	"});\r",
																	"\r",
																	"setTimeout(function () {\r",
																	"  pm.sendRequest(pm.environment.get(\"SIM1_SDK_TESTAPI_URL\")+\"/requests/\"+pm.variables.get(\"quoteId\"), function (err, response) {\r",
																	"          if(response.responseSize !== 0) {\r",
																	"              \r",
																	"              //Check the Headers\r",
																	"              var headers = response.json().headers;\r",
																	"              \r",
																	"                pm.test(`${pm.environment.get('SIM1_NAME')} fspiop-source is ${pm.environment.get('SIMPAYER_NAME')}`, function () {\r",
																	"                    pm.expect(headers['fspiop-source']).to.eql(pm.environment.get('SIMPAYER_NAME'));\r",
																	"                });\r",
																	"                \r",
																	"                pm.test(`${pm.environment.get('SIM1_NAME')} fspiop-destination is ${pm.environment.get('SIM1_NAME')}`, function () {\r",
																	"                    pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('SIM1_NAME'));\r",
																	"                });\r",
																	"                \r",
																	"                pm.test(`${pm.environment.get('SIM1_NAME')} fspiop-signature is same as sent in the request`, function () {\r",
																	"                    pm.expect(headers['fspiop-signature']).to.eql(pm.variables.get(\"fspiopSignature\"));\r",
																	"                });\r",
																	"                \r",
																	"                pm.test(`${pm.environment.get('SIM1_NAME')} accept is same as sent in the request`, function () {\r",
																	"                    pm.expect(headers['accept']).to.match(/application\\/vnd\\.interoperability\\.quotes\\+json;version=1(\\.\\d)?/);\r",
																	"                });\r",
																	"                \r",
																	"                pm.test(`${pm.environment.get('SIM1_NAME')} content-typeis same as sent in the request`, function () {\r",
																	"                    pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.quotes+json;version=1.0');\r",
																	"                });\r",
																	"                \r",
																	"                pm.test(`${pm.environment.get('SIM1_NAME')} fspiop-uri is /quotes`, function () {\r",
																	"                    pm.expect(headers['fspiop-uri']).to.eql('/quotes');\r",
																	"                });\r",
																	"                \r",
																	"                pm.test(`${pm.environment.get('SIM1_NAME')} fspiop-http-method is POST`, function () {\r",
																	"                    pm.expect(headers['fspiop-http-method']).to.eql('POST');\r",
																	"                });\r",
																	"                \r",
																	"          } else {\r",
																	"              pm.test(\"Quote FAILED\", function () {\r",
																	"                throw new Error('Did not receive request on payee side');\r",
																	"              });\r",
																	"              // postman.setNextRequest(null)\r",
																	"          }\r",
																	"   });\r",
																	"}, pm.environment.get(\"SET_TIMEOUT_QUOTES\"))\r",
																	"\r",
																	"setTimeout(function () {\r",
																	"  pm.sendRequest(pm.environment.get(\"SIMPAYER_SDK_TESTAPI_URL\")+\"/callbacks/\"+pm.environment.get(\"quoteId\"), function (err, response) {\r",
																	"      if(response.responseSize !== 0) {\r",
																	"          //Checking headers\r",
																	"            var headers = response.json().headers;\r",
																	"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-source is ${pm.environment.get('SIM1_NAME')}`, function () {\r",
																	"                pm.expect(headers['fspiop-source']).to.eql(pm.environment.get('SIM1_NAME'));\r",
																	"            });\r",
																	"            \r",
																	"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-destination is ${pm.environment.get('SIMPAYER_NAME')}`, function () {\r",
																	"                pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('SIMPAYER_NAME'));\r",
																	"            });\r",
																	"            \r",
																	"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} content-type should be application/vnd.interoperability.quotes+json;version=1.0`, function () {\r",
																	"                pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.quotes+json;version=1.0');\r",
																	"            });\r",
																	"            \r",
																	"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} accept is empty`, function () {\r",
																	"                pm.expect(headers['accept']).to.eql(undefined);\r",
																	"            });\r",
																	"            \r",
																	"            \r",
																	"            \r",
																	"            var {signature,protectedHeader} = JSON.parse(headers['fspiop-signature'])\r",
																	"            // var strData = JSON.stringify(response.json().data)\r",
																	"            // const token = `${protectedHeader}.${btoa(strData)}.${signature}`\r",
																	"            // console.log(`token: ${token}`)\r",
																	"            // var isValid = KJUR.jws.JWS.verify(token, pm.environment.get('goldentestfsp1JWSPubKey'), {alg: ['RS256']})\r",
																	"            // console.log(`isValid: ${isValid}`)\r",
																	"            // pm.test(\"Check if the response is JWS valid\", function () {\r",
																	"            //     pm.expect(isValid).to.eql(true);\r",
																	"            // });\r",
																	"            \r",
																	"            //Validate protected header inside Signature\r",
																	"            var decodedProtectedHeaders = JSON.parse(atob(protectedHeader))\r",
																	"            console.log('decodedProtectedHeaders:',decodedProtectedHeaders)\r",
																	"            \r",
																	"            pm.test(\"FSPIOP-Signature Protected Header alg to be RS256\", function () {\r",
																	"                pm.expect(decodedProtectedHeaders['alg']).to.eql('RS256');\r",
																	"            });\r",
																	"            pm.test(\"FSPIOP-Signature Protected Header FSPIOP-URI to be /quotes/\"+pm.environment.get(\"quoteId\"), function () {\r",
																	"                pm.expect(decodedProtectedHeaders['FSPIOP-URI']).to.eql('/quotes/'+pm.environment.get(\"quoteId\"));\r",
																	"            });\r",
																	"            \r",
																	"\r",
																	"            pm.test(\"FSPIOP-Signature Protected Header FSPIOP-HTTP-Method to be PUT\", function () {\r",
																	"                pm.expect(decodedProtectedHeaders['FSPIOP-HTTP-Method']).to.eql('PUT');\r",
																	"            });\r",
																	"            pm.test(`FSPIOP-Signature Protected Header FSPIOP-Source to be ${pm.environment.get('SIM1_NAME')}`, function () {\r",
																	"                pm.expect(decodedProtectedHeaders['FSPIOP-Source']).to.eql(pm.environment.get('SIM1_NAME'));\r",
																	"            });\r",
																	"            pm.test(`FSPIOP-Signature Protected Header FSPIOP-Destination to be ${pm.environment.get('SIMPAYER_NAME')}`, function () {\r",
																	"                pm.expect(decodedProtectedHeaders['FSPIOP-Destination']).to.eql(pm.environment.get('SIMPAYER_NAME'));\r",
																	"            });\r",
																	"            pm.test(\"FSPIOP-Signature Protected Header Date is present\", function () {\r",
																	"                pm.expect(decodedProtectedHeaders['Date']).to.eql(headers['date']);\r",
																	"            });\r",
																	"           \r",
																	"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} FSPIOP-URI to be /quotes/${pm.environment.get(\"quoteId\")}`, function () {\r",
																	"                pm.expect(headers['fspiop-uri']).to.eql(`/quotes/${pm.environment.get(\"quoteId\")}`);\r",
																	"            });\r",
																	"            \r",
																	"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-http-method is PUT`, function () {\r",
																	"                pm.expect(headers['fspiop-http-method']).to.eql('PUT');\r",
																	"            });\r",
																	"            \r",
																	"            var jsonData = response.json().data;\r",
																	"            \r",
																	"            pm.test(\"Response quoteId is  null\", function () {\r",
																	"                pm.expect(jsonData.quoteId).to.eql(undefined);\r",
																	"                \r",
																	"            });\r",
																	"          \r",
																	"            pm.test(\"Response ilpPacket is not null\", function () {\r",
																	"                pm.expect(jsonData.ilpPacket).not.equal(undefined);\r",
																	"                pm.environment.set(\"ilpPacket\", jsonData.ilpPacket);\r",
																	"            });\r",
																	"       \r",
																	"           pm.test(\"Response condition is not null\", function () {\r",
																	"               pm.expect(jsonData.condition).not.equal(undefined);\r",
																	"               pm.environment.set(\"condition\", jsonData.condition);\r",
																	"           });\r",
																	"      } else {\r",
																	"          pm.test(\"Quote FAILED\", function () {\r",
																	"            throw new Error('Did not receive response on Payer side');\r",
																	"           });\r",
																	"           // postman.setNextRequest(null);\r",
																	"      }\r",
																	"       \r",
																	"   });\r",
																	"}, pm.environment.get(\"SET_TIMEOUT_QUOTES\"))"
																],
																"type": "text/javascript"
															}
														}
													],
													"request": {
														"auth": {
															"type": "bearer",
															"bearer": [
																{
																	"key": "token",
																	"value": "{{SIMPAYER_BEARER_TOKEN}}",
																	"type": "string"
																}
															]
														},
														"method": "POST",
														"header": [
															{
																"key": "Accept",
																"type": "text",
																"value": "application/vnd.interoperability.quotes+json;version=1.0"
															},
															{
																"key": "Content-Type",
																"type": "text",
																"value": "application/vnd.interoperability.quotes+json;version=1.0"
															},
															{
																"key": "Date",
																"type": "text",
																"value": "{{quoteDate}}"
															},
															{
																"key": "FSPIOP-Source",
																"type": "text",
																"value": "{{SIMPAYER_NAME}}"
															},
															{
																"key": "FSPIOP-Destination",
																"type": "text",
																"value": "{{SIM1_NAME}}"
															},
															{
																"key": "FSPIOP-Signature",
																"type": "text",
																"value": "{{fspiopSignature}}"
															},
															{
																"key": "FSPIOP-HTTP-Method",
																"type": "text",
																"value": "POST"
															},
															{
																"key": "FSPIOP-URI",
																"type": "text",
																"value": "/quotes"
															}
														],
														"body": {
															"mode": "raw",
															"raw": "{{quoteRequest}}"
														},
														"url": {
															"raw": "{{HOST_QUOTING_SERVICE}}/quotes",
															"host": [
																"{{HOST_QUOTING_SERVICE}}"
															],
															"path": [
																"quotes"
															]
														}
													},
													"response": []
												},
												{
													"name": "Send Transfer 3 (SIMPAYER to SIM1)",
													"event": [
														{
															"listen": "prerequest",
															"script": {
																"id": "975e34f8-0d0d-4181-bd58-ece2fedf8621",
																"exec": [
																	"var navigator = {}; //fake a navigator object for the lib\r",
																	"var window = {}; //fake a window object for the lib\r",
																	"eval(pm.environment.get('jrsassign'));\r",
																	"\r",
																	"var uuid = require('uuid');\r",
																	"var generatedUUID = uuid.v4();\r",
																	"pm.environment.set('transfer_ID', pm.environment.get('transactionId'));\r",
																	"\r",
																	"\r",
																	"pm.variables.set('transferDate', (new Date()).toUTCString());\r",
																	"\r",
																	"pm.environment.set(\"transferExpiration\",new Date(new Date().getTime() + 60000))\r",
																	"\r",
																	"var oHeader = {alg: \"RS256\", \"FSPIOP-Source\":pm.environment.get('SIMPAYER_NAME'),\"FSPIOP-Destination\":pm.environment.get('SIM1_NAME'), \"FSPIOP-URI\":\"/transfers\", \"FSPIOP-HTTP-Method\":\"POST\", \"Date\":pm.variables.get('transferDate')};\r",
																	"var sHeader = JSON.stringify(oHeader);\r",
																	"console.log(`sHeader: ${sHeader}`)\r",
																	"\r",
																	"var objPayload = {\r",
																	"  \"transferId\": pm.environment.get('transfer_ID'),\r",
																	"  \"payerFsp\": pm.environment.get('SIMPAYER_NAME'),\r",
																	"  \"payeeFsp\": pm.environment.get('SIM1_NAME'),\r",
																	"  \"amount\": {\r",
																	"    \"amount\": \"35\",\r",
																	"    \"currency\": pm.environment.get('SIM1_CURRENCY')\r",
																	"  },\r",
																	"  \"expiration\": pm.environment.get('transferExpiration'),\r",
																	"  \"ilpPacket\": pm.environment.get('ilpPacket'),\r",
																	"  \"condition\": pm.environment.get('condition')\r",
																	"}\r",
																	"var sPayload = JSON.stringify(objPayload)\r",
																	"console.log(`sPayload: ${sPayload}`)\r",
																	"pm.variables.set(\"transferRequest\", sPayload);\r",
																	"var token = KJUR.jws.JWS.sign(\"RS256\", sHeader, sPayload, pm.environment.get('SIMPAYER_JWS_KEY'));\r",
																	"//console.log(`token: ${token}`)\r",
																	"\r",
																	"// var encodedHeaders = btoa(sHeader)\r",
																	"\r",
																	"// var ofspiopSignature = {signature: vSignature, protectedHeader: encodedHeaders}\r",
																	"// var token = JSON.stringify(ofspiopSignature)\r",
																	"\r",
																	"const [ protectedHeaderBase64, , signature ] = token.split('.');\r",
																	"\r",
																	"const signatureObject = {\r",
																	"    signature: signature.replace('\"', ''),\r",
																	"    protectedHeader: protectedHeaderBase64.replace('\"', '')\r",
																	"};\r",
																	"\r",
																	"console.log(JSON.stringify(signatureObject))\r",
																	"\r",
																	"pm.variables.set('fspiopSignature',JSON.stringify(signatureObject))"
																],
																"type": "text/javascript"
															}
														},
														{
															"listen": "test",
															"script": {
																"id": "e9deb1fc-58f5-4d3d-a62b-3794105f7aa4",
																"exec": [
																	"pm.test(\"Status code is 202\", function () {\r",
																	"    pm.response.to.have.status(202);\r",
																	"});\r",
																	"\r",
																	"// //Check the request that Switch forwards to testfsp1\r",
																	"setTimeout(function () {\r",
																	"  pm.sendRequest(pm.environment.get(\"SIM1_SDK_TESTAPI_URL\")+\"/requests/\"+pm.environment.get(\"transfer_ID\"), function (err, response) {\r",
																	"          if(response.responseSize !== 0) {\r",
																	"              \r",
																	"              //Check the Headers\r",
																	"              var headers = response.json().headers;\r",
																	"              \r",
																	"                pm.test(`${pm.environment.get('SIM1_NAME')} fspiop-source is ${pm.environment.get('SIMPAYER_NAME')}`, function () {\r",
																	"                    pm.expect(headers['fspiop-source']).to.eql(pm.environment.get('SIMPAYER_NAME'));\r",
																	"                });\r",
																	"                \r",
																	"                pm.test(`${pm.environment.get('SIM1_NAME')} fspiop-destination is ${pm.environment.get('SIM1_NAME')}`, function () {\r",
																	"                    pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('SIM1_NAME'));\r",
																	"                });\r",
																	"                \r",
																	"                pm.test(`${pm.environment.get('SIM1_NAME')} content-typeis same as sent in the request`, function () {\r",
																	"                    pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.transfers+json;version=1.0');\r",
																	"                });\r",
																	"                \r",
																	"                pm.test(`${pm.environment.get('SIM1_NAME')} accept is same as sent in the request`, function () {\r",
																	"                    pm.expect(headers['accept']).to.match(/application\\/vnd\\.interoperability\\.transfers\\+json;version=1(\\.\\d)?/);\r",
																	"                });\r",
																	"                \r",
																	"                pm.test(`${pm.environment.get('SIM1_NAME')} fspiop-signature is same as sent in the request`, function () {\r",
																	"                    pm.expect(headers['fspiop-signature']).to.eql(pm.variables.get(\"fspiopSignature\"));\r",
																	"                });\r",
																	"                \r",
																	"                pm.test(`${pm.environment.get('SIM1_NAME')} fspiop-http-method is POST`, function () {\r",
																	"                    pm.expect(headers['fspiop-http-method']).to.eql('POST');\r",
																	"                });\r",
																	"                \r",
																	"                pm.test(`${pm.environment.get('SIM1_NAME')} fspiop-uri is /transfers`, function () {\r",
																	"                    pm.expect(headers['fspiop-uri']).to.eql('/transfers');\r",
																	"                });\r",
																	"                \r",
																	"                \r",
																	"                //Check the data\r",
																	"                var jsonData = response.json().data;\r",
																	"                pm.test(`${pm.environment.get('SIM1_NAME')} data should have the same transferId as request`, function () {\r",
																	"                  pm.expect(jsonData.transferId).to.eql(pm.environment.get(\"transfer_ID\"));\r",
																	"                });\r",
																	"                pm.test(`${pm.environment.get('SIM1_NAME')} data should have the same payerfspId as request`, function () {\r",
																	"                  pm.expect(jsonData.payerFsp).to.eql(pm.environment.get('SIMPAYER_NAME'));\r",
																	"                });\r",
																	"                pm.test(`${pm.environment.get('SIM1_NAME')} data should have the same testfsp1Id as request`, function () {\r",
																	"                  pm.expect(pm.environment.get('SIM1_NAME'));\r",
																	"                });\r",
																	"                pm.test(`${pm.environment.get('SIM1_NAME')} data should have the same amount as request`, function () {\r",
																	"                  pm.expect(jsonData.amount.amount).to.eql('35');\r",
																	"                });\r",
																	"                pm.test(`${pm.environment.get('SIM1_NAME')} data should have the same currency as request`, function () {\r",
																	"                  pm.expect(jsonData.amount.currency).to.eql(pm.environment.get(\"currency\"));\r",
																	"                });\r",
																	"                pm.test(`${pm.environment.get('SIM1_NAME')} data should have the same expiration as request`, function () {\r",
																	"                  pm.expect(jsonData.expiration).to.eql(pm.environment.get(\"transferExpiration\"));\r",
																	"                });\r",
																	"                pm.test(`${pm.environment.get('SIM1_NAME')} data should have the same ilpPacket as request`, function () {\r",
																	"                  pm.expect(jsonData.ilpPacket).to.eql(pm.environment.get(\"ilpPacket\"));\r",
																	"                });\r",
																	"                pm.test(`${pm.environment.get('SIM1_NAME')} data should have the same condition as request`, function () {\r",
																	"                  pm.expect(jsonData.condition).to.eql(pm.environment.get(\"condition\"));\r",
																	"                });\r",
																	"                \r",
																	"          } else {\r",
																	"              pm.test(\"Transfer FAILED\", function () {\r",
																	"                throw new Error('Did not receive response on payee side');\r",
																	"              });\r",
																	"              // postman.setNextRequest(null)\r",
																	"          }\r",
																	"  });\r",
																	"}, pm.environment.get(\"SET_TIMEOUT_TRANSFERS\"))\r",
																	"\r",
																	"//Check the callback response that Switch forwards to payerfsp\r",
																	"setTimeout(function () {\r",
																	"  pm.sendRequest(pm.environment.get(\"SIMPAYER_SDK_TESTAPI_URL\")+\"/callbacks/\"+pm.environment.get(\"transfer_ID\"), function (err, response) {\r",
																	"          if(response.responseSize !== 0) {\r",
																	"            //Checking headers\r",
																	"            var headers = response.json().headers;\r",
																	"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-source is ${pm.environment.get('SIM1_NAME')}`, function () {\r",
																	"                pm.expect(headers['fspiop-source']).to.eql(pm.environment.get('SIM1_NAME'));\r",
																	"            });\r",
																	"            \r",
																	"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-destination is ${pm.environment.get('SIMPAYER_NAME')}`, function () {\r",
																	"                pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('SIMPAYER_NAME'));\r",
																	"            });\r",
																	"            \r",
																	"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} content-type should be application/vnd.interoperability.transfers+json;version=1.0`, function () {\r",
																	"                pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.transfers+json;version=1.0');\r",
																	"            });\r",
																	"            \r",
																	"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} accept is empty`, function () {\r",
																	"                pm.expect(headers['accept']).to.eql(undefined);\r",
																	"            });\r",
																	"            \r",
																	"            \r",
																	"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-uri includes /transfers/${pm.environment.get('transfer_ID')}`, function () {\r",
																	"                pm.expect(headers['fspiop-uri']).to.eql(`/transfers/${pm.environment.get('transfer_ID')}`);\r",
																	"            });\r",
																	"            \r",
																	"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-http-method is PUT`, function () {\r",
																	"                pm.expect(headers['fspiop-http-method']).to.eql('PUT');\r",
																	"            });\r",
																	"            \r",
																	"            var jsonData = response.json().data;\r",
																	"            pm.test(\"Response data does not have transferId\", function () {\r",
																	"               pm.expect(jsonData.transferId).to.eql(undefined);\r",
																	"            });\r",
																	"            pm.test(\"Response status is COMMITTED\", function () {\r",
																	"                pm.expect(jsonData.transferState).to.eql('COMMITTED');\r",
																	"            });\r",
																	"          } else {\r",
																	"              pm.test(\"Transfer FAILED\", function () {\r",
																	"                throw new Error('Did not receive response on payer side');\r",
																	"              });\r",
																	"              // postman.setNextRequest(null)\r",
																	"          }\r",
																	"   });\r",
																	"}, pm.environment.get(\"SET_TIMEOUT_TRANSFERS\"))"
																],
																"type": "text/javascript"
															}
														}
													],
													"request": {
														"auth": {
															"type": "bearer",
															"bearer": [
																{
																	"key": "token",
																	"value": "{{SIMPAYER_BEARER_TOKEN}}",
																	"type": "string"
																}
															]
														},
														"method": "POST",
														"header": [
															{
																"key": "Accept",
																"type": "text",
																"value": "application/vnd.interoperability.transfers+json;version=1.0"
															},
															{
																"key": "Content-Type",
																"type": "text",
																"value": "application/vnd.interoperability.transfers+json;version=1.0"
															},
															{
																"key": "Date",
																"type": "text",
																"value": "{{transferDate}}"
															},
															{
																"key": "FSPIOP-Source",
																"type": "text",
																"value": "{{SIMPAYER_NAME}}"
															},
															{
																"key": "FSPIOP-Destination",
																"type": "text",
																"value": "{{SIM1_NAME}}"
															},
															{
																"key": "FSPIOP-Signature",
																"type": "text",
																"value": "{{fspiopSignature}}"
															},
															{
																"key": "FSPIOP-URI",
																"type": "text",
																"value": "/transfers"
															},
															{
																"key": "FSPIOP-HTTP-Method",
																"type": "text",
																"value": "POST"
															}
														],
														"body": {
															"mode": "raw",
															"raw": "{{transferRequest}}"
														},
														"url": {
															"raw": "{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}/transfers",
															"host": [
																"{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}"
															],
															"path": [
																"transfers"
															]
														}
													},
													"response": []
												},
												{
													"name": "Send Quote 4 (SIM2 to SIMPAYER)",
													"event": [
														{
															"listen": "prerequest",
															"script": {
																"id": "8f2ffa16-0d3a-4ddd-96fd-7e37e381e7f7",
																"exec": [
																	"var navigator = {}; ",
																	"var window = {}; ",
																	"eval(pm.environment.get('jrsassign'));",
																	"",
																	"",
																	"var uuid = require('uuid');",
																	"var generatedUUID = uuid.v4();",
																	"pm.environment.set('quoteId', generatedUUID);",
																	"generatedUUID = uuid.v4();",
																	"pm.environment.set('transactionId', generatedUUID);",
																	"",
																	"pm.variables.set('quoteDate', (new Date()).toUTCString());",
																	"pm.variables.set('payerName', 'PayerFirst PayerLast');",
																	"",
																	"pm.variables.set('expectedPayeeFirstName', 'GoldenFirst');",
																	"pm.variables.set('expectedPayeeLastName', 'GoldenLast');",
																	"pm.variables.set('expectedPayeeDOB', '2010-10-10');",
																	"",
																	"var oHeader = {alg: \"RS256\", \"FSPIOP-Source\":pm.environment.get('SIM2_NAME'),\"FSPIOP-Destination\":pm.environment.get('SIMPAYER_NAME'), \"FSPIOP-URI\":\"/quotes\", \"FSPIOP-HTTP-Method\":\"POST\", \"Date\":pm.variables.get('quoteDate')};",
																	"var sHeader = JSON.stringify(oHeader);",
																	"console.log(`sHeader: ${sHeader}`)",
																	"",
																	"var objPayload = {",
																	"  \"quoteId\": pm.environment.get('quoteId'),",
																	"  \"transactionId\": pm.environment.get('transactionId'),",
																	"  \"payer\": {",
																	"    \"partyIdInfo\": {",
																	"      \"partyIdType\": \"MSISDN\",",
																	"      \"partyIdentifier\": pm.environment.get('SIM2_MSISDN'),",
																	"      \"fspId\": pm.environment.get('SIM2_NAME')",
																	"    },",
																	"    \"personalInfo\": {",
																	"      \"complexName\": {",
																	"        \"firstName\": \"Mats\",",
																	"        \"lastName\": \"Hagman\"",
																	"      },",
																	"      \"dateOfBirth\": \"1983-10-25\"",
																	"    }",
																	"  },",
																	"  \"payee\": {",
																	"    \"partyIdInfo\": {",
																	"      \"partyIdType\": \"MSISDN\",",
																	"      \"partyIdentifier\": pm.environment.get('SIMPAYER_MSISDN'),",
																	"      \"fspId\": pm.environment.get('SIMPAYER_NAME')",
																	"    }",
																	"  },",
																	"  \"amountType\": \"RECEIVE\",",
																	"  \"amount\": {",
																	"    \"amount\": \"20\",",
																	"    \"currency\": pm.environment.get('SIMPAYER_CURRENCY')",
																	"  },",
																	"  \"transactionType\": {",
																	"    \"scenario\": \"TRANSFER\",",
																	"    \"initiator\": \"PAYER\",",
																	"    \"initiatorType\": \"CONSUMER\"",
																	"  },",
																	"  \"note\": \"hej\"",
																	"}",
																	"",
																	"var sPayload = JSON.stringify(objPayload)",
																	"console.log(`sPayload: ${sPayload}`)",
																	"pm.variables.set(\"quoteRequest\", sPayload);",
																	"var token = KJUR.jws.JWS.sign(\"RS256\", sHeader, sPayload, pm.environment.get('SIM2_JWS_KEY'));",
																	"console.log(`token: ${token}`)",
																	"",
																	"// var encodedHeaders = btoa(sHeader)",
																	"",
																	"// var ofspiopSignature = {signature: vSignature, protectedHeader: encodedHeaders}",
																	"// var token = JSON.stringify(ofspiopSignature)",
																	"",
																	"const [ protectedHeaderBase64, , signature ] = token.split('.');",
																	"",
																	"const signatureObject = {",
																	"    signature: signature.replace('\"', ''),",
																	"    protectedHeader: protectedHeaderBase64.replace('\"', '')",
																	"};",
																	"",
																	"console.log(JSON.stringify(signatureObject))",
																	"",
																	"pm.variables.set('fspiopSignature',JSON.stringify(signatureObject))",
																	""
																],
																"type": "text/javascript"
															}
														},
														{
															"listen": "test",
															"script": {
																"id": "ad8800d0-2796-458f-a437-761ce20a1db7",
																"exec": [
																	"pm.test(\"Status code is 202\", function () {\r",
																	"    pm.response.to.have.status(202);\r",
																	"});\r",
																	"\r",
																	"setTimeout(function () {\r",
																	"  pm.sendRequest(pm.environment.get(\"SIMPAYER_SDK_TESTAPI_URL\")+\"/requests/\"+pm.variables.get(\"quoteId\"), function (err, response) {\r",
																	"          if(response.responseSize !== 0) {\r",
																	"              \r",
																	"              //Check the Headers\r",
																	"              var headers = response.json().headers;\r",
																	"              \r",
																	"                pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-source is ${pm.environment.get(\"SIM2_NAME\")}`, function () {\r",
																	"                    pm.expect(headers['fspiop-source']).to.eql(pm.environment.get(\"SIM2_NAME\"));\r",
																	"                });\r",
																	"                \r",
																	"                pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-destination is ${pm.environment.get('SIMPAYER_NAME')}`, function () {\r",
																	"                    pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('SIMPAYER_NAME'));\r",
																	"                });\r",
																	"                \r",
																	"                pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-signature is same as sent in the request`, function () {\r",
																	"                    pm.expect(headers['fspiop-signature']).to.eql(pm.variables.get(\"fspiopSignature\"));\r",
																	"                });\r",
																	"                \r",
																	"                pm.test(`${pm.environment.get('SIMPAYER_NAME')} accept is same as sent in the request`, function () {\r",
																	"                    pm.expect(headers['accept']).to.match(/application\\/vnd\\.interoperability\\.quotes\\+json;version=1(\\.\\d)?/);\r",
																	"                });\r",
																	"                \r",
																	"                pm.test(`${pm.environment.get('SIMPAYER_NAME')} content-typeis same as sent in the request`, function () {\r",
																	"                    pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.quotes+json;version=1.0');\r",
																	"                });\r",
																	"                \r",
																	"                pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-uri is /quotes`, function () {\r",
																	"                    pm.expect(headers['fspiop-uri']).to.eql('/quotes');\r",
																	"                });\r",
																	"                \r",
																	"                pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-http-method is POST`, function () {\r",
																	"                    pm.expect(headers['fspiop-http-method']).to.eql('POST');\r",
																	"                });\r",
																	"                \r",
																	"          } else {\r",
																	"              pm.test(\"Quote FAILED\", function () {\r",
																	"                throw new Error('Did not receive request on payee side');\r",
																	"              });\r",
																	"              // postman.setNextRequest(null)\r",
																	"          }\r",
																	"   });\r",
																	"}, pm.environment.get(\"SET_TIMEOUT_QUOTES\"))\r",
																	"\r",
																	"setTimeout(function () {\r",
																	"  pm.sendRequest(pm.environment.get(\"SIM2_SDK_TESTAPI_URL\")+\"/callbacks/\"+pm.environment.get(\"quoteId\"), function (err, response) {\r",
																	"      if(response.responseSize !== 0) {\r",
																	"          //Checking headers\r",
																	"            var headers = response.json().headers;\r",
																	"            pm.test(`${pm.environment.get(\"SIM2_NAME\")} fspiop-source is ${pm.environment.get('SIMPAYER_NAME')}`, function () {\r",
																	"                pm.expect(headers['fspiop-source']).to.eql(pm.environment.get('SIMPAYER_NAME'));\r",
																	"            });\r",
																	"            \r",
																	"            pm.test(`${pm.environment.get(\"SIM2_NAME\")} fspiop-destination is ${pm.environment.get(\"SIM2_NAME\")}`, function () {\r",
																	"                pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get(\"SIM2_NAME\"));\r",
																	"            });\r",
																	"            \r",
																	"            pm.test(`${pm.environment.get(\"SIM2_NAME\")} content-type should be application/vnd.interoperability.quotes+json;version=1.0`, function () {\r",
																	"                pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.quotes+json;version=1.0');\r",
																	"            });\r",
																	"            \r",
																	"            pm.test(`${pm.environment.get(\"SIM2_NAME\")} accept is empty`, function () {\r",
																	"                pm.expect(headers['accept']).to.eql(undefined);\r",
																	"            });\r",
																	"            \r",
																	"            \r",
																	"            \r",
																	"            var {signature,protectedHeader} = JSON.parse(headers['fspiop-signature'])\r",
																	"            // var strData = JSON.stringify(response.json().data)\r",
																	"            // const token = `${protectedHeader}.${btoa(strData)}.${signature}`\r",
																	"            // console.log(`token: ${token}`)\r",
																	"            // var isValid = KJUR.jws.JWS.verify(token, pm.environment.get('goldenpayerfspJWSPubKey'), {alg: ['RS256']})\r",
																	"            // console.log(`isValid: ${isValid}`)\r",
																	"            // pm.test(\"Check if the response is JWS valid\", function () {\r",
																	"            //     pm.expect(isValid).to.eql(true);\r",
																	"            // });\r",
																	"            \r",
																	"            //Validate protected header inside Signature\r",
																	"            var decodedProtectedHeaders = JSON.parse(atob(protectedHeader))\r",
																	"            console.log('decodedProtectedHeaders:',decodedProtectedHeaders)\r",
																	"            \r",
																	"            pm.test(\"FSPIOP-Signature Protected Header alg to be RS256\", function () {\r",
																	"                pm.expect(decodedProtectedHeaders['alg']).to.eql('RS256');\r",
																	"            });\r",
																	"            pm.test(\"FSPIOP-Signature Protected Header FSPIOP-URI to be /quotes/\"+pm.environment.get(\"quoteId\"), function () {\r",
																	"                pm.expect(decodedProtectedHeaders['FSPIOP-URI']).to.eql('/quotes/'+pm.environment.get(\"quoteId\"));\r",
																	"            });\r",
																	"            \r",
																	"\r",
																	"            pm.test(\"FSPIOP-Signature Protected Header FSPIOP-HTTP-Method to be PUT\", function () {\r",
																	"                pm.expect(decodedProtectedHeaders['FSPIOP-HTTP-Method']).to.eql('PUT');\r",
																	"            });\r",
																	"            pm.test(`FSPIOP-Signature Protected Header FSPIOP-Source to be ${pm.environment.get('SIMPAYER_NAME')}`, function () {\r",
																	"                pm.expect(decodedProtectedHeaders['FSPIOP-Source']).to.eql(pm.environment.get('SIMPAYER_NAME'));\r",
																	"            });\r",
																	"            pm.test(`FSPIOP-Signature Protected Header FSPIOP-Destination to be ${pm.environment.get(\"SIM2_NAME\")}`, function () {\r",
																	"                pm.expect(decodedProtectedHeaders['FSPIOP-Destination']).to.eql(pm.environment.get(\"SIM2_NAME\"));\r",
																	"            });\r",
																	"            pm.test(\"FSPIOP-Signature Protected Header Date is present\", function () {\r",
																	"                pm.expect(decodedProtectedHeaders['Date']).to.eql(headers['date']);\r",
																	"            });\r",
																	"           \r",
																	"            pm.test(`${pm.environment.get(\"SIM2_NAME\")} FSPIOP-URI to be /quotes/${pm.environment.get(\"quoteId\")}`, function () {\r",
																	"                pm.expect(headers['fspiop-uri']).to.eql(`/quotes/${pm.environment.get(\"quoteId\")}`);\r",
																	"            });\r",
																	"            \r",
																	"            pm.test(`${pm.environment.get(\"SIM2_NAME\")} fspiop-http-method is PUT`, function () {\r",
																	"                pm.expect(headers['fspiop-http-method']).to.eql('PUT');\r",
																	"            });\r",
																	"            \r",
																	"            var jsonData = response.json().data;\r",
																	"            \r",
																	"            pm.test(\"Response quoteId is  null\", function () {\r",
																	"                pm.expect(jsonData.quoteId).to.eql(undefined);\r",
																	"                \r",
																	"            });\r",
																	"          \r",
																	"            pm.test(\"Response ilpPacket is not null\", function () {\r",
																	"                pm.expect(jsonData.ilpPacket).not.equal(undefined);\r",
																	"                pm.environment.set(\"ilpPacket\", jsonData.ilpPacket);\r",
																	"            });\r",
																	"       \r",
																	"           pm.test(\"Response condition is not null\", function () {\r",
																	"               pm.expect(jsonData.condition).not.equal(undefined);\r",
																	"               pm.environment.set(\"condition\", jsonData.condition);\r",
																	"           });\r",
																	"      } else {\r",
																	"          pm.test(\"Quote FAILED\", function () {\r",
																	"            throw new Error('Did not receive response on Payer side');\r",
																	"           });\r",
																	"           // postman.setNextRequest(null);\r",
																	"      }\r",
																	"       \r",
																	"   });\r",
																	"}, pm.environment.get(\"SET_TIMEOUT_QUOTES\"))"
																],
																"type": "text/javascript"
															}
														}
													],
													"request": {
														"auth": {
															"type": "bearer",
															"bearer": [
																{
																	"key": "token",
																	"value": "{{SIM2_BEARER_TOKEN}}",
																	"type": "string"
																}
															]
														},
														"method": "POST",
														"header": [
															{
																"key": "Accept",
																"type": "text",
																"value": "application/vnd.interoperability.quotes+json;version=1.0"
															},
															{
																"key": "Content-Type",
																"type": "text",
																"value": "application/vnd.interoperability.quotes+json;version=1.0"
															},
															{
																"key": "Date",
																"type": "text",
																"value": "{{quoteDate}}"
															},
															{
																"key": "FSPIOP-Source",
																"type": "text",
																"value": "{{SIM2_NAME}}"
															},
															{
																"key": "FSPIOP-Destination",
																"type": "text",
																"value": "{{SIMPAYER_NAME}}"
															},
															{
																"key": "FSPIOP-Signature",
																"type": "text",
																"value": "{{fspiopSignature}}"
															},
															{
																"key": "FSPIOP-HTTP-Method",
																"type": "text",
																"value": "POST"
															},
															{
																"key": "FSPIOP-URI",
																"type": "text",
																"value": "/quotes"
															},
															{
																"key": "x-forwarded-for",
																"type": "text",
																"value": "34.245.65.70",
																"disabled": true
															}
														],
														"body": {
															"mode": "raw",
															"raw": "{{quoteRequest}}"
														},
														"url": {
															"raw": "{{HOST_QUOTING_SERVICE}}/quotes",
															"host": [
																"{{HOST_QUOTING_SERVICE}}"
															],
															"path": [
																"quotes"
															]
														}
													},
													"response": []
												},
												{
													"name": "Send Transfer 4 (SIM2 to SIMPAYER)",
													"event": [
														{
															"listen": "prerequest",
															"script": {
																"id": "e185e34b-fe4b-4310-b422-a90ddb566550",
																"exec": [
																	"var navigator = {}; //fake a navigator object for the lib\r",
																	"var window = {}; //fake a window object for the lib\r",
																	"eval(pm.environment.get('jrsassign'));\r",
																	"\r",
																	"var uuid = require('uuid');\r",
																	"var generatedUUID = uuid.v4();\r",
																	"pm.environment.set('transfer_ID', pm.environment.get('transactionId'));\r",
																	"\r",
																	"\r",
																	"pm.variables.set('transferDate', (new Date()).toUTCString());\r",
																	"\r",
																	"pm.environment.set(\"transferExpiration\",new Date(new Date().getTime() + 60000))\r",
																	"\r",
																	"var oHeader = {alg: \"RS256\", \"FSPIOP-Source\":pm.environment.get('SIM2_NAME'),\"FSPIOP-Destination\":pm.environment.get('SIMPAYER_NAME'), \"FSPIOP-URI\":\"/transfers\", \"FSPIOP-HTTP-Method\":\"POST\", \"Date\":pm.variables.get('transferDate')};\r",
																	"var sHeader = JSON.stringify(oHeader);\r",
																	"console.log(`sHeader: ${sHeader}`)\r",
																	"\r",
																	"var objPayload = {\r",
																	"  \"transferId\": pm.environment.get('transfer_ID'),\r",
																	"  \"payerFsp\": pm.environment.get('SIM2_NAME'),\r",
																	"  \"payeeFsp\": pm.environment.get('SIMPAYER_NAME'),\r",
																	"  \"amount\": {\r",
																	"    \"amount\": \"20\",\r",
																	"    \"currency\": pm.environment.get('SIMPAYER_CURRENCY')\r",
																	"  },\r",
																	"  \"expiration\": pm.environment.get('transferExpiration'),\r",
																	"  \"ilpPacket\": pm.environment.get('ilpPacket'),\r",
																	"  \"condition\": pm.environment.get('condition')\r",
																	"}\r",
																	"var sPayload = JSON.stringify(objPayload)\r",
																	"console.log(`sPayload: ${sPayload}`)\r",
																	"pm.variables.set(\"transferRequest\", sPayload);\r",
																	"var token = KJUR.jws.JWS.sign(\"RS256\", sHeader, sPayload, pm.environment.get('SIM2_JWS_KEY'));\r",
																	"//console.log(`token: ${token}`)\r",
																	"\r",
																	"// var encodedHeaders = btoa(sHeader)\r",
																	"\r",
																	"// var ofspiopSignature = {signature: vSignature, protectedHeader: encodedHeaders}\r",
																	"// var token = JSON.stringify(ofspiopSignature)\r",
																	"\r",
																	"const [ protectedHeaderBase64, , signature ] = token.split('.');\r",
																	"\r",
																	"const signatureObject = {\r",
																	"    signature: signature.replace('\"', ''),\r",
																	"    protectedHeader: protectedHeaderBase64.replace('\"', '')\r",
																	"};\r",
																	"\r",
																	"console.log(JSON.stringify(signatureObject))\r",
																	"\r",
																	"pm.variables.set('fspiopSignature',JSON.stringify(signatureObject))"
																],
																"type": "text/javascript"
															}
														},
														{
															"listen": "test",
															"script": {
																"id": "c184e844-5f77-4575-b64a-5d95ff53be76",
																"exec": [
																	"pm.test(\"Status code is 202\", function () {\r",
																	"    pm.response.to.have.status(202);\r",
																	"});\r",
																	"\r",
																	"// //Check the request that Switch forwards to payerfsp\r",
																	"setTimeout(function () {\r",
																	"  pm.sendRequest(pm.environment.get(\"SIMPAYER_SDK_TESTAPI_URL\")+\"/requests/\"+pm.environment.get(\"transfer_ID\"), function (err, response) {\r",
																	"          if(response.responseSize !== 0) {\r",
																	"              \r",
																	"              //Check the Headers\r",
																	"              var headers = response.json().headers;\r",
																	"              \r",
																	"                pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-source is ${pm.environment.get('SIM2_NAME')}`, function () {\r",
																	"                    pm.expect(headers['fspiop-source']).to.eql(pm.environment.get('SIM2_NAME'));\r",
																	"                });\r",
																	"                \r",
																	"                pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-destination is ${pm.environment.get('SIMPAYER_NAME')}`, function () {\r",
																	"                    pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('SIMPAYER_NAME'));\r",
																	"                });\r",
																	"                \r",
																	"                pm.test(`${pm.environment.get('SIMPAYER_NAME')} content-typeis same as sent in the request`, function () {\r",
																	"                    pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.transfers+json;version=1.0');\r",
																	"                });\r",
																	"                \r",
																	"                pm.test(`${pm.environment.get('SIMPAYER_NAME')} accept is same as sent in the request`, function () {\r",
																	"                    pm.expect(headers['accept']).to.match(/application\\/vnd\\.interoperability\\.transfers\\+json;version=1(\\.\\d)?/);\r",
																	"                });\r",
																	"                \r",
																	"                pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-signature is same as sent in the request`, function () {\r",
																	"                    pm.expect(headers['fspiop-signature']).to.eql(pm.variables.get(\"fspiopSignature\"));\r",
																	"                });\r",
																	"                \r",
																	"                pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-http-method is POST`, function () {\r",
																	"                    pm.expect(headers['fspiop-http-method']).to.eql('POST');\r",
																	"                });\r",
																	"                \r",
																	"                pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-uri is /transfers`, function () {\r",
																	"                    pm.expect(headers['fspiop-uri']).to.eql('/transfers');\r",
																	"                });\r",
																	"                \r",
																	"                \r",
																	"                //Check the data\r",
																	"                var jsonData = response.json().data;\r",
																	"                pm.test(`${pm.environment.get('SIMPAYER_NAME')} data should have the same transferId as request`, function () {\r",
																	"                  pm.expect(jsonData.transferId).to.eql(pm.environment.get(\"transfer_ID\"));\r",
																	"                });\r",
																	"                pm.test(`${pm.environment.get('SIMPAYER_NAME')} data should have the same amount as request`, function () {\r",
																	"                  pm.expect(jsonData.amount.amount).to.eql('20');\r",
																	"                });\r",
																	"                pm.test(`${pm.environment.get('SIMPAYER_NAME')} data should have the same currency as request`, function () {\r",
																	"                  pm.expect(jsonData.amount.currency).to.eql(pm.environment.get(\"currency\"));\r",
																	"                });\r",
																	"                pm.test(`${pm.environment.get('SIMPAYER_NAME')} data should have the same expiration as request`, function () {\r",
																	"                  pm.expect(jsonData.expiration).to.eql(pm.environment.get(\"transferExpiration\"));\r",
																	"                });\r",
																	"                pm.test(`${pm.environment.get('SIMPAYER_NAME')} data should have the same ilpPacket as request`, function () {\r",
																	"                  pm.expect(jsonData.ilpPacket).to.eql(pm.environment.get(\"ilpPacket\"));\r",
																	"                });\r",
																	"                pm.test(`${pm.environment.get('SIMPAYER_NAME')} data should have the same condition as request`, function () {\r",
																	"                  pm.expect(jsonData.condition).to.eql(pm.environment.get(\"condition\"));\r",
																	"                });\r",
																	"                \r",
																	"          } else {\r",
																	"              pm.test(\"Transfer FAILED\", function () {\r",
																	"                throw new Error('Did not receive response on payee side');\r",
																	"              });\r",
																	"              // postman.setNextRequest(null)\r",
																	"          }\r",
																	"  });\r",
																	"}, pm.environment.get(\"SET_TIMEOUT_TRANSFERS\"))\r",
																	"\r",
																	"//Check the callback response that Switch forwards to testfsp2\r",
																	"setTimeout(function () {\r",
																	"  pm.sendRequest(pm.environment.get(\"SIM2_SDK_TESTAPI_URL\")+\"/callbacks/\"+pm.environment.get(\"transfer_ID\"), function (err, response) {\r",
																	"          if(response.responseSize !== 0) {\r",
																	"            //Checking headers\r",
																	"            var headers = response.json().headers;\r",
																	"            pm.test(`${pm.environment.get('SIM2_NAME')} fspiop-source is ${pm.environment.get('SIMPAYER_NAME')}`, function () {\r",
																	"                pm.expect(headers['fspiop-source']).to.eql(pm.environment.get('SIMPAYER_NAME'));\r",
																	"            });\r",
																	"            \r",
																	"            pm.test(`${pm.environment.get('SIM2_NAME')} fspiop-destination is ${pm.environment.get('SIM2_NAME')}`, function () {\r",
																	"                pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('SIM2_NAME'));\r",
																	"            });\r",
																	"            \r",
																	"            pm.test(`${pm.environment.get('SIM2_NAME')} content-type should be application/vnd.interoperability.transfers+json;version=1.0`, function () {\r",
																	"                pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.transfers+json;version=1.0');\r",
																	"            });\r",
																	"            \r",
																	"            pm.test(`${pm.environment.get('SIM2_NAME')} accept is empty`, function () {\r",
																	"                pm.expect(headers['accept']).to.eql(undefined);\r",
																	"            });\r",
																	"            \r",
																	"            \r",
																	"            pm.test(`${pm.environment.get('SIM2_NAME')} fspiop-uri includes /transfers/${pm.environment.get('transfer_ID')}`, function () {\r",
																	"                pm.expect(headers['fspiop-uri']).to.eql(`/transfers/${pm.environment.get('transfer_ID')}`);\r",
																	"            });\r",
																	"            \r",
																	"            pm.test(`${pm.environment.get('SIM2_NAME')} fspiop-http-method is PUT`, function () {\r",
																	"                pm.expect(headers['fspiop-http-method']).to.eql('PUT');\r",
																	"            });\r",
																	"            \r",
																	"            var jsonData = response.json().data;\r",
																	"            pm.test(\"Response data does not have transferId\", function () {\r",
																	"               pm.expect(jsonData.transferId).to.eql(undefined);\r",
																	"            });\r",
																	"            pm.test(\"Response status is COMMITTED\", function () {\r",
																	"                pm.expect(jsonData.transferState).to.eql('COMMITTED');\r",
																	"            });\r",
																	"          } else {\r",
																	"              pm.test(\"Transfer FAILED\", function () {\r",
																	"                throw new Error('Did not receive response on payer side');\r",
																	"              });\r",
																	"              // postman.setNextRequest(null)\r",
																	"          }\r",
																	"   });\r",
																	"}, pm.environment.get(\"SET_TIMEOUT_TRANSFERS\"))\r",
																	""
																],
																"type": "text/javascript"
															}
														}
													],
													"request": {
														"auth": {
															"type": "bearer",
															"bearer": [
																{
																	"key": "token",
																	"value": "{{SIM2_BEARER_TOKEN}}",
																	"type": "string"
																}
															]
														},
														"method": "POST",
														"header": [
															{
																"key": "Accept",
																"type": "text",
																"value": "application/vnd.interoperability.transfers+json;version=1.0"
															},
															{
																"key": "Content-Type",
																"type": "text",
																"value": "application/vnd.interoperability.transfers+json;version=1.0"
															},
															{
																"key": "Date",
																"type": "text",
																"value": "{{transferDate}}"
															},
															{
																"key": "FSPIOP-Source",
																"type": "text",
																"value": "{{SIM2_NAME}}"
															},
															{
																"key": "FSPIOP-Destination",
																"type": "text",
																"value": "{{SIMPAYER_NAME}}"
															},
															{
																"key": "FSPIOP-Signature",
																"type": "text",
																"value": "{{fspiopSignature}}"
															},
															{
																"key": "FSPIOP-URI",
																"type": "text",
																"value": "/transfers"
															},
															{
																"key": "FSPIOP-HTTP-Method",
																"type": "text",
																"value": "POST"
															}
														],
														"body": {
															"mode": "raw",
															"raw": "{{transferRequest}}"
														},
														"url": {
															"raw": "{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}/transfers",
															"host": [
																"{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}"
															],
															"path": [
																"transfers"
															]
														}
													},
													"response": []
												},
												{
													"name": "Send Quote 5 (SIMPAYEE to SIM2)",
													"event": [
														{
															"listen": "prerequest",
															"script": {
																"id": "bce35dc8-cef5-4699-ac48-0a25c96a7422",
																"exec": [
																	"var navigator = {}; \r",
																	"var window = {}; \r",
																	"eval(pm.environment.get('jrsassign'));\r",
																	"\r",
																	"\r",
																	"var uuid = require('uuid');\r",
																	"var generatedUUID = uuid.v4();\r",
																	"pm.environment.set('quoteId', generatedUUID);\r",
																	"generatedUUID = uuid.v4();\r",
																	"pm.environment.set('transactionId', generatedUUID);\r",
																	"\r",
																	"pm.variables.set('quoteDate', (new Date()).toUTCString());\r",
																	"pm.variables.set('payerName', 'PayerFirst PayerLast');\r",
																	"\r",
																	"pm.variables.set('expectedPayeeFirstName', 'GoldenFirst');\r",
																	"pm.variables.set('expectedPayeeLastName', 'GoldenLast');\r",
																	"pm.variables.set('expectedPayeeDOB', '2010-10-10');\r",
																	"\r",
																	"var oHeader = {alg: \"RS256\", \"FSPIOP-Source\":pm.environment.get('SIMPAYEE_NAME'),\"FSPIOP-Destination\":pm.environment.get('SIM2_NAME'), \"FSPIOP-URI\":\"/quotes\", \"FSPIOP-HTTP-Method\":\"POST\", \"Date\":pm.variables.get('quoteDate')};\r",
																	"var sHeader = JSON.stringify(oHeader);\r",
																	"console.log(`sHeader: ${sHeader}`)\r",
																	"\r",
																	"var objPayload = {\r",
																	"  \"quoteId\": pm.environment.get('quoteId'),\r",
																	"  \"transactionId\": pm.environment.get('transactionId'),\r",
																	"  \"payer\": {\r",
																	"    \"partyIdInfo\": {\r",
																	"      \"partyIdType\": \"MSISDN\",\r",
																	"      \"partyIdentifier\": pm.environment.get('SIMPAYEE_MSISDN'),\r",
																	"      \"fspId\": pm.environment.get('SIMPAYEE_NAME')\r",
																	"    },\r",
																	"    \"personalInfo\": {\r",
																	"      \"complexName\": {\r",
																	"        \"firstName\": \"Mats\",\r",
																	"        \"lastName\": \"Hagman\"\r",
																	"      },\r",
																	"      \"dateOfBirth\": \"1983-10-25\"\r",
																	"    }\r",
																	"  },\r",
																	"  \"payee\": {\r",
																	"    \"partyIdInfo\": {\r",
																	"      \"partyIdType\": \"MSISDN\",\r",
																	"      \"partyIdentifier\": pm.environment.get('SIM2_MSISDN'),\r",
																	"      \"fspId\": pm.environment.get('SIM2_NAME')\r",
																	"    }\r",
																	"  },\r",
																	"  \"amountType\": \"RECEIVE\",\r",
																	"  \"amount\": {\r",
																	"    \"amount\": \"35\",\r",
																	"    \"currency\": pm.environment.get('SIM2_CURRENCY')\r",
																	"  },\r",
																	"  \"transactionType\": {\r",
																	"    \"scenario\": \"TRANSFER\",\r",
																	"    \"initiator\": \"PAYER\",\r",
																	"    \"initiatorType\": \"CONSUMER\"\r",
																	"  },\r",
																	"  \"note\": \"hej\"\r",
																	"}\r",
																	"\r",
																	"var sPayload = JSON.stringify(objPayload)\r",
																	"console.log(`sPayload: ${sPayload}`)\r",
																	"pm.variables.set(\"quoteRequest\", sPayload);\r",
																	"var token = KJUR.jws.JWS.sign(\"RS256\", sHeader, sPayload, pm.environment.get('SIMPAYEE_JWS_KEY'));\r",
																	"console.log(`token: ${token}`)\r",
																	"\r",
																	"// var encodedHeaders = btoa(sHeader)\r",
																	"\r",
																	"// var ofspiopSignature = {signature: vSignature, protectedHeader: encodedHeaders}\r",
																	"// var token = JSON.stringify(ofspiopSignature)\r",
																	"\r",
																	"const [ protectedHeaderBase64, , signature ] = token.split('.');\r",
																	"\r",
																	"const signatureObject = {\r",
																	"    signature: signature.replace('\"', ''),\r",
																	"    protectedHeader: protectedHeaderBase64.replace('\"', '')\r",
																	"};\r",
																	"\r",
																	"console.log(JSON.stringify(signatureObject))\r",
																	"\r",
																	"pm.variables.set('fspiopSignature',JSON.stringify(signatureObject))"
																],
																"type": "text/javascript"
															}
														},
														{
															"listen": "test",
															"script": {
																"id": "72a7e284-7753-4e30-a937-db4d1cb2e583",
																"exec": [
																	"pm.test(\"Status code is 202\", function () {\r",
																	"    pm.response.to.have.status(202);\r",
																	"});\r",
																	"\r",
																	"setTimeout(function () {\r",
																	"  pm.sendRequest(pm.environment.get(\"SIM2_SDK_TESTAPI_URL\")+\"/requests/\"+pm.variables.get(\"quoteId\"), function (err, response) {\r",
																	"          if(response.responseSize !== 0) {\r",
																	"              \r",
																	"              //Check the Headers\r",
																	"              var headers = response.json().headers;\r",
																	"              \r",
																	"                pm.test(`${pm.environment.get('SIM2_NAME')} fspiop-source is ${pm.environment.get('SIMPAYEE_NAME')}`, function () {\r",
																	"                    pm.expect(headers['fspiop-source']).to.eql(pm.environment.get('SIMPAYEE_NAME'));\r",
																	"                });\r",
																	"                \r",
																	"                pm.test(`${pm.environment.get('SIM2_NAME')} fspiop-destination is ${pm.environment.get('SIM2_NAME')}`, function () {\r",
																	"                    pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('SIM2_NAME'));\r",
																	"                });\r",
																	"                \r",
																	"                pm.test(`${pm.environment.get('SIM2_NAME')} fspiop-signature is same as sent in the request`, function () {\r",
																	"                    pm.expect(headers['fspiop-signature']).to.eql(pm.variables.get(\"fspiopSignature\"));\r",
																	"                });\r",
																	"                \r",
																	"                pm.test(`${pm.environment.get('SIM2_NAME')} accept is same as sent in the request`, function () {\r",
																	"                    pm.expect(headers['accept']).to.match(/application\\/vnd\\.interoperability\\.quotes\\+json;version=1(\\.\\d)?/);\r",
																	"                });\r",
																	"                \r",
																	"                pm.test(`${pm.environment.get('SIM2_NAME')} content-typeis same as sent in the request`, function () {\r",
																	"                    pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.quotes+json;version=1.0');\r",
																	"                });\r",
																	"                \r",
																	"                pm.test(`${pm.environment.get('SIM2_NAME')} fspiop-uri is /quotes`, function () {\r",
																	"                    pm.expect(headers['fspiop-uri']).to.eql('/quotes');\r",
																	"                });\r",
																	"                \r",
																	"                pm.test(`${pm.environment.get('SIM2_NAME')} fspiop-http-method is POST`, function () {\r",
																	"                    pm.expect(headers['fspiop-http-method']).to.eql('POST');\r",
																	"                });\r",
																	"                \r",
																	"          } else {\r",
																	"              pm.test(\"Quote FAILED\", function () {\r",
																	"                throw new Error('Did not receive request on payee side');\r",
																	"              });\r",
																	"              // postman.setNextRequest(null)\r",
																	"          }\r",
																	"   });\r",
																	"}, pm.environment.get(\"SET_TIMEOUT_QUOTES\"))\r",
																	"\r",
																	"setTimeout(function () {\r",
																	"  pm.sendRequest(pm.environment.get(\"SIMPAYEE_SDK_TESTAPI_URL\")+\"/callbacks/\"+pm.environment.get(\"quoteId\"), function (err, response) {\r",
																	"      if(response.responseSize !== 0) {\r",
																	"          //Checking headers\r",
																	"            var headers = response.json().headers;\r",
																	"            pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-source is ${pm.environment.get('SIM2_NAME')}`, function () {\r",
																	"                pm.expect(headers['fspiop-source']).to.eql(pm.environment.get('SIM2_NAME'));\r",
																	"            });\r",
																	"            \r",
																	"            pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-destination is ${pm.environment.get('SIMPAYEE_NAME')}`, function () {\r",
																	"                pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('SIMPAYEE_NAME'));\r",
																	"            });\r",
																	"            \r",
																	"            pm.test(`${pm.environment.get('SIMPAYEE_NAME')} content-type should be application/vnd.interoperability.quotes+json;version=1.0`, function () {\r",
																	"                pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.quotes+json;version=1.0');\r",
																	"            });\r",
																	"            \r",
																	"            pm.test(`${pm.environment.get('SIMPAYEE_NAME')} accept is empty`, function () {\r",
																	"                pm.expect(headers['accept']).to.eql(undefined);\r",
																	"            });\r",
																	"            \r",
																	"            \r",
																	"            \r",
																	"            var {signature,protectedHeader} = JSON.parse(headers['fspiop-signature'])\r",
																	"            // var strData = JSON.stringify(response.json().data)\r",
																	"            // const token = `${protectedHeader}.${btoa(strData)}.${signature}`\r",
																	"            // console.log(`token: ${token}`)\r",
																	"            // var isValid = KJUR.jws.JWS.verify(token, pm.environment.get('goldentestfsp2JWSPubKey'), {alg: ['RS256']})\r",
																	"            // console.log(`isValid: ${isValid}`)\r",
																	"            // pm.test(\"Check if the response is JWS valid\", function () {\r",
																	"            //     pm.expect(isValid).to.eql(true);\r",
																	"            // });\r",
																	"            \r",
																	"            //Validate protected header inside Signature\r",
																	"            var decodedProtectedHeaders = JSON.parse(atob(protectedHeader))\r",
																	"            console.log('decodedProtectedHeaders:',decodedProtectedHeaders)\r",
																	"            \r",
																	"            pm.test(\"FSPIOP-Signature Protected Header alg to be RS256\", function () {\r",
																	"                pm.expect(decodedProtectedHeaders['alg']).to.eql('RS256');\r",
																	"            });\r",
																	"            pm.test(\"FSPIOP-Signature Protected Header FSPIOP-URI to be /quotes/\"+pm.environment.get(\"quoteId\"), function () {\r",
																	"                pm.expect(decodedProtectedHeaders['FSPIOP-URI']).to.eql('/quotes/'+pm.environment.get(\"quoteId\"));\r",
																	"            });\r",
																	"            \r",
																	"\r",
																	"            pm.test(\"FSPIOP-Signature Protected Header FSPIOP-HTTP-Method to be PUT\", function () {\r",
																	"                pm.expect(decodedProtectedHeaders['FSPIOP-HTTP-Method']).to.eql('PUT');\r",
																	"            });\r",
																	"            pm.test(`FSPIOP-Signature Protected Header FSPIOP-Source to be ${pm.environment.get('SIM2_NAME')}`, function () {\r",
																	"                pm.expect(decodedProtectedHeaders['FSPIOP-Source']).to.eql(pm.environment.get('SIM2_NAME'));\r",
																	"            });\r",
																	"            pm.test(`FSPIOP-Signature Protected Header FSPIOP-Destination to be ${pm.environment.get('SIMPAYEE_NAME')}`, function () {\r",
																	"                pm.expect(decodedProtectedHeaders['FSPIOP-Destination']).to.eql(pm.environment.get('SIMPAYEE_NAME'));\r",
																	"            });\r",
																	"            pm.test(\"FSPIOP-Signature Protected Header Date is present\", function () {\r",
																	"                pm.expect(decodedProtectedHeaders['Date']).to.eql(headers['date']);\r",
																	"            });\r",
																	"           \r",
																	"            pm.test(`${pm.environment.get('SIMPAYEE_NAME')} FSPIOP-URI to be /quotes/${pm.environment.get(\"quoteId\")}`, function () {\r",
																	"                pm.expect(headers['fspiop-uri']).to.eql(`/quotes/${pm.environment.get(\"quoteId\")}`);\r",
																	"            });\r",
																	"            \r",
																	"            pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-http-method is PUT`, function () {\r",
																	"                pm.expect(headers['fspiop-http-method']).to.eql('PUT');\r",
																	"            });\r",
																	"            \r",
																	"            var jsonData = response.json().data;\r",
																	"            \r",
																	"            pm.test(\"Response quoteId is  null\", function () {\r",
																	"                pm.expect(jsonData.quoteId).to.eql(undefined);\r",
																	"                \r",
																	"            });\r",
																	"          \r",
																	"            pm.test(\"Response ilpPacket is not null\", function () {\r",
																	"                pm.expect(jsonData.ilpPacket).not.equal(undefined);\r",
																	"                pm.environment.set(\"ilpPacket\", jsonData.ilpPacket);\r",
																	"            });\r",
																	"       \r",
																	"           pm.test(\"Response condition is not null\", function () {\r",
																	"               pm.expect(jsonData.condition).not.equal(undefined);\r",
																	"               pm.environment.set(\"condition\", jsonData.condition);\r",
																	"           });\r",
																	"      } else {\r",
																	"          pm.test(\"Quote FAILED\", function () {\r",
																	"            throw new Error('Did not receive response on Payer side');\r",
																	"           });\r",
																	"           // postman.setNextRequest(null);\r",
																	"      }\r",
																	"       \r",
																	"   });\r",
																	"}, pm.environment.get(\"SET_TIMEOUT_QUOTES\"))"
																],
																"type": "text/javascript"
															}
														}
													],
													"request": {
														"auth": {
															"type": "bearer",
															"bearer": [
																{
																	"key": "token",
																	"value": "{{SIMPAYEE_BEARER_TOKEN}}",
																	"type": "string"
																}
															]
														},
														"method": "POST",
														"header": [
															{
																"key": "Accept",
																"type": "text",
																"value": "application/vnd.interoperability.quotes+json;version=1.0"
															},
															{
																"key": "Content-Type",
																"type": "text",
																"value": "application/vnd.interoperability.quotes+json;version=1.0"
															},
															{
																"key": "Date",
																"type": "text",
																"value": "{{quoteDate}}"
															},
															{
																"key": "FSPIOP-Source",
																"type": "text",
																"value": "{{SIMPAYEE_NAME}}"
															},
															{
																"key": "FSPIOP-Destination",
																"type": "text",
																"value": "{{SIM2_NAME}}"
															},
															{
																"key": "FSPIOP-Signature",
																"type": "text",
																"value": "{{fspiopSignature}}"
															},
															{
																"key": "FSPIOP-HTTP-Method",
																"type": "text",
																"value": "POST"
															},
															{
																"key": "FSPIOP-URI",
																"type": "text",
																"value": "/quotes"
															}
														],
														"body": {
															"mode": "raw",
															"raw": "{{quoteRequest}}"
														},
														"url": {
															"raw": "{{HOST_QUOTING_SERVICE}}/quotes",
															"host": [
																"{{HOST_QUOTING_SERVICE}}"
															],
															"path": [
																"quotes"
															]
														}
													},
													"response": []
												},
												{
													"name": "Send Transfer 5 (SIMPAYEE to SIM2)",
													"event": [
														{
															"listen": "prerequest",
															"script": {
																"id": "3d5c8f30-52ce-4d01-b551-07d5836e0618",
																"exec": [
																	"var navigator = {}; //fake a navigator object for the lib\r",
																	"var window = {}; //fake a window object for the lib\r",
																	"eval(pm.environment.get('jrsassign'));\r",
																	"\r",
																	"var uuid = require('uuid');\r",
																	"var generatedUUID = uuid.v4();\r",
																	"pm.environment.set('transfer_ID', pm.environment.get('transactionId'));\r",
																	"\r",
																	"\r",
																	"pm.variables.set('transferDate', (new Date()).toUTCString());\r",
																	"\r",
																	"pm.environment.set(\"transferExpiration\",new Date(new Date().getTime() + 60000))\r",
																	"\r",
																	"var oHeader = {alg: \"RS256\", \"FSPIOP-Source\":pm.environment.get('SIMPAYEE_NAME'),\"FSPIOP-Destination\":pm.environment.get('SIM2_NAME'), \"FSPIOP-URI\":\"/transfers\", \"FSPIOP-HTTP-Method\":\"POST\", \"Date\":pm.variables.get('transferDate')};\r",
																	"var sHeader = JSON.stringify(oHeader);\r",
																	"console.log(`sHeader: ${sHeader}`)\r",
																	"\r",
																	"var objPayload = {\r",
																	"  \"transferId\": pm.environment.get('transfer_ID'),\r",
																	"  \"payerFsp\": pm.environment.get('SIMPAYEE_NAME'),\r",
																	"  \"payeeFsp\": pm.environment.get('SIM2_NAME'),\r",
																	"  \"amount\": {\r",
																	"    \"amount\": \"35\",\r",
																	"    \"currency\": pm.environment.get('SIM2_CURRENCY')\r",
																	"  },\r",
																	"  \"expiration\": pm.environment.get('transferExpiration'),\r",
																	"  \"ilpPacket\": pm.environment.get('ilpPacket'),\r",
																	"  \"condition\": pm.environment.get('condition')\r",
																	"}\r",
																	"var sPayload = JSON.stringify(objPayload)\r",
																	"console.log(`sPayload: ${sPayload}`)\r",
																	"pm.variables.set(\"transferRequest\", sPayload);\r",
																	"var token = KJUR.jws.JWS.sign(\"RS256\", sHeader, sPayload, pm.environment.get('SIMPAYEE_JWS_KEY'));\r",
																	"//console.log(`token: ${token}`)\r",
																	"\r",
																	"// var encodedHeaders = btoa(sHeader)\r",
																	"\r",
																	"// var ofspiopSignature = {signature: vSignature, protectedHeader: encodedHeaders}\r",
																	"// var token = JSON.stringify(ofspiopSignature)\r",
																	"\r",
																	"const [ protectedHeaderBase64, , signature ] = token.split('.');\r",
																	"\r",
																	"const signatureObject = {\r",
																	"    signature: signature.replace('\"', ''),\r",
																	"    protectedHeader: protectedHeaderBase64.replace('\"', '')\r",
																	"};\r",
																	"\r",
																	"console.log(JSON.stringify(signatureObject))\r",
																	"\r",
																	"pm.variables.set('fspiopSignature',JSON.stringify(signatureObject))"
																],
																"type": "text/javascript"
															}
														},
														{
															"listen": "test",
															"script": {
																"id": "c49f8920-1cdd-4e75-b88f-9a80ae7a130c",
																"exec": [
																	"pm.test(\"Status code is 202\", function () {\r",
																	"    pm.response.to.have.status(202);\r",
																	"});\r",
																	"\r",
																	"// //Check the request that Switch forwards to testfsp2\r",
																	"setTimeout(function () {\r",
																	"  pm.sendRequest(pm.environment.get(\"SIM2_SDK_TESTAPI_URL\")+\"/requests/\"+pm.environment.get(\"transfer_ID\"), function (err, response) {\r",
																	"          if(response.responseSize !== 0) {\r",
																	"              \r",
																	"              //Check the Headers\r",
																	"              var headers = response.json().headers;\r",
																	"              \r",
																	"                pm.test(`${pm.environment.get('SIM2_NAME')} fspiop-source is ${pm.environment.get('SIMPAYEE_NAME')}`, function () {\r",
																	"                    pm.expect(headers['fspiop-source']).to.eql(pm.environment.get('SIMPAYEE_NAME'));\r",
																	"                });\r",
																	"                \r",
																	"                pm.test(`${pm.environment.get('SIM2_NAME')} fspiop-destination is ${pm.environment.get('SIM2_NAME')}`, function () {\r",
																	"                    pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('SIM2_NAME'));\r",
																	"                });\r",
																	"                \r",
																	"                pm.test(`${pm.environment.get('SIM2_NAME')} content-typeis same as sent in the request`, function () {\r",
																	"                    pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.transfers+json;version=1.0');\r",
																	"                });\r",
																	"                \r",
																	"                pm.test(`${pm.environment.get('SIM2_NAME')} accept is same as sent in the request`, function () {\r",
																	"                    pm.expect(headers['accept']).to.match(/application\\/vnd\\.interoperability\\.transfers\\+json;version=1(\\.\\d)?/);\r",
																	"                });\r",
																	"                \r",
																	"                pm.test(`${pm.environment.get('SIM2_NAME')} fspiop-signature is same as sent in the request`, function () {\r",
																	"                    pm.expect(headers['fspiop-signature']).to.eql(pm.variables.get(\"fspiopSignature\"));\r",
																	"                });\r",
																	"                \r",
																	"                pm.test(`${pm.environment.get('SIM2_NAME')} fspiop-http-method is POST`, function () {\r",
																	"                    pm.expect(headers['fspiop-http-method']).to.eql('POST');\r",
																	"                });\r",
																	"                \r",
																	"                pm.test(`${pm.environment.get('SIM2_NAME')} fspiop-uri is /transfers`, function () {\r",
																	"                    pm.expect(headers['fspiop-uri']).to.eql('/transfers');\r",
																	"                });\r",
																	"                \r",
																	"                \r",
																	"                //Check the data\r",
																	"                var jsonData = response.json().data;\r",
																	"                pm.test(`${pm.environment.get('SIM2_NAME')} data should have the same transferId as request`, function () {\r",
																	"                  pm.expect(jsonData.transferId).to.eql(pm.environment.get(\"transfer_ID\"));\r",
																	"                });\r",
																	"                pm.test(`${pm.environment.get('SIM2_NAME')} data should have the same amount as request`, function () {\r",
																	"                  pm.expect(jsonData.amount.amount).to.eql('35');\r",
																	"                });\r",
																	"                pm.test(`${pm.environment.get('SIM2_NAME')} data should have the same currency as request`, function () {\r",
																	"                  pm.expect(jsonData.amount.currency).to.eql(pm.environment.get(\"currency\"));\r",
																	"                });\r",
																	"                pm.test(`${pm.environment.get('SIM2_NAME')} data should have the same expiration as request`, function () {\r",
																	"                  pm.expect(jsonData.expiration).to.eql(pm.environment.get(\"transferExpiration\"));\r",
																	"                });\r",
																	"                pm.test(`${pm.environment.get('SIM2_NAME')} data should have the same ilpPacket as request`, function () {\r",
																	"                  pm.expect(jsonData.ilpPacket).to.eql(pm.environment.get(\"ilpPacket\"));\r",
																	"                });\r",
																	"                pm.test(`${pm.environment.get('SIM2_NAME')} data should have the same condition as request`, function () {\r",
																	"                  pm.expect(jsonData.condition).to.eql(pm.environment.get(\"condition\"));\r",
																	"                });\r",
																	"                \r",
																	"          } else {\r",
																	"              pm.test(\"Transfer FAILED\", function () {\r",
																	"                throw new Error('Did not receive response on payee side');\r",
																	"              });\r",
																	"              // postman.setNextRequest(null)\r",
																	"          }\r",
																	"  });\r",
																	"}, pm.environment.get(\"SET_TIMEOUT_TRANSFERS\"))\r",
																	"\r",
																	"//Check the callback response that Switch forwards to payeefsp\r",
																	"setTimeout(function () {\r",
																	"  pm.sendRequest(pm.environment.get(\"SIMPAYEE_SDK_TESTAPI_URL\")+\"/callbacks/\"+pm.environment.get(\"transfer_ID\"), function (err, response) {\r",
																	"          if(response.responseSize !== 0) {\r",
																	"            //Checking headers\r",
																	"            var headers = response.json().headers;\r",
																	"            pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-source is ${pm.environment.get('SIM2_NAME')}`, function () {\r",
																	"                pm.expect(headers['fspiop-source']).to.eql(pm.environment.get('SIM2_NAME'));\r",
																	"            });\r",
																	"            \r",
																	"            pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-destination is ${pm.environment.get('SIMPAYEE_NAME')}`, function () {\r",
																	"                pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('SIMPAYEE_NAME'));\r",
																	"            });\r",
																	"            \r",
																	"            pm.test(`${pm.environment.get('SIMPAYEE_NAME')} content-type should be application/vnd.interoperability.transfers+json;version=1.0`, function () {\r",
																	"                pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.transfers+json;version=1.0');\r",
																	"            });\r",
																	"            \r",
																	"            pm.test(`${pm.environment.get('SIMPAYEE_NAME')} accept is empty`, function () {\r",
																	"                pm.expect(headers['accept']).to.eql(undefined);\r",
																	"            });\r",
																	"            \r",
																	"            \r",
																	"            pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-uri includes /transfers/${pm.environment.get('transfer_ID')}`, function () {\r",
																	"                pm.expect(headers['fspiop-uri']).to.eql(`/transfers/${pm.environment.get('transfer_ID')}`);\r",
																	"            });\r",
																	"            \r",
																	"            pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-http-method is PUT`, function () {\r",
																	"                pm.expect(headers['fspiop-http-method']).to.eql('PUT');\r",
																	"            });\r",
																	"            \r",
																	"            var jsonData = response.json().data;\r",
																	"            pm.test(\"Response data does not have transferId\", function () {\r",
																	"               pm.expect(jsonData.transferId).to.eql(undefined);\r",
																	"            });\r",
																	"            pm.test(\"Response status is COMMITTED\", function () {\r",
																	"                pm.expect(jsonData.transferState).to.eql('COMMITTED');\r",
																	"            });\r",
																	"          } else {\r",
																	"              pm.test(\"Transfer FAILED\", function () {\r",
																	"                throw new Error('Did not receive response on payer side');\r",
																	"              });\r",
																	"              // postman.setNextRequest(null)\r",
																	"          }\r",
																	"   });\r",
																	"}, pm.environment.get(\"SET_TIMEOUT_TRANSFERS\"))\r",
																	""
																],
																"type": "text/javascript"
															}
														}
													],
													"request": {
														"auth": {
															"type": "bearer",
															"bearer": [
																{
																	"key": "token",
																	"value": "{{SIMPAYEE_BEARER_TOKEN}}",
																	"type": "string"
																}
															]
														},
														"method": "POST",
														"header": [
															{
																"key": "Accept",
																"type": "text",
																"value": "application/vnd.interoperability.transfers+json;version=1.0"
															},
															{
																"key": "Content-Type",
																"type": "text",
																"value": "application/vnd.interoperability.transfers+json;version=1.0"
															},
															{
																"key": "Date",
																"type": "text",
																"value": "{{transferDate}}"
															},
															{
																"key": "FSPIOP-Source",
																"type": "text",
																"value": "{{SIMPAYEE_NAME}}"
															},
															{
																"key": "FSPIOP-Destination",
																"type": "text",
																"value": "{{SIM2_NAME}}"
															},
															{
																"key": "FSPIOP-Signature",
																"type": "text",
																"value": "{{fspiopSignature}}"
															},
															{
																"key": "FSPIOP-URI",
																"type": "text",
																"value": "/transfers"
															},
															{
																"key": "FSPIOP-HTTP-Method",
																"type": "text",
																"value": "POST"
															}
														],
														"body": {
															"mode": "raw",
															"raw": "{{transferRequest}}"
														},
														"url": {
															"raw": "{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}/transfers",
															"host": [
																"{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}"
															],
															"path": [
																"transfers"
															]
														}
													},
													"response": []
												},
												{
													"name": "Send Quote 6  (SIMPAYEE to SIMPAYER)",
													"event": [
														{
															"listen": "prerequest",
															"script": {
																"id": "e2359c87-446b-4af7-b25d-2462144fcc12",
																"exec": [
																	"var navigator = {}; \r",
																	"var window = {}; \r",
																	"eval(pm.environment.get('jrsassign'));\r",
																	"\r",
																	"\r",
																	"var uuid = require('uuid');\r",
																	"var generatedUUID = uuid.v4();\r",
																	"pm.environment.set('quoteId', generatedUUID);\r",
																	"generatedUUID = uuid.v4();\r",
																	"pm.environment.set('transactionId', generatedUUID);\r",
																	"\r",
																	"pm.variables.set('quoteDate', (new Date()).toUTCString());\r",
																	"pm.variables.set('payerName', 'PayerFirst PayerLast');\r",
																	"\r",
																	"pm.variables.set('expectedPayeeFirstName', 'GoldenFirst');\r",
																	"pm.variables.set('expectedPayeeLastName', 'GoldenLast');\r",
																	"pm.variables.set('expectedPayeeDOB', '2010-10-10');\r",
																	"\r",
																	"var oHeader = {alg: \"RS256\", \"FSPIOP-Source\":pm.environment.get('SIMPAYEE_NAME'),\"FSPIOP-Destination\":pm.environment.get('SIMPAYER_NAME'), \"FSPIOP-URI\":\"/quotes\", \"FSPIOP-HTTP-Method\":\"POST\", \"Date\":pm.variables.get('quoteDate')};\r",
																	"var sHeader = JSON.stringify(oHeader);\r",
																	"console.log(`sHeader: ${sHeader}`)\r",
																	"\r",
																	"var objPayload = {\r",
																	"  \"quoteId\": pm.environment.get('quoteId'),\r",
																	"  \"transactionId\": pm.environment.get('transactionId'),\r",
																	"  \"payer\": {\r",
																	"    \"partyIdInfo\": {\r",
																	"      \"partyIdType\": \"MSISDN\",\r",
																	"      \"partyIdentifier\": pm.environment.get('SIMPAYEE_MSISDN'),\r",
																	"      \"fspId\": pm.environment.get('SIMPAYEE_NAME')\r",
																	"    },\r",
																	"    \"personalInfo\": {\r",
																	"      \"complexName\": {\r",
																	"        \"firstName\": \"Mats\",\r",
																	"        \"lastName\": \"Hagman\"\r",
																	"      },\r",
																	"      \"dateOfBirth\": \"1983-10-25\"\r",
																	"    }\r",
																	"  },\r",
																	"  \"payee\": {\r",
																	"    \"partyIdInfo\": {\r",
																	"      \"partyIdType\": \"MSISDN\",\r",
																	"      \"partyIdentifier\": pm.environment.get('SIMPAYER_MSISDN'),\r",
																	"      \"fspId\": pm.environment.get('SIMPAYER_NAME')\r",
																	"    }\r",
																	"  },\r",
																	"  \"amountType\": \"RECEIVE\",\r",
																	"  \"amount\": {\r",
																	"    \"amount\": \"25\",\r",
																	"    \"currency\": pm.environment.get('SIMPAYER_CURRENCY')\r",
																	"  },\r",
																	"  \"transactionType\": {\r",
																	"    \"scenario\": \"TRANSFER\",\r",
																	"    \"initiator\": \"PAYER\",\r",
																	"    \"initiatorType\": \"CONSUMER\"\r",
																	"  },\r",
																	"  \"note\": \"hej\"\r",
																	"}\r",
																	"\r",
																	"var sPayload = JSON.stringify(objPayload)\r",
																	"console.log(`sPayload: ${sPayload}`)\r",
																	"pm.variables.set(\"quoteRequest\", sPayload);\r",
																	"var token = KJUR.jws.JWS.sign(\"RS256\", sHeader, sPayload, pm.environment.get('SIMPAYEE_JWS_KEY'));\r",
																	"console.log(`token: ${token}`)\r",
																	"\r",
																	"// var encodedHeaders = btoa(sHeader)\r",
																	"\r",
																	"// var ofspiopSignature = {signature: vSignature, protectedHeader: encodedHeaders}\r",
																	"// var token = JSON.stringify(ofspiopSignature)\r",
																	"\r",
																	"const [ protectedHeaderBase64, , signature ] = token.split('.');\r",
																	"\r",
																	"const signatureObject = {\r",
																	"    signature: signature.replace('\"', ''),\r",
																	"    protectedHeader: protectedHeaderBase64.replace('\"', '')\r",
																	"};\r",
																	"\r",
																	"console.log(JSON.stringify(signatureObject))\r",
																	"\r",
																	"pm.variables.set('fspiopSignature',JSON.stringify(signatureObject))"
																],
																"type": "text/javascript"
															}
														},
														{
															"listen": "test",
															"script": {
																"id": "1be673e9-17e0-4863-8b94-1161500a4204",
																"exec": [
																	"pm.test(\"Status code is 202\", function () {\r",
																	"    pm.response.to.have.status(202);\r",
																	"});\r",
																	"\r",
																	"setTimeout(function () {\r",
																	"  pm.sendRequest(pm.environment.get(\"SIMPAYER_SDK_TESTAPI_URL\")+\"/requests/\"+pm.variables.get(\"quoteId\"), function (err, response) {\r",
																	"          if(response.responseSize !== 0) {\r",
																	"              \r",
																	"              //Check the Headers\r",
																	"              var headers = response.json().headers;\r",
																	"              \r",
																	"                pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-source is ${pm.environment.get('SIMPAYEE_NAME')}`, function () {\r",
																	"                    pm.expect(headers['fspiop-source']).to.eql(pm.environment.get('SIMPAYEE_NAME'));\r",
																	"                });\r",
																	"                \r",
																	"                pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-destination is ${pm.environment.get('SIMPAYER_NAME')}`, function () {\r",
																	"                    pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('SIMPAYER_NAME'));\r",
																	"                });\r",
																	"                \r",
																	"                pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-signature is same as sent in the request`, function () {\r",
																	"                    pm.expect(headers['fspiop-signature']).to.eql(pm.variables.get(\"fspiopSignature\"));\r",
																	"                });\r",
																	"                \r",
																	"                pm.test(`${pm.environment.get('SIMPAYER_NAME')} accept is same as sent in the request`, function () {\r",
																	"                    pm.expect(headers['accept']).to.match(/application\\/vnd\\.interoperability\\.quotes\\+json;version=1(\\.\\d)?/);\r",
																	"                });\r",
																	"                \r",
																	"                pm.test(`${pm.environment.get('SIMPAYER_NAME')} content-typeis same as sent in the request`, function () {\r",
																	"                    pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.quotes+json;version=1.0');\r",
																	"                });\r",
																	"                \r",
																	"                pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-uri is /quotes`, function () {\r",
																	"                    pm.expect(headers['fspiop-uri']).to.eql('/quotes');\r",
																	"                });\r",
																	"                \r",
																	"                pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-http-method is POST`, function () {\r",
																	"                    pm.expect(headers['fspiop-http-method']).to.eql('POST');\r",
																	"                });\r",
																	"                \r",
																	"          } else {\r",
																	"              pm.test(\"Quote FAILED\", function () {\r",
																	"                throw new Error('Did not receive request on payee side');\r",
																	"              });\r",
																	"              // postman.setNextRequest(null)\r",
																	"          }\r",
																	"   });\r",
																	"}, pm.environment.get(\"SET_TIMEOUT_QUOTES\"))\r",
																	"\r",
																	"setTimeout(function () {\r",
																	"  pm.sendRequest(pm.environment.get(\"SIMPAYEE_SDK_TESTAPI_URL\")+\"/callbacks/\"+pm.environment.get(\"quoteId\"), function (err, response) {\r",
																	"      if(response.responseSize !== 0) {\r",
																	"          //Checking headers\r",
																	"            var headers = response.json().headers;\r",
																	"            pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-source is ${pm.environment.get('SIMPAYER_NAME')}`, function () {\r",
																	"                pm.expect(headers['fspiop-source']).to.eql(pm.environment.get('SIMPAYER_NAME'));\r",
																	"            });\r",
																	"            \r",
																	"            pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-destination is ${pm.environment.get('SIMPAYEE_NAME')}`, function () {\r",
																	"                pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('SIMPAYEE_NAME'));\r",
																	"            });\r",
																	"            \r",
																	"            pm.test(`${pm.environment.get('SIMPAYEE_NAME')} content-type should be application/vnd.interoperability.quotes+json;version=1.0`, function () {\r",
																	"                pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.quotes+json;version=1.0');\r",
																	"            });\r",
																	"            \r",
																	"            pm.test(`${pm.environment.get('SIMPAYEE_NAME')} accept is empty`, function () {\r",
																	"                pm.expect(headers['accept']).to.eql(undefined);\r",
																	"            });\r",
																	"            \r",
																	"            \r",
																	"            \r",
																	"            var {signature,protectedHeader} = JSON.parse(headers['fspiop-signature'])\r",
																	"            // var strData = JSON.stringify(response.json().data)\r",
																	"            // const token = `${protectedHeader}.${btoa(strData)}.${signature}`\r",
																	"            // console.log(`token: ${token}`)\r",
																	"            // var isValid = KJUR.jws.JWS.verify(token, pm.environment.get('goldenpayerfspJWSPubKey'), {alg: ['RS256']})\r",
																	"            // console.log(`isValid: ${isValid}`)\r",
																	"            // pm.test(\"Check if the response is JWS valid\", function () {\r",
																	"            //     pm.expect(isValid).to.eql(true);\r",
																	"            // });\r",
																	"            \r",
																	"            //Validate protected header inside Signature\r",
																	"            var decodedProtectedHeaders = JSON.parse(atob(protectedHeader))\r",
																	"            console.log('decodedProtectedHeaders:',decodedProtectedHeaders)\r",
																	"            \r",
																	"            pm.test(\"FSPIOP-Signature Protected Header alg to be RS256\", function () {\r",
																	"                pm.expect(decodedProtectedHeaders['alg']).to.eql('RS256');\r",
																	"            });\r",
																	"            pm.test(\"FSPIOP-Signature Protected Header FSPIOP-URI to be /quotes/\"+pm.environment.get(\"quoteId\"), function () {\r",
																	"                pm.expect(decodedProtectedHeaders['FSPIOP-URI']).to.eql('/quotes/'+pm.environment.get(\"quoteId\"));\r",
																	"            });\r",
																	"            \r",
																	"\r",
																	"            pm.test(\"FSPIOP-Signature Protected Header FSPIOP-HTTP-Method to be PUT\", function () {\r",
																	"                pm.expect(decodedProtectedHeaders['FSPIOP-HTTP-Method']).to.eql('PUT');\r",
																	"            });\r",
																	"            pm.test(`FSPIOP-Signature Protected Header FSPIOP-Source to be ${pm.environment.get('SIMPAYER_NAME')}`, function () {\r",
																	"                pm.expect(decodedProtectedHeaders['FSPIOP-Source']).to.eql(pm.environment.get('SIMPAYER_NAME'));\r",
																	"            });\r",
																	"            pm.test(`FSPIOP-Signature Protected Header FSPIOP-Destination to be ${pm.environment.get('SIMPAYEE_NAME')}`, function () {\r",
																	"                pm.expect(decodedProtectedHeaders['FSPIOP-Destination']).to.eql(pm.environment.get('SIMPAYEE_NAME'));\r",
																	"            });\r",
																	"            pm.test(\"FSPIOP-Signature Protected Header Date is present\", function () {\r",
																	"                pm.expect(decodedProtectedHeaders['Date']).to.eql(headers['date']);\r",
																	"            });\r",
																	"           \r",
																	"            pm.test(`${pm.environment.get('SIMPAYEE_NAME')} FSPIOP-URI to be /quotes/${pm.environment.get(\"quoteId\")}`, function () {\r",
																	"                pm.expect(headers['fspiop-uri']).to.eql(`/quotes/${pm.environment.get(\"quoteId\")}`);\r",
																	"            });\r",
																	"            \r",
																	"            pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-http-method is PUT`, function () {\r",
																	"                pm.expect(headers['fspiop-http-method']).to.eql('PUT');\r",
																	"            });\r",
																	"            \r",
																	"            var jsonData = response.json().data;\r",
																	"            \r",
																	"            pm.test(\"Response quoteId is  null\", function () {\r",
																	"                pm.expect(jsonData.quoteId).to.eql(undefined);\r",
																	"                \r",
																	"            });\r",
																	"          \r",
																	"            pm.test(\"Response ilpPacket is not null\", function () {\r",
																	"                pm.expect(jsonData.ilpPacket).not.equal(undefined);\r",
																	"                pm.environment.set(\"ilpPacket\", jsonData.ilpPacket);\r",
																	"            });\r",
																	"       \r",
																	"           pm.test(\"Response condition is not null\", function () {\r",
																	"               pm.expect(jsonData.condition).not.equal(undefined);\r",
																	"               pm.environment.set(\"condition\", jsonData.condition);\r",
																	"           });\r",
																	"      } else {\r",
																	"          pm.test(\"Quote FAILED\", function () {\r",
																	"            throw new Error('Did not receive response on Payer side');\r",
																	"           });\r",
																	"           // postman.setNextRequest(null);\r",
																	"      }\r",
																	"       \r",
																	"   });\r",
																	"}, pm.environment.get(\"SET_TIMEOUT_QUOTES\"))"
																],
																"type": "text/javascript"
															}
														}
													],
													"request": {
														"auth": {
															"type": "bearer",
															"bearer": [
																{
																	"key": "token",
																	"value": "{{SIMPAYEE_BEARER_TOKEN}}",
																	"type": "string"
																}
															]
														},
														"method": "POST",
														"header": [
															{
																"key": "Accept",
																"type": "text",
																"value": "application/vnd.interoperability.quotes+json;version=1.0"
															},
															{
																"key": "Content-Type",
																"type": "text",
																"value": "application/vnd.interoperability.quotes+json;version=1.0"
															},
															{
																"key": "Date",
																"type": "text",
																"value": "{{quoteDate}}"
															},
															{
																"key": "FSPIOP-Source",
																"type": "text",
																"value": "{{SIMPAYEE_NAME}}"
															},
															{
																"key": "FSPIOP-Destination",
																"type": "text",
																"value": "{{SIMPAYER_NAME}}"
															},
															{
																"key": "FSPIOP-Signature",
																"type": "text",
																"value": "{{fspiopSignature}}"
															},
															{
																"key": "FSPIOP-HTTP-Method",
																"type": "text",
																"value": "POST"
															},
															{
																"key": "FSPIOP-URI",
																"type": "text",
																"value": "/quotes"
															}
														],
														"body": {
															"mode": "raw",
															"raw": "{{quoteRequest}}"
														},
														"url": {
															"raw": "{{HOST_QUOTING_SERVICE}}/quotes",
															"host": [
																"{{HOST_QUOTING_SERVICE}}"
															],
															"path": [
																"quotes"
															]
														}
													},
													"response": []
												},
												{
													"name": "Send Transfer 6 (SIMPAYEE to SIMPAYER)",
													"event": [
														{
															"listen": "prerequest",
															"script": {
																"id": "b3fba63b-db64-4120-b6b2-9b5caa4aa6c8",
																"exec": [
																	"var navigator = {}; //fake a navigator object for the lib\r",
																	"var window = {}; //fake a window object for the lib\r",
																	"eval(pm.environment.get('jrsassign'));\r",
																	"\r",
																	"var uuid = require('uuid');\r",
																	"var generatedUUID = uuid.v4();\r",
																	"pm.environment.set('transfer_ID', pm.environment.get('transactionId'));\r",
																	"\r",
																	"\r",
																	"pm.variables.set('transferDate', (new Date()).toUTCString());\r",
																	"\r",
																	"pm.environment.set(\"transferExpiration\",new Date(new Date().getTime() + 60000))\r",
																	"\r",
																	"var oHeader = {alg: \"RS256\", \"FSPIOP-Source\":pm.environment.get('SIMPAYEE_NAME'),\"FSPIOP-Destination\":pm.environment.get('SIMPAYER_NAME'), \"FSPIOP-URI\":\"/transfers\", \"FSPIOP-HTTP-Method\":\"POST\", \"Date\":pm.variables.get('transferDate')};\r",
																	"var sHeader = JSON.stringify(oHeader);\r",
																	"console.log(`sHeader: ${sHeader}`)\r",
																	"\r",
																	"var objPayload = {\r",
																	"  \"transferId\": pm.environment.get('transfer_ID'),\r",
																	"  \"payerFsp\": pm.environment.get('SIMPAYEE_NAME'),\r",
																	"  \"payeeFsp\": pm.environment.get('SIMPAYER_NAME'),\r",
																	"  \"amount\": {\r",
																	"    \"amount\": \"25\",\r",
																	"    \"currency\": pm.environment.get('SIMPAYER_CURRENCY')\r",
																	"  },\r",
																	"  \"expiration\": pm.environment.get('transferExpiration'),\r",
																	"  \"ilpPacket\": pm.environment.get('ilpPacket'),\r",
																	"  \"condition\": pm.environment.get('condition')\r",
																	"}\r",
																	"var sPayload = JSON.stringify(objPayload)\r",
																	"console.log(`sPayload: ${sPayload}`)\r",
																	"pm.variables.set(\"transferRequest\", sPayload);\r",
																	"var token = KJUR.jws.JWS.sign(\"RS256\", sHeader, sPayload, pm.environment.get('SIMPAYEE_JWS_KEY'));\r",
																	"//console.log(`token: ${token}`)\r",
																	"\r",
																	"// var encodedHeaders = btoa(sHeader)\r",
																	"\r",
																	"// var ofspiopSignature = {signature: vSignature, protectedHeader: encodedHeaders}\r",
																	"// var token = JSON.stringify(ofspiopSignature)\r",
																	"\r",
																	"const [ protectedHeaderBase64, , signature ] = token.split('.');\r",
																	"\r",
																	"const signatureObject = {\r",
																	"    signature: signature.replace('\"', ''),\r",
																	"    protectedHeader: protectedHeaderBase64.replace('\"', '')\r",
																	"};\r",
																	"\r",
																	"console.log(JSON.stringify(signatureObject))\r",
																	"\r",
																	"pm.variables.set('fspiopSignature',JSON.stringify(signatureObject))"
																],
																"type": "text/javascript"
															}
														},
														{
															"listen": "test",
															"script": {
																"id": "1721509a-b666-4271-b9ca-b8d0f0062c60",
																"exec": [
																	"pm.test(\"Status code is 202\", function () {\r",
																	"    pm.response.to.have.status(202);\r",
																	"});\r",
																	"\r",
																	"// //Check the request that Switch forwards to payerfsp\r",
																	"setTimeout(function () {\r",
																	"  pm.sendRequest(pm.environment.get(\"SIMPAYER_SDK_TESTAPI_URL\")+\"/requests/\"+pm.environment.get(\"transfer_ID\"), function (err, response) {\r",
																	"          if(response.responseSize !== 0) {\r",
																	"              \r",
																	"              //Check the Headers\r",
																	"              var headers = response.json().headers;\r",
																	"              \r",
																	"                pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-source is ${pm.environment.get('SIMPAYEE_NAME')}`, function () {\r",
																	"                    pm.expect(headers['fspiop-source']).to.eql(pm.environment.get('SIMPAYEE_NAME'));\r",
																	"                });\r",
																	"                \r",
																	"                pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-destination is ${pm.environment.get('SIMPAYER_NAME')}`, function () {\r",
																	"                    pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('SIMPAYER_NAME'));\r",
																	"                });\r",
																	"                \r",
																	"                pm.test(`${pm.environment.get('SIMPAYER_NAME')} content-typeis same as sent in the request`, function () {\r",
																	"                    pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.transfers+json;version=1.0');\r",
																	"                });\r",
																	"                \r",
																	"                pm.test(`${pm.environment.get('SIMPAYER_NAME')} accept is same as sent in the request`, function () {\r",
																	"                    pm.expect(headers['accept']).to.match(/application\\/vnd\\.interoperability\\.transfers\\+json;version=1(\\.\\d)?/);\r",
																	"                });\r",
																	"                \r",
																	"                pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-signature is same as sent in the request`, function () {\r",
																	"                    pm.expect(headers['fspiop-signature']).to.eql(pm.variables.get(\"fspiopSignature\"));\r",
																	"                });\r",
																	"                \r",
																	"                pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-http-method is POST`, function () {\r",
																	"                    pm.expect(headers['fspiop-http-method']).to.eql('POST');\r",
																	"                });\r",
																	"                \r",
																	"                pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-uri is /transfers`, function () {\r",
																	"                    pm.expect(headers['fspiop-uri']).to.eql('/transfers');\r",
																	"                });\r",
																	"                \r",
																	"                \r",
																	"                //Check the data\r",
																	"                var jsonData = response.json().data;\r",
																	"                pm.test(`${pm.environment.get('SIMPAYER_NAME')} data should have the same transferId as request`, function () {\r",
																	"                  pm.expect(jsonData.transferId).to.eql(pm.environment.get(\"transfer_ID\"));\r",
																	"                });\r",
																	"                pm.test(`${pm.environment.get('SIMPAYER_NAME')} data should have the same payeefspId as request`, function () {\r",
																	"                  pm.expect(jsonData.payeeFsp).to.eql(pm.environment.get('SIMPAYER_NAME'));\r",
																	"                });\r",
																	"                pm.test(`${pm.environment.get('SIMPAYER_NAME')} data should have the same payerfspId as request`, function () {\r",
																	"                  pm.expect(jsonData.payerFsp).to.eql(pm.environment.get('SIMPAYEE_NAME'));\r",
																	"                });\r",
																	"                pm.test(`${pm.environment.get('SIMPAYER_NAME')} data should have the same amount as request`, function () {\r",
																	"                  pm.expect(jsonData.amount.amount).to.eql('25');\r",
																	"                });\r",
																	"                pm.test(`${pm.environment.get('SIMPAYER_NAME')} data should have the same currency as request`, function () {\r",
																	"                  pm.expect(jsonData.amount.currency).to.eql(pm.environment.get(\"currency\"));\r",
																	"                });\r",
																	"                pm.test(`${pm.environment.get('SIMPAYER_NAME')} data should have the same expiration as request`, function () {\r",
																	"                  pm.expect(jsonData.expiration).to.eql(pm.environment.get(\"transferExpiration\"));\r",
																	"                });\r",
																	"                pm.test(`${pm.environment.get('SIMPAYER_NAME')} data should have the same ilpPacket as request`, function () {\r",
																	"                  pm.expect(jsonData.ilpPacket).to.eql(pm.environment.get(\"ilpPacket\"));\r",
																	"                });\r",
																	"                pm.test(`${pm.environment.get('SIMPAYER_NAME')} data should have the same condition as request`, function () {\r",
																	"                  pm.expect(jsonData.condition).to.eql(pm.environment.get(\"condition\"));\r",
																	"                });\r",
																	"                \r",
																	"          } else {\r",
																	"              pm.test(\"Transfer FAILED\", function () {\r",
																	"                throw new Error('Did not receive response on payee side');\r",
																	"              });\r",
																	"              // postman.setNextRequest(null)\r",
																	"          }\r",
																	"  });\r",
																	"}, pm.environment.get(\"SET_TIMEOUT_TRANSFERS\"))\r",
																	"\r",
																	"//Check the callback response that Switch forwards to payeefsp\r",
																	"setTimeout(function () {\r",
																	"  pm.sendRequest(pm.environment.get(\"SIMPAYEE_SDK_TESTAPI_URL\")+\"/callbacks/\"+pm.environment.get(\"transfer_ID\"), function (err, response) {\r",
																	"          if(response.responseSize !== 0) {\r",
																	"            //Checking headers\r",
																	"            var headers = response.json().headers;\r",
																	"            pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-source is ${pm.environment.get('SIMPAYER_NAME')}`, function () {\r",
																	"                pm.expect(headers['fspiop-source']).to.eql(pm.environment.get('SIMPAYER_NAME'));\r",
																	"            });\r",
																	"            \r",
																	"            pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-destination is ${pm.environment.get('SIMPAYEE_NAME')}`, function () {\r",
																	"                pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('SIMPAYEE_NAME'));\r",
																	"            });\r",
																	"            \r",
																	"            pm.test(`${pm.environment.get('SIMPAYEE_NAME')} content-type should be application/vnd.interoperability.transfers+json;version=1.0`, function () {\r",
																	"                pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.transfers+json;version=1.0');\r",
																	"            });\r",
																	"            \r",
																	"            pm.test(`${pm.environment.get('SIMPAYEE_NAME')} accept is empty`, function () {\r",
																	"                pm.expect(headers['accept']).to.eql(undefined);\r",
																	"            });\r",
																	"            \r",
																	"            \r",
																	"            pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-uri includes /transfers/${pm.environment.get('transfer_ID')}`, function () {\r",
																	"                pm.expect(headers['fspiop-uri']).to.eql(`/transfers/${pm.environment.get('transfer_ID')}`);\r",
																	"            });\r",
																	"            \r",
																	"            pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-http-method is PUT`, function () {\r",
																	"                pm.expect(headers['fspiop-http-method']).to.eql('PUT');\r",
																	"            });\r",
																	"            \r",
																	"            var jsonData = response.json().data;\r",
																	"            pm.test(\"Response data does not have transferId\", function () {\r",
																	"               pm.expect(jsonData.transferId).to.eql(undefined);\r",
																	"            });\r",
																	"            pm.test(\"Response status is COMMITTED\", function () {\r",
																	"                pm.expect(jsonData.transferState).to.eql('COMMITTED');\r",
																	"            });\r",
																	"          } else {\r",
																	"              pm.test(\"Transfer FAILED\", function () {\r",
																	"                throw new Error('Did not receive response on payer side');\r",
																	"              });\r",
																	"              // postman.setNextRequest(null)\r",
																	"          }\r",
																	"   });\r",
																	"}, pm.environment.get(\"SET_TIMEOUT_TRANSFERS\"))\r",
																	""
																],
																"type": "text/javascript"
															}
														}
													],
													"request": {
														"auth": {
															"type": "bearer",
															"bearer": [
																{
																	"key": "token",
																	"value": "{{SIMPAYEE_BEARER_TOKEN}}",
																	"type": "string"
																}
															]
														},
														"method": "POST",
														"header": [
															{
																"key": "Accept",
																"type": "text",
																"value": "application/vnd.interoperability.transfers+json;version=1.0"
															},
															{
																"key": "Content-Type",
																"type": "text",
																"value": "application/vnd.interoperability.transfers+json;version=1.0"
															},
															{
																"key": "Date",
																"type": "text",
																"value": "{{transferDate}}"
															},
															{
																"key": "FSPIOP-Source",
																"type": "text",
																"value": "{{SIMPAYEE_NAME}}"
															},
															{
																"key": "FSPIOP-Destination",
																"type": "text",
																"value": "{{SIMPAYER_NAME}}"
															},
															{
																"key": "FSPIOP-Signature",
																"type": "text",
																"value": "{{fspiopSignature}}"
															},
															{
																"key": "FSPIOP-URI",
																"type": "text",
																"value": "/transfers"
															},
															{
																"key": "FSPIOP-HTTP-Method",
																"type": "text",
																"value": "POST"
															}
														],
														"body": {
															"mode": "raw",
															"raw": "{{transferRequest}}"
														},
														"url": {
															"raw": "{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}/transfers",
															"host": [
																"{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}"
															],
															"path": [
																"transfers"
															]
														}
													},
													"response": []
												}
											],
											"protocolProfileBehavior": {},
											"_postman_isSubFolder": true
										},
										{
											"name": "Create Settlement",
											"item": [
												{
													"name": "Get Existing Open Window",
													"event": [
														{
															"listen": "test",
															"script": {
																"id": "f2dc1311-0656-4564-be35-fb36e42333c8",
																"exec": [
																	"pm.test(\"Status code is 200\", function () {",
																	"    pm.response.to.have.status(200);",
																	"});",
																	"",
																	"pm.test(\"State should be OPEN\", function () {",
																	"    var jsonData = pm.response.json();",
																	"    pm.expect(jsonData[0].state).to.eql('OPEN');",
																	"    pm.environment.set(\"openWindowID\", jsonData[0].settlementWindowId);",
																	"    console.log('openWindowID',pm.environment.get(\"openWindowID\"));",
																	"});",
																	"",
																	""
																],
																"type": "text/javascript"
															}
														}
													],
													"request": {
														"auth": {
															"type": "bearer",
															"bearer": [
																{
																	"key": "token",
																	"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
																	"type": "string"
																}
															]
														},
														"method": "GET",
														"header": [
															{
																"key": "FSPIOP-Source",
																"value": "{{hub_operator}}",
																"type": "text"
															}
														],
														"url": {
															"raw": "{{HOST_CENTRAL_SETTLEMENT}}{{BASE_CENTRAL_SETTLEMENT}}/settlementWindows?state=OPEN",
															"host": [
																"{{HOST_CENTRAL_SETTLEMENT}}{{BASE_CENTRAL_SETTLEMENT}}"
															],
															"path": [
																"settlementWindows"
															],
															"query": [
																{
																	"key": "state",
																	"value": "OPEN"
																}
															]
														}
													},
													"response": []
												},
												{
													"name": "Close Existing Window",
													"event": [
														{
															"listen": "test",
															"script": {
																"id": "b8f5f24d-5473-4a55-8e6c-4a918f6cb161",
																"exec": [
																	"pm.test(\"Status code is 200\", function () {",
																	"    pm.response.to.have.status(200);",
																	"});",
																	"",
																	"pm.test(\"New window State should be OPEN\", function () {",
																	"    console.log(pm.response.json());",
																	"    pm.expect(pm.response.json().state).to.eql('OPEN');",
																	"    pm.environment.set(\"newOpenWindowID\", pm.response.json().settlementWindowId);",
																	"    pm.environment.set(\"closedWindowID\",  pm.environment.get(\"openWindowID\"));",
																	"    console.log('newOpenWindowID',pm.environment.get(\"newOpenWindowID\"));",
																	"    console.log('closedWindowID',pm.environment.get(\"closedWindowID\"));",
																	"});"
																],
																"type": "text/javascript"
															}
														}
													],
													"request": {
														"auth": {
															"type": "bearer",
															"bearer": [
																{
																	"key": "token",
																	"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
																	"type": "string"
																}
															]
														},
														"method": "POST",
														"header": [
															{
																"key": "Content-Type",
																"value": "application/json"
															},
															{
																"key": "FSPIOP-Source",
																"value": "{{hub_operator}}",
																"type": "text"
															}
														],
														"body": {
															"mode": "raw",
															"raw": "{\n  \"state\": \"CLOSED\",\n  \"reason\": \"string\"\n}"
														},
														"url": {
															"raw": "{{HOST_CENTRAL_SETTLEMENT}}{{BASE_CENTRAL_SETTLEMENT}}/settlementWindows/{{openWindowID}}",
															"host": [
																"{{HOST_CENTRAL_SETTLEMENT}}{{BASE_CENTRAL_SETTLEMENT}}"
															],
															"path": [
																"settlementWindows",
																"{{openWindowID}}"
															]
														}
													},
													"response": []
												},
												{
													"name": "Create Settlement for Closed Window",
													"event": [
														{
															"listen": "test",
															"script": {
																"id": "58cb01c8-e4e1-44a5-86f3-b95022b835b1",
																"exec": [
																	"pm.test(\"Status code is 200\", function () {",
																	"    pm.response.to.have.status(200);",
																	"});",
																	"",
																	"pm.environment.set(\"settlementId\", pm.response.json().id);",
																	"var jsonData = pm.response.json();",
																	"    ",
																	"pm.test(\"Settlement State should be PENDING_SETTLEMENT\", function () {",
																	"    pm.expect(jsonData.state).to.eql('PENDING_SETTLEMENT');",
																	"});",
																	"",
																	"pm.test(\"Number of associated windows should be 1\", function () {",
																	"    pm.expect(jsonData.settlementWindows.length).to.eql(1);",
																	"});",
																	"",
																	"pm.test(\"Associated Settlement Window ID should be: \"+pm.environment.get(\"closedWindowID\"), function () {",
																	"    pm.expect(jsonData.settlementWindows[0].id).to.eql(pm.environment.get(\"closedWindowID\"));",
																	"});",
																	"",
																	"pm.test(\"Associated Settlement Window state should be PENDING_SETTLEMENT \", function () {",
																	"    pm.expect(jsonData.settlementWindows[0].state).to.eql('PENDING_SETTLEMENT');",
																	"});",
																	"",
																	"pm.test(\"Associated number of participants should be 4 \", function () {",
																	"    pm.expect(jsonData.participants.length).to.eql(4);",
																	"});",
																	"",
																	"for(var j in jsonData.participants) {",
																	"    for(var k in jsonData.participants[j].accounts) {",
																	"        console.log(jsonData.participants[j].accounts[k].id)",
																	"        if(jsonData.participants[j].accounts[k].id === Number(pm.environment.get(`${pm.environment.get('SIMPAYER_NAME')}AccountId`))) {",
																	"            console.log(`${pm.environment.get('SIMPAYER_NAME')}NetSettlementAmount:`,jsonData.participants[j].accounts[k].netSettlementAmount.amount)",
																	"            pm.environment.set(`${pm.environment.get('SIMPAYER_NAME')}NetSettlementAmount`,jsonData.participants[j].accounts[k].netSettlementAmount.amount);",
																	"        } else if(jsonData.participants[j].accounts[k].id === Number(pm.environment.get(`${pm.environment.get('SIMPAYEE_NAME')}AccountId`))) {",
																	"            console.log(`${pm.environment.get('SIMPAYEE_NAME')}NetSettlementAmount:`,jsonData.participants[j].accounts[k].netSettlementAmount.amount)",
																	"            pm.environment.set(`${pm.environment.get('SIMPAYEE_NAME')}NetSettlementAmount`,jsonData.participants[j].accounts[k].netSettlementAmount.amount);",
																	"        }",
																	"        ",
																	"    }",
																	"}",
																	"",
																	""
																],
																"type": "text/javascript"
															}
														}
													],
													"request": {
														"auth": {
															"type": "bearer",
															"bearer": [
																{
																	"key": "token",
																	"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
																	"type": "string"
																}
															]
														},
														"method": "POST",
														"header": [
															{
																"key": "Content-Type",
																"value": "application/json"
															},
															{
																"key": "FSPIOP-Source",
																"value": "{{hub_operator}}",
																"type": "text"
															}
														],
														"body": {
															"mode": "raw",
															"raw": "{\n\t\"settlementModel\": \"DEFERREDNET\",\n  \"reason\": \"TESTING\",\n  \"settlementWindows\": [\n    {\n      \"id\": {{closedWindowID}}\n    }\n  ]\n}"
														},
														"url": {
															"raw": "{{HOST_CENTRAL_SETTLEMENT}}{{BASE_CENTRAL_SETTLEMENT}}/settlements",
															"host": [
																"{{HOST_CENTRAL_SETTLEMENT}}{{BASE_CENTRAL_SETTLEMENT}}"
															],
															"path": [
																"settlements"
															]
														}
													},
													"response": []
												}
											],
											"protocolProfileBehavior": {},
											"_postman_isSubFolder": true
										},
										{
											"name": "Store Settlement&Position Account Balances After Transfers",
											"item": [
												{
													"name": "SIM1 balances",
													"event": [
														{
															"listen": "test",
															"script": {
																"id": "a99a8c40-bdcb-4e41-be1c-3c21f40a7569",
																"exec": [
																	"pm.test(\"Status code is 200\", function () {",
																	"    pm.response.to.have.status(200);",
																	"});",
																	"",
																	"var jsonData = pm.response.json();",
																	"jsonData",
																	"    .filter(account => account.currency === pm.environment.get('SIM1_CURRENCY'))",
																	"    .forEach(curAccount => {",
																	"        if(curAccount.ledgerAccountType === \"SETTLEMENT\") {",
																	"            pm.environment.set(`${pm.environment.get('SIM1_NAME')}SettleAccountBalanceAfterTransfer`, curAccount.value);",
																	"        }",
																	"        if(curAccount.ledgerAccountType === \"POSITION\") {",
																	"            pm.environment.set(`${pm.environment.get('SIM1_NAME')}PositionAccountBalanceAfterTransfer`, curAccount.value);",
																	"        }",
																	"    })",
																	"",
																	"",
																	""
																],
																"type": "text/javascript"
															}
														}
													],
													"request": {
														"auth": {
															"type": "bearer",
															"bearer": [
																{
																	"key": "token",
																	"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
																	"type": "string"
																}
															]
														},
														"method": "GET",
														"header": [
															{
																"key": "FSPIOP-Source",
																"type": "text",
																"value": "{{hub_operator}}"
															}
														],
														"url": {
															"raw": "{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}/participants/{{SIM1_NAME}}/accounts",
															"host": [
																"{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}"
															],
															"path": [
																"participants",
																"{{SIM1_NAME}}",
																"accounts"
															]
														}
													},
													"response": []
												},
												{
													"name": "SIM2 balances",
													"event": [
														{
															"listen": "test",
															"script": {
																"id": "39907ccd-17a0-4bbc-a7c4-d100d16bb038",
																"exec": [
																	"pm.test(\"Status code is 200\", function () {",
																	"    pm.response.to.have.status(200);",
																	"});",
																	"",
																	"var jsonData = pm.response.json();",
																	"jsonData",
																	"    .filter(account => account.currency === pm.environment.get('SIM2_CURRENCY'))",
																	"    .map(curAccount => {",
																	"        if(curAccount.ledgerAccountType === \"SETTLEMENT\") {",
																	"            pm.environment.set(`${pm.environment.get('SIM2_NAME')}SettleAccountBalanceAfterTransfer`, curAccount.value);",
																	"        }",
																	"        if(curAccount.ledgerAccountType === \"POSITION\") {",
																	"            pm.environment.set(`${pm.environment.get('SIM2_NAME')}PositionAccountBalanceAfterTransfer`, curAccount.value);",
																	"        }",
																	"    })",
																	"",
																	"",
																	""
																],
																"type": "text/javascript"
															}
														}
													],
													"request": {
														"auth": {
															"type": "bearer",
															"bearer": [
																{
																	"key": "token",
																	"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
																	"type": "string"
																}
															]
														},
														"method": "GET",
														"header": [
															{
																"key": "FSPIOP-Source",
																"type": "text",
																"value": "{{hub_operator}}"
															}
														],
														"url": {
															"raw": "{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}/participants/{{SIM2_NAME}}/accounts",
															"host": [
																"{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}"
															],
															"path": [
																"participants",
																"{{SIM2_NAME}}",
																"accounts"
															]
														}
													},
													"response": []
												},
												{
													"name": "SIMPAYER balances",
													"event": [
														{
															"listen": "test",
															"script": {
																"id": "ed49f992-e9a4-49ff-99b8-3a3eabe65fba",
																"exec": [
																	"pm.test(\"Status code is 200\", function () {",
																	"    pm.response.to.have.status(200);",
																	"});",
																	"",
																	"var jsonData = pm.response.json();",
																	"jsonData",
																	"    .filter(account => account.currency === pm.environment.get('SIMPAYER_CURRENCY'))",
																	"    .map(curAccount => {",
																	"        if(curAccount.ledgerAccountType === \"SETTLEMENT\") {",
																	"            pm.environment.set(`${pm.environment.get('SIMPAYER_NAME')}SettleAccountBalanceAfterTransfer`, curAccount.value);",
																	"        }",
																	"        if(curAccount.ledgerAccountType === \"POSITION\") {",
																	"            pm.environment.set(`${pm.environment.get('SIMPAYER_NAME')}PositionAccountBalanceAfterTransfer`, curAccount.value);",
																	"        }",
																	"    })",
																	"",
																	"",
																	""
																],
																"type": "text/javascript"
															}
														}
													],
													"request": {
														"auth": {
															"type": "bearer",
															"bearer": [
																{
																	"key": "token",
																	"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
																	"type": "string"
																}
															]
														},
														"method": "GET",
														"header": [
															{
																"key": "FSPIOP-Source",
																"type": "text",
																"value": "{{hub_operator}}"
															}
														],
														"url": {
															"raw": "{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}/participants/{{SIMPAYER_NAME}}/accounts",
															"host": [
																"{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}"
															],
															"path": [
																"participants",
																"{{SIMPAYER_NAME}}",
																"accounts"
															]
														}
													},
													"response": []
												},
												{
													"name": "SIMPAYEE balances",
													"event": [
														{
															"listen": "test",
															"script": {
																"id": "9ab6b5ee-569a-4776-928a-832ef73db133",
																"exec": [
																	"pm.test(\"Status code is 200\", function () {",
																	"    pm.response.to.have.status(200);",
																	"});",
																	"",
																	"var jsonData = pm.response.json();",
																	"jsonData",
																	"    .filter(account => account.currency === pm.environment.get('SIMPAYEE_CURRENCY'))",
																	"    .map(curAccount => {",
																	"        if(curAccount.ledgerAccountType === \"SETTLEMENT\") {",
																	"            pm.environment.set(`${pm.environment.get('SIMPAYEE_NAME')}SettleAccountBalanceAfterTransfer`, curAccount.value);",
																	"        }",
																	"        if(curAccount.ledgerAccountType === \"POSITION\") {",
																	"            pm.environment.set(`${pm.environment.get('SIMPAYEE_NAME')}PositionAccountBalanceAfterTransfer`, curAccount.value);",
																	"        }",
																	"    })",
																	"",
																	"",
																	""
																],
																"type": "text/javascript"
															}
														}
													],
													"request": {
														"auth": {
															"type": "bearer",
															"bearer": [
																{
																	"key": "token",
																	"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
																	"type": "string"
																}
															]
														},
														"method": "GET",
														"header": [
															{
																"key": "FSPIOP-Source",
																"type": "text",
																"value": "{{hub_operator}}"
															}
														],
														"url": {
															"raw": "{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}/participants/{{SIMPAYEE_NAME}}/accounts",
															"host": [
																"{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}"
															],
															"path": [
																"participants",
																"{{SIMPAYEE_NAME}}",
																"accounts"
															]
														}
													},
													"response": []
												}
											],
											"protocolProfileBehavior": {},
											"_postman_isSubFolder": true
										}
									],
									"protocolProfileBehavior": {},
									"_postman_isSubFolder": true
								},
								{
									"name": "Prepare Settlement",
									"item": [
										{
											"name": "Prepare Settlement",
											"event": [
												{
													"listen": "test",
													"script": {
														"id": "5536fbad-fa86-4520-98cb-76ddcd385aec",
														"exec": [
															"pm.test(\"Status code is 200\", function () {",
															"    pm.response.to.have.status(200);",
															"});",
															"var jsonData = pm.response.json();",
															"jsonData.participants.map(participant => {",
															"  participant.accounts",
															"    .filter(account => account.netSettlementAmount.currency === pm.environment.get('SIMPAYER_CURRENCY'))",
															"    .forEach(curAccount => {",
															"      const participantPutRequest = {",
															"        url: pm.environment.get(\"HOST_CENTRAL_SETTLEMENT\") + pm.environment.get(\"BASE_CENTRAL_SETTLEMENT\") + '/settlements/' + pm.environment.get(\"settlementId\"),",
															"        method: 'PUT',",
															"        header: {",
															"          \"Authorization\": \"Bearer \" + pm.environment.get(\"HUB_OPERATOR_BEARER_TOKEN\"),",
															"          \"FSPIOP-Source\": pm.environment.get(\"hub_operator\"),",
															"          \"Content-Type\": \"application/json\"",
															"        },",
															"        body: {",
															"          mode: 'raw',",
															"          raw: JSON.stringify(",
															"            {",
															"              \"participants\": [",
															"                {",
															"                  \"id\": participant.id,",
															"                  \"accounts\": [",
															"                    {",
															"                      \"id\": curAccount.id,",
															"                      \"reason\": \"Transfers recorded for payer\",",
															"                      \"state\": \"PS_TRANSFERS_RECORDED\"",
															"                    }",
															"                  ]",
															"                }",
															"              ]",
															"            }",
															"          )",
															"        }",
															"      };",
															"      pm.sendRequest(participantPutRequest, function (err, response) {",
															"        console.log(response.json());",
															"      });",
															"    })",
															"})",
															"// for(var j in jsonData.participants) {",
															"//     for(var k in jsonData.participants[j].accounts) {",
															"//         console.log(jsonData.participants[j].accounts[k].id)",
															"//         if(jsonData.participants[j].accounts[k].currency === pm.environment.get('currency')) {",
															"//             const participantPutRequest = {",
															"//               url: pm.environment.get(\"HOST_CENTRAL_SETTLEMENT\")+pm.environment.get(\"BASE_CENTRAL_SETTLEMENT\")+'/settlements/'+pm.environment.get(\"settlementId\"),",
															"//               method: 'PUT',",
															"//               header: {",
															"//                   \"Authorization\":\"Bearer \"+pm.environment.get(\"HUB_OPERATOR_BEARER_TOKEN\"),",
															"//                   \"FSPIOP-Source\": pm.environment.get(\"hub_operator\"),",
															"//                   \"Content-Type\": \"application/json\"",
															"//               },",
															"//               body: {",
															"//                 mode: 'raw',",
															"//                 raw: JSON.stringify(",
															"//                     {",
															"//                       \"participants\": [",
															"//                         {",
															"//                           \"id\": jsonData.participants[j].id,",
															"//                           \"accounts\": [",
															"//                             {",
															"//                               \"id\": jsonData.participants[j].accounts[k].id,",
															"//                               \"reason\": \"Transfers recorded for payer\",",
															"//                               \"state\": \"PS_TRANSFERS_RECORDED\"",
															"//                             }",
															"//                           ]",
															"//                         }",
															"//                       ]",
															"//                     }",
															"//                 )",
															"//               }",
															"//             };",
															"//             pm.sendRequest(participantPutRequest, function (err, response) {",
															"//                 console.log(response.json());",
															"//             });",
															"//         }",
															"",
															"",
															"//     }",
															"// }"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"auth": {
													"type": "bearer",
													"bearer": [
														{
															"key": "token",
															"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
															"type": "string"
														}
													]
												},
												"method": "GET",
												"header": [
													{
														"key": "FSPIOP-Source",
														"value": "{{hub_operator}}",
														"type": "text"
													}
												],
												"url": {
													"raw": "{{HOST_CENTRAL_SETTLEMENT}}{{BASE_CENTRAL_SETTLEMENT}}/settlements/{{settlementId}}",
													"host": [
														"{{HOST_CENTRAL_SETTLEMENT}}{{BASE_CENTRAL_SETTLEMENT}}"
													],
													"path": [
														"settlements",
														"{{settlementId}}"
													]
												}
											},
											"response": []
										},
										{
											"name": "check state for participants after prepare",
											"event": [
												{
													"listen": "test",
													"script": {
														"id": "fed4a67b-578d-4a71-91a3-056a2b15d294",
														"exec": [
															"pm.test(\"Status code is 200\", function () {",
															"    pm.response.to.have.status(200);",
															"});",
															"",
															"var jsonData = pm.response.json();",
															"    ",
															"pm.test(\"Settlement Id should be: \"+pm.environment.get(\"settlementId\"), function () {",
															"    pm.expect(jsonData.id).to.eql(pm.environment.get(\"settlementId\"));",
															"});",
															"",
															"pm.test(\"Settlement state should be PS_TRANSFERS_RECORDED\", function () {",
															"    pm.expect(jsonData.state).to.eql(\"PS_TRANSFERS_RECORDED\");",
															"});",
															"",
															"pm.test(\"Settlement Window ID should be: \"+pm.environment.get(\"closedWindowID\"), function () {",
															"    pm.expect(jsonData.settlementWindows[0].id).to.eql(pm.environment.get(\"closedWindowID\"));",
															"});",
															"",
															"pm.test(\"Settlement Window State should be PENDING_SETTLEMENT\", function () {",
															"    pm.expect(jsonData.settlementWindows[0].state).to.eql(\"PENDING_SETTLEMENT\");",
															"});",
															"",
															"jsonData.participants.map(participant => {",
															"    participant.accounts",
															"                    .filter(account => account.netSettlementAmount.currency === pm.environment.get('SIMPAYER_CURRENCY'))",
															"                    .forEach(curAccount => {",
															"                        pm.test(`Participant Account ${curAccount.id} state is PS_TRANSFERS_RECORDED`, function () {",
															"                            pm.expect(curAccount.state).to.eql(\"PS_TRANSFERS_RECORDED\");",
															"                        });",
															"                    })",
															"})",
															"",
															"// for(var j in jsonData.participants) {",
															"//     for(var k in jsonData.participants[j].accounts) {",
															"//         pm.test(`Participant Account ${jsonData.participants[j].accounts[k].id} state is PS_TRANSFERS_RECORDED`, function () {",
															"//             pm.expect(jsonData.participants[j].accounts[k].state).to.eql(\"PS_TRANSFERS_RECORDED\");",
															"//         });",
															"//     }",
															"// }",
															"",
															"",
															""
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"auth": {
													"type": "bearer",
													"bearer": [
														{
															"key": "token",
															"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
															"type": "string"
														}
													]
												},
												"method": "GET",
												"header": [
													{
														"key": "FSPIOP-Source",
														"value": "{{hub_operator}}",
														"type": "text"
													}
												],
												"url": {
													"raw": "{{HOST_CENTRAL_SETTLEMENT}}{{BASE_CENTRAL_SETTLEMENT}}/settlements/{{settlementId}}",
													"host": [
														"{{HOST_CENTRAL_SETTLEMENT}}{{BASE_CENTRAL_SETTLEMENT}}"
													],
													"path": [
														"settlements",
														"{{settlementId}}"
													]
												}
											},
											"response": []
										},
										{
											"name": "SIM1 settlement&position accont balance after prepare",
											"event": [
												{
													"listen": "test",
													"script": {
														"id": "47f166b0-f871-43fa-a0f7-1a5c8869a478",
														"exec": [
															"pm.test(\"Status code is 200\", function () {",
															"    pm.response.to.have.status(200);",
															"});",
															"",
															"var jsonData = pm.response.json();",
															"var testfsp1SettleAccountBalanceAfterPrepare;",
															"var testfsp1PositionAccountBalanceAfterPrepare;",
															"jsonData",
															"    .filter(account => account.currency === pm.environment.get('SIM1_CURRENCY'))",
															"    .forEach(curAccount => {",
															"        if(curAccount.ledgerAccountType === \"SETTLEMENT\") {",
															"            testfsp1SettleAccountBalanceAfterPrepare = curAccount.value",
															"        }",
															"        if(curAccount.ledgerAccountType === \"POSITION\") {",
															"            testfsp1PositionAccountBalanceAfterPrepare = curAccount.value",
															"        }",
															"    })",
															"",
															"",
															"pm.test(`${pm.environment.get('SIM1_NAME')} settlement account balance before and  after prepare should be the same.`, function () {",
															"    pm.expect(testfsp1SettleAccountBalanceAfterPrepare).to.eql(pm.environment.get(`${pm.environment.get('SIM1_NAME')}SettleAccountBalanceAfterTransfer`));",
															"});",
															"",
															"",
															"pm.test(`${pm.environment.get('SIM1_NAME')} position account balance before and  after prepare should be the same.`, function () {",
															"    pm.expect(testfsp1PositionAccountBalanceAfterPrepare).to.eql(pm.environment.get(`${pm.environment.get('SIM1_NAME')}PositionAccountBalanceAfterTransfer`));",
															"});"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"auth": {
													"type": "bearer",
													"bearer": [
														{
															"key": "token",
															"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
															"type": "string"
														}
													]
												},
												"method": "GET",
												"header": [
													{
														"key": "FSPIOP-Source",
														"type": "text",
														"value": "{{hub_operator}}"
													}
												],
												"url": {
													"raw": "{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}/participants/{{SIM1_NAME}}/accounts",
													"host": [
														"{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}"
													],
													"path": [
														"participants",
														"{{SIM1_NAME}}",
														"accounts"
													]
												}
											},
											"response": []
										},
										{
											"name": "SIM2 settlement&position accont balance after prepare",
											"event": [
												{
													"listen": "test",
													"script": {
														"id": "462b7afe-f55d-49a2-9e70-118a527f5f94",
														"exec": [
															"pm.test(\"Status code is 200\", function () {",
															"    pm.response.to.have.status(200);",
															"});",
															"",
															"var jsonData = pm.response.json();",
															"var testfsp2SettleAccountBalanceAfterPrepare;",
															"var testfsp2PositionAccountBalanceAfterPrepare;",
															"jsonData",
															"    .filter(account => account.currency === pm.environment.get('SIM2_CURRENCY'))",
															"    .forEach(curAccount => {",
															"        if(curAccount.ledgerAccountType === \"SETTLEMENT\") {",
															"            testfsp2SettleAccountBalanceAfterPrepare = curAccount.value",
															"        }",
															"        if(curAccount.ledgerAccountType === \"POSITION\") {",
															"            testfsp2PositionAccountBalanceAfterPrepare = curAccount.value",
															"        }",
															"    })",
															"",
															"pm.test(`${pm.environment.get('SIM2_NAME')} settlement account balance before and  after prepare should be the same.`, function () {",
															"    pm.expect(testfsp2SettleAccountBalanceAfterPrepare).to.eql(pm.environment.get(`${pm.environment.get('SIM2_NAME')}SettleAccountBalanceAfterTransfer`));",
															"});",
															"",
															"pm.test(`${pm.environment.get('SIM2_NAME')} position account balance before and  after prepare should be the same.`, function () {",
															"    pm.expect(testfsp2PositionAccountBalanceAfterPrepare).to.eql(pm.environment.get(`${pm.environment.get('SIM2_NAME')}PositionAccountBalanceAfterTransfer`));",
															"});"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"auth": {
													"type": "bearer",
													"bearer": [
														{
															"key": "token",
															"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
															"type": "string"
														}
													]
												},
												"method": "GET",
												"header": [
													{
														"key": "FSPIOP-Source",
														"type": "text",
														"value": "{{hub_operator}}"
													}
												],
												"url": {
													"raw": "{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}/participants/{{SIM2_NAME}}/accounts",
													"host": [
														"{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}"
													],
													"path": [
														"participants",
														"{{SIM2_NAME}}",
														"accounts"
													]
												}
											},
											"response": []
										},
										{
											"name": "SIMPAYER settlement&position accont balance after prepare",
											"event": [
												{
													"listen": "test",
													"script": {
														"id": "c6b475a6-ca30-49ba-ba7c-485b3ae7189e",
														"exec": [
															"pm.test(\"Status code is 200\", function () {\r",
															"    pm.response.to.have.status(200);\r",
															"});\r",
															"\r",
															"var jsonData = pm.response.json();\r",
															"var payerfspSettleAccountBalanceAfterPrepare;\r",
															"var payerfspPositionAccountBalanceAfterPrepare;\r",
															"jsonData\r",
															"    .filter(account => account.currency === pm.environment.get('SIMPAYER_CURRENCY'))\r",
															"    .forEach(curAccount => {\r",
															"        if(curAccount.ledgerAccountType === \"SETTLEMENT\") {\r",
															"            payerfspSettleAccountBalanceAfterPrepare = curAccount.value\r",
															"        }\r",
															"        if(curAccount.ledgerAccountType === \"POSITION\") {\r",
															"            payerfspPositionAccountBalanceAfterPrepare = curAccount.value\r",
															"        }\r",
															"    })\r",
															"\r",
															"\r",
															"pm.test(`${pm.environment.get('SIMPAYER_NAME')} settlement account balance before and  after reserve should be the same.`, function () {\r",
															"    pm.expect(payerfspSettleAccountBalanceAfterPrepare).to.eql(pm.environment.get(`${pm.environment.get('SIMPAYER_NAME')}SettleAccountBalanceAfterTransfer`));\r",
															"});\r",
															"\r",
															"pm.test(`${pm.environment.get('SIMPAYER_NAME')} position account balance before and  after prepare should be the same.`, function () {\r",
															"    pm.expect(payerfspPositionAccountBalanceAfterPrepare).to.eql(pm.environment.get(`${pm.environment.get('SIMPAYER_NAME')}PositionAccountBalanceAfterTransfer`));\r",
															"});"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"auth": {
													"type": "bearer",
													"bearer": [
														{
															"key": "token",
															"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
															"type": "string"
														}
													]
												},
												"method": "GET",
												"header": [
													{
														"key": "FSPIOP-Source",
														"type": "text",
														"value": "{{hub_operator}}"
													}
												],
												"url": {
													"raw": "{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}/participants/{{SIMPAYER_NAME}}/accounts",
													"host": [
														"{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}"
													],
													"path": [
														"participants",
														"{{SIMPAYER_NAME}}",
														"accounts"
													]
												}
											},
											"response": []
										},
										{
											"name": "SIMPAYEE settlement&position accont balance after prepare",
											"event": [
												{
													"listen": "test",
													"script": {
														"id": "a1b0c05e-9dbe-4876-9ceb-c98818a7121b",
														"exec": [
															"pm.test(\"Status code is 200\", function () {\r",
															"    pm.response.to.have.status(200);\r",
															"});\r",
															"\r",
															"var jsonData = pm.response.json();\r",
															"var payeefspSettleAccountBalanceAfterPrepare;\r",
															"var payeefspPositionAccountBalanceAfterPrepare;\r",
															"jsonData\r",
															"    .filter(account => account.currency === pm.environment.get('SIMPAYEE_CURRENCY'))\r",
															"    .forEach(curAccount => {\r",
															"        if(curAccount.ledgerAccountType === \"SETTLEMENT\") {\r",
															"            payeefspSettleAccountBalanceAfterPrepare = curAccount.value\r",
															"        }\r",
															"        if(curAccount.ledgerAccountType === \"POSITION\") {\r",
															"            payeefspPositionAccountBalanceAfterPrepare = curAccount.value\r",
															"        }\r",
															"    })\r",
															"\r",
															"pm.test(`${pm.environment.get('SIMPAYEE_NAME')} settlement account balance before and  after prepare should be the same.`, function () {\r",
															"    pm.expect(payeefspSettleAccountBalanceAfterPrepare).to.eql(pm.environment.get(`${pm.environment.get('SIMPAYEE_NAME')}SettleAccountBalanceAfterTransfer`));\r",
															"});\r",
															"\r",
															"pm.test(`${pm.environment.get('SIMPAYEE_NAME')} position account balance before and  after prepare should be the same.`, function () {\r",
															"    pm.expect(payeefspPositionAccountBalanceAfterPrepare).to.eql(pm.environment.get(`${pm.environment.get('SIMPAYEE_NAME')}PositionAccountBalanceAfterTransfer`));\r",
															"});"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"auth": {
													"type": "bearer",
													"bearer": [
														{
															"key": "token",
															"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
															"type": "string"
														}
													]
												},
												"method": "GET",
												"header": [
													{
														"key": "FSPIOP-Source",
														"type": "text",
														"value": "{{hub_operator}}"
													}
												],
												"url": {
													"raw": "{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}/participants/{{SIMPAYEE_NAME}}/accounts",
													"host": [
														"{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}"
													],
													"path": [
														"participants",
														"{{SIMPAYEE_NAME}}",
														"accounts"
													]
												}
											},
											"response": []
										}
									],
									"protocolProfileBehavior": {},
									"_postman_isSubFolder": true
								},
								{
									"name": "Reserve Settlement",
									"item": [
										{
											"name": "Reserve Settlement",
											"event": [
												{
													"listen": "test",
													"script": {
														"id": "d007d877-b051-40ca-817d-c73cc05c8d7d",
														"exec": [
															"pm.test(\"Status code is 200\", function () {",
															"    pm.response.to.have.status(200);",
															"});",
															"",
															"var jsonData = pm.response.json();",
															"jsonData.participants.map(participant => {",
															"  participant.accounts",
															"    .filter(account => account.netSettlementAmount.currency === pm.environment.get('SIMPAYER_CURRENCY'))",
															"    .forEach(curAccount => {",
															"      const participantPutRequest = {",
															"        url: pm.environment.get(\"HOST_CENTRAL_SETTLEMENT\") + pm.environment.get(\"BASE_CENTRAL_SETTLEMENT\") + '/settlements/' + pm.environment.get(\"settlementId\"),",
															"        method: 'PUT',",
															"        header: {",
															"          \"Authorization\": \"Bearer \" + pm.environment.get(\"HUB_OPERATOR_BEARER_TOKEN\"),",
															"          \"FSPIOP-Source\": pm.environment.get(\"hub_operator\"),",
															"          \"Content-Type\": \"application/json\"",
															"        },",
															"        body: {",
															"          mode: 'raw',",
															"          raw: JSON.stringify(",
															"            {",
															"              \"participants\": [",
															"                {",
															"                  \"id\": participant.id,",
															"                  \"accounts\": [",
															"                    {",
															"                      \"id\": curAccount.id,",
															"                      \"reason\": \"Transfers reserved\",",
															"                      \"state\": \"PS_TRANSFERS_RESERVED\"",
															"                    }",
															"                  ]",
															"                }",
															"              ]",
															"            }",
															"          )",
															"        }",
															"      };",
															"      pm.sendRequest(participantPutRequest, function (err, response) {",
															"        console.log(response.json());",
															"      });",
															"    })",
															"})"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"auth": {
													"type": "bearer",
													"bearer": [
														{
															"key": "token",
															"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
															"type": "string"
														}
													]
												},
												"method": "GET",
												"header": [
													{
														"key": "FSPIOP-Source",
														"type": "text",
														"value": "{{hub_operator}}"
													}
												],
												"url": {
													"raw": "{{HOST_CENTRAL_SETTLEMENT}}{{BASE_CENTRAL_SETTLEMENT}}/settlements/{{settlementId}}",
													"host": [
														"{{HOST_CENTRAL_SETTLEMENT}}{{BASE_CENTRAL_SETTLEMENT}}"
													],
													"path": [
														"settlements",
														"{{settlementId}}"
													]
												}
											},
											"response": []
										},
										{
											"name": "check state for participants after reserve",
											"event": [
												{
													"listen": "test",
													"script": {
														"id": "5b603200-f5bc-4965-bcec-14bff35c4ca8",
														"exec": [
															"pm.test(\"Status code is 200\", function () {",
															"    pm.response.to.have.status(200);",
															"});",
															"",
															"var jsonData = pm.response.json();",
															"    ",
															"pm.test(\"Settlement Id should be: \" + pm.environment.get('settlementId'), function () {",
															"    pm.expect(jsonData.id).to.eql(pm.environment.get(\"settlementId\"));",
															"});",
															"",
															"pm.test(\"Settlement state should be PS_TRANSFERS_RESERVED\", function () {",
															"    pm.expect(jsonData.state).to.eql(\"PS_TRANSFERS_RESERVED\");",
															"});",
															"",
															"pm.test(\"Settlement Window ID should be: \"+pm.environment.get(\"closedWindowID\"), function () {",
															"    pm.expect(jsonData.settlementWindows[0].id).to.eql(pm.environment.get(\"closedWindowID\"));",
															"});",
															"",
															"pm.test(\"Settlement Window State should be PENDING_SETTLEMENT\", function () {",
															"    pm.expect(jsonData.settlementWindows[0].state).to.eql(\"PENDING_SETTLEMENT\");",
															"});",
															"",
															"jsonData.participants.map(participant => {",
															"    participant.accounts",
															"                    .filter(account => account.netSettlementAmount.currency === pm.environment.get('SIMPAYER_CURRENCY'))",
															"                    .forEach(curAccount => {",
															"                        pm.test(`Participant Account ${curAccount.id} state is PS_TRANSFERS_RESERVED`, function () {",
															"                            pm.expect(curAccount.state).to.eql(\"PS_TRANSFERS_RESERVED\");",
															"                        });",
															"                    })",
															"})",
															"",
															"",
															""
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"auth": {
													"type": "bearer",
													"bearer": [
														{
															"key": "token",
															"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
															"type": "string"
														}
													]
												},
												"method": "GET",
												"header": [
													{
														"key": "FSPIOP-Source",
														"value": "{{hub_operator}}",
														"type": "text"
													}
												],
												"url": {
													"raw": "{{HOST_CENTRAL_SETTLEMENT}}{{BASE_CENTRAL_SETTLEMENT}}/settlements/{{settlementId}}",
													"host": [
														"{{HOST_CENTRAL_SETTLEMENT}}{{BASE_CENTRAL_SETTLEMENT}}"
													],
													"path": [
														"settlements",
														"{{settlementId}}"
													]
												}
											},
											"response": []
										},
										{
											"name": "SIM1 settlement&position accont balance after reserve",
											"event": [
												{
													"listen": "test",
													"script": {
														"id": "6019fe48-9e3d-4484-82fc-82f84ff17de2",
														"exec": [
															"pm.test(\"Status code is 200\", function () {",
															"    pm.response.to.have.status(200);",
															"});",
															"",
															"var jsonData = pm.response.json();",
															"var testfsp1SettleAccountBalanceAfterReserve;",
															"var testfsp1PositionAccountBalanceAfterReserve;",
															"jsonData",
															"    .filter(account => account.currency === pm.environment.get('SIM1_CURRENCY'))",
															"    .forEach(curAccount => {",
															"        if(curAccount.ledgerAccountType === \"SETTLEMENT\") {",
															"            testfsp1SettleAccountBalanceAfterReserve = curAccount.value",
															"        }",
															"        if(curAccount.ledgerAccountType === \"POSITION\") {",
															"            testfsp1PositionAccountBalanceAfterReserve = curAccount.value",
															"        }",
															"    })",
															"",
															"",
															"pm.test(`${pm.environment.get('SIM1_NAME')} settlement account balance before and  after reserve should be the same.`, function () {",
															"    pm.expect(testfsp1SettleAccountBalanceAfterReserve).to.eql(pm.environment.get(`${pm.environment.get('SIM1_NAME')}SettleAccountBalanceAfterTransfer`));",
															"});",
															"",
															"pm.test(`${pm.environment.get('SIM1_NAME')} position account balance before and  after reserve should be the same.`, function () {",
															"    pm.expect(testfsp1PositionAccountBalanceAfterReserve).to.eql(pm.environment.get(`${pm.environment.get('SIM1_NAME')}PositionAccountBalanceAfterTransfer`));",
															"});"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"auth": {
													"type": "bearer",
													"bearer": [
														{
															"key": "token",
															"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
															"type": "string"
														}
													]
												},
												"method": "GET",
												"header": [
													{
														"key": "FSPIOP-Source",
														"type": "text",
														"value": "{{hub_operator}}"
													}
												],
												"url": {
													"raw": "{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}/participants/{{SIM1_NAME}}/accounts",
													"host": [
														"{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}"
													],
													"path": [
														"participants",
														"{{SIM1_NAME}}",
														"accounts"
													]
												}
											},
											"response": []
										},
										{
											"name": "SIM2 settlement&position accont balance after reserve",
											"event": [
												{
													"listen": "test",
													"script": {
														"id": "01bd8de2-f326-4948-94e2-3a5761455f2a",
														"exec": [
															"pm.test(\"Status code is 200\", function () {",
															"    pm.response.to.have.status(200);",
															"});",
															"",
															"var jsonData = pm.response.json();",
															"var testfsp2SettleAccountBalanceAfterReserve;",
															"var testfsp2PositionAccountBalanceAfterReserve;",
															"jsonData",
															"    .filter(account => account.currency === pm.environment.get('SIM2_CURRENCY'))",
															"    .forEach(curAccount => {",
															"        if(curAccount.ledgerAccountType === \"SETTLEMENT\") {",
															"            testfsp2SettleAccountBalanceAfterReserve = curAccount.value",
															"        }",
															"        if(curAccount.ledgerAccountType === \"POSITION\") {",
															"            testfsp2PositionAccountBalanceAfterReserve = curAccount.value",
															"        }",
															"    })",
															"",
															"pm.test(`${pm.environment.get('SIM2_NAME')} settlement account balance before and  after reserve should be the same.`, function () {",
															"    pm.expect(testfsp2SettleAccountBalanceAfterReserve).to.eql(pm.environment.get(`${pm.environment.get('SIM2_NAME')}SettleAccountBalanceBeforeTransfer`));",
															"});",
															"",
															"pm.test(`${pm.environment.get('SIM2_NAME')} position account balance after reserve gets increased by its net settlement  amount.`, function () {",
															"    pm.expect(testfsp2PositionAccountBalanceAfterReserve).to.eql(pm.environment.get(`${pm.environment.get('SIM2_NAME')}PositionAccountBalanceBeforeTransfer`));",
															"});"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"auth": {
													"type": "bearer",
													"bearer": [
														{
															"key": "token",
															"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
															"type": "string"
														}
													]
												},
												"method": "GET",
												"header": [
													{
														"key": "FSPIOP-Source",
														"type": "text",
														"value": "{{hub_operator}}"
													}
												],
												"url": {
													"raw": "{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}/participants/{{SIM2_NAME}}/accounts",
													"host": [
														"{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}"
													],
													"path": [
														"participants",
														"{{SIM2_NAME}}",
														"accounts"
													]
												}
											},
											"response": []
										},
										{
											"name": "SIMPAYER settlement&position accont balance after reserve",
											"event": [
												{
													"listen": "test",
													"script": {
														"id": "c6f28510-2538-4da2-adc1-c04d40649974",
														"exec": [
															"pm.test(\"Status code is 200\", function () {\r",
															"    pm.response.to.have.status(200);\r",
															"});\r",
															"\r",
															"var jsonData = pm.response.json();\r",
															"var payerfspSettleAccountBalanceAfterReserve;\r",
															"var payerfspPositionAccountBalanceAfterReserve;\r",
															"jsonData\r",
															"    .filter(account => account.currency === pm.environment.get('SIMPAYER_CURRENCY'))\r",
															"    .map(curAccount => {\r",
															"        if(curAccount.ledgerAccountType === \"SETTLEMENT\") {\r",
															"            payerfspSettleAccountBalanceAfterReserve = curAccount.value\r",
															"        }\r",
															"        if(curAccount.ledgerAccountType === \"POSITION\") {\r",
															"            payerfspPositionAccountBalanceAfterReserve = curAccount.value\r",
															"        }\r",
															"    })\r",
															"\r",
															"pm.test(`${pm.environment.get('SIMPAYER_NAME')} settlement account balance before and  after reserve should be the same.`, function () {\r",
															"    pm.expect(payerfspSettleAccountBalanceAfterReserve).to.eql(pm.environment.get(`${pm.environment.get('SIMPAYER_NAME')}SettleAccountBalanceAfterTransfer`));\r",
															"});\r",
															"\r",
															"\r",
															"pm.test(`${pm.environment.get('SIMPAYER_NAME')} position account balance after reserve gets increased by its net settlement  amount.`, function () {\r",
															"    pm.expect(payerfspPositionAccountBalanceAfterReserve).to.eql(pm.environment.get(`${pm.environment.get('SIMPAYER_NAME')}PositionAccountBalanceBeforeTransfer`));\r",
															"});\r",
															""
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"auth": {
													"type": "bearer",
													"bearer": [
														{
															"key": "token",
															"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
															"type": "string"
														}
													]
												},
												"method": "GET",
												"header": [
													{
														"key": "FSPIOP-Source",
														"type": "text",
														"value": "{{hub_operator}}"
													}
												],
												"url": {
													"raw": "{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}/participants/{{SIMPAYER_NAME}}/accounts",
													"host": [
														"{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}"
													],
													"path": [
														"participants",
														"{{SIMPAYER_NAME}}",
														"accounts"
													]
												}
											},
											"response": []
										},
										{
											"name": "SIMPAYEE settlement&position accont balance after reserve",
											"event": [
												{
													"listen": "test",
													"script": {
														"id": "e5237c73-9b44-4446-9e86-7b4eca7a57bf",
														"exec": [
															"pm.test(\"Status code is 200\", function () {\r",
															"    pm.response.to.have.status(200);\r",
															"});\r",
															"\r",
															"var jsonData = pm.response.json();\r",
															"var payeefspSettleAccountBalanceAfterReserve;\r",
															"var payeefspPositionAccountBalanceAfterReserve;\r",
															"jsonData\r",
															"    .filter(account => account.currency === pm.environment.get('SIMPAYEE_CURRENCY'))\r",
															"    .map(curAccount => {\r",
															"        if(curAccount.ledgerAccountType === \"SETTLEMENT\") {\r",
															"            payeefspSettleAccountBalanceAfterReserve = curAccount.value\r",
															"        }\r",
															"        if(curAccount.ledgerAccountType === \"POSITION\") {\r",
															"            payeefspPositionAccountBalanceAfterReserve = curAccount.value\r",
															"        }\r",
															"    })\r",
															"\r",
															"\r",
															"pm.test(`${pm.environment.get('SIMPAYEE_NAME')} settlement account balance before and  after reserve should be the same.`, function () {\r",
															"    pm.expect(payeefspSettleAccountBalanceAfterReserve).to.eql(pm.environment.get(`${pm.environment.get('SIMPAYEE_NAME')}SettleAccountBalanceAfterTransfer`));\r",
															"});\r",
															"\r",
															"pm.test(`${pm.environment.get('SIMPAYEE_NAME')} position account balance before and  after reserve should be the same.`, function () {\r",
															"    pm.expect(payeefspPositionAccountBalanceAfterReserve).to.eql(pm.environment.get(`${pm.environment.get('SIMPAYEE_NAME')}PositionAccountBalanceAfterTransfer`));\r",
															"});\r",
															"\r",
															""
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"auth": {
													"type": "bearer",
													"bearer": [
														{
															"key": "token",
															"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
															"type": "string"
														}
													]
												},
												"method": "GET",
												"header": [
													{
														"key": "FSPIOP-Source",
														"type": "text",
														"value": "{{hub_operator}}"
													}
												],
												"url": {
													"raw": "{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}/participants/{{SIMPAYEE_NAME}}/accounts",
													"host": [
														"{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}"
													],
													"path": [
														"participants",
														"{{SIMPAYEE_NAME}}",
														"accounts"
													]
												}
											},
											"response": []
										}
									],
									"protocolProfileBehavior": {},
									"_postman_isSubFolder": true
								},
								{
									"name": "Commit Settlement",
									"item": [
										{
											"name": "Commit Settlement",
											"event": [
												{
													"listen": "test",
													"script": {
														"id": "63a188cf-862d-46a1-b57b-1c573e58f5a3",
														"exec": [
															"",
															"pm.test(\"Status code is 200\", function () {",
															"    pm.response.to.have.status(200);",
															"});",
															"var jsonData = pm.response.json();",
															"jsonData.participants.map(participant => {",
															"    participant.accounts",
															"                    .filter(account => account.netSettlementAmount.currency === pm.environment.get('SIMPAYER_CURRENCY'))",
															"                    .forEach(curAccount => {",
															"                        const participantPutRequest = {",
															"                          url: pm.environment.get(\"HOST_CENTRAL_SETTLEMENT\")+pm.environment.get(\"BASE_CENTRAL_SETTLEMENT\")+'/settlements/'+pm.environment.get(\"settlementId\"),",
															"                          method: 'PUT',",
															"                          header: {",
															"                              \"Authorization\":\"Bearer \"+pm.environment.get(\"HUB_OPERATOR_BEARER_TOKEN\"),",
															"                              \"FSPIOP-Source\": pm.environment.get(\"hub_operator\"),",
															"                              \"Content-Type\": \"application/json\"",
															"                          },",
															"                          body: {",
															"                            mode: 'raw',",
															"                            raw: JSON.stringify(",
															"                                {",
															"                                  \"participants\": [",
															"                                    {",
															"                                      \"id\": participant.id,",
															"                                      \"accounts\": [",
															"                                        {",
															"                                          \"id\": curAccount.id,",
															"                                          \"reason\": \"Transfers committed\",",
															"                                          \"state\": \"PS_TRANSFERS_COMMITTED\"",
															"                                        }",
															"                                      ]",
															"                                    }",
															"                                  ]",
															"                                }",
															"                            )",
															"                          }",
															"                        };",
															"                        pm.sendRequest(participantPutRequest, function (err, response) {",
															"                            console.log(response.json());",
															"                        });",
															"                    })",
															"})",
															"",
															""
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"auth": {
													"type": "bearer",
													"bearer": [
														{
															"key": "token",
															"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
															"type": "string"
														}
													]
												},
												"method": "GET",
												"header": [
													{
														"key": "FSPIOP-Source",
														"type": "text",
														"value": "{{hub_operator}}"
													}
												],
												"url": {
													"raw": "{{HOST_CENTRAL_SETTLEMENT}}{{BASE_CENTRAL_SETTLEMENT}}/settlements/{{settlementId}}",
													"host": [
														"{{HOST_CENTRAL_SETTLEMENT}}{{BASE_CENTRAL_SETTLEMENT}}"
													],
													"path": [
														"settlements",
														"{{settlementId}}"
													]
												}
											},
											"response": []
										},
										{
											"name": "check state for participants after commit",
											"event": [
												{
													"listen": "test",
													"script": {
														"id": "1440f492-a13d-463f-80eb-fd2c8ecd2761",
														"exec": [
															"pm.test(\"Status code is 200\", function () {",
															"    pm.response.to.have.status(200);",
															"});",
															"",
															"var jsonData = pm.response.json();",
															"    ",
															"pm.test(\"Settlement Id should be: \"+pm.environment.get(\"settlementId\"), function () {",
															"    pm.expect(jsonData.id).to.eql(pm.environment.get(\"settlementId\"));",
															"});",
															"",
															"pm.test(\"Settlement state should be PS_TRANSFERS_COMMITTED\", function () {",
															"    pm.expect(jsonData.state).to.eql(\"PS_TRANSFERS_COMMITTED\");",
															"});",
															"",
															"pm.test(\"Settlement Window ID should be: \"+pm.environment.get(\"closedWindowID\"), function () {",
															"    pm.expect(jsonData.settlementWindows[0].id).to.eql(pm.environment.get(\"closedWindowID\"));",
															"});",
															"",
															"pm.test(\"Settlement Window State should be PENDING_SETTLEMENT\", function () {",
															"    pm.expect(jsonData.settlementWindows[0].state).to.eql(\"PENDING_SETTLEMENT\");",
															"});",
															"",
															"jsonData.participants.map(participant => {",
															"    participant.accounts",
															"                    .filter(account => account.netSettlementAmount.currency === pm.environment.get('SIMPAYER_CURRENCY'))",
															"                    .forEach(xofAccount => {",
															"                        pm.test(`Participant Account ${xofAccount.id} state is PS_TRANSFERS_COMMITTED`, function () {",
															"                            pm.expect(xofAccount.state).to.eql(\"PS_TRANSFERS_COMMITTED\");",
															"                        });",
															"                    })",
															"})",
															"",
															"",
															""
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"auth": {
													"type": "bearer",
													"bearer": [
														{
															"key": "token",
															"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
															"type": "string"
														}
													]
												},
												"method": "GET",
												"header": [
													{
														"key": "FSPIOP-Source",
														"value": "{{hub_operator}}",
														"type": "text"
													}
												],
												"url": {
													"raw": "{{HOST_CENTRAL_SETTLEMENT}}{{BASE_CENTRAL_SETTLEMENT}}/settlements/{{settlementId}}",
													"host": [
														"{{HOST_CENTRAL_SETTLEMENT}}{{BASE_CENTRAL_SETTLEMENT}}"
													],
													"path": [
														"settlements",
														"{{settlementId}}"
													]
												}
											},
											"response": []
										},
										{
											"name": "SIM1 settlement&position accont balance after commit",
											"event": [
												{
													"listen": "test",
													"script": {
														"id": "ba9554a8-3053-4321-bee5-4106509677df",
														"exec": [
															"pm.test(\"Status code is 200\", function () {",
															"    pm.response.to.have.status(200);",
															"});",
															"",
															"var jsonData = pm.response.json();",
															"var testfsp1SettleAccountBalanceAfterCommit;",
															"var testfsp1PositionAccountBalanceAfterCommit;",
															"jsonData",
															"    .filter(account => account.currency === pm.environment.get('SIM1_CURRENCY'))",
															"    .forEach(curAccount => {",
															"        if(curAccount.ledgerAccountType === \"SETTLEMENT\") {",
															"            testfsp1SettleAccountBalanceAfterCommit = curAccount.value",
															"        }",
															"        if(curAccount.ledgerAccountType === \"POSITION\") {",
															"            testfsp1PositionAccountBalanceAfterCommit = curAccount.value",
															"        }",
															"    })",
															"",
															"",
															"pm.test(`${pm.environment.get('SIM1_NAME')} settlement account balance before and  after commit should be the same.`, function () {",
															"    pm.expect(testfsp1SettleAccountBalanceAfterCommit).to.eql(pm.environment.get(`${pm.environment.get('SIM1_NAME')}SettleAccountBalanceAfterTransfer`));",
															"});",
															"",
															"pm.test(`${pm.environment.get('SIM1_NAME')} position account balance after commit should be reduced by its net settlement amount.`, function () {",
															"    pm.expect(testfsp1PositionAccountBalanceAfterCommit).to.eql(pm.environment.get(`${pm.environment.get('SIM1_NAME')}PositionAccountBalanceBeforeTransfer`));",
															"});"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"auth": {
													"type": "bearer",
													"bearer": [
														{
															"key": "token",
															"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
															"type": "string"
														}
													]
												},
												"method": "GET",
												"header": [
													{
														"key": "FSPIOP-Source",
														"type": "text",
														"value": "{{hub_operator}}"
													}
												],
												"url": {
													"raw": "{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}/participants/{{SIM1_NAME}}/accounts",
													"host": [
														"{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}"
													],
													"path": [
														"participants",
														"{{SIM1_NAME}}",
														"accounts"
													]
												}
											},
											"response": []
										},
										{
											"name": "SIM2 settlement&position accont balance after commit",
											"event": [
												{
													"listen": "test",
													"script": {
														"id": "33024945-ccb9-43b1-a2e5-811ecebea682",
														"exec": [
															"pm.test(\"Status code is 200\", function () {",
															"    pm.response.to.have.status(200);",
															"});",
															"",
															"var jsonData = pm.response.json();",
															"var testfsp2SettleAccountBalanceAfterCommit;",
															"var testfsp2PositionAccountBalanceAfterCommit;",
															"jsonData",
															"    .filter(account => account.currency === pm.environment.get('SIM2_CURRENCY'))",
															"    .forEach(curAccount => {",
															"        if(curAccount.ledgerAccountType === \"SETTLEMENT\") {",
															"            testfsp2SettleAccountBalanceAfterCommit = curAccount.value",
															"        }",
															"        if(curAccount.ledgerAccountType === \"POSITION\") {",
															"            testfsp2PositionAccountBalanceAfterCommit = curAccount.value",
															"        }",
															"    })",
															"",
															"pm.test(`${pm.environment.get('SIM2_NAME')} settlement account balance before and  after commit should be the same.`, function () {",
															"    pm.expect(testfsp2SettleAccountBalanceAfterCommit).to.eql(pm.environment.get(`${pm.environment.get('SIM2_NAME')}SettleAccountBalanceBeforeTransfer`));",
															"});",
															"",
															"pm.test(`${pm.environment.get('SIM2_NAME')} position account balance before and after commit should be the same.`, function () {",
															"    pm.expect(testfsp2PositionAccountBalanceAfterCommit).to.eql(pm.environment.get(`${pm.environment.get('SIM2_NAME')}PositionAccountBalanceBeforeTransfer`));",
															"});",
															""
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"auth": {
													"type": "bearer",
													"bearer": [
														{
															"key": "token",
															"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
															"type": "string"
														}
													]
												},
												"method": "GET",
												"header": [
													{
														"key": "FSPIOP-Source",
														"type": "text",
														"value": "{{hub_operator}}"
													}
												],
												"url": {
													"raw": "{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}/participants/{{SIM2_NAME}}/accounts",
													"host": [
														"{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}"
													],
													"path": [
														"participants",
														"{{SIM2_NAME}}",
														"accounts"
													]
												}
											},
											"response": []
										},
										{
											"name": "SIMPAYER settlement&position accont balance after commit",
											"event": [
												{
													"listen": "test",
													"script": {
														"id": "58756867-173b-4d1f-bfa0-6420a017a81b",
														"exec": [
															"pm.test(\"Status code is 200\", function () {\r",
															"    pm.response.to.have.status(200);\r",
															"});\r",
															"\r",
															"var jsonData = pm.response.json();\r",
															"var payerfspSettleAccountBalanceAfterCommit;\r",
															"var payerfspPositionAccountBalanceAfterCommit;\r",
															"jsonData\r",
															"    .filter(account => account.currency === pm.environment.get('SIMPAYER_CURRENCY'))\r",
															"    .forEach(curAccount => {\r",
															"        if(curAccount.ledgerAccountType === \"SETTLEMENT\") {\r",
															"            payerfspSettleAccountBalanceAfterCommit = curAccount.value\r",
															"        }\r",
															"        if(curAccount.ledgerAccountType === \"POSITION\") {\r",
															"            payerfspPositionAccountBalanceAfterCommit = curAccount.value\r",
															"        }\r",
															"    })\r",
															"\r",
															"pm.test(`${pm.environment.get('SIMPAYER_NAME')} settlement account balance before and  after commit should be the same.`, function () {\r",
															"    pm.expect(payerfspSettleAccountBalanceAfterCommit).to.eql(pm.environment.get(`${pm.environment.get('SIMPAYER_NAME')}SettleAccountBalanceAfterTransfer`));\r",
															"});\r",
															"\r",
															"pm.test(`${pm.environment.get('SIMPAYER_NAME')} position account balance before and  after commit should be the same.`, function () {\r",
															"    pm.expect(payerfspPositionAccountBalanceAfterCommit).to.eql(pm.environment.get(`${pm.environment.get('SIMPAYER_NAME')}PositionAccountBalanceBeforeTransfer`));\r",
															"});"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"auth": {
													"type": "bearer",
													"bearer": [
														{
															"key": "token",
															"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
															"type": "string"
														}
													]
												},
												"method": "GET",
												"header": [
													{
														"key": "FSPIOP-Source",
														"type": "text",
														"value": "{{hub_operator}}"
													}
												],
												"url": {
													"raw": "{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}/participants/{{SIMPAYER_NAME}}/accounts",
													"host": [
														"{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}"
													],
													"path": [
														"participants",
														"{{SIMPAYER_NAME}}",
														"accounts"
													]
												}
											},
											"response": []
										},
										{
											"name": "SIMPAYEE settlement&position accont balance after commit",
											"event": [
												{
													"listen": "test",
													"script": {
														"id": "bc4fe21f-ff8f-4d95-9781-fd87f4bc65c6",
														"exec": [
															"pm.test(\"Status code is 200\", function () {\r",
															"    pm.response.to.have.status(200);\r",
															"});\r",
															"\r",
															"var jsonData = pm.response.json();\r",
															"var payeefspSettleAccountBalanceAfterCommit;\r",
															"var payeefspPositionAccountBalanceAfterCommit;\r",
															"jsonData\r",
															"    .filter(account => account.currency === pm.environment.get('SIMPAYEE_CURRENCY'))\r",
															"    .forEach(curAccount => {\r",
															"        if(curAccount.ledgerAccountType === \"SETTLEMENT\") {\r",
															"            payeefspSettleAccountBalanceAfterCommit = curAccount.value\r",
															"        }\r",
															"        if(curAccount.ledgerAccountType === \"POSITION\") {\r",
															"            payeefspPositionAccountBalanceAfterCommit = curAccount.value\r",
															"        }\r",
															"    })\r",
															"\r",
															"pm.test(`${pm.environment.get('SIMPAYEE_NAME')} settlement account balance before and  after commit should be the same.`, function () {\r",
															"    pm.expect(payeefspSettleAccountBalanceAfterCommit).to.eql(pm.environment.get(`${pm.environment.get('SIMPAYEE_NAME')}SettleAccountBalanceAfterTransfer`));\r",
															"});\r",
															"\r",
															"pm.test(`${pm.environment.get('SIMPAYEE_NAME')} position account balance after commit should be reduced by its net settlement amount.`, function () {\r",
															"    pm.expect(payeefspPositionAccountBalanceAfterCommit).to.eql(pm.environment.get(`${pm.environment.get('SIMPAYEE_NAME')}PositionAccountBalanceBeforeTransfer`));\r",
															"});\r",
															""
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"auth": {
													"type": "bearer",
													"bearer": [
														{
															"key": "token",
															"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
															"type": "string"
														}
													]
												},
												"method": "GET",
												"header": [
													{
														"key": "FSPIOP-Source",
														"type": "text",
														"value": "{{hub_operator}}"
													}
												],
												"url": {
													"raw": "{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}/participants/{{SIMPAYEE_NAME}}/accounts",
													"host": [
														"{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}"
													],
													"path": [
														"participants",
														"{{SIMPAYEE_NAME}}",
														"accounts"
													]
												}
											},
											"response": []
										},
										{
											"name": "hub account balance check",
											"event": [
												{
													"listen": "test",
													"script": {
														"id": "14dd280c-15d4-45c0-8cb5-d07dbb2092f3",
														"exec": [
															"pm.test(\"Status code is 200\", function () {\r",
															"    pm.response.to.have.status(200);\r",
															"});\r",
															"\r",
															"pm.test(\"Status code is 200\", function () {\r",
															"    pm.response.to.have.status(200);\r",
															"});\r",
															"\r",
															"var jsonData = pm.response.json();\r",
															"var hubReconciliationAccountBalanceAfterCommit;\r",
															"var hubMultilateralAccountBalanceAfterCommit;\r",
															"jsonData\r",
															"    .filter(account => account.currency === pm.environment.get('SIMPAYER_CURRENCY'))\r",
															"    .forEach(curAccount => {\r",
															"        if(curAccount.ledgerAccountType === \"HUB_RECONCILIATION\") {\r",
															"            hubReconciliationAccountBalanceAfterCommit = curAccount.value;\r",
															"        }\r",
															"        if(curAccount.ledgerAccountType === \"HUB_MULTILATERAL_SETTLEMENT\") {\r",
															"            hubMultilateralAccountBalanceAfterCommit = curAccount.value;\r",
															"        }\r",
															"    })\r",
															"\r",
															"\r",
															"pm.test(\"hub reconciliation account balance before transfer and  after commit should be the same.\", function () {\r",
															"    pm.expect(hubReconciliationAccountBalanceAfterCommit).to.eql(pm.environment.get(\"hubReconciliationAccountBalanceBeforeTransfer\"));\r",
															"});\r",
															"\r",
															"pm.test(\"hub multilateral account balance before transfer and  after commit should be the same.\", function () {\r",
															"    pm.expect(hubMultilateralAccountBalanceAfterCommit).to.eql(pm.environment.get(\"hubMultilateralAccountBalanceBeforeTransfer\"));\r",
															"});"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"auth": {
													"type": "bearer",
													"bearer": [
														{
															"key": "token",
															"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
															"type": "string"
														}
													]
												},
												"method": "GET",
												"header": [
													{
														"key": "FSPIOP-Source",
														"value": "{{hub_operator}}",
														"type": "text"
													}
												],
												"url": {
													"raw": "{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}/participants/Hub/accounts",
													"host": [
														"{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}"
													],
													"path": [
														"participants",
														"Hub",
														"accounts"
													]
												}
											},
											"response": []
										}
									],
									"protocolProfileBehavior": {},
									"_postman_isSubFolder": true
								},
								{
									"name": "Settle Settlement",
									"item": [
										{
											"name": "Settle Settlement",
											"event": [
												{
													"listen": "test",
													"script": {
														"id": "4d18ca6a-7af3-4c15-acbe-63367eb32eb8",
														"exec": [
															"",
															"pm.test(\"Status code is 200\", function () {",
															"    pm.response.to.have.status(200);",
															"});",
															"",
															"var jsonData = pm.response.json();",
															"jsonData.participants.map(participant => {",
															"    participant.accounts",
															"                    .filter(account => account.netSettlementAmount.currency === pm.environment.get('SIMPAYER_CURRENCY'))",
															"                    .forEach(curAccount => {",
															"                        const participantPutRequest = {",
															"                          url: pm.environment.get(\"HOST_CENTRAL_SETTLEMENT\")+pm.environment.get(\"BASE_CENTRAL_SETTLEMENT\")+'/settlements/'+pm.environment.get(\"settlementId\"),",
															"                          method: 'PUT',",
															"                          header: {",
															"                              \"Authorization\":\"Bearer \"+pm.environment.get(\"HUB_OPERATOR_BEARER_TOKEN\"),",
															"                              \"FSPIOP-Source\": pm.environment.get(\"hub_operator\"),",
															"                              \"Content-Type\": \"application/json\"",
															"                          },",
															"                          body: {",
															"                            mode: 'raw',",
															"                            raw: JSON.stringify(",
															"                                {",
															"                                  \"participants\": [",
															"                                    {",
															"                                      \"id\": participant.id,",
															"                                      \"accounts\": [",
															"                                        {",
															"                                          \"id\": curAccount.id,",
															"                                          \"reason\": \"Transfers settled for payer\",",
															"                                          \"state\": \"SETTLED\"",
															"                                        }",
															"                                      ]",
															"                                    }",
															"                                  ]",
															"                                }",
															"                            )",
															"                          }",
															"                        };",
															"                        pm.sendRequest(participantPutRequest, function (err, response) {",
															"                            console.log(response.json());",
															"                        });",
															"                    })",
															"})",
															"",
															""
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"auth": {
													"type": "bearer",
													"bearer": [
														{
															"key": "token",
															"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
															"type": "string"
														}
													]
												},
												"method": "GET",
												"header": [
													{
														"key": "FSPIOP-Source",
														"type": "text",
														"value": "{{hub_operator}}"
													}
												],
												"url": {
													"raw": "{{HOST_CENTRAL_SETTLEMENT}}{{BASE_CENTRAL_SETTLEMENT}}/settlements/{{settlementId}}",
													"host": [
														"{{HOST_CENTRAL_SETTLEMENT}}{{BASE_CENTRAL_SETTLEMENT}}"
													],
													"path": [
														"settlements",
														"{{settlementId}}"
													]
												}
											},
											"response": []
										},
										{
											"name": "check state for participants after settle",
											"event": [
												{
													"listen": "test",
													"script": {
														"id": "d556507d-54c6-4d99-bca0-6f58c478afcd",
														"exec": [
															"pm.test(\"Status code is 200\", function () {",
															"    pm.response.to.have.status(200);",
															"});",
															"",
															"var jsonData = pm.response.json();",
															"    ",
															"pm.test(\"Settlement Id should be: \"+pm.environment.get(\"settlementId\"), function () {",
															"    pm.expect(jsonData.id).to.eql(pm.environment.get(\"settlementId\"));",
															"});",
															"",
															"pm.test(\"Settlement state should be SETTLED\", function () {",
															"    pm.expect(jsonData.state).to.eql(\"SETTLED\");",
															"});",
															"",
															"pm.test(\"Settlement Window ID should be: \"+pm.environment.get(\"closedWindowID\"), function () {",
															"    pm.expect(jsonData.settlementWindows[0].id).to.eql(pm.environment.get(\"closedWindowID\"));",
															"});",
															"",
															"pm.test(\"Settlement Window State should be SETTLED\", function () {",
															"    pm.expect(jsonData.settlementWindows[0].state).to.eql(\"SETTLED\");",
															"});",
															"",
															"jsonData.participants.map(participant => {",
															"    participant.accounts",
															"                    .filter(account => account.netSettlementAmount.currency === pm.environment.get('SIMPAYER_CURRENCY'))",
															"                    .forEach(curAccount => {",
															"                        pm.test(`Participant Account ${curAccount.id} state is SETTLED`, function () {",
															"                            pm.expect(curAccount.state).to.eql(\"SETTLED\");",
															"                        });",
															"                    })",
															"})",
															"",
															"",
															"",
															""
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"auth": {
													"type": "bearer",
													"bearer": [
														{
															"key": "token",
															"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
															"type": "string"
														}
													]
												},
												"method": "GET",
												"header": [
													{
														"key": "FSPIOP-Source",
														"value": "{{hub_operator}}",
														"type": "text"
													}
												],
												"url": {
													"raw": "{{HOST_CENTRAL_SETTLEMENT}}{{BASE_CENTRAL_SETTLEMENT}}/settlements/{{settlementId}}",
													"host": [
														"{{HOST_CENTRAL_SETTLEMENT}}{{BASE_CENTRAL_SETTLEMENT}}"
													],
													"path": [
														"settlements",
														"{{settlementId}}"
													]
												}
											},
											"response": []
										},
										{
											"name": "SIM1 settlement&position accont balance after settle",
											"event": [
												{
													"listen": "test",
													"script": {
														"id": "f12c4a93-8bbf-4617-9e52-df74491765bd",
														"exec": [
															"pm.test(\"Status code is 200\", function () {",
															"    pm.response.to.have.status(200);",
															"});",
															"",
															"var jsonData = pm.response.json();",
															"var testfsp1SettleAccountBalanceAfterSettle;",
															"var testfsp1PositionAccountBalanceAfterSettle;",
															"jsonData",
															"    .filter(account => account.currency === pm.environment.get('SIM1_CURRENCY'))",
															"    .forEach(curAccount => {",
															"        if(curAccount.ledgerAccountType === \"SETTLEMENT\") {",
															"            testfsp1SettleAccountBalanceAfterSettle = curAccount.value",
															"        }",
															"        if(curAccount.ledgerAccountType === \"POSITION\") {",
															"            testfsp1PositionAccountBalanceAfterSettle = curAccount.value",
															"        }",
															"    })",
															"",
															"pm.test(`${pm.environment.get('SIM1_NAME')} settlement account balance before and  after settle should be the same.`, function () {",
															"    pm.expect(testfsp1SettleAccountBalanceAfterSettle).to.eql(pm.environment.get(`${pm.environment.get('SIM1_NAME')}SettleAccountBalanceBeforeTransfer`));",
															"});",
															"",
															"pm.test(`${pm.environment.get('SIM1_NAME')} position account balance before and  after settle should be the same.`, function () {",
															"    pm.expect(testfsp1PositionAccountBalanceAfterSettle).to.eql(pm.environment.get(`${pm.environment.get('SIM1_NAME')}PositionAccountBalanceBeforeTransfer`));",
															"});"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"auth": {
													"type": "bearer",
													"bearer": [
														{
															"key": "token",
															"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
															"type": "string"
														}
													]
												},
												"method": "GET",
												"header": [
													{
														"key": "FSPIOP-Source",
														"type": "text",
														"value": "{{hub_operator}}"
													}
												],
												"url": {
													"raw": "{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}/participants/{{SIM1_NAME}}/accounts",
													"host": [
														"{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}"
													],
													"path": [
														"participants",
														"{{SIM1_NAME}}",
														"accounts"
													]
												}
											},
											"response": []
										},
										{
											"name": "SIM2 settlement&position accont balance after settle",
											"event": [
												{
													"listen": "test",
													"script": {
														"id": "0fd0997a-c27a-4b2d-8661-2bbbb692ba0d",
														"exec": [
															"pm.test(\"Status code is 200\", function () {",
															"    pm.response.to.have.status(200);",
															"});",
															"",
															"var jsonData = pm.response.json();",
															"var testfsp2SettleAccountBalanceAfterCommit;",
															"var testfsp2PositionAccountBalanceAfterCommit;",
															"jsonData",
															"    .filter(account => account.currency === pm.environment.get('SIM2_CURRENCY'))",
															"    .forEach(curAccount => {",
															"        if(curAccount.ledgerAccountType === \"SETTLEMENT\") {",
															"            testfsp2SettleAccountBalanceAfterCommit = curAccount.value",
															"        }",
															"        if(curAccount.ledgerAccountType === \"POSITION\") {",
															"            testfsp2PositionAccountBalanceAfterCommit = curAccount.value",
															"        }",
															"    })",
															"",
															"pm.test(`${pm.environment.get('SIM2_NAME')} settlement account balance before and  after commit should be the same.`, function () {",
															"    pm.expect(testfsp2SettleAccountBalanceAfterCommit).to.eql(pm.environment.get(`${pm.environment.get('SIM2_NAME')}SettleAccountBalanceBeforeTransfer`));",
															"});",
															"",
															"pm.test(`${pm.environment.get('SIM2_NAME')} position account balance before and  after commit should be the same.`, function () {",
															"    pm.expect(testfsp2PositionAccountBalanceAfterCommit).to.eql(pm.environment.get(`${pm.environment.get('SIM2_NAME')}PositionAccountBalanceBeforeTransfer`));",
															"});"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"auth": {
													"type": "bearer",
													"bearer": [
														{
															"key": "token",
															"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
															"type": "string"
														}
													]
												},
												"method": "GET",
												"header": [
													{
														"key": "FSPIOP-Source",
														"type": "text",
														"value": "{{hub_operator}}"
													}
												],
												"url": {
													"raw": "{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}/participants/{{SIM2_NAME}}/accounts",
													"host": [
														"{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}"
													],
													"path": [
														"participants",
														"{{SIM2_NAME}}",
														"accounts"
													]
												}
											},
											"response": []
										},
										{
											"name": "SIMPAYER settlement&position accont balance after settle",
											"event": [
												{
													"listen": "test",
													"script": {
														"id": "6d57e5ab-24d4-4c6a-92fa-b8b84acbf430",
														"exec": [
															"pm.test(\"Status code is 200\", function () {\r",
															"    pm.response.to.have.status(200);\r",
															"});\r",
															"\r",
															"var jsonData = pm.response.json();\r",
															"var payerfspSettleAccountBalanceAfterCommit;\r",
															"var payerfspPositionAccountBalanceAfterCommit;\r",
															"jsonData\r",
															"    .filter(account => account.currency === pm.environment.get('SIMPAYER_CURRENCY'))\r",
															"    .forEach(curAccount => {\r",
															"        if(curAccount.ledgerAccountType === \"SETTLEMENT\") {\r",
															"            payerfspSettleAccountBalanceAfterCommit = curAccount.value\r",
															"        }\r",
															"        if(curAccount.ledgerAccountType === \"POSITION\") {\r",
															"            payerfspPositionAccountBalanceAfterCommit = curAccount.value\r",
															"        }\r",
															"    })\r",
															"\r",
															"\r",
															"pm.test(`${pm.environment.get('SIMPAYER_NAME')} settlement account balance before and  after commit should be the same.`, function () {\r",
															"    pm.expect(payerfspSettleAccountBalanceAfterCommit).to.eql(pm.environment.get(`${pm.environment.get('SIMPAYER_NAME')}SettleAccountBalanceAfterTransfer`));\r",
															"});\r",
															"\r",
															"pm.test(`${pm.environment.get('SIMPAYER_NAME')} position account balance before and  after commit should be the same.`, function () {\r",
															"    pm.expect(payerfspPositionAccountBalanceAfterCommit).to.eql(pm.environment.get(`${pm.environment.get('SIMPAYER_NAME')}PositionAccountBalanceBeforeTransfer`));\r",
															"});"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"auth": {
													"type": "bearer",
													"bearer": [
														{
															"key": "token",
															"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
															"type": "string"
														}
													]
												},
												"method": "GET",
												"header": [
													{
														"key": "FSPIOP-Source",
														"type": "text",
														"value": "{{hub_operator}}"
													}
												],
												"url": {
													"raw": "{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}/participants/{{SIMPAYER_NAME}}/accounts",
													"host": [
														"{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}"
													],
													"path": [
														"participants",
														"{{SIMPAYER_NAME}}",
														"accounts"
													]
												}
											},
											"response": []
										},
										{
											"name": "SIMPAYEE settlement&position accont balance after settle",
											"event": [
												{
													"listen": "test",
													"script": {
														"id": "fbdeb6a6-53ba-4149-ac42-769c21fb1bb5",
														"exec": [
															"pm.test(\"Status code is 200\", function () {\r",
															"    pm.response.to.have.status(200);\r",
															"});\r",
															"\r",
															"var jsonData = pm.response.json();\r",
															"var payeefspSettleAccountBalanceAfterCommit;\r",
															"var payeefspPositionAccountBalanceAfterCommit;\r",
															"jsonData\r",
															"    .filter(account => account.currency === pm.environment.get('SIMPAYEE_CURRENCY'))\r",
															"    .forEach(curAccount => {\r",
															"        if(curAccount.ledgerAccountType === \"SETTLEMENT\") {\r",
															"            payeefspSettleAccountBalanceAfterCommit = curAccount.value\r",
															"        }\r",
															"        if(curAccount.ledgerAccountType === \"POSITION\") {\r",
															"            payeefspPositionAccountBalanceAfterCommit = curAccount.value\r",
															"        }\r",
															"    })\r",
															"\r",
															"pm.test(`${pm.environment.get('SIMPAYEE_NAME')} settlement account balance before and  after commit should be the same.`, function () {\r",
															"    pm.expect(payeefspSettleAccountBalanceAfterCommit).to.eql(pm.environment.get(`${pm.environment.get('SIMPAYEE_NAME')}SettleAccountBalanceAfterTransfer`));\r",
															"});\r",
															"\r",
															"pm.test(`${pm.environment.get('SIMPAYEE_NAME')} position account balance before and  after commit should be the same.`, function () {\r",
															"    pm.expect(payeefspPositionAccountBalanceAfterCommit).to.eql(pm.environment.get(`${pm.environment.get('SIMPAYEE_NAME')}PositionAccountBalanceBeforeTransfer`));\r",
															"});"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"auth": {
													"type": "bearer",
													"bearer": [
														{
															"key": "token",
															"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
															"type": "string"
														}
													]
												},
												"method": "GET",
												"header": [
													{
														"key": "FSPIOP-Source",
														"type": "text",
														"value": "{{hub_operator}}"
													}
												],
												"url": {
													"raw": "{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}/participants/{{SIMPAYEE_NAME}}/accounts",
													"host": [
														"{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}"
													],
													"path": [
														"participants",
														"{{SIMPAYEE_NAME}}",
														"accounts"
													]
												}
											},
											"response": []
										}
									],
									"protocolProfileBehavior": {},
									"_postman_isSubFolder": true
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						}
					],
					"description": "Author: Sridevi Miriyala",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "a6e513c5-70b0-439f-a854-9adf89ddcc06",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "06453e81-3bc2-4794-84df-c53bdf309267",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				},
				{
					"name": "transfer_negative_scenarios",
					"item": [
						{
							"name": "payee_invalid_fulfillment",
							"item": [
								{
									"name": "Store SIMPAYER position",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "4231b645-419e-448d-9b82-c7fcab2452e6",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"});",
													"",
													"var jsonData = pm.response.json();",
													"jsonData",
													"    .filter(position => position.currency === pm.environment.get('SIMPAYER_CURRENCY'))",
													"    .forEach(position => {",
													"        pm.environment.set(`${pm.environment.get('SIMPAYER_NAME')}PositionBeforeTransfer`, position.value);",
													"    })",
													"",
													"",
													"",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "prerequest",
											"script": {
												"id": "77e0b6ba-5003-49f3-8ee7-ef8521fd4548",
												"exec": [
													"setTimeout(function () {",
													"  pm.sendRequest('www.google.com', function (err, response) {}",
													"    );",
													"}, 3000)"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
													"type": "string"
												}
											]
										},
										"method": "GET",
										"header": [
											{
												"key": "FSPIOP-Source",
												"type": "text",
												"value": "{{hub_operator}}"
											}
										],
										"url": {
											"raw": "{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}/participants/{{SIMPAYER_NAME}}/positions",
											"host": [
												"{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}"
											],
											"path": [
												"participants",
												"{{SIMPAYER_NAME}}",
												"positions"
											]
										}
									},
									"response": []
								},
								{
									"name": "Store SIMPAYEE position",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "62092989-f231-4b73-834c-03e8e9cab582",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"});",
													"",
													"var jsonData = pm.response.json();",
													"jsonData",
													"    .filter(position => position.currency === pm.environment.get('SIMPAYEE_CURRENCY'))",
													"    .forEach(position => {",
													"        pm.environment.set(`${pm.environment.get('SIMPAYEE_NAME')}PositionBeforeTransfer`, position.value);",
													"    })",
													"    ",
													"",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "prerequest",
											"script": {
												"id": "7d54dbd6-56d0-45fc-8498-0a7dd0296462",
												"exec": [
													"setTimeout(function () {",
													"  pm.sendRequest('www.google.com', function (err, response) {}",
													"    );",
													"}, 3000)"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
													"type": "string"
												}
											]
										},
										"method": "GET",
										"header": [
											{
												"key": "FSPIOP-Source",
												"type": "text",
												"value": "{{hub_operator}}"
											}
										],
										"url": {
											"raw": "{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}/participants/{{SIMPAYEE_NAME}}/positions",
											"host": [
												"{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}"
											],
											"path": [
												"participants",
												"{{SIMPAYEE_NAME}}",
												"positions"
											]
										}
									},
									"response": []
								},
								{
									"name": "Send Quote - RECEIVE",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "aa271532-4dc6-4f90-b79b-1fe2612977c4",
												"exec": [
													"var navigator = {}; ",
													"var window = {}; ",
													"eval(pm.environment.get('jrsassign'));",
													"",
													"",
													"var uuid = require('uuid');",
													"var generatedUUID = uuid.v4();",
													"pm.environment.set('quoteId', generatedUUID);",
													"generatedUUID = uuid.v4();",
													"pm.environment.set('transactionId', generatedUUID);",
													"",
													"pm.variables.set('quoteDate', (new Date()).toUTCString());",
													"pm.variables.set('payerName', 'PayerFirst PayerLast');",
													"",
													"pm.variables.set('expectedPayeeFirstName', 'GoldenFirst');",
													"pm.variables.set('expectedPayeeLastName', 'GoldenLast');",
													"pm.variables.set('expectedPayeeDOB', '2010-10-10');",
													"",
													"var oHeader = {alg: \"RS256\", \"FSPIOP-Source\":pm.environment.get('SIMPAYER_NAME'),\"FSPIOP-Destination\":pm.environment.get('SIMPAYEE_NAME'), \"FSPIOP-URI\":\"/quotes\", \"FSPIOP-HTTP-Method\":\"POST\", \"Date\":pm.variables.get('quoteDate')};",
													"var sHeader = JSON.stringify(oHeader);",
													"console.log(`sHeader: ${sHeader}`)",
													"",
													"var objPayload = {",
													"  \"quoteId\": pm.environment.get('quoteId'),",
													"  \"transactionId\": pm.environment.get('transactionId'),",
													"  \"payer\": {",
													"    \"partyIdInfo\": {",
													"      \"partyIdType\": \"MSISDN\",",
													"      \"partyIdentifier\": pm.environment.get('SIMPAYER_MSISDN'),",
													"      \"fspId\": pm.environment.get('SIMPAYER_NAME')",
													"    },",
													"    \"personalInfo\": {",
													"      \"complexName\": {",
													"        \"firstName\": \"Mats\",",
													"        \"lastName\": \"Hagman\"",
													"      },",
													"      \"dateOfBirth\": \"1983-10-25\"",
													"    }",
													"  },",
													"  \"payee\": {",
													"    \"partyIdInfo\": {",
													"      \"partyIdType\": \"MSISDN\",",
													"      \"partyIdentifier\": pm.environment.get('SIMPAYEE_MSISDN'),",
													"      \"fspId\": pm.environment.get('SIMPAYEE_NAME')",
													"    }",
													"  },",
													"  \"amountType\": \"RECEIVE\",",
													"  \"amount\": {",
													"    \"amount\": \"60\",",
													"    \"currency\": pm.environment.get('SIMPAYEE_CURRENCY')",
													"  },",
													"  \"transactionType\": {",
													"    \"scenario\": \"TRANSFER\",",
													"    \"initiator\": \"PAYER\",",
													"    \"initiatorType\": \"CONSUMER\"",
													"  },",
													"  \"note\": \"hej\"",
													"}",
													"",
													"var sPayload = JSON.stringify(objPayload)",
													"console.log(`sPayload: ${sPayload}`)",
													"pm.variables.set(\"quoteRequest\", sPayload);",
													"var token = KJUR.jws.JWS.sign(\"RS256\", sHeader, sPayload, pm.environment.get('SIMPAYER_JWS_KEY'));",
													"console.log(`token: ${token}`)",
													"",
													"// var encodedHeaders = btoa(sHeader)",
													"",
													"// var ofspiopSignature = {signature: vSignature, protectedHeader: encodedHeaders}",
													"// var token = JSON.stringify(ofspiopSignature)",
													"",
													"const [ protectedHeaderBase64, , signature ] = token.split('.');",
													"",
													"const signatureObject = {",
													"    signature: signature.replace('\"', ''),",
													"    protectedHeader: protectedHeaderBase64.replace('\"', '')",
													"};",
													"",
													"console.log(JSON.stringify(signatureObject))",
													"",
													"pm.variables.set('fspiopSignature',JSON.stringify(signatureObject))",
													"",
													"",
													"",
													"",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"id": "0869fe44-78ab-4ab3-800e-fc0f06ae75e7",
												"exec": [
													"pm.test(\"Status code is 202\", function () {",
													"    pm.response.to.have.status(202);",
													"});",
													"",
													"setTimeout(function () {",
													"  pm.sendRequest(pm.environment.get(\"SIMPAYEE_SDK_TESTAPI_URL\")+\"/requests/\"+pm.variables.get(\"quoteId\"), function (err, response) {",
													"          if(response.responseSize !== 0) {",
													"              ",
													"              //Check the Headers",
													"              var headers = response.json().headers;",
													"              ",
													"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-source is ${pm.environment.get('SIMPAYER_NAME')}`, function () {",
													"                    pm.expect(headers['fspiop-source']).to.eql(pm.environment.get('SIMPAYER_NAME'));",
													"                });",
													"                ",
													"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-destination is ${pm.environment.get('SIMPAYEE_NAME')}`, function () {",
													"                    pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('SIMPAYEE_NAME'));",
													"                });",
													"                ",
													"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-signature is same as sent in the request`, function () {",
													"                    pm.expect(headers['fspiop-signature']).to.eql(pm.variables.get(\"fspiopSignature\"));",
													"                });",
													"                ",
													"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} accept is same as sent in the request`, function () {",
													"                    pm.expect(headers['accept']).to.match(/application\\/vnd\\.interoperability\\.quotes\\+json;version=1(\\.\\d)?/);",
													"                });",
													"                ",
													"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} content-typeis same as sent in the request`, function () {",
													"                    pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.quotes+json;version=1.0');",
													"                });",
													"                ",
													"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-uri is /quotes`, function () {",
													"                    pm.expect(headers['fspiop-uri']).to.eql('/quotes');",
													"                });",
													"                ",
													"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-http-method is POST`, function () {",
													"                    pm.expect(headers['fspiop-http-method']).to.eql('POST');",
													"                });",
													"                ",
													"          } else {",
													"              pm.test(\"Quote FAILED\", function () {",
													"                throw new Error('Did not receive request on payee side');",
													"              });",
													"              // postman.setNextRequest(null)",
													"          }",
													"   });",
													"}, pm.environment.get(\"SET_TIMEOUT_QUOTES\"))",
													"",
													"setTimeout(function () {",
													"  pm.sendRequest(pm.environment.get(\"SIMPAYER_SDK_TESTAPI_URL\")+\"/callbacks/\"+pm.environment.get(\"quoteId\"), function (err, response) {",
													"      if(response.responseSize !== 0) {",
													"          //Checking headers",
													"            var headers = response.json().headers;",
													"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-source is ${pm.environment.get('SIMPAYEE_NAME')}`, function () {",
													"                pm.expect(headers['fspiop-source']).to.eql(pm.environment.get('SIMPAYEE_NAME'));",
													"            });",
													"            ",
													"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-destination is ${pm.environment.get('SIMPAYER_NAME')}`, function () {",
													"                pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('SIMPAYER_NAME'));",
													"            });",
													"            ",
													"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} content-type should be application/vnd.interoperability.quotes+json;version=1.0`, function () {",
													"                pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.quotes+json;version=1.0');",
													"            });",
													"            ",
													"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} accept is empty`, function () {",
													"                pm.expect(headers['accept']).to.eql(undefined);",
													"            });",
													"            ",
													"            ",
													"            ",
													"            var {signature,protectedHeader} = JSON.parse(headers['fspiop-signature'])",
													"            // var strData = JSON.stringify(response.json().data)",
													"            // const token = `${protectedHeader}.${btoa(strData)}.${signature}`",
													"            // console.log(`token: ${token}`)",
													"            // var isValid = KJUR.jws.JWS.verify(token, pm.environment.get('goldenpayeefspJWSPubKey'), {alg: ['RS256']})",
													"            // console.log(`isValid: ${isValid}`)",
													"            // pm.test(\"Check if the response is JWS valid\", function () {",
													"            //     pm.expect(isValid).to.eql(true);",
													"            // });",
													"            ",
													"            //Validate protected header inside Signature",
													"            var decodedProtectedHeaders = JSON.parse(atob(protectedHeader))",
													"            console.log('decodedProtectedHeaders:',decodedProtectedHeaders)",
													"            ",
													"            pm.test(\"FSPIOP-Signature Protected Header alg to be RS256\", function () {",
													"                pm.expect(decodedProtectedHeaders['alg']).to.eql('RS256');",
													"            });",
													"            pm.test(\"FSPIOP-Signature Protected Header FSPIOP-URI to be /quotes/\"+pm.environment.get(\"quoteId\"), function () {",
													"                pm.expect(decodedProtectedHeaders['FSPIOP-URI']).to.eql('/quotes/'+pm.environment.get(\"quoteId\"));",
													"            });",
													"            ",
													"",
													"            pm.test(\"FSPIOP-Signature Protected Header FSPIOP-HTTP-Method to be PUT\", function () {",
													"                pm.expect(decodedProtectedHeaders['FSPIOP-HTTP-Method']).to.eql('PUT');",
													"            });",
													"            pm.test(`FSPIOP-Signature Protected Header FSPIOP-Source to be ${pm.environment.get('SIMPAYEE_NAME')}`, function () {",
													"                pm.expect(decodedProtectedHeaders['FSPIOP-Source']).to.eql(pm.environment.get('SIMPAYEE_NAME'));",
													"            });",
													"            pm.test(`FSPIOP-Signature Protected Header FSPIOP-Destination to be ${pm.environment.get('SIMPAYER_NAME')}`, function () {",
													"                pm.expect(decodedProtectedHeaders['FSPIOP-Destination']).to.eql(pm.environment.get('SIMPAYER_NAME'));",
													"            });",
													"            pm.test(\"FSPIOP-Signature Protected Header Date is present\", function () {",
													"                pm.expect(decodedProtectedHeaders['Date']).to.eql(headers['date']);",
													"            });",
													"           ",
													"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} FSPIOP-URI to be /quotes/${pm.environment.get(\"quoteId\")}`, function () {",
													"                pm.expect(headers['fspiop-uri']).to.eql(`/quotes/${pm.environment.get(\"quoteId\")}`);",
													"            });",
													"            ",
													"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-http-method is PUT`, function () {",
													"                pm.expect(headers['fspiop-http-method']).to.eql('PUT');",
													"            });",
													"            ",
													"            var jsonData = response.json().data;",
													"            ",
													"            pm.test(\"Response quoteId is  null\", function () {",
													"                pm.expect(jsonData.quoteId).to.eql(undefined);",
													"                ",
													"            });",
													"          ",
													"            pm.test(\"Response ilpPacket is not null\", function () {",
													"                pm.expect(jsonData.ilpPacket).not.equal(undefined);",
													"                pm.environment.set(\"ilpPacket\", jsonData.ilpPacket);",
													"            });",
													"       ",
													"           pm.test(\"Response condition is not null\", function () {",
													"               pm.expect(jsonData.condition).not.equal(undefined);",
													"               pm.environment.set(\"condition\", jsonData.condition);",
													"           });",
													"      } else {",
													"          pm.test(\"Quote FAILED\", function () {",
													"            throw new Error('Did not receive response on Payer side');",
													"           });",
													"           // postman.setNextRequest(null);",
													"      }",
													"       ",
													"   });",
													"}, pm.environment.get(\"SET_TIMEOUT_QUOTES\"))",
													"",
													"",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{SIMPAYER_BEARER_TOKEN}}",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Accept",
												"value": "application/vnd.interoperability.quotes+json;version=1.0"
											},
											{
												"key": "Content-Type",
												"value": "application/vnd.interoperability.quotes+json;version=1.0"
											},
											{
												"key": "Date",
												"value": "{{quoteDate}}"
											},
											{
												"key": "FSPIOP-Source",
												"value": "{{SIMPAYER_NAME}}"
											},
											{
												"key": "FSPIOP-Destination",
												"value": "{{SIMPAYEE_NAME}}"
											},
											{
												"key": "FSPIOP-Signature",
												"type": "text",
												"value": "{{fspiopSignature}}"
											},
											{
												"key": "FSPIOP-HTTP-Method",
												"type": "text",
												"value": "POST"
											},
											{
												"key": "FSPIOP-URI",
												"type": "text",
												"value": "/quotes"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{{quoteRequest}}"
										},
										"url": {
											"raw": "{{HOST_QUOTING_SERVICE}}/quotes",
											"host": [
												"{{HOST_QUOTING_SERVICE}}"
											],
											"path": [
												"quotes"
											]
										}
									},
									"response": []
								},
								{
									"name": "Send Prepare",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "2ef4fadf-5c6a-46cf-815b-5832f9014340",
												"exec": [
													"var navigator = {}; //fake a navigator object for the lib\r",
													"var window = {}; //fake a window object for the lib\r",
													"eval(pm.environment.get('jrsassign'));\r",
													"\r",
													"var uuid = require('uuid');\r",
													"var generatedUUID = uuid.v4();\r",
													"pm.environment.set('transfer_ID', pm.environment.get('transactionId'));\r",
													"\r",
													"\r",
													"pm.variables.set('transferDate', (new Date()).toUTCString());\r",
													"\r",
													"pm.environment.set(\"transferExpiration\",new Date(new Date().getTime() + 60000))\r",
													"\r",
													"var oHeader = {alg: \"RS256\", \"FSPIOP-Source\":pm.environment.get('SIMPAYER_NAME'),\"FSPIOP-Destination\":pm.environment.get('NORESPONSE_SIMPAYEE_NAME'), \"FSPIOP-URI\":\"/transfers\", \"FSPIOP-HTTP-Method\":\"POST\", \"Date\":pm.variables.get('transferDate')};\r",
													"var sHeader = JSON.stringify(oHeader);\r",
													"console.log(`sHeader: ${sHeader}`)\r",
													"\r",
													"var objPayload = {\r",
													"  \"transferId\": pm.environment.get('transfer_ID'),\r",
													"  \"payerFsp\": pm.environment.get('SIMPAYER_NAME'),\r",
													"  \"payeeFsp\": pm.environment.get('NORESPONSE_SIMPAYEE_NAME'),\r",
													"  \"amount\": {\r",
													"    \"amount\": \"10\",\r",
													"    \"currency\": pm.environment.get('SIMPAYEE_CURRENCY')\r",
													"  },\r",
													"  \"expiration\": pm.environment.get('transferExpiration'),\r",
													"  \"ilpPacket\": pm.environment.get('ilpPacket'),\r",
													"  \"condition\": pm.environment.get('condition')\r",
													"}\r",
													"var sPayload = JSON.stringify(objPayload)\r",
													"console.log(`sPayload: ${sPayload}`)\r",
													"pm.variables.set(\"transferRequest\", sPayload);\r",
													"var token = KJUR.jws.JWS.sign(\"RS256\", sHeader, sPayload, pm.environment.get('SIMPAYER_JWS_KEY'));\r",
													"//console.log(`token: ${token}`)\r",
													"\r",
													"// var encodedHeaders = btoa(sHeader)\r",
													"\r",
													"// var ofspiopSignature = {signature: vSignature, protectedHeader: encodedHeaders}\r",
													"// var token = JSON.stringify(ofspiopSignature)\r",
													"\r",
													"const [ protectedHeaderBase64, , signature ] = token.split('.');\r",
													"\r",
													"const signatureObject = {\r",
													"    signature: signature.replace('\"', ''),\r",
													"    protectedHeader: protectedHeaderBase64.replace('\"', '')\r",
													"};\r",
													"\r",
													"console.log(JSON.stringify(signatureObject))\r",
													"\r",
													"pm.variables.set('fspiopSignature',JSON.stringify(signatureObject))"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"id": "2632356d-e011-40e7-abc0-d9e86c2687f7",
												"exec": [
													"pm.test(\"Status code is 202\", function () {",
													"    pm.response.to.have.status(202);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{SIMPAYER_BEARER_TOKEN}}",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Accept",
												"value": "application/vnd.interoperability.transfers+json;version=1.0",
												"type": "text"
											},
											{
												"key": "Content-Type",
												"value": "application/vnd.interoperability.transfers+json;version=1.0",
												"type": "text"
											},
											{
												"key": "Date",
												"value": "{{transferDate}}",
												"type": "text"
											},
											{
												"key": "FSPIOP-Source",
												"value": "{{SIMPAYER_NAME}}",
												"type": "text"
											},
											{
												"key": "FSPIOP-Destination",
												"value": "{{NORESPONSE_SIMPAYEE_NAME}}",
												"type": "text"
											},
											{
												"key": "FSPIOP-Signature",
												"value": "{{fspiopSignature}}",
												"type": "text"
											},
											{
												"key": "FSPIOP-URI",
												"value": "/transfers",
												"type": "text"
											},
											{
												"key": "FSPIOP-HTTP-Method",
												"value": "POST",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{{transferRequest}}"
										},
										"url": {
											"raw": "{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}/transfers",
											"host": [
												"{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}"
											],
											"path": [
												"transfers"
											]
										}
									},
									"response": []
								},
								{
									"name": "Send Payee Invalid Fulfillment",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "41ae72eb-5b62-471f-9692-f8942abe81f4",
												"exec": [
													"pm.environment.set(\"completedTimestamp\",new Date().toISOString());",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"id": "7e6a6a2e-3562-4c9b-a23e-9d1619600325",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"});",
													"",
													"//TODO Need to doublecheck ML Backend functionality in the new release",
													"// setTimeout(function () {",
													"//   pm.sendRequest(pm.environment.get(\"SIMPAYER_SDK_TESTAPI_URL\")+\"/callbacks/\"+pm.environment.get(\"transfer_ID\"), function (err, response) {",
													"//           if(response.responseSize !== 0) {",
													"//             //Checking headers",
													"//             var headers = response.json().headers;",
													"//             pm.test(\"payeefsp fspiop-source is switch \", function () {",
													"//                 pm.expect(headers['fspiop-source']).to.eql('switch');",
													"//             });",
													"            ",
													"//             pm.test(\"payeefsp fspiop-destination is noresponsepayeefsp\", function () {",
													"//                 pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('NORESPONSE_SIMPAYEE_NAME'));",
													"//             });",
													"            ",
													"//             pm.test(\"payeefsp content-type should be application/vnd.interoperability.transfers+json;version=1.0\", function () {",
													"//                 pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.transfers+json;version=1.0');",
													"//             });",
													"            ",
													"//             pm.test(\"payeefsp accept is empty\", function () {",
													"//                 pm.expect(headers['accept']).to.eql(undefined);",
													"//             });",
													"            ",
													"            ",
													"//             pm.test(\"payeefsp fspiop-uri includes /transfers/{{transfer_ID}}\", function () {",
													"//                 pm.expect(headers['fspiop-uri']).to.eql('/transfers/'+ pm.environment.get(\"transfer_ID\"));",
													"//             });",
													"            ",
													"//             pm.test(\"payeefsp fspiop-signature is not null\", function () {",
													"//                 pm.expect(headers['fspiop-signature']).not.eql(undefined);",
													"//             });",
													"            ",
													"//             pm.test(\"payeefsp fspiop-http-method is PUT\", function () {",
													"//                 pm.expect(headers['fspiop-http-method']).to.eql('PUT');",
													"//             });",
													"            ",
													"//             var jsonData = response.json().data;",
													"//             pm.test(\"Response Error Code is 3100\", function () {",
													"//               pm.expect(jsonData.errorInformation.errorCode).to.eql('3100');",
													"//             });",
													"//             pm.test(\"Response Error Description is Generic validation error - invalid fulfilment\", function () {",
													"//               pm.expect(jsonData.errorInformation.errorDescription).to.eql('Generic validation error - invalid fulfilment');",
													"//             });",
													"//           } else {",
													"//               pm.test(\"Transfer FAILED\", function () {",
													"//                 throw new Error('Did not receive response on payer side');",
													"//               });",
													"//               // postman.setNextRequest(null)",
													"//           }",
													"//   });",
													"// }, 3000)",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{NORESPONSE_SIMPAYEE_BEARER_TOKEN}}",
													"type": "string"
												}
											]
										},
										"method": "PUT",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"type": "text",
												"value": "application/vnd.interoperability.transfers+json;version=1.0"
											},
											{
												"key": "Date",
												"type": "text",
												"value": "{{dateHeader}}"
											},
											{
												"key": "FSPIOP-Source",
												"type": "text",
												"value": "{{NORESPONSE_SIMPAYEE_NAME}}"
											},
											{
												"key": "FSPIOP-Destination",
												"type": "text",
												"value": "{{SIMPAYER_NAME}}"
											},
											{
												"key": "Accept",
												"value": "application/vnd.interoperability.transfers+json;version=1.0",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n  \"fulfilment\": \"{{invalidFulfillment}}\",\n  \"completedTimestamp\": \"{{completedTimestamp}}\",\n  \"transferState\": \"COMMITTED\"\n}"
										},
										"url": {
											"raw": "{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}/transfers/{{transfer_ID}}",
											"host": [
												"{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}"
											],
											"path": [
												"transfers",
												"{{transfer_ID}}"
											]
										}
									},
									"response": []
								},
								{
									"name": "Check Transfer status on SIMPAYER - ABORTED",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "eef369bd-5cdf-4509-a614-2c845a2e2e16",
												"exec": [
													"",
													"   var uuid = require('uuid');",
													"   var generatedUUID = uuid.v4();",
													"   pm.variables.set('transferId', generatedUUID);",
													"",
													"   pm.variables.set('transferDate', (new Date()).toUTCString());",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"id": "b8ecb44a-287d-4ce1-a43f-a8b30f346218",
												"exec": [
													"pm.test(\"Status code is 202\", function () {",
													"    pm.response.to.have.status(202);",
													"});",
													"",
													"// pm.test(\"Check that Content-Type is present\", function () {",
													"//     pm.response.to.have.header(\"Content-Type\");",
													"//     pm.response.to.be.header(\"Content-Type\", \"application/vnd.interoperability.transfers+json;version=1.0\");",
													"// });",
													"",
													"setTimeout(function () {",
													"  pm.sendRequest(pm.environment.get(\"SIMPAYER_SDK_TESTAPI_URL\")+\"/callbacks/\"+pm.variables.get(\"transfer_ID\"), function (err, response) {",
													"          if(response !== null) {",
													"              var jsonData = response.json().data;",
													"              ",
													"              pm.test(\"Response status is ABORTED\", function () {",
													"                pm.expect(jsonData.transferState).to.eql('ABORTED');",
													"              });",
													"              pm.test(\"Extension List value is 3100: Generic validation error - invalid fulfilment\", function () {",
													"                pm.expect(jsonData.extensionList.extension[0].value).to.eql('3100: Generic validation error - invalid fulfilment');",
													"              });",
													"          } else {",
													"              pm.test(\"Transfer FAILED\", function () {",
													"                throw new Error('Did not receive response');",
													"              });",
													"              // postman.setNextRequest(null)",
													"          }",
													"   });",
													"}, 3000)",
													"",
													"",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{SIMPAYER_BEARER_TOKEN}}",
													"type": "string"
												}
											]
										},
										"method": "GET",
										"header": [
											{
												"key": "Accept",
												"value": "application/vnd.interoperability.transfers+json;version=1.0"
											},
											{
												"key": "Content-Type",
												"value": "application/vnd.interoperability.transfers+json;version=1.0"
											},
											{
												"key": "Date",
												"value": "{{transferDate}}"
											},
											{
												"key": "FSPIOP-Source",
												"value": "{{SIMPAYER_NAME}}"
											},
											{
												"key": "FSPIOP-Destination",
												"value": "{{SIMPAYEE_NAME}}",
												"disabled": true
											}
										],
										"url": {
											"raw": "{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}/transfers/{{transfer_ID}}",
											"host": [
												"{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}"
											],
											"path": [
												"transfers",
												"{{transfer_ID}}"
											]
										}
									},
									"response": []
								},
								{
									"name": "Check SIMPAYER & SIMPAYEE position",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "d92641d3-deef-446b-accf-720b1b9f3250",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"});",
													"",
													"var jsonData = pm.response.json();",
													"",
													"pm.test(`${pm.environment.get('SIMPAYER_NAME')} position after transfer and after Payee ABORT should be same as position before transfer.`, function () {",
													"    ",
													"    pm.expect(jsonData[0].value).to.equal(Number(pm.environment.get(`${pm.environment.get('SIMPAYER_NAME')}PositionBeforeTransfer`)));",
													"});",
													"",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "prerequest",
											"script": {
												"id": "d585c5b9-453d-4cec-ac65-5c6a79c789e8",
												"exec": [
													"setTimeout(function () {",
													"  pm.sendRequest('www.google.com', function (err, response) {}",
													"    );",
													"}, 10000)"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
													"type": "string"
												}
											]
										},
										"method": "GET",
										"header": [
											{
												"key": "FSPIOP-Source",
												"type": "text",
												"value": "{{hub_operator}}"
											}
										],
										"url": {
											"raw": "{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}/participants/{{SIMPAYER_NAME}}/positions",
											"host": [
												"{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}"
											],
											"path": [
												"participants",
												"{{SIMPAYER_NAME}}",
												"positions"
											]
										}
									},
									"response": []
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						},
						{
							"name": "payee_abort_v1.1",
							"item": [
								{
									"name": "Store SIMPAYER position before prepare",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "fdb66917-7352-4c9a-8920-cf6e9c899306",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"});",
													"",
													"var jsonData = pm.response.json();",
													"",
													"pm.environment.set(`${pm.environment.get('SIMPAYER_NAME')}PositionBeforePrepare`, jsonData[0].value);",
													"",
													"",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "prerequest",
											"script": {
												"id": "a2009e38-f175-4cc2-87ae-24cf55c4630f",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
													"type": "string"
												}
											]
										},
										"method": "GET",
										"header": [
											{
												"key": "FSPIOP-Source",
												"type": "text",
												"value": "{{hub_operator}}"
											}
										],
										"url": {
											"raw": "{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}/participants/{{SIMPAYER_NAME}}/positions",
											"host": [
												"{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}"
											],
											"path": [
												"participants",
												"{{SIMPAYER_NAME}}",
												"positions"
											]
										}
									},
									"response": []
								},
								{
									"name": "Store NORESPONSE_SIMPAYEE position before prepare",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "9bfd73dc-8b40-4228-bf9b-3af75e9767b7",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"});",
													"",
													"var jsonData = pm.response.json();",
													"",
													"pm.environment.set(`${pm.environment.get('NORESPONSE_SIMPAYEE_NAME')}PositionBeforePrepare`, jsonData[0].value);",
													"",
													"",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "prerequest",
											"script": {
												"id": "eb5d0c70-ea0b-44c8-99c6-23d1289ae1e7",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
													"type": "string"
												}
											]
										},
										"method": "GET",
										"header": [
											{
												"key": "FSPIOP-Source",
												"type": "text",
												"value": "{{hub_operator}}"
											}
										],
										"url": {
											"raw": "{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}/participants/{{NORESPONSE_SIMPAYEE_NAME}}/positions",
											"host": [
												"{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}"
											],
											"path": [
												"participants",
												"{{NORESPONSE_SIMPAYEE_NAME}}",
												"positions"
											]
										}
									},
									"response": []
								},
								{
									"name": "Send Prepare",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "00757062-2385-4b13-bbe9-3abf3d03af7a",
												"exec": [
													"",
													"var navigator = {}; //fake a navigator object for the lib",
													"var window = {}; //fake a window object for the lib",
													"eval(pm.environment.get('jrsassign'));",
													"",
													"var uuid = require('uuid');",
													"var generatedUUID = uuid.v4();",
													"",
													"pm.environment.set('transfer_ID', generatedUUID);",
													"pm.environment.set('transferDate', (new Date()).toUTCString());",
													"pm.environment.set('transferExpiration', new Date(new Date().getTime() + 600000));",
													"pm.environment.set('transferAmount', 99);",
													"",
													"var oHeader = {alg: \"RS256\", \"FSPIOP-Source\":pm.environment.get('SIMPAYER_NAME'),\"FSPIOP-Destination\":pm.environment.get('NORESPONSE_SIMPAYEE_NAME'), \"FSPIOP-URI\":\"/transfers\", \"FSPIOP-HTTP-Method\":\"POST\", \"Date\":pm.variables.get('transferDate')};",
													"var sHeader = JSON.stringify(oHeader);",
													"console.log(`sHeader: ${sHeader}`)",
													"",
													"var objPayload = {",
													"  \"transferId\": pm.environment.get('transfer_ID'),",
													"  \"payerFsp\": pm.environment.get('SIMPAYER_NAME'),",
													"  \"payeeFsp\": pm.environment.get('NORESPONSE_SIMPAYEE_NAME'),",
													"  \"amount\": {",
													"    \"amount\": `${pm.environment.get('transferAmount')}`,",
													"    \"currency\": pm.environment.get('SIMPAYEE_CURRENCY')",
													"  },",
													"  \"expiration\": pm.environment.get('transferExpiration'),",
													"  \"ilpPacket\": pm.environment.get('validIlpPacket'),",
													"  \"condition\": pm.environment.get('validCondition')",
													"}",
													"var sPayload = JSON.stringify(objPayload)",
													"console.log(`sPayload: ${sPayload}`)",
													"pm.variables.set(\"transferRequest\", sPayload);",
													"var token = KJUR.jws.JWS.sign(\"RS256\", sHeader, sPayload, pm.environment.get('SIMPAYER_JWS_KEY'));",
													"//console.log(`token: ${token}`)",
													"",
													"// var encodedHeaders = btoa(sHeader)",
													"",
													"// var ofspiopSignature = {signature: vSignature, protectedHeader: encodedHeaders}",
													"// var token = JSON.stringify(ofspiopSignature)",
													"",
													"const [ protectedHeaderBase64, , signature ] = token.split('.');",
													"",
													"const signatureObject = {",
													"    signature: signature.replace('\"', ''),",
													"    protectedHeader: protectedHeaderBase64.replace('\"', '')",
													"};",
													"",
													"console.log(JSON.stringify(signatureObject))",
													"",
													"pm.variables.set('fspiopSignature',JSON.stringify(signatureObject))"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"id": "d5b8ee01-9936-4575-8fcc-4cafa4f4b3bb",
												"exec": [
													"pm.test(\"Status code is 202\", function () {",
													"    pm.response.to.have.status(202);",
													"});",
													"",
													"",
													"",
													"",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{SIMPAYER_BEARER_TOKEN}}",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Accept",
												"value": "application/vnd.interoperability.transfers+json;version=1",
												"type": "text"
											},
											{
												"key": "Content-Type",
												"value": "application/vnd.interoperability.transfers+json;version=1.1",
												"type": "text"
											},
											{
												"key": "Date",
												"value": "{{transferDate}}",
												"type": "text"
											},
											{
												"key": "FSPIOP-Source",
												"value": "{{SIMPAYER_NAME}}",
												"type": "text"
											},
											{
												"key": "FSPIOP-Destination",
												"value": "{{NORESPONSE_SIMPAYEE_NAME}}",
												"type": "text"
											},
											{
												"key": "FSPIOP-Signature",
												"value": "{{fspiopSignature}}",
												"type": "text"
											},
											{
												"key": "FSPIOP-URI",
												"value": "/transfers",
												"type": "text"
											},
											{
												"key": "FSPIOP-HTTP-Method",
												"value": "POST",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{{transferRequest}}"
										},
										"url": {
											"raw": "{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}/transfers",
											"host": [
												"{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}"
											],
											"path": [
												"transfers"
											]
										}
									},
									"response": []
								},
								{
									"name": "Store SIMPAYER position after Prepare",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "820644bf-fa7f-472d-8ab1-c2438ce34620",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"});",
													"",
													"var jsonData = pm.response.json();",
													"",
													"pm.environment.set(`${pm.environment.get('SIMPAYER_NAME')}PositionAfterPrepare`, jsonData[0].value);",
													"",
													"",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "prerequest",
											"script": {
												"id": "a04ebe44-d659-475a-8181-7a7835f5fc4b",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
													"type": "string"
												}
											]
										},
										"method": "GET",
										"header": [
											{
												"key": "FSPIOP-Source",
												"type": "text",
												"value": "{{hub_operator}}"
											}
										],
										"url": {
											"raw": "{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}/participants/{{SIMPAYER_NAME}}/positions",
											"host": [
												"{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}"
											],
											"path": [
												"participants",
												"{{SIMPAYER_NAME}}",
												"positions"
											]
										}
									},
									"response": []
								},
								{
									"name": "Send SIMPAYEE Abort - should do nothing but log in fulfil handler",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "06f393c0-24c4-405b-a7fb-bc087e5ac97a",
												"exec": [
													"// pm.test(\"Status code is 200\", function () {",
													"//     pm.response.to.have.status(200);",
													"// });",
													"",
													"// setTimeout(function () {",
													"//   pm.sendRequest(pm.environment.get(\"HOST_SIMULATOR\")+\"/payerfsp/correlationid/\"+pm.environment.get(\"transfer_ID\"), function (err, response) {",
													"//           if(response.responseSize !== 0) {",
													"//               var jsonData = response.json();",
													"//               pm.test(\"Response code should be ABORTED\", function () {",
													"//                 pm.expect(jsonData.transferState).to.eql('ABORTED');",
													"//               });",
													"//           } else {",
													"//               pm.test(\"Transfer FAILED\", function () {",
													"//                 throw new Error('Did not receive response');",
													"//               });",
													"              ",
													"//           }",
													"//   });",
													"// }, 5000)",
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"});"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "prerequest",
											"script": {
												"id": "df169c42-322a-4209-8f05-c456bb3582bc",
												"exec": [
													"\r",
													"pm.environment.set(\"completedTimestamp\",new Date().toISOString());\r",
													"var navigator = {}; //fake a navigator object for the lib\r",
													"var window = {}; //fake a window object for the lib\r",
													"eval(pm.environment.get('jrsassign'));\r",
													"\r",
													"var uuid = require('uuid');\r",
													"var generatedUUID = uuid.v4();\r",
													"\r",
													"pm.variables.set('transferDate', (new Date()).toUTCString());\r",
													"\r",
													"pm.environment.set(\"transferExpiration\",new Date(new Date().getTime() + 60000))\r",
													"\r",
													"var oHeader = {alg: \"RS256\", \"FSPIOP-Source\":pm.environment.get('NORESPONSE_SIMPAYEE_NAME'),\"FSPIOP-Destination\":pm.environment.get('SIMPAYER_NAME'), \"FSPIOP-URI\":`/transfers/${pm.environment.get('transfer_ID')}/error`, \"FSPIOP-HTTP-Method\":\"PUT\", \"Date\":pm.variables.get('transferDate')};\r",
													"var sHeader = JSON.stringify(oHeader);\r",
													"console.log(`sHeader: ${sHeader}`)\r",
													"\r",
													"var objPayload = {\r",
													"  \"fulfilment\": pm.environment.get('validFulfillment'),\r",
													"  \"completedTimestamp\": pm.environment.get('completedTimestamp'),\r",
													"  \"transferState\": \"ABORTED\"\r",
													"}\r",
													"\r",
													"var sPayload = JSON.stringify(objPayload)\r",
													"console.log(`sPayload: ${sPayload}`)\r",
													"pm.variables.set(\"fulfillResponse\", sPayload);\r",
													"var token = KJUR.jws.JWS.sign(\"RS256\", sHeader, sPayload, pm.environment.get('SIMPAYEE_JWS_KEY'));\r",
													"//console.log(`token: ${token}`)\r",
													"\r",
													"// var encodedHeaders = btoa(sHeader)\r",
													"\r",
													"// var ofspiopSignature = {signature: vSignature, protectedHeader: encodedHeaders}\r",
													"// var token = JSON.stringify(ofspiopSignature)\r",
													"\r",
													"const [ protectedHeaderBase64, , signature ] = token.split('.');\r",
													"\r",
													"const signatureObject = {\r",
													"    signature: signature.replace('\"', ''),\r",
													"    protectedHeader: protectedHeaderBase64.replace('\"', '')\r",
													"};\r",
													"\r",
													"console.log(JSON.stringify(signatureObject))\r",
													"\r",
													"pm.variables.set('fspiopSignature',JSON.stringify(signatureObject))"
												],
												"type": "text/javascript"
											}
										}
									],
									"protocolProfileBehavior": {
										"disabledSystemHeaders": {
											"accept": true,
											"content-type": true
										}
									},
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{NORESPONSE_SIMPAYEE_BEARER_TOKEN}}",
													"type": "string"
												}
											]
										},
										"method": "PUT",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"type": "text",
												"value": "application/vnd.interoperability.transfers+json;version=1.1"
											},
											{
												"key": "Accept",
												"value": "application/vnd.interoperability.transfers+json;version=1",
												"type": "text"
											},
											{
												"key": "Date",
												"type": "text",
												"value": "{{transferDate}}"
											},
											{
												"key": "FSPIOP-Source",
												"type": "text",
												"value": "{{NORESPONSE_SIMPAYEE_NAME}}"
											},
											{
												"key": "FSPIOP-Destination",
												"type": "text",
												"value": "{{SIMPAYER_NAME}}"
											},
											{
												"key": "FSPIOP-Signature",
												"value": "{{fspiopSignature}}",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{{fulfillResponse}}",
											"options": {
												"raw": {}
											}
										},
										"url": {
											"raw": "{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}/transfers/{{transfer_ID}}",
											"host": [
												"{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}"
											],
											"path": [
												"transfers",
												"{{transfer_ID}}"
											]
										}
									},
									"response": []
								},
								{
									"name": "Check SIMPAYER position after Abort to wrong url",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "127402dd-e363-4cb3-887f-e69341aaf703",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"});",
													"",
													"var jsonData = pm.response.json();",
													"",
													"pm.test(`${pm.environment.get('SIMPAYER_NAME')} position after Payee ABORT should be same as position after prepare.`, function () {",
													"    ",
													"    pm.expect(jsonData[0].value).to.equal(Number(pm.environment.get(`${pm.environment.get('SIMPAYER_NAME')}PositionAfterPrepare`)));",
													"});",
													"",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "prerequest",
											"script": {
												"id": "c50aa5b9-712f-4b97-8b0c-346d72c24004",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
													"type": "string"
												}
											]
										},
										"method": "GET",
										"header": [
											{
												"key": "FSPIOP-Source",
												"type": "text",
												"value": "{{hub_operator}}"
											}
										],
										"url": {
											"raw": "{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}/participants/{{SIMPAYER_NAME}}/positions",
											"host": [
												"{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}"
											],
											"path": [
												"participants",
												"{{SIMPAYER_NAME}}",
												"positions"
											]
										}
									},
									"response": []
								},
								{
									"name": "Send Fulfill-Reject",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "3499cc74-b31b-4d76-8e77-4292bdce97a1",
												"exec": [
													"pm.environment.set(\"completedTimestamp\",new Date().toISOString());\r",
													"\r",
													"var navigator = {}; //fake a navigator object for the lib\r",
													"var window = {}; //fake a window object for the lib\r",
													"eval(pm.environment.get('jrsassign'));\r",
													"pm.variables.set('transferDate', (new Date()).toUTCString());\r",
													"\r",
													"var oHeader = {alg: \"RS256\", \"FSPIOP-Source\":pm.environment.get('NORESPONSE_SIMPAYEE_NAME'),\"FSPIOP-Destination\":pm.environment.get('SIMPAYER_NAME'), \"FSPIOP-URI\":`/transfers/${pm.environment.get('transfer_ID')}/error`, \"FSPIOP-HTTP-Method\":\"PUT\", \"Date\":pm.variables.get('transferDate')};\r",
													"var sHeader = JSON.stringify(oHeader);\r",
													"console.log(`sHeader: ${sHeader}`)\r",
													"\r",
													"var objPayload = {\r",
													"\t\"errorInformation\": {\r",
													"\t\t\"errorCode\": \"5101\",\r",
													"\t\t\"errorDescription\": \"Payee transaction limit reached\",\r",
													"\t\t\"extensionList\": {\r",
													"\t\t\t\"extension\": [{\r",
													"\t\t\t\t\"key\": \"errorDetail\",\r",
													"\t\t\t\t\"value\": \"This is an abort extension\"\r",
													"\t\t\t}]\r",
													"\t\t}\r",
													"\t}\r",
													"}\r",
													"var sPayload = JSON.stringify(objPayload)\r",
													"console.log(`sPayload: ${sPayload}`)\r",
													"pm.variables.set(\"fulfillResponse\", sPayload);\r",
													"var token = KJUR.jws.JWS.sign(\"RS256\", sHeader, sPayload, pm.environment.get('NORESPONSE_SIMPAYEE_JWS_KEY'));\r",
													"//console.log(`token: ${token}`)\r",
													"\r",
													"// var encodedHeaders = btoa(sHeader)\r",
													"\r",
													"// var ofspiopSignature = {signature: vSignature, protectedHeader: encodedHeaders}\r",
													"// var token = JSON.stringify(ofspiopSignature)\r",
													"\r",
													"const [ protectedHeaderBase64, , signature ] = token.split('.');\r",
													"\r",
													"const signatureObject = {\r",
													"    signature: signature.replace('\"', ''),\r",
													"    protectedHeader: protectedHeaderBase64.replace('\"', '')\r",
													"};\r",
													"\r",
													"console.log(JSON.stringify(signatureObject))\r",
													"\r",
													"pm.variables.set('fspiopSignature',JSON.stringify(signatureObject))"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"id": "0c5fb4e1-41ea-46dc-a43b-0d8cf0445bca",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"});",
													"",
													"// setTimeout(function () {",
													"//   pm.sendRequest(pm.environment.get(\"PAYERFSP_SDK_TESTAPI_URL\")+\"/callbacks/\"+pm.environment.get(\"transfer_ID\"), function (err, response) {",
													"//           if(response.responseSize !== 0) {",
													"//               //Check headers",
													"//               var headers = response.json().headers;",
													"              ",
													"//                 pm.test(\"fspiop-source is noresponsepayeefsp\", function () {",
													"//                     pm.expect(headers['fspiop-source']).to.eql('noresponsepayeefsp');",
													"//                 });",
													"                ",
													"//                 pm.test(\"fspiop-destination is payerfsp\", function () {",
													"//                     pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('payerfsp'));",
													"//                 });",
													"                ",
													"//                 //Uncomment after JWS is implemented",
													"//                 // pm.test(\"payeefsp fspiop-signature is same as sent in the request\", function () {",
													"//                 //     pm.expect(headers['fspiop-signature']).to.eql(pm.environment.get(\"fspiop-signature\"));",
													"//                 // });",
													"                ",
													"                ",
													"//                 pm.test(\"payeefsp content-type is same as sent in the request\", function () {",
													"//                     pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.transfers+json;version=1.1');",
													"//                 });",
													"                ",
													"//                 pm.test(\"date header should not be empty\", function () {",
													"//                     pm.expect(headers['date']).to.be.not.empty;",
													"//                 });",
													"                ",
													"//                 pm.test(\"accept header should not be sent in the response\", function () {",
													"//                     pm.expect(headers['accept']).to.eql(undefined);",
													"//                 });",
													"                ",
													"//               //Check data",
													"//               var jsonData = response.json().data;",
													"//               console.log('== response ==', jsonData)",
													"//               pm.test(\"Response Error Code is 5101\", function () {",
													"//                 pm.expect(jsonData.errorInformation.errorCode).to.eql('5101');",
													"//               });",
													"              ",
													"//               pm.test(\"Response Error Desription is 'Payee transaction limit reached'\", function () {",
													"//                 pm.expect(jsonData.errorInformation.errorDescription).to.include('Payee transaction limit reached');",
													"//                 //pm.expect(jsonData.errorInformation.errorDescription).to.eql('Payee transaction limit reached');",
													"//               });",
													"              ",
													"//           } else {",
													"//               pm.test(\"Transfer FAILED\", function () {",
													"//                 throw new Error('Did not receive response');",
													"//               });",
													"              ",
													"//           }",
													"//   });",
													"// }, 5000)"
												],
												"type": "text/javascript"
											}
										}
									],
									"protocolProfileBehavior": {
										"disabledSystemHeaders": {
											"accept": true
										}
									},
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{NORESPONSE_SIMPAYEE_BEARER_TOKEN}}",
													"type": "string"
												}
											]
										},
										"method": "PUT",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"type": "text",
												"value": "application/vnd.interoperability.transfers+json;version=1.1"
											},
											{
												"key": "Accept",
												"value": "application/vnd.interoperability.transfers+json;version=1",
												"type": "text"
											},
											{
												"key": "Date",
												"type": "text",
												"value": "{{transferDate}}"
											},
											{
												"key": "FSPIOP-Source",
												"type": "text",
												"value": "{{NORESPONSE_SIMPAYEE_NAME}}"
											},
											{
												"key": "FSPIOP-Destination",
												"type": "text",
												"value": "{{SIMPAYER_NAME}}"
											},
											{
												"key": "FSPIOP-Signature",
												"value": "{{fspiopSignature}}",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{{fulfillResponse}}",
											"options": {
												"raw": {}
											}
										},
										"url": {
											"raw": "{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}/transfers/{{transfer_ID}}/error",
											"host": [
												"{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}"
											],
											"path": [
												"transfers",
												"{{transfer_ID}}",
												"error"
											]
										}
									},
									"response": []
								},
								{
									"name": "Check Transfer status - ABORTED",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "b4c4159f-e696-48f4-a86a-138b6a0c62c1",
												"exec": [
													"if (pm.environment.get('CONFIG_GENERATE_NEW_TRANSFER_UUID_ON_PREPARE') === 'true') {",
													"   var uuid = require('uuid');",
													"   var generatedUUID = uuid.v4();",
													"   pm.environment.set('transferId', generatedUUID);",
													"}",
													"",
													"if (pm.environment.get('CONFIG_GENERATE_NEW_PREPARE_DATE') === 'true') {",
													"   pm.environment.set('transferDate', (new Date()).toUTCString());",
													"}"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"id": "c00c543f-7fbf-4485-bd3a-933a4b178faf",
												"exec": [
													"pm.test(\"Status code is 202\", function () {",
													"    pm.response.to.have.status(202);",
													"});",
													"",
													"// pm.test(\"Check that Content-Type is present\", function () {",
													"//     pm.response.to.have.header(\"Content-Type\");",
													"//     pm.response.to.be.header(\"Content-Type\", \"application/vnd.interoperability.transfers+json;version=1.0\");",
													"// });",
													"",
													"setTimeout(function () {",
													"  pm.sendRequest(pm.environment.get(\"SIMPAYER_SDK_TESTAPI_URL\")+\"/callbacks/\"+pm.environment.get(\"transfer_ID\"), function (err, response) {",
													"          if(response.responseSize !== 0) {",
													"              var jsonData = response.json().data;",
													"              ",
													"              pm.test(\"Response status is ABORTED\", function () {",
													"                pm.expect(jsonData.transferState).to.eql('ABORTED');",
													"              });",
													"          } else {",
													"              pm.test(\"Transfer FAILED\", function () {",
													"                throw new Error('Did not receive response');",
													"              });",
													"              ",
													"          }",
													"   });",
													"}, 3000)",
													"",
													"",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{SIMPAYER_BEARER_TOKEN}}",
													"type": "string"
												}
											]
										},
										"method": "GET",
										"header": [
											{
												"key": "Accept",
												"value": "application/vnd.interoperability.transfers+json;version=1.0"
											},
											{
												"key": "Content-Type",
												"value": "application/vnd.interoperability.transfers+json;version=1.0"
											},
											{
												"key": "Date",
												"value": "{{transferDate}}"
											},
											{
												"key": "FSPIOP-Source",
												"value": "{{SIMPAYER_NAME}}"
											},
											{
												"key": "FSPIOP-Destination",
												"value": "{{NORESPONSE_SIMPAYEE_NAME}}"
											}
										],
										"url": {
											"raw": "{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}/transfers/{{transfer_ID}}",
											"host": [
												"{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}"
											],
											"path": [
												"transfers",
												"{{transfer_ID}}"
											]
										}
									},
									"response": []
								},
								{
									"name": "Check SIMPAYER position after Abort",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "3129f981-ae93-438f-97ed-537eb13b55fd",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"});",
													"",
													"var jsonData = pm.response.json();",
													"",
													"pm.test(`${pm.environment.get('SIMPAYER_NAME')} position after Payee ABORT should be same as position before prepare.`, function () {",
													"    ",
													"    pm.expect(jsonData[0].value).to.equal(Number(pm.environment.get(`${pm.environment.get('SIMPAYER_NAME')}PositionBeforePrepare`)));",
													"});",
													"",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "prerequest",
											"script": {
												"id": "f27b233e-7efd-4031-8a12-d52ea17a53eb",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
													"type": "string"
												}
											]
										},
										"method": "GET",
										"header": [
											{
												"key": "FSPIOP-Source",
												"type": "text",
												"value": "{{hub_operator}}"
											}
										],
										"url": {
											"raw": "{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}/participants/{{SIMPAYER_NAME}}/positions",
											"host": [
												"{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}"
											],
											"path": [
												"participants",
												"{{SIMPAYER_NAME}}",
												"positions"
											]
										}
									},
									"response": []
								},
								{
									"name": "Check NORESPONSE_SIMPAYEE position after Abort",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "88018347-7b39-47c7-86e2-4e7eee3acfbd",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"});",
													"",
													"var jsonData = pm.response.json();",
													"",
													"pm.test(`${pm.environment.get('NORESPONSE_SIMPAYEE_NAME')} position after Payee ABORT should be same as position before prepare.`, function () {",
													"    ",
													"    pm.expect(jsonData[0].value).to.equal(Number(pm.environment.get(`${pm.environment.get('NORESPONSE_SIMPAYEE_NAME')}PositionBeforePrepare`)));",
													"});",
													"",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "prerequest",
											"script": {
												"id": "6ebf4dfd-065d-4a3a-aa57-18d099a8a8e6",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
													"type": "string"
												}
											]
										},
										"method": "GET",
										"header": [
											{
												"key": "FSPIOP-Source",
												"type": "text",
												"value": "{{hub_operator}}"
											}
										],
										"url": {
											"raw": "{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}/participants/{{NORESPONSE_SIMPAYEE_NAME}}/positions",
											"host": [
												"{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}"
											],
											"path": [
												"participants",
												"{{NORESPONSE_SIMPAYEE_NAME}}",
												"positions"
											]
										}
									},
									"response": []
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						},
						{
							"name": "fulfil-reserved-v1.0",
							"item": [
								{
									"name": "Send Quote - RECEIVE",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "b69c5119-0ed9-4f90-a0d6-dc959772b5c2",
												"exec": [
													"var navigator = {}; ",
													"var window = {}; ",
													"eval(pm.environment.get('jrsassign'));",
													"",
													"",
													"var uuid = require('uuid');",
													"var generatedUUID = uuid.v4();",
													"pm.environment.set('quoteId', generatedUUID);",
													"generatedUUID = uuid.v4();",
													"pm.environment.set('transactionId', generatedUUID);",
													"",
													"pm.variables.set('quoteDate', (new Date()).toUTCString());",
													"pm.variables.set('payerName', 'PayerFirst PayerLast');",
													"",
													"pm.variables.set('expectedPayeeFirstName', 'GoldenFirst');",
													"pm.variables.set('expectedPayeeLastName', 'GoldenLast');",
													"pm.variables.set('expectedPayeeDOB', '2010-10-10');",
													"",
													"var oHeader = {alg: \"RS256\", \"FSPIOP-Source\":pm.environment.get('SIMPAYER_NAME'),\"FSPIOP-Destination\":pm.environment.get('SIMPAYEE_NAME'), \"FSPIOP-URI\":\"/quotes\", \"FSPIOP-HTTP-Method\":\"POST\", \"Date\":pm.variables.get('quoteDate')};",
													"var sHeader = JSON.stringify(oHeader);",
													"console.log(`sHeader: ${sHeader}`)",
													"",
													"var objPayload = {",
													"  \"quoteId\": pm.environment.get('quoteId'),",
													"  \"transactionId\": pm.environment.get('transactionId'),",
													"  \"payer\": {",
													"    \"partyIdInfo\": {",
													"      \"partyIdType\": \"MSISDN\",",
													"      \"partyIdentifier\": pm.environment.get('SIMPAYER_MSISDN'),",
													"      \"fspId\": pm.environment.get('SIMPAYER_NAME')",
													"    },",
													"    \"personalInfo\": {",
													"      \"complexName\": {",
													"        \"firstName\": \"Mats\",",
													"        \"lastName\": \"Hagman\"",
													"      },",
													"      \"dateOfBirth\": \"1983-10-25\"",
													"    }",
													"  },",
													"  \"payee\": {",
													"    \"partyIdInfo\": {",
													"      \"partyIdType\": \"MSISDN\",",
													"      \"partyIdentifier\": pm.environment.get('SIMPAYEE_MSISDN'),",
													"      \"fspId\": pm.environment.get('SIMPAYEE_NAME')",
													"    }",
													"  },",
													"  \"amountType\": \"RECEIVE\",",
													"  \"amount\": {",
													"    \"amount\": \"1\",",
													"    \"currency\": pm.environment.get('SIMPAYEE_CURRENCY')",
													"  },",
													"  \"transactionType\": {",
													"    \"scenario\": \"TRANSFER\",",
													"    \"initiator\": \"PAYER\",",
													"    \"initiatorType\": \"CONSUMER\"",
													"  },",
													"  \"note\": \"hej\"",
													"}",
													"",
													"var sPayload = JSON.stringify(objPayload)",
													"console.log(`sPayload: ${sPayload}`)",
													"pm.variables.set(\"quoteRequest\", sPayload);",
													"var token = KJUR.jws.JWS.sign(\"RS256\", sHeader, sPayload, pm.environment.get('SIMPAYER_JWS_KEY'));",
													"console.log(`token: ${token}`)",
													"",
													"// var encodedHeaders = btoa(sHeader)",
													"",
													"// var ofspiopSignature = {signature: vSignature, protectedHeader: encodedHeaders}",
													"// var token = JSON.stringify(ofspiopSignature)",
													"",
													"const [ protectedHeaderBase64, , signature ] = token.split('.');",
													"",
													"const signatureObject = {",
													"    signature: signature.replace('\"', ''),",
													"    protectedHeader: protectedHeaderBase64.replace('\"', '')",
													"};",
													"",
													"console.log(JSON.stringify(signatureObject))",
													"",
													"pm.variables.set('fspiopSignature',JSON.stringify(signatureObject))",
													"",
													"",
													"",
													"",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"id": "e5ac557c-9735-4183-a0c2-eec40542c995",
												"exec": [
													"pm.test(\"Status code is 202\", function () {",
													"    pm.response.to.have.status(202);",
													"});",
													"",
													"setTimeout(function () {",
													"  pm.sendRequest(pm.environment.get(\"SIMPAYEE_SDK_TESTAPI_URL\")+\"/requests/\"+pm.variables.get(\"quoteId\"), function (err, response) {",
													"          if(response.responseSize !== 0) {",
													"              ",
													"              //Check the Headers",
													"              var headers = response.json().headers;",
													"              ",
													"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-source is ${pm.environment.get('SIMPAYER_NAME')}`, function () {",
													"                    pm.expect(headers['fspiop-source']).to.eql(pm.environment.get('SIMPAYER_NAME'));",
													"                });",
													"                ",
													"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-destination is ${pm.environment.get('SIMPAYEE_NAME')}`, function () {",
													"                    pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('SIMPAYEE_NAME'));",
													"                });",
													"                ",
													"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-signature is same as sent in the request`, function () {",
													"                    pm.expect(headers['fspiop-signature']).to.eql(pm.variables.get(\"fspiopSignature\"));",
													"                });",
													"                ",
													"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} accept is same as sent in the request`, function () {",
													"                    pm.expect(headers['accept']).to.match(/application\\/vnd\\.interoperability\\.quotes\\+json;version=1(\\.\\d)?/);",
													"                });",
													"                ",
													"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} content-typeis same as sent in the request`, function () {",
													"                    pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.quotes+json;version=1.0');",
													"                });",
													"                ",
													"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-uri is /quotes`, function () {",
													"                    pm.expect(headers['fspiop-uri']).to.eql('/quotes');",
													"                });",
													"                ",
													"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-http-method is POST`, function () {",
													"                    pm.expect(headers['fspiop-http-method']).to.eql('POST');",
													"                });",
													"                ",
													"          } else {",
													"              pm.test(\"Quote FAILED\", function () {",
													"                throw new Error('Did not receive request on payee side');",
													"              });",
													"              // postman.setNextRequest(null)",
													"          }",
													"   });",
													"}, pm.environment.get(\"SET_TIMEOUT_QUOTES\"))",
													"",
													"setTimeout(function () {",
													"  pm.sendRequest(pm.environment.get(\"SIMPAYER_SDK_TESTAPI_URL\")+\"/callbacks/\"+pm.environment.get(\"quoteId\"), function (err, response) {",
													"      if(response.responseSize !== 0) {",
													"          //Checking headers",
													"            var headers = response.json().headers;",
													"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-source is ${pm.environment.get('SIMPAYEE_NAME')}`, function () {",
													"                pm.expect(headers['fspiop-source']).to.eql(pm.environment.get('SIMPAYEE_NAME'));",
													"            });",
													"            ",
													"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-destination is ${pm.environment.get('SIMPAYER_NAME')}`, function () {",
													"                pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('SIMPAYER_NAME'));",
													"            });",
													"            ",
													"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} content-type should be application/vnd.interoperability.quotes+json;version=1.0`, function () {",
													"                pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.quotes+json;version=1.0');",
													"            });",
													"            ",
													"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} accept is empty`, function () {",
													"                pm.expect(headers['accept']).to.eql(undefined);",
													"            });",
													"            ",
													"            ",
													"            ",
													"            var {signature,protectedHeader} = JSON.parse(headers['fspiop-signature'])",
													"            // var strData = JSON.stringify(response.json().data)",
													"            // const token = `${protectedHeader}.${btoa(strData)}.${signature}`",
													"            // console.log(`token: ${token}`)",
													"            // var isValid = KJUR.jws.JWS.verify(token, pm.environment.get('goldenpayeefspJWSPubKey'), {alg: ['RS256']})",
													"            // console.log(`isValid: ${isValid}`)",
													"            // pm.test(\"Check if the response is JWS valid\", function () {",
													"            //     pm.expect(isValid).to.eql(true);",
													"            // });",
													"            ",
													"            //Validate protected header inside Signature",
													"            var decodedProtectedHeaders = JSON.parse(atob(protectedHeader))",
													"            console.log('decodedProtectedHeaders:',decodedProtectedHeaders)",
													"            ",
													"            pm.test(\"FSPIOP-Signature Protected Header alg to be RS256\", function () {",
													"                pm.expect(decodedProtectedHeaders['alg']).to.eql('RS256');",
													"            });",
													"            pm.test(\"FSPIOP-Signature Protected Header FSPIOP-URI to be /quotes/\"+pm.environment.get(\"quoteId\"), function () {",
													"                pm.expect(decodedProtectedHeaders['FSPIOP-URI']).to.eql('/quotes/'+pm.environment.get(\"quoteId\"));",
													"            });",
													"            ",
													"",
													"            pm.test(\"FSPIOP-Signature Protected Header FSPIOP-HTTP-Method to be PUT\", function () {",
													"                pm.expect(decodedProtectedHeaders['FSPIOP-HTTP-Method']).to.eql('PUT');",
													"            });",
													"            pm.test(`FSPIOP-Signature Protected Header FSPIOP-Source to be ${pm.environment.get('SIMPAYEE_NAME')}`, function () {",
													"                pm.expect(decodedProtectedHeaders['FSPIOP-Source']).to.eql(pm.environment.get('SIMPAYEE_NAME'));",
													"            });",
													"            pm.test(`FSPIOP-Signature Protected Header FSPIOP-Destination to be ${pm.environment.get('SIMPAYER_NAME')}`, function () {",
													"                pm.expect(decodedProtectedHeaders['FSPIOP-Destination']).to.eql(pm.environment.get('SIMPAYER_NAME'));",
													"            });",
													"            pm.test(\"FSPIOP-Signature Protected Header Date is present\", function () {",
													"                pm.expect(decodedProtectedHeaders['Date']).to.eql(headers['date']);",
													"            });",
													"           ",
													"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} FSPIOP-URI to be /quotes/${pm.environment.get(\"quoteId\")}`, function () {",
													"                pm.expect(headers['fspiop-uri']).to.eql(`/quotes/${pm.environment.get(\"quoteId\")}`);",
													"            });",
													"            ",
													"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-http-method is PUT`, function () {",
													"                pm.expect(headers['fspiop-http-method']).to.eql('PUT');",
													"            });",
													"            ",
													"            var jsonData = response.json().data;",
													"            ",
													"            pm.test(\"Response quoteId is  null\", function () {",
													"                pm.expect(jsonData.quoteId).to.eql(undefined);",
													"                ",
													"            });",
													"          ",
													"            pm.test(\"Response ilpPacket is not null\", function () {",
													"                pm.expect(jsonData.ilpPacket).not.equal(undefined);",
													"                pm.environment.set(\"ilpPacket\", jsonData.ilpPacket);",
													"            });",
													"       ",
													"           pm.test(\"Response condition is not null\", function () {",
													"               pm.expect(jsonData.condition).not.equal(undefined);",
													"               pm.environment.set(\"condition\", jsonData.condition);",
													"           });",
													"      } else {",
													"          pm.test(\"Quote FAILED\", function () {",
													"            throw new Error('Did not receive response on Payer side');",
													"           });",
													"           // postman.setNextRequest(null);",
													"      }",
													"       ",
													"   });",
													"}, pm.environment.get(\"SET_TIMEOUT_QUOTES\"))",
													"",
													"",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{SIMPAYER_BEARER_TOKEN}}",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Accept",
												"value": "application/vnd.interoperability.quotes+json;version=1.0"
											},
											{
												"key": "Content-Type",
												"value": "application/vnd.interoperability.quotes+json;version=1.0"
											},
											{
												"key": "Date",
												"value": "{{quoteDate}}"
											},
											{
												"key": "FSPIOP-Source",
												"value": "{{SIMPAYER_NAME}}"
											},
											{
												"key": "FSPIOP-Destination",
												"value": "{{SIMPAYEE_NAME}}"
											},
											{
												"key": "FSPIOP-Signature",
												"type": "text",
												"value": "{{fspiopSignature}}"
											},
											{
												"key": "FSPIOP-HTTP-Method",
												"type": "text",
												"value": "POST"
											},
											{
												"key": "FSPIOP-URI",
												"type": "text",
												"value": "/quotes"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{{quoteRequest}}"
										},
										"url": {
											"raw": "{{HOST_QUOTING_SERVICE}}/quotes",
											"host": [
												"{{HOST_QUOTING_SERVICE}}"
											],
											"path": [
												"quotes"
											]
										}
									},
									"response": []
								},
								{
									"name": "Send Transfer-Prepare",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "13b60d0e-d5b0-4068-b02e-e386d2376e5b",
												"exec": [
													"var navigator = {}; //fake a navigator object for the lib\r",
													"var window = {}; //fake a window object for the lib\r",
													"eval(pm.environment.get('jrsassign'));\r",
													"\r",
													"var uuid = require('uuid');\r",
													"var generatedUUID = uuid.v4();\r",
													"pm.environment.set('transfer_ID', pm.environment.get('transactionId'));\r",
													"\r",
													"\r",
													"pm.variables.set('transferDate', (new Date()).toUTCString());\r",
													"\r",
													"pm.environment.set(\"transferExpiration\",new Date(new Date().getTime() + 60000))\r",
													"\r",
													"var oHeader = {alg: \"RS256\", \"FSPIOP-Source\":pm.environment.get('SIMPAYER_NAME'),\"FSPIOP-Destination\":pm.environment.get('NORESPONSE_SIMPAYEE_NAME'), \"FSPIOP-URI\":\"/transfers\", \"FSPIOP-HTTP-Method\":\"POST\", \"Date\":pm.variables.get('transferDate')};\r",
													"var sHeader = JSON.stringify(oHeader);\r",
													"console.log(`sHeader: ${sHeader}`)\r",
													"\r",
													"var objPayload = {\r",
													"  \"transferId\": pm.environment.get('transfer_ID'),\r",
													"  \"payerFsp\": pm.environment.get('SIMPAYER_NAME'),\r",
													"  \"payeeFsp\": pm.environment.get('NORESPONSE_SIMPAYEE_NAME'),\r",
													"  \"amount\": {\r",
													"    \"amount\": \"1\",\r",
													"    \"currency\": pm.environment.get('SIMPAYEE_CURRENCY')\r",
													"  },\r",
													"  \"expiration\": pm.environment.get('transferExpiration'),\r",
													"  \"ilpPacket\": pm.environment.get('validIlpPacket'),\r",
													"  \"condition\": pm.environment.get('validCondition')\r",
													"}\r",
													"var sPayload = JSON.stringify(objPayload)\r",
													"console.log(`sPayload: ${sPayload}`)\r",
													"pm.variables.set(\"transferRequest\", sPayload);\r",
													"var token = KJUR.jws.JWS.sign(\"RS256\", sHeader, sPayload, pm.environment.get('SIMPAYER_JWS_KEY'));\r",
													"//console.log(`token: ${token}`)\r",
													"\r",
													"// var encodedHeaders = btoa(sHeader)\r",
													"\r",
													"// var ofspiopSignature = {signature: vSignature, protectedHeader: encodedHeaders}\r",
													"// var token = JSON.stringify(ofspiopSignature)\r",
													"\r",
													"const [ protectedHeaderBase64, , signature ] = token.split('.');\r",
													"\r",
													"const signatureObject = {\r",
													"    signature: signature.replace('\"', ''),\r",
													"    protectedHeader: protectedHeaderBase64.replace('\"', '')\r",
													"};\r",
													"\r",
													"console.log(JSON.stringify(signatureObject))\r",
													"\r",
													"pm.variables.set('fspiopSignature',JSON.stringify(signatureObject))"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"id": "94abf0cf-3a2d-40d0-8911-db75b80dcc4e",
												"exec": [
													"pm.test(\"Status code is 202\", function () {",
													"    pm.response.to.have.status(202);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{SIMPAYER_BEARER_TOKEN}}",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Accept",
												"value": "application/vnd.interoperability.transfers+json;version=1.0",
												"type": "text"
											},
											{
												"key": "Content-Type",
												"value": "application/vnd.interoperability.transfers+json;version=1.0",
												"type": "text"
											},
											{
												"key": "Date",
												"value": "{{transferDate}}",
												"type": "text"
											},
											{
												"key": "FSPIOP-Source",
												"value": "{{SIMPAYER_NAME}}",
												"type": "text"
											},
											{
												"key": "FSPIOP-Destination",
												"value": "{{NORESPONSE_SIMPAYEE_NAME}}",
												"type": "text"
											},
											{
												"key": "FSPIOP-Signature",
												"value": "{{fspiopSignature}}",
												"type": "text"
											},
											{
												"key": "FSPIOP-URI",
												"value": "/transfers",
												"type": "text"
											},
											{
												"key": "FSPIOP-HTTP-Method",
												"value": "POST",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{{transferRequest}}"
										},
										"url": {
											"raw": "{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}/transfers",
											"host": [
												"{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}"
											],
											"path": [
												"transfers"
											]
										}
									},
									"response": []
								},
								{
									"name": "Send Fulfill-Reserved",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "49c982a2-7b7b-4701-9bdd-d711b1321984",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"});",
													"",
													"let retries = 0;",
													"const maxRetries = 7;",
													"",
													"const runTest = () => {",
													"    setTimeout(function () {",
													"        pm.sendRequest(pm.environment.get(\"SIMPAYER_SDK_TESTAPI_URL\") + \"/callbacks/\" + pm.environment.get(\"transfer_ID\"), function (err, response) {",
													"            if (response.responseSize !== 0) {",
													"                //Check headers",
													"                var headers = response.json().headers;",
													"",
													"                pm.test(\"fspiop-source is source\", function () {",
													"                    pm.expect(headers['fspiop-source']).to.eql('switch');",
													"                });",
													"",
													"                pm.test(`fspiop-destination is ${pm.environment.get('SIMPAYER_NAME')}`, function () {",
													"                    pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('SIMPAYER_NAME'));",
													"                });",
													"",
													"                //Uncomment after JWS is implemented",
													"                // pm.test(\"payeefsp fspiop-signature is same as sent in the request\", function () {",
													"                //     pm.expect(headers['fspiop-signature']).to.eql(pm.environment.get(\"fspiop-signature\"));",
													"                // });",
													"",
													"",
													"                pm.test(`${pm.environment.get('SIMPAYER_NAME')} content-type is same as sent in the request`, function () {",
													"                    pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.transfers+json;version=1.0');",
													"                });",
													"",
													"                pm.test(\"date header should not be empty\", function () {",
													"                    pm.expect(headers['date']).to.be.not.empty;",
													"                });",
													"",
													"                pm.test(\"accept header should be sent in the response\", function () {",
													"                    pm.expect(headers['accept']).to.eql('application/vnd.interoperability.transfers+json;version=1.0');",
													"                });",
													"",
													"                //Check data",
													"                var jsonData = response.json().data;",
													"                pm.test(\"Response should be timeout error information\", function () {",
													"                    pm.expect(jsonData).to.deep.eql({",
													"                        errorInformation: {",
													"                            errorCode: \"3300\",",
													"                            errorDescription: \"Generic expired error\"",
													"                        }",
													"                    });",
													"                });",
													"            } else {",
													"                if (retries < maxRetries) {",
													"                    console.log('retrying...', ++retries)",
													"                    runTest()",
													"                    return;",
													"                }",
													"                pm.test(\"Transfer FAILED\", function () {",
													"                    throw new Error('Did not receive response');",
													"                });",
													"            }",
													"        }",
													"        );",
													"    }, pm.environment.get(\"SET_TIMEOUT_TRANSFERS\"))",
													"}",
													"runTest()",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "prerequest",
											"script": {
												"id": "c406befa-1439-43e2-9d45-6537cf34cba6",
												"exec": [
													"pm.environment.set(\"completedTimestamp\",new Date().toISOString());",
													"var navigator = {}; //fake a navigator object for the lib",
													"var window = {}; //fake a window object for the lib",
													"eval(pm.environment.get('jrsassign'));",
													"",
													"var oHeader = {alg: \"RS256\", \"FSPIOP-Source\":pm.environment.get('NORESPONSE_SIMPAYEE_NAME'),\"FSPIOP-Destination\":pm.environment.get('SIMPAYER_NAME'), \"FSPIOP-URI\":`/transfers/${pm.environment.get('transfer_ID')}`, \"FSPIOP-HTTP-Method\":\"PUT\", \"Date\":pm.variables.get('transferDate')};",
													"var sHeader = JSON.stringify(oHeader);",
													"console.log(`sHeader: ${sHeader}`)",
													"",
													"var objPayload = {",
													"  \"fulfilment\": pm.environment.get('validFulfillment'),",
													"  \"transferState\": \"RESERVED\"",
													"}",
													"",
													"var sPayload = JSON.stringify(objPayload)",
													"console.log(`sPayload: ${sPayload}`)",
													"pm.variables.set(\"transferResponse\", sPayload);",
													"var token = KJUR.jws.JWS.sign(\"RS256\", sHeader, sPayload, pm.environment.get('NORESPONSE_SIMPAYEE_JWS_KEY'));",
													"//console.log(`token: ${token}`)",
													"",
													"// var encodedHeaders = btoa(sHeader)",
													"",
													"// var ofspiopSignature = {signature: vSignature, protectedHeader: encodedHeaders}",
													"// var token = JSON.stringify(ofspiopSignature)",
													"",
													"const [ protectedHeaderBase64, , signature ] = token.split('.');",
													"",
													"const signatureObject = {",
													"    signature: signature.replace('\"', ''),",
													"    protectedHeader: protectedHeaderBase64.replace('\"', '')",
													"};",
													"",
													"console.log(JSON.stringify(signatureObject))",
													"",
													"pm.variables.set('fspiopSignature',JSON.stringify(signatureObject))"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{NORESPONSE_SIMPAYEE_BEARER_TOKEN}}",
													"type": "string"
												}
											]
										},
										"method": "PUT",
										"header": [
											{
												"key": "Accept",
												"value": "application/vnd.interoperability.transfers+json;version=1.0",
												"type": "text"
											},
											{
												"key": "Content-Type",
												"value": "application/vnd.interoperability.transfers+json;version=1.0",
												"type": "text"
											},
											{
												"key": "Date",
												"value": "{{transferDate}}",
												"type": "text"
											},
											{
												"key": "FSPIOP-Source",
												"value": "{{NORESPONSE_SIMPAYEE_NAME}}",
												"type": "text"
											},
											{
												"key": "FSPIOP-Destination",
												"value": "{{SIMPAYER_NAME}}",
												"type": "text"
											},
											{
												"key": "FSPIOP-Signature",
												"value": "{{fspiopSignature}}",
												"type": "text"
											},
											{
												"key": "FSPIOP-URI",
												"value": "/transfers/{{transfer_ID}}",
												"type": "text"
											},
											{
												"key": "FSPIOP-HTTP-Method",
												"value": "PUT",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{{transferResponse}}"
										},
										"url": {
											"raw": "{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}/transfers/{{transfer_ID}}",
											"host": [
												"{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}"
											],
											"path": [
												"transfers",
												"{{transfer_ID}}"
											]
										}
									},
									"response": []
								},
								{
									"name": "Check Transfer status",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "7b06b73a-6259-4d01-aa43-195a40b2f705",
												"exec": [
													"",
													"   pm.variables.set('transferDate', (new Date()).toUTCString());",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"id": "77cc12b2-41d4-456b-a20d-0bcddf6bcfd3",
												"exec": [
													"pm.test(\"Status code is 202\", function () {",
													"    pm.response.to.have.status(202);",
													"});",
													"",
													"setTimeout(function () {",
													"  pm.sendRequest(pm.environment.get(\"SIMPAYER_SDK_TESTAPI_URL\")+\"/callbacks/\"+pm.environment.get(\"transfer_ID\"), function (err, response) {",
													"          if(response.responseSize !== 0) {",
													"            //Check headers",
													"              var headers = response.json().headers;",
													"              ",
													"                pm.test(\"fspiop-source is switch\", function () {",
													"                    pm.expect(headers['fspiop-source']).to.eql('switch');",
													"                });",
													"                ",
													"                pm.test(`fspiop-destination is ${pm.environment.get('SIMPAYER_NAME')}`, function () {",
													"                    pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('SIMPAYER_NAME'));",
													"                });",
													"                ",
													"                pm.test(\" content-type is same as sent in the request\", function () {",
													"                    pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.transfers+json;version=1.0');",
													"                });",
													"                ",
													"                pm.test(\"date header should not be empty\", function () {",
													"                    pm.expect(headers['date']).to.be.not.empty;",
													"                });",
													"                ",
													"                pm.test(\"accept header should not be sent in the response\", function () {",
													"                    pm.expect(headers['accept']).to.eql(undefined);",
													"                });",
													"                ",
													"                pm.test(\"fspiop-signature is not null\", function () {",
													"                    pm.expect(headers['fspiop-signature']).not.eql(undefined);",
													"                });",
													"                ",
													"                pm.test(\" fspiop-http-method is PUT\", function () {",
													"                    pm.expect(headers['fspiop-http-method']).to.eql('PUT');",
													"                });",
													"                ",
													"                pm.test(` fspiop-uri is /transfers/${pm.environment.get('transfer_ID')}`, function () {",
													"                    pm.expect(headers['fspiop-uri']).to.eql(`/transfers/${pm.environment.get('transfer_ID')}`);",
													"                });",
													"                ",
													"             //Check data    ",
													"              var jsonData = response.json().data;",
													"              pm.test(\"Response transferState should be ABORTED\", function () {",
													"                pm.expect(jsonData.transferState).to.eql('ABORTED');",
													"              });",
													"          } else {",
													"              pm.test(\"Transfer FAILED\", function () {",
													"                throw new Error('Did not receive response on payer side');",
													"              });",
													"          }",
													"   });",
													"}, pm.environment.get(\"SET_TIMEOUT_TRANSFERS\"))",
													"",
													"",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{SIMPAYER_BEARER_TOKEN}}",
													"type": "string"
												}
											]
										},
										"method": "GET",
										"header": [
											{
												"key": "Accept",
												"value": "application/vnd.interoperability.transfers+json;version=1.0"
											},
											{
												"key": "Content-Type",
												"value": "application/vnd.interoperability.transfers+json;version=1.0"
											},
											{
												"key": "Date",
												"value": "{{transferDate}}"
											},
											{
												"key": "FSPIOP-Source",
												"value": "{{SIMPAYER_NAME}}"
											},
											{
												"key": "FSPIOP-Destination",
												"value": "",
												"disabled": true
											}
										],
										"url": {
											"raw": "{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}/transfers/{{transfer_ID}}",
											"host": [
												"{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}"
											],
											"path": [
												"transfers",
												"{{transfer_ID}}"
											]
										}
									},
									"response": []
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						}
					],
					"description": "Author: Sridevi Miriyala",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "de5a294f-079d-415e-8ef2-cdff319ab4b1",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "91a943d6-8e61-4754-9200-b4a3d06a0ca7",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				},
				{
					"name": "duplicate_handling",
					"item": [
						{
							"name": "transfers",
							"item": [
								{
									"name": "original_transfer_at_committed",
									"item": [
										{
											"name": "Send Quote - RECEIVE",
											"event": [
												{
													"listen": "prerequest",
													"script": {
														"id": "8062f3ab-217d-4b47-b72d-b24c87d316c3",
														"exec": [
															"var navigator = {}; ",
															"var window = {}; ",
															"eval(pm.environment.get('jrsassign'));",
															"",
															"",
															"var uuid = require('uuid');",
															"var generatedUUID = uuid.v4();",
															"pm.environment.set('quoteId', generatedUUID);",
															"generatedUUID = uuid.v4();",
															"pm.environment.set('transactionId', generatedUUID);",
															"",
															"pm.variables.set('quoteDate', (new Date()).toUTCString());",
															"pm.variables.set('payerName', 'PayerFirst PayerLast');",
															"",
															"pm.variables.set('expectedPayeeFirstName', 'GoldenFirst');",
															"pm.variables.set('expectedPayeeLastName', 'GoldenLast');",
															"pm.variables.set('expectedPayeeDOB', '2010-10-10');",
															"",
															"var oHeader = {alg: \"RS256\", \"FSPIOP-Source\": pm.environment.get('SIMPAYER_NAME'),\"FSPIOP-Destination\":pm.environment.get('SIMPAYEE_NAME'), \"FSPIOP-URI\":\"/quotes\", \"FSPIOP-HTTP-Method\":\"POST\", \"Date\":pm.variables.get('quoteDate')};",
															"var sHeader = JSON.stringify(oHeader);",
															"console.log(`sHeader: ${sHeader}`)",
															"",
															"var objPayload = {",
															"  \"quoteId\": pm.environment.get('quoteId'),",
															"  \"transactionId\": pm.environment.get('transactionId'),",
															"  \"payer\": {",
															"    \"partyIdInfo\": {",
															"      \"partyIdType\": \"MSISDN\",",
															"      \"partyIdentifier\": pm.environment.get('SIMPAYER_MSISDN'),",
															"      \"fspId\": pm.environment.get('SIMPAYER_NAME')",
															"    },",
															"    \"personalInfo\": {",
															"      \"complexName\": {",
															"        \"firstName\": \"Mats\",",
															"        \"lastName\": \"Hagman\"",
															"      },",
															"      \"dateOfBirth\": \"1983-10-25\"",
															"    }",
															"  },",
															"  \"payee\": {",
															"    \"partyIdInfo\": {",
															"      \"partyIdType\": \"MSISDN\",",
															"      \"partyIdentifier\": pm.environment.get('SIMPAYEE_MSISDN'),",
															"      \"fspId\": pm.environment.get('SIMPAYEE_NAME')",
															"    }",
															"  },",
															"  \"amountType\": \"RECEIVE\",",
															"  \"amount\": {",
															"    \"amount\": \"1\",",
															"    \"currency\": pm.environment.get('SIMPAYEE_CURRENCY')",
															"  },",
															"  \"transactionType\": {",
															"    \"scenario\": \"TRANSFER\",",
															"    \"initiator\": \"PAYER\",",
															"    \"initiatorType\": \"CONSUMER\"",
															"  },",
															"  \"note\": \"hej\"",
															"}",
															"",
															"var sPayload = JSON.stringify(objPayload)",
															"console.log(`sPayload: ${sPayload}`)",
															"pm.variables.set(\"quoteRequest\", sPayload);",
															"var token = KJUR.jws.JWS.sign(\"RS256\", sHeader, sPayload, pm.environment.get('SIMPAYER_JWS_KEY'));",
															"console.log(`token: ${token}`)",
															"",
															"// var encodedHeaders = btoa(sHeader)",
															"",
															"// var ofspiopSignature = {signature: vSignature, protectedHeader: encodedHeaders}",
															"// var token = JSON.stringify(ofspiopSignature)",
															"",
															"const [ protectedHeaderBase64, , signature ] = token.split('.');",
															"",
															"const signatureObject = {",
															"    signature: signature.replace('\"', ''),",
															"    protectedHeader: protectedHeaderBase64.replace('\"', '')",
															"};",
															"",
															"console.log(JSON.stringify(signatureObject))",
															"",
															"pm.variables.set('fspiopSignature',JSON.stringify(signatureObject))",
															"",
															"",
															"",
															"",
															""
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "test",
													"script": {
														"id": "93c70d2a-1a52-48c4-aeb9-5697684caa8b",
														"exec": [
															"pm.test(\"Status code is 202\", function () {",
															"    pm.response.to.have.status(202);",
															"});",
															"",
															"setTimeout(function () {",
															"  pm.sendRequest(pm.environment.get(\"SIMPAYEE_SDK_TESTAPI_URL\")+\"/requests/\"+pm.variables.get(\"quoteId\"), function (err, response) {",
															"          if(response.responseSize !== 0) {",
															"              ",
															"              //Check the Headers",
															"              var headers = response.json().headers;",
															"              ",
															"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-source is ${pm.environment.get('SIMPAYER_NAME')}`, function () {",
															"                    pm.expect(headers['fspiop-source']).to.eql(pm.environment.get('SIMPAYER_NAME'));",
															"                });",
															"                ",
															"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-destination is ${pm.environment.get('SIMPAYEE_NAME')}`, function () {",
															"                    pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('SIMPAYEE_NAME'));",
															"                });",
															"                ",
															"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-signature is same as sent in the request`, function () {",
															"                    pm.expect(headers['fspiop-signature']).to.eql(pm.variables.get(\"fspiopSignature\"));",
															"                });",
															"                ",
															"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} accept is same as sent in the request`, function () {",
															"                    pm.expect(headers['accept']).to.match(/application\\/vnd\\.interoperability\\.quotes\\+json;version=1(\\.\\d)?/);",
															"                });",
															"                ",
															"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} content-typeis same as sent in the request`, function () {",
															"                    pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.quotes+json;version=1.0');",
															"                });",
															"                ",
															"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-uri is /quotes`, function () {",
															"                    pm.expect(headers['fspiop-uri']).to.eql('/quotes');",
															"                });",
															"                ",
															"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-http-method is POST`, function () {",
															"                    pm.expect(headers['fspiop-http-method']).to.eql('POST');",
															"                });",
															"                ",
															"          } else {",
															"              pm.test(\"Quote FAILED\", function () {",
															"                throw new Error('Did not receive request on payee side');",
															"              });",
															"              // postman.setNextRequest(null)",
															"          }",
															"   });",
															"}, pm.environment.get(\"SET_TIMEOUT_QUOTES\"))",
															"",
															"setTimeout(function () {",
															"  pm.sendRequest(pm.environment.get(\"SIMPAYER_SDK_TESTAPI_URL\")+\"/callbacks/\"+pm.environment.get(\"quoteId\"), function (err, response) {",
															"      if(response.responseSize !== 0) {",
															"          //Checking headers",
															"            var headers = response.json().headers;",
															"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-source is ${pm.environment.get('SIMPAYEE_NAME')}`, function () {",
															"                pm.expect(headers['fspiop-source']).to.eql(pm.environment.get('SIMPAYEE_NAME'));",
															"            });",
															"            ",
															"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-destination is ${pm.environment.get('SIMPAYER_NAME')}`, function () {",
															"                pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('SIMPAYER_NAME'));",
															"            });",
															"            ",
															"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} content-type should be application/vnd.interoperability.quotes+json;version=1.0`, function () {",
															"                pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.quotes+json;version=1.0');",
															"            });",
															"            ",
															"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} accept is empty`, function () {",
															"                pm.expect(headers['accept']).to.eql(undefined);",
															"            });",
															"            ",
															"            ",
															"            ",
															"            var {signature,protectedHeader} = JSON.parse(headers['fspiop-signature'])",
															"            // var strData = JSON.stringify(response.json().data)",
															"            // const token = `${protectedHeader}.${btoa(strData)}.${signature}`",
															"            // console.log(`token: ${token}`)",
															"            // var isValid = KJUR.jws.JWS.verify(token, pm.environment.get('goldenpayeefspJWSPubKey'), {alg: ['RS256']})",
															"            // console.log(`isValid: ${isValid}`)",
															"            // pm.test(\"Check if the response is JWS valid\", function () {",
															"            //     pm.expect(isValid).to.eql(true);",
															"            // });",
															"            ",
															"            //Validate protected header inside Signature",
															"            var decodedProtectedHeaders = JSON.parse(atob(protectedHeader))",
															"            console.log('decodedProtectedHeaders:',decodedProtectedHeaders)",
															"            ",
															"            pm.test(\"FSPIOP-Signature Protected Header alg to be RS256\", function () {",
															"                pm.expect(decodedProtectedHeaders['alg']).to.eql('RS256');",
															"            });",
															"            pm.test(\"FSPIOP-Signature Protected Header FSPIOP-URI to be /quotes/\"+pm.environment.get(\"quoteId\"), function () {",
															"                pm.expect(decodedProtectedHeaders['FSPIOP-URI']).to.eql('/quotes/'+pm.environment.get(\"quoteId\"));",
															"            });",
															"            ",
															"",
															"            pm.test(\"FSPIOP-Signature Protected Header FSPIOP-HTTP-Method to be PUT\", function () {",
															"                pm.expect(decodedProtectedHeaders['FSPIOP-HTTP-Method']).to.eql('PUT');",
															"            });",
															"            pm.test(`FSPIOP-Signature Protected Header FSPIOP-Source to be ${pm.environment.get('SIMPAYEE_NAME')}`, function () {",
															"                pm.expect(decodedProtectedHeaders['FSPIOP-Source']).to.eql(pm.environment.get('SIMPAYEE_NAME'));",
															"            });",
															"            pm.test(`FSPIOP-Signature Protected Header FSPIOP-Destination to be ${pm.environment.get('SIMPAYER_NAME')}`, function () {",
															"                pm.expect(decodedProtectedHeaders['FSPIOP-Destination']).to.eql(pm.environment.get('SIMPAYER_NAME'));",
															"            });",
															"            pm.test(\"FSPIOP-Signature Protected Header Date is present\", function () {",
															"                pm.expect(decodedProtectedHeaders['Date']).to.eql(headers['date']);",
															"            });",
															"           ",
															"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} FSPIOP-URI to be /quotes/${pm.environment.get(\"quoteId\")}`, function () {",
															"                pm.expect(headers['fspiop-uri']).to.eql(`/quotes/${pm.environment.get(\"quoteId\")}`);",
															"            });",
															"            ",
															"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-http-method is PUT`, function () {",
															"                pm.expect(headers['fspiop-http-method']).to.eql('PUT');",
															"            });",
															"            ",
															"            var jsonData = response.json().data;",
															"            ",
															"            pm.test(\"Response quoteId is  null\", function () {",
															"                pm.expect(jsonData.quoteId).to.eql(undefined);",
															"                ",
															"            });",
															"          ",
															"            pm.test(\"Response ilpPacket is not null\", function () {",
															"                pm.expect(jsonData.ilpPacket).not.equal(undefined);",
															"                pm.environment.set(\"ilpPacket\", jsonData.ilpPacket);",
															"            });",
															"       ",
															"           pm.test(\"Response condition is not null\", function () {",
															"               pm.expect(jsonData.condition).not.equal(undefined);",
															"               pm.environment.set(\"condition\", jsonData.condition);",
															"           });",
															"      } else {",
															"          pm.test(\"Quote FAILED\", function () {",
															"            throw new Error('Did not receive response on Payer side');",
															"           });",
															"           // postman.setNextRequest(null);",
															"      }",
															"       ",
															"   });",
															"}, pm.environment.get(\"SET_TIMEOUT_QUOTES\"))",
															"",
															"",
															""
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"auth": {
													"type": "bearer",
													"bearer": [
														{
															"key": "token",
															"value": "{{SIMPAYER_BEARER_TOKEN}}",
															"type": "string"
														}
													]
												},
												"method": "POST",
												"header": [
													{
														"key": "Accept",
														"value": "application/vnd.interoperability.quotes+json;version=1.0"
													},
													{
														"key": "Content-Type",
														"value": "application/vnd.interoperability.quotes+json;version=1.0"
													},
													{
														"key": "Date",
														"value": "{{quoteDate}}"
													},
													{
														"key": "FSPIOP-Source",
														"value": "{{SIMPAYER_NAME}}"
													},
													{
														"key": "FSPIOP-Destination",
														"value": "{{SIMPAYEE_NAME}}"
													},
													{
														"key": "FSPIOP-Signature",
														"type": "text",
														"value": "{{fspiopSignature}}"
													},
													{
														"key": "FSPIOP-HTTP-Method",
														"type": "text",
														"value": "POST"
													},
													{
														"key": "FSPIOP-URI",
														"type": "text",
														"value": "/quotes"
													}
												],
												"body": {
													"mode": "raw",
													"raw": "{{quoteRequest}}"
												},
												"url": {
													"raw": "{{HOST_QUOTING_SERVICE}}/quotes",
													"host": [
														"{{HOST_QUOTING_SERVICE}}"
													],
													"path": [
														"quotes"
													]
												}
											},
											"response": []
										},
										{
											"name": "Send Transfer",
											"event": [
												{
													"listen": "test",
													"script": {
														"id": "2e5ccfc2-11d8-412d-a36e-945a10b9f32a",
														"exec": [
															"pm.test(\"Status code is 202\", function () {\r",
															"    pm.response.to.have.status(202);\r",
															"});\r",
															"\r",
															"// //Check the request that Switch forwards to payeefsp\r",
															"setTimeout(function () {\r",
															"  pm.sendRequest(pm.environment.get(\"SIMPAYEE_SDK_TESTAPI_URL\")+\"/requests/\"+pm.environment.get(\"transfer_ID\"), function (err, response) {\r",
															"          if(response.responseSize !== 0) {\r",
															"              \r",
															"              //Check the Headers\r",
															"              var headers = response.json().headers;\r",
															"              \r",
															"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-source is ${pm.environment.get('SIMPAYER_NAME')}`, function () {\r",
															"                    pm.expect(headers['fspiop-source']).to.eql(pm.environment.get('SIMPAYER_NAME'));\r",
															"                });\r",
															"                \r",
															"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-destination is ${pm.environment.get('SIMPAYEE_NAME')}`, function () {\r",
															"                    pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('SIMPAYEE_NAME'));\r",
															"                });\r",
															"                \r",
															"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} content-typeis same as sent in the request`, function () {\r",
															"                    pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.transfers+json;version=1.0');\r",
															"                });\r",
															"                \r",
															"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} accept is same as sent in the request`, function () {\r",
															"                    pm.expect(headers['accept']).to.match(/application\\/vnd\\.interoperability\\.transfers\\+json;version=1(\\.\\d)?/);\r",
															"                });\r",
															"                \r",
															"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-signature is same as sent in the request`, function () {\r",
															"                    pm.expect(headers['fspiop-signature']).to.eql(pm.variables.get(\"fspiopSignature\"));\r",
															"                });\r",
															"                \r",
															"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-http-method is POST`, function () {\r",
															"                    pm.expect(headers['fspiop-http-method']).to.eql('POST');\r",
															"                });\r",
															"                \r",
															"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-uri is /transfers`, function () {\r",
															"                    pm.expect(headers['fspiop-uri']).to.eql('/transfers');\r",
															"                });\r",
															"                \r",
															"                \r",
															"                //Check the data\r",
															"                var jsonData = response.json().data;\r",
															"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} data should have the same transferId as request`, function () {\r",
															"                  pm.expect(jsonData.transferId).to.eql(pm.environment.get(\"transfer_ID\"));\r",
															"                });\r",
															"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} data should have the same payerfspId as request`, function () {\r",
															"                  pm.expect(jsonData.payerFsp).to.eql(pm.environment.get('SIMPAYER_NAME'));\r",
															"                });\r",
															"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} data should have the same payeefspId as request`, function () {\r",
															"                  pm.expect(pm.environment.get('SIMPAYEE_NAME'));\r",
															"                });\r",
															"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} data should have the same amount as request`, function () {\r",
															"                  pm.expect(jsonData.amount.amount).to.eql('1');\r",
															"                });\r",
															"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} data should have the same currency as request`, function () {\r",
															"                  pm.expect(jsonData.amount.currency).to.eql(pm.environment.get(\"currency\"));\r",
															"                });\r",
															"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} data should have the same expiration as request`, function () {\r",
															"                  pm.expect(jsonData.expiration).to.eql(pm.environment.get(\"transferExpiration\"));\r",
															"                });\r",
															"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} data should have the same ilpPacket as request`, function () {\r",
															"                  pm.expect(jsonData.ilpPacket).to.eql(pm.environment.get(\"ilpPacket\"));\r",
															"                });\r",
															"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} data should have the same condition as request`, function () {\r",
															"                  pm.expect(jsonData.condition).to.eql(pm.environment.get(\"condition\"));\r",
															"                });\r",
															"                \r",
															"          } else {\r",
															"              pm.test(\"Transfer FAILED\", function () {\r",
															"                throw new Error('Did not receive response on payee side');\r",
															"              });\r",
															"              // postman.setNextRequest(null)\r",
															"          }\r",
															"  });\r",
															"}, pm.environment.get(\"SET_TIMEOUT_TRANSFERS\"))\r",
															"\r",
															"//Check the callback response that Switch forwards to payerfsp\r",
															"setTimeout(function () {\r",
															"  pm.sendRequest(pm.environment.get(\"SIMPAYER_SDK_TESTAPI_URL\")+\"/callbacks/\"+pm.environment.get(\"transfer_ID\"), function (err, response) {\r",
															"          if(response.responseSize !== 0) {\r",
															"            //Checking headers\r",
															"            var headers = response.json().headers;\r",
															"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-source is ${pm.environment.get('SIMPAYEE_NAME')} `, function () {\r",
															"                pm.expect(headers['fspiop-source']).to.eql(pm.environment.get('SIMPAYEE_NAME'));\r",
															"            });\r",
															"            \r",
															"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-destination is ${pm.environment.get('SIMPAYER_NAME')}`, function () {\r",
															"                pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('SIMPAYER_NAME'));\r",
															"            });\r",
															"            \r",
															"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} content-type should be application/vnd.interoperability.transfers+json;version=1.0`, function () {\r",
															"                pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.transfers+json;version=1.0');\r",
															"            });\r",
															"            \r",
															"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} accept is empty`, function () {\r",
															"                pm.expect(headers['accept']).to.eql(undefined);\r",
															"            });\r",
															"            \r",
															"            \r",
															"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-uri includes /transfers/${pm.environment.get('transfer_ID')}`, function () {\r",
															"                pm.expect(headers['fspiop-uri']).to.eql(`/transfers/${pm.environment.get('transfer_ID')}`);\r",
															"            });\r",
															"            \r",
															"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-http-method is PUT`, function () {\r",
															"                pm.expect(headers['fspiop-http-method']).to.eql('PUT');\r",
															"            });\r",
															"            \r",
															"            var jsonData = response.json().data;\r",
															"            pm.test(\"Response data does not have transferId\", function () {\r",
															"               pm.expect(jsonData.transferId).to.eql(undefined);\r",
															"            });\r",
															"            pm.test(\"Response status is COMMITTED\", function () {\r",
															"                pm.expect(jsonData.transferState).to.eql('COMMITTED');\r",
															"            });\r",
															"            pm.test(\"Response fulfillment is not null\", function () {\r",
															"                pm.expect(jsonData.fulfilment).not.eql(undefined);\r",
															"                pm.environment.set('DupTransferFulfillment',jsonData.fulfilment)\r",
															"            });\r",
															"          } else {\r",
															"              pm.test(\"Transfer FAILED\", function () {\r",
															"                throw new Error('Did not receive response on payer side');\r",
															"              });\r",
															"              // postman.setNextRequest(null)\r",
															"          }\r",
															"   });\r",
															"}, pm.environment.get(\"SET_TIMEOUT_TRANSFERS\"))"
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "prerequest",
													"script": {
														"id": "8e98c73d-5b5a-405e-880b-7863647516cc",
														"exec": [
															"var navigator = {}; //fake a navigator object for the lib\r",
															"var window = {}; //fake a window object for the lib\r",
															"eval(pm.environment.get('jrsassign'));\r",
															"\r",
															"var uuid = require('uuid');\r",
															"var generatedUUID = uuid.v4();\r",
															"pm.environment.set('transfer_ID', pm.environment.get('transactionId'));\r",
															"\r",
															"\r",
															"pm.variables.set('transferDate', (new Date()).toUTCString());\r",
															"\r",
															"pm.environment.set(\"transferExpiration\",new Date(new Date().getTime() + 60000))\r",
															"\r",
															"var oHeader = {alg: \"RS256\", \"FSPIOP-Source\":pm.environment.get('SIMPAYER_NAME'),\"FSPIOP-Destination\":pm.environment.get('SIMPAYEE_NAME'), \"FSPIOP-URI\":\"/transfers\", \"FSPIOP-HTTP-Method\":\"POST\", \"Date\":pm.variables.get('transferDate')};\r",
															"var sHeader = JSON.stringify(oHeader);\r",
															"console.log(`sHeader: ${sHeader}`)\r",
															"\r",
															"var objPayload = {\r",
															"  \"transferId\": pm.environment.get('transfer_ID'),\r",
															"  \"payerFsp\": pm.environment.get('SIMPAYER_NAME'),\r",
															"  \"payeeFsp\": pm.environment.get('SIMPAYEE_NAME'),\r",
															"  \"amount\": {\r",
															"    \"amount\": \"1\",\r",
															"    \"currency\": pm.environment.get('SIMPAYEE_CURRENCY')\r",
															"  },\r",
															"  \"expiration\": pm.environment.get('transferExpiration'),\r",
															"  \"ilpPacket\": pm.environment.get('ilpPacket'),\r",
															"  \"condition\": pm.environment.get('condition')\r",
															"}\r",
															"var sPayload = JSON.stringify(objPayload)\r",
															"console.log(`sPayload: ${sPayload}`)\r",
															"pm.variables.set(\"transferRequest\", sPayload);\r",
															"var token = KJUR.jws.JWS.sign(\"RS256\", sHeader, sPayload, pm.environment.get('SIMPAYER_JWS_KEY'));\r",
															"//console.log(`token: ${token}`)\r",
															"\r",
															"// var encodedHeaders = btoa(sHeader)\r",
															"\r",
															"// var ofspiopSignature = {signature: vSignature, protectedHeader: encodedHeaders}\r",
															"// var token = JSON.stringify(ofspiopSignature)\r",
															"\r",
															"const [ protectedHeaderBase64, , signature ] = token.split('.');\r",
															"\r",
															"const signatureObject = {\r",
															"    signature: signature.replace('\"', ''),\r",
															"    protectedHeader: protectedHeaderBase64.replace('\"', '')\r",
															"};\r",
															"\r",
															"console.log(JSON.stringify(signatureObject))\r",
															"\r",
															"pm.variables.set('fspiopSignature',JSON.stringify(signatureObject))"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"auth": {
													"type": "bearer",
													"bearer": [
														{
															"key": "token",
															"value": "{{SIMPAYER_BEARER_TOKEN}}",
															"type": "string"
														}
													]
												},
												"method": "POST",
												"header": [
													{
														"key": "Accept",
														"value": "application/vnd.interoperability.transfers+json;version=1.0",
														"type": "text"
													},
													{
														"key": "Content-Type",
														"value": "application/vnd.interoperability.transfers+json;version=1.0",
														"type": "text"
													},
													{
														"key": "Date",
														"value": "{{transferDate}}",
														"type": "text"
													},
													{
														"key": "FSPIOP-Source",
														"value": "{{SIMPAYER_NAME}}",
														"type": "text"
													},
													{
														"key": "FSPIOP-Destination",
														"value": "{{SIMPAYEE_NAME}}",
														"type": "text"
													},
													{
														"key": "FSPIOP-Signature",
														"value": "{{fspiopSignature}}",
														"type": "text"
													},
													{
														"key": "FSPIOP-URI",
														"value": "/transfers",
														"type": "text"
													},
													{
														"key": "FSPIOP-HTTP-Method",
														"value": "POST",
														"type": "text"
													}
												],
												"body": {
													"mode": "raw",
													"raw": "{{transferRequest}}"
												},
												"url": {
													"raw": "{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}/transfers",
													"host": [
														"{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}"
													],
													"path": [
														"transfers"
													]
												}
											},
											"response": []
										},
										{
											"name": "Duplicate Transfer",
											"event": [
												{
													"listen": "test",
													"script": {
														"id": "188f3a9e-d5f9-4591-bfb9-b66bb8cf2e43",
														"exec": [
															"pm.test(\"Status code is 202\", function () {",
															"    pm.response.to.have.status(202);",
															"});",
															"",
															"setTimeout(function () {",
															"  pm.sendRequest(pm.environment.get(\"SIMPAYER_SDK_TESTAPI_URL\")+\"/callbacks/\"+pm.environment.get(\"transfer_ID\"), function (err, response) {",
															"          if(response.responseSize !== 0) {",
															"           var jsonData = response.json().data;",
															"              var headers = response.json().headers",
															"              pm.test(\"Response data does not have transferId\", function () {",
															"               pm.expect(jsonData.transferId).to.eql(undefined);",
															"             });",
															"          ",
															"              pm.test(\"fspiop-source is switch\", function () {",
															"                pm.expect(headers['fspiop-source']).to.eql('switch');",
															"              });",
															"              ",
															"              pm.test(`fspiop-destination is ${pm.environment.get('SIMPAYER_NAME')}`, function () {",
															"                pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('SIMPAYER_NAME'));",
															"              });",
															"              ",
															"              pm.test(\"content-type is application/vnd.interoperability.transfers+json;version=1.0\", function () {",
															"                    pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.transfers+json;version=1.0');",
															"                });",
															"                ",
															"                pm.test(\"accept is empty\", function () {",
															"                    pm.expect(headers['accept']).to.eql(undefined);",
															"                });",
															"                ",
															"                pm.test(\"fspiop-signature is not null\", function () {",
															"                    pm.expect(headers['fspiop-signature']).not.eql(undefined);",
															"                });",
															"                ",
															"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-http-method is PUT`, function () {",
															"                    pm.expect(headers['fspiop-http-method']).to.eql('PUT');",
															"                });",
															"                ",
															"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-uri is /transfers/${pm.environment.get('transfer_ID')}`, function () {",
															"                    pm.expect(headers['fspiop-uri']).to.eql(`/transfers/${pm.environment.get('transfer_ID')}`);",
															"                });",
															"              ",
															"               //Check data    ",
															"             ",
															"              ",
															"              pm.test(\"Response State is COMMITTED\", function () {",
															"                pm.expect(jsonData.transferState).to.eql(\"COMMITTED\");",
															"              });",
															"              ",
															"              pm.test(\"Response fulfillmet is same as sent in request'\", function () {",
															"                pm.expect(jsonData.fulfilment).to.eql(pm.environment.get('DupTransferFulfillment'));",
															"              });",
															"              ",
															"              ",
															"          } else {",
															"              pm.test(\"Transfer FAILED\", function () {",
															"                throw new Error('Did not receive response on payer side');",
															"              });",
															"              // postman.setNextRequest(null)",
															"          }",
															"   });",
															"}, pm.environment.get(\"SET_TIMEOUT_TRANSFERS\"))",
															"",
															""
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "prerequest",
													"script": {
														"id": "bced5c3d-c984-49b4-a803-9b6864ad9a37",
														"exec": [
															"var navigator = {}; //fake a navigator object for the lib\r",
															"var window = {}; //fake a window object for the lib\r",
															"eval(pm.environment.get('jrsassign'));\r",
															"\r",
															"var uuid = require('uuid');\r",
															"var generatedUUID = uuid.v4();\r",
															"//pm.environment.set('transfer_ID', pm.environment.get('transactionId'));\r",
															"\r",
															"\r",
															"pm.variables.set('transferDate', (new Date()).toUTCString());\r",
															"\r",
															"//pm.environment.set(\"transferExpiration\",new Date(new Date().getTime() + 60000))\r",
															"\r",
															"var oHeader = {alg: \"RS256\", \"FSPIOP-Source\":pm.environment.get('SIMPAYER_NAME'),\"FSPIOP-Destination\":pm.environment.get('SIMPAYEE_NAME'), \"FSPIOP-URI\":\"/transfers\", \"FSPIOP-HTTP-Method\":\"POST\", \"Date\":pm.variables.get('transferDate')};\r",
															"var sHeader = JSON.stringify(oHeader);\r",
															"console.log(`sHeader: ${sHeader}`)\r",
															"\r",
															"var objPayload = {\r",
															"  \"transferId\": pm.environment.get('transfer_ID'),\r",
															"  \"payerFsp\": pm.environment.get('SIMPAYER_NAME'),\r",
															"  \"payeeFsp\": pm.environment.get('SIMPAYEE_NAME'),\r",
															"  \"amount\": {\r",
															"    \"amount\": \"1\",\r",
															"    \"currency\": pm.environment.get('SIMPAYEE_CURRENCY')\r",
															"  },\r",
															"  \"expiration\": pm.environment.get('transferExpiration'),\r",
															"  \"ilpPacket\": pm.environment.get('ilpPacket'),\r",
															"  \"condition\": pm.environment.get('condition')\r",
															"}\r",
															"var sPayload = JSON.stringify(objPayload)\r",
															"console.log(`sPayload: ${sPayload}`)\r",
															"pm.variables.set(\"transferRequest\", sPayload);\r",
															"var token = KJUR.jws.JWS.sign(\"RS256\", sHeader, sPayload, pm.environment.get('SIMPAYER_JWS_KEY'));\r",
															"//console.log(`token: ${token}`)\r",
															"\r",
															"// var encodedHeaders = btoa(sHeader)\r",
															"\r",
															"// var ofspiopSignature = {signature: vSignature, protectedHeader: encodedHeaders}\r",
															"// var token = JSON.stringify(ofspiopSignature)\r",
															"\r",
															"const [ protectedHeaderBase64, , signature ] = token.split('.');\r",
															"\r",
															"const signatureObject = {\r",
															"    signature: signature.replace('\"', ''),\r",
															"    protectedHeader: protectedHeaderBase64.replace('\"', '')\r",
															"};\r",
															"\r",
															"console.log(JSON.stringify(signatureObject))\r",
															"\r",
															"pm.variables.set('fspiopSignature',JSON.stringify(signatureObject))"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"auth": {
													"type": "bearer",
													"bearer": [
														{
															"key": "token",
															"value": "{{SIMPAYER_BEARER_TOKEN}}",
															"type": "string"
														}
													]
												},
												"method": "POST",
												"header": [
													{
														"key": "Accept",
														"value": "application/vnd.interoperability.transfers+json;version=1.0",
														"type": "text"
													},
													{
														"key": "Content-Type",
														"value": "application/vnd.interoperability.transfers+json;version=1.0",
														"type": "text"
													},
													{
														"key": "Date",
														"value": "{{transferDate}}",
														"type": "text"
													},
													{
														"key": "FSPIOP-Source",
														"value": "{{SIMPAYER_NAME}}",
														"type": "text"
													},
													{
														"key": "FSPIOP-Destination",
														"value": "{{SIMPAYEE_NAME}}",
														"type": "text"
													},
													{
														"key": "FSPIOP-Signature",
														"value": "{{fspiopSignature}}",
														"type": "text"
													},
													{
														"key": "FSPIOP-URI",
														"value": "/transfers",
														"type": "text"
													},
													{
														"key": "FSPIOP-HTTP-Method",
														"value": "POST",
														"type": "text"
													}
												],
												"body": {
													"mode": "raw",
													"raw": "{{transferRequest}}"
												},
												"url": {
													"raw": "{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}/transfers",
													"host": [
														"{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}"
													],
													"path": [
														"transfers"
													]
												}
											},
											"response": []
										}
									],
									"protocolProfileBehavior": {},
									"_postman_isSubFolder": true
								},
								{
									"name": "fulfill_commit",
									"item": [
										{
											"name": "positive",
											"item": [
												{
													"name": "Send Quote - RECEIVE",
													"event": [
														{
															"listen": "prerequest",
															"script": {
																"id": "868d6566-b374-46d1-aceb-44cec945924a",
																"exec": [
																	"var navigator = {}; ",
																	"var window = {}; ",
																	"eval(pm.environment.get('jrsassign'));",
																	"",
																	"",
																	"var uuid = require('uuid');",
																	"var generatedUUID = uuid.v4();",
																	"pm.environment.set('quoteId', generatedUUID);",
																	"generatedUUID = uuid.v4();",
																	"pm.environment.set('transactionId', generatedUUID);",
																	"",
																	"pm.variables.set('quoteDate', (new Date()).toUTCString());",
																	"pm.variables.set('payerName', 'PayerFirst PayerLast');",
																	"",
																	"pm.variables.set('expectedPayeeFirstName', 'GoldenFirst');",
																	"pm.variables.set('expectedPayeeLastName', 'GoldenLast');",
																	"pm.variables.set('expectedPayeeDOB', '2010-10-10');",
																	"",
																	"var oHeader = {alg: \"RS256\", \"FSPIOP-Source\":pm.environment.get('SIMPAYER_NAME'),\"FSPIOP-Destination\":pm.environment.get('SIMPAYEE_NAME'), \"FSPIOP-URI\":\"/quotes\", \"FSPIOP-HTTP-Method\":\"POST\", \"Date\":pm.variables.get('quoteDate')};",
																	"var sHeader = JSON.stringify(oHeader);",
																	"console.log(`sHeader: ${sHeader}`)",
																	"",
																	"var objPayload = {",
																	"  \"quoteId\": pm.environment.get('quoteId'),",
																	"  \"transactionId\": pm.environment.get('transactionId'),",
																	"  \"payer\": {",
																	"    \"partyIdInfo\": {",
																	"      \"partyIdType\": \"MSISDN\",",
																	"      \"partyIdentifier\": pm.environment.get('SIMPAYER_MSISDN'),",
																	"      \"fspId\": pm.environment.get('SIMPAYER_NAME')",
																	"    },",
																	"    \"personalInfo\": {",
																	"      \"complexName\": {",
																	"        \"firstName\": \"Mats\",",
																	"        \"lastName\": \"Hagman\"",
																	"      },",
																	"      \"dateOfBirth\": \"1983-10-25\"",
																	"    }",
																	"  },",
																	"  \"payee\": {",
																	"    \"partyIdInfo\": {",
																	"      \"partyIdType\": \"MSISDN\",",
																	"      \"partyIdentifier\": pm.environment.get('SIMPAYEE_MSISDN'),",
																	"      \"fspId\": pm.environment.get('SIMPAYEE_NAME')",
																	"    }",
																	"  },",
																	"  \"amountType\": \"RECEIVE\",",
																	"  \"amount\": {",
																	"    \"amount\": \"1\",",
																	"    \"currency\": pm.environment.get('SIMPAYEE_CURRENCY')",
																	"  },",
																	"  \"transactionType\": {",
																	"    \"scenario\": \"TRANSFER\",",
																	"    \"initiator\": \"PAYER\",",
																	"    \"initiatorType\": \"CONSUMER\"",
																	"  },",
																	"  \"note\": \"hej\"",
																	"}",
																	"",
																	"var sPayload = JSON.stringify(objPayload)",
																	"console.log(`sPayload: ${sPayload}`)",
																	"pm.variables.set(\"quoteRequest\", sPayload);",
																	"var token = KJUR.jws.JWS.sign(\"RS256\", sHeader, sPayload, pm.environment.get('SIMPAYER_JWS_KEY'));",
																	"console.log(`token: ${token}`)",
																	"",
																	"// var encodedHeaders = btoa(sHeader)",
																	"",
																	"// var ofspiopSignature = {signature: vSignature, protectedHeader: encodedHeaders}",
																	"// var token = JSON.stringify(ofspiopSignature)",
																	"",
																	"const [ protectedHeaderBase64, , signature ] = token.split('.');",
																	"",
																	"const signatureObject = {",
																	"    signature: signature.replace('\"', ''),",
																	"    protectedHeader: protectedHeaderBase64.replace('\"', '')",
																	"};",
																	"",
																	"console.log(JSON.stringify(signatureObject))",
																	"",
																	"pm.variables.set('fspiopSignature',JSON.stringify(signatureObject))",
																	"",
																	"",
																	"",
																	"",
																	""
																],
																"type": "text/javascript"
															}
														},
														{
															"listen": "test",
															"script": {
																"id": "8525f158-c008-4480-88f1-a14a45da6e8a",
																"exec": [
																	"pm.test(\"Status code is 202\", function () {",
																	"    pm.response.to.have.status(202);",
																	"});",
																	"",
																	"setTimeout(function () {",
																	"  pm.sendRequest(pm.environment.get(\"SIMPAYEE_SDK_TESTAPI_URL\")+\"/requests/\"+pm.variables.get(\"quoteId\"), function (err, response) {",
																	"          if(response.responseSize !== 0) {",
																	"              ",
																	"              //Check the Headers",
																	"              var headers = response.json().headers;",
																	"              ",
																	"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-source is ${pm.environment.get('SIMPAYER_NAME')}`, function () {",
																	"                    pm.expect(headers['fspiop-source']).to.eql(pm.environment.get('SIMPAYER_NAME'));",
																	"                });",
																	"                ",
																	"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-destination is ${pm.environment.get('SIMPAYEE_NAME')}`, function () {",
																	"                    pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('SIMPAYEE_NAME'));",
																	"                });",
																	"                ",
																	"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-signature is same as sent in the request`, function () {",
																	"                    pm.expect(headers['fspiop-signature']).to.eql(pm.variables.get(\"fspiopSignature\"));",
																	"                });",
																	"                ",
																	"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} accept is same as sent in the request`, function () {",
																	"                    pm.expect(headers['accept']).to.match(/application\\/vnd\\.interoperability\\.quotes\\+json;version=1(\\.\\d)?/);",
																	"                });",
																	"                ",
																	"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} content-typeis same as sent in the request`, function () {",
																	"                    pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.quotes+json;version=1.0');",
																	"                });",
																	"                ",
																	"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-uri is /quotes`, function () {",
																	"                    pm.expect(headers['fspiop-uri']).to.eql('/quotes');",
																	"                });",
																	"                ",
																	"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-http-method is POST`, function () {",
																	"                    pm.expect(headers['fspiop-http-method']).to.eql('POST');",
																	"                });",
																	"                ",
																	"          } else {",
																	"              pm.test(\"Quote FAILED\", function () {",
																	"                throw new Error('Did not receive request on payee side');",
																	"              });",
																	"              // postman.setNextRequest(null)",
																	"          }",
																	"   });",
																	"}, pm.environment.get(\"SET_TIMEOUT_QUOTES\"))",
																	"",
																	"setTimeout(function () {",
																	"  pm.sendRequest(pm.environment.get(\"SIMPAYER_SDK_TESTAPI_URL\")+\"/callbacks/\"+pm.environment.get(\"quoteId\"), function (err, response) {",
																	"      if(response.responseSize !== 0) {",
																	"          //Checking headers",
																	"            var headers = response.json().headers;",
																	"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-source is ${pm.environment.get('SIMPAYEE_NAME')}`, function () {",
																	"                pm.expect(headers['fspiop-source']).to.eql(pm.environment.get('SIMPAYEE_NAME'));",
																	"            });",
																	"            ",
																	"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-destination is ${pm.environment.get('SIMPAYER_NAME')}`, function () {",
																	"                pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('SIMPAYER_NAME'));",
																	"            });",
																	"            ",
																	"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} content-type should be application/vnd.interoperability.quotes+json;version=1.0`, function () {",
																	"                pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.quotes+json;version=1.0');",
																	"            });",
																	"            ",
																	"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} accept is empty`, function () {",
																	"                pm.expect(headers['accept']).to.eql(undefined);",
																	"            });",
																	"            ",
																	"            ",
																	"            ",
																	"            var {signature,protectedHeader} = JSON.parse(headers['fspiop-signature'])",
																	"            // var strData = JSON.stringify(response.json().data)",
																	"            // const token = `${protectedHeader}.${btoa(strData)}.${signature}`",
																	"            // console.log(`token: ${token}`)",
																	"            // var isValid = KJUR.jws.JWS.verify(token, pm.environment.get('goldenpayeefspJWSPubKey'), {alg: ['RS256']})",
																	"            // console.log(`isValid: ${isValid}`)",
																	"            // pm.test(\"Check if the response is JWS valid\", function () {",
																	"            //     pm.expect(isValid).to.eql(true);",
																	"            // });",
																	"            ",
																	"            //Validate protected header inside Signature",
																	"            var decodedProtectedHeaders = JSON.parse(atob(protectedHeader))",
																	"            console.log('decodedProtectedHeaders:',decodedProtectedHeaders)",
																	"            ",
																	"            pm.test(\"FSPIOP-Signature Protected Header alg to be RS256\", function () {",
																	"                pm.expect(decodedProtectedHeaders['alg']).to.eql('RS256');",
																	"            });",
																	"            pm.test(\"FSPIOP-Signature Protected Header FSPIOP-URI to be /quotes/\"+pm.environment.get(\"quoteId\"), function () {",
																	"                pm.expect(decodedProtectedHeaders['FSPIOP-URI']).to.eql('/quotes/'+pm.environment.get(\"quoteId\"));",
																	"            });",
																	"",
																	"            ",
																	"            pm.test(\"FSPIOP-Signature Protected Header FSPIOP-HTTP-Method to be PUT\", function () {",
																	"                pm.expect(decodedProtectedHeaders['FSPIOP-HTTP-Method']).to.eql('PUT');",
																	"            });",
																	"            pm.test(`FSPIOP-Signature Protected Header FSPIOP-Source to be ${pm.environment.get('SIMPAYEE_NAME')}`, function () {",
																	"                pm.expect(decodedProtectedHeaders['FSPIOP-Source']).to.eql(pm.environment.get('SIMPAYEE_NAME'));",
																	"            });",
																	"            pm.test(`FSPIOP-Signature Protected Header FSPIOP-Destination to be ${pm.environment.get('SIMPAYER_NAME')}`, function () {",
																	"                pm.expect(decodedProtectedHeaders['FSPIOP-Destination']).to.eql(pm.environment.get('SIMPAYER_NAME'));",
																	"            });",
																	"            pm.test(\"FSPIOP-Signature Protected Header Date is present\", function () {",
																	"                pm.expect(decodedProtectedHeaders['Date']).to.eql(headers['date']);",
																	"            });",
																	"           ",
																	"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} FSPIOP-URI to be /quotes/${pm.environment.get(\"quoteId\")}`, function () {",
																	"                pm.expect(headers['fspiop-uri']).to.eql(`/quotes/${pm.environment.get(\"quoteId\")}`);",
																	"            });",
																	"            ",
																	"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-http-method is PUT`, function () {",
																	"                pm.expect(headers['fspiop-http-method']).to.eql('PUT');",
																	"            });",
																	"            ",
																	"            var jsonData = response.json().data;",
																	"            ",
																	"            pm.test(\"Response quoteId is  null\", function () {",
																	"                pm.expect(jsonData.quoteId).to.eql(undefined);",
																	"                ",
																	"            });",
																	"          ",
																	"            pm.test(\"Response ilpPacket is not null\", function () {",
																	"                pm.expect(jsonData.ilpPacket).not.equal(undefined);",
																	"                pm.environment.set(\"ilpPacket\", jsonData.ilpPacket);",
																	"            });",
																	"       ",
																	"           pm.test(\"Response condition is not null\", function () {",
																	"               pm.expect(jsonData.condition).not.equal(undefined);",
																	"               pm.environment.set(\"condition\", jsonData.condition);",
																	"           });",
																	"      } else {",
																	"          pm.test(\"Quote FAILED\", function () {",
																	"            throw new Error('Did not receive response on Payer side');",
																	"           });",
																	"           // postman.setNextRequest(null);",
																	"      }",
																	"       ",
																	"   });",
																	"}, pm.environment.get(\"SET_TIMEOUT_QUOTES\"))",
																	"",
																	"",
																	""
																],
																"type": "text/javascript"
															}
														}
													],
													"request": {
														"auth": {
															"type": "bearer",
															"bearer": [
																{
																	"key": "token",
																	"value": "{{SIMPAYER_BEARER_TOKEN}}",
																	"type": "string"
																}
															]
														},
														"method": "POST",
														"header": [
															{
																"key": "Accept",
																"value": "application/vnd.interoperability.quotes+json;version=1.0"
															},
															{
																"key": "Content-Type",
																"value": "application/vnd.interoperability.quotes+json;version=1.0"
															},
															{
																"key": "Date",
																"value": "{{quoteDate}}"
															},
															{
																"key": "FSPIOP-Source",
																"value": "{{SIMPAYER_NAME}}"
															},
															{
																"key": "FSPIOP-Destination",
																"value": "{{SIMPAYEE_NAME}}"
															},
															{
																"key": "FSPIOP-Signature",
																"type": "text",
																"value": "{{fspiopSignature}}"
															},
															{
																"key": "FSPIOP-HTTP-Method",
																"type": "text",
																"value": "POST"
															},
															{
																"key": "FSPIOP-URI",
																"type": "text",
																"value": "/quotes"
															}
														],
														"body": {
															"mode": "raw",
															"raw": "{{quoteRequest}}"
														},
														"url": {
															"raw": "{{HOST_QUOTING_SERVICE}}/quotes",
															"host": [
																"{{HOST_QUOTING_SERVICE}}"
															],
															"path": [
																"quotes"
															]
														}
													},
													"response": []
												},
												{
													"name": "Send Transfer-Prepare",
													"event": [
														{
															"listen": "prerequest",
															"script": {
																"id": "c489c6eb-9660-44a3-93a8-11d5209f47f2",
																"exec": [
																	"",
																	"var navigator = {}; //fake a navigator object for the lib",
																	"var window = {}; //fake a window object for the lib",
																	"eval(pm.environment.get('jrsassign'));",
																	"",
																	"var uuid = require('uuid');",
																	"var generatedUUID = uuid.v4();",
																	"pm.environment.set('transfer_ID', pm.environment.get('transactionId'));",
																	"",
																	"",
																	"pm.variables.set('transferDate', (new Date()).toUTCString());",
																	"",
																	"pm.environment.set(\"transferExpiration\",new Date(new Date().getTime() + 60000))",
																	"",
																	"var oHeader = {alg: \"RS256\", \"FSPIOP-Source\":pm.environment.get('SIMPAYER_NAME'),\"FSPIOP-Destination\":pm.environment.get('NORESPONSE_SIMPAYEE_NAME'), \"FSPIOP-URI\":\"/transfers\", \"FSPIOP-HTTP-Method\":\"POST\", \"Date\":pm.variables.get('transferDate')};",
																	"var sHeader = JSON.stringify(oHeader);",
																	"console.log(`sHeader: ${sHeader}`)",
																	"",
																	"var objPayload = {",
																	"  \"transferId\": pm.environment.get('transfer_ID'),",
																	"  \"payerFsp\": pm.environment.get('SIMPAYER_NAME'),",
																	"  \"payeeFsp\": pm.environment.get('NORESPONSE_SIMPAYEE_NAME'),",
																	"  \"amount\": {",
																	"    \"amount\": \"1\",",
																	"    \"currency\": pm.environment.get('SIMPAYEE_CURRENCY')",
																	"  },",
																	"  \"expiration\": pm.environment.get('transferExpiration'),",
																	"  \"ilpPacket\": pm.environment.get('validIlpPacket'),",
																	"  \"condition\": pm.environment.get('validCondition')",
																	"}",
																	"var sPayload = JSON.stringify(objPayload)",
																	"console.log(`sPayload: ${sPayload}`)",
																	"pm.variables.set(\"transferRequest\", sPayload);",
																	"var token = KJUR.jws.JWS.sign(\"RS256\", sHeader, sPayload, pm.environment.get('SIMPAYER_JWS_KEY'));",
																	"//console.log(`token: ${token}`)",
																	"",
																	"// var encodedHeaders = btoa(sHeader)",
																	"",
																	"// var ofspiopSignature = {signature: vSignature, protectedHeader: encodedHeaders}",
																	"// var token = JSON.stringify(ofspiopSignature)",
																	"",
																	"const [ protectedHeaderBase64, , signature ] = token.split('.');",
																	"",
																	"const signatureObject = {",
																	"    signature: signature.replace('\"', ''),",
																	"    protectedHeader: protectedHeaderBase64.replace('\"', '')",
																	"};",
																	"",
																	"console.log(JSON.stringify(signatureObject))",
																	"",
																	"pm.variables.set('fspiopSignature',JSON.stringify(signatureObject))"
																],
																"type": "text/javascript"
															}
														},
														{
															"listen": "test",
															"script": {
																"id": "e0df3a12-b547-4f72-bc46-5f4000ff268a",
																"exec": [
																	"pm.test(\"Status code is 202\", function () {",
																	"    pm.response.to.have.status(202);",
																	"});",
																	"",
																	"",
																	"",
																	"",
																	""
																],
																"type": "text/javascript"
															}
														}
													],
													"request": {
														"auth": {
															"type": "bearer",
															"bearer": [
																{
																	"key": "token",
																	"value": "{{SIMPAYER_BEARER_TOKEN}}",
																	"type": "string"
																}
															]
														},
														"method": "POST",
														"header": [
															{
																"key": "Accept",
																"value": "application/vnd.interoperability.transfers+json;version=1.0",
																"type": "text"
															},
															{
																"key": "Content-Type",
																"value": "application/vnd.interoperability.transfers+json;version=1.0",
																"type": "text"
															},
															{
																"key": "Date",
																"value": "{{transferDate}}",
																"type": "text"
															},
															{
																"key": "FSPIOP-Source",
																"value": "{{SIMPAYER_NAME}}",
																"type": "text"
															},
															{
																"key": "FSPIOP-Destination",
																"value": "{{NORESPONSE_SIMPAYEE_NAME}}",
																"type": "text"
															},
															{
																"key": "FSPIOP-Signature",
																"value": "{{fspiopSignature}}",
																"type": "text"
															},
															{
																"key": "FSPIOP-URI",
																"value": "/transfers",
																"type": "text"
															},
															{
																"key": "FSPIOP-HTTP-Method",
																"value": "POST",
																"type": "text"
															}
														],
														"body": {
															"mode": "raw",
															"raw": "{{transferRequest}}"
														},
														"url": {
															"raw": "{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}/transfers",
															"host": [
																"{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}"
															],
															"path": [
																"transfers"
															]
														}
													},
													"response": []
												},
												{
													"name": "Send Fulfill",
													"event": [
														{
															"listen": "prerequest",
															"script": {
																"id": "cde7e61f-a55a-41f2-9abb-b282e1ac6fe0",
																"exec": [
																	"pm.environment.set(\"completedTimestamp\",new Date().toISOString());",
																	"var navigator = {}; //fake a navigator object for the lib",
																	"var window = {}; //fake a window object for the lib",
																	"eval(pm.environment.get('jrsassign'));",
																	"",
																	"var uuid = require('uuid');",
																	"var generatedUUID = uuid.v4();",
																	"//pm.environment.set('transfer_ID', pm.environment.get('transactionId'));",
																	"",
																	"",
																	"pm.variables.set('transferDate', (new Date()).toUTCString());",
																	"",
																	"pm.environment.set(\"transferExpiration\",new Date(new Date().getTime() + 60000))",
																	"",
																	"var oHeader = {alg: \"RS256\", \"FSPIOP-Source\":pm.environment.get('NORESPONSE_SIMPAYEE_NAME'),\"FSPIOP-Destination\":pm.environment.get('SIMPAYER_NAME'), \"FSPIOP-URI\":`/transfers/${pm.environment.get('transfer_ID')}`, \"FSPIOP-HTTP-Method\":\"PUT\", \"Date\":pm.variables.get('transferDate')};",
																	"var sHeader = JSON.stringify(oHeader);",
																	"console.log(`sHeader: ${sHeader}`)",
																	"",
																	"var objPayload = {",
																	"    ",
																	"  \"fulfilment\": pm.environment.get('validFulfillment'),",
																	"  \"completedTimestamp\": pm.environment.get('completedTimestamp'),",
																	"  \"transferState\": \"COMMITTED\"",
																	"}",
																	"",
																	"var sPayload = JSON.stringify(objPayload)",
																	"console.log(`sPayload: ${sPayload}`)",
																	"pm.variables.set(\"transferResponse\", sPayload);",
																	"var token = KJUR.jws.JWS.sign(\"RS256\", sHeader, sPayload, pm.environment.get('SIMPAYEE_JWS_KEY'));",
																	"//console.log(`token: ${token}`)",
																	"",
																	"// var encodedHeaders = btoa(sHeader)",
																	"",
																	"// var ofspiopSignature = {signature: vSignature, protectedHeader: encodedHeaders}",
																	"// var token = JSON.stringify(ofspiopSignature)",
																	"",
																	"const [ protectedHeaderBase64, , signature ] = token.split('.');",
																	"",
																	"const signatureObject = {",
																	"    signature: signature.replace('\"', ''),",
																	"    protectedHeader: protectedHeaderBase64.replace('\"', '')",
																	"};",
																	"",
																	"console.log(JSON.stringify(signatureObject))",
																	"",
																	"pm.variables.set('fspiopSignature',JSON.stringify(signatureObject))"
																],
																"type": "text/javascript"
															}
														},
														{
															"listen": "test",
															"script": {
																"id": "bbcdc2b2-f1a6-4f6d-b1ce-1f8b85e21421",
																"exec": [
																	"pm.test(\"Status code is 200\", function () {",
																	"    pm.response.to.have.status(200);",
																	"});",
																	"",
																	"setTimeout(function () {",
																	"  pm.sendRequest(pm.environment.get(\"SIMPAYER_SDK_TESTAPI_URL\")+\"/callbacks/\"+pm.environment.get(\"transfer_ID\"), function (err, response) {",
																	"          if(response.responseSize !== 0) {",
																	"              //Check headers",
																	"              var headers = response.json().headers;",
																	"              ",
																	"                pm.test(`fspiop-source is ${pm.environment.get('NORESPONSE_SIMPAYEE_NAME')}`, function () {",
																	"                    pm.expect(headers['fspiop-source']).to.eql(pm.environment.get('NORESPONSE_SIMPAYEE_NAME'));",
																	"                });",
																	"                ",
																	"                pm.test(`fspiop-destination is ${pm.environment.get('SIMPAYER_NAME')}`, function () {",
																	"                    pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('SIMPAYER_NAME'));",
																	"                });",
																	"                ",
																	"                //Uncomment after JWS is implemented",
																	"                // pm.test(\"payeefsp fspiop-signature is same as sent in the request\", function () {",
																	"                //     pm.expect(headers['fspiop-signature']).to.eql(pm.environment.get(\"fspiop-signature\"));",
																	"                // });",
																	"                ",
																	"                ",
																	"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} content-type is same as sent in the request`, function () {",
																	"                    pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.transfers+json;version=1.0');",
																	"                });",
																	"                ",
																	"                pm.test(\"date header should not be empty\", function () {",
																	"                    pm.expect(headers['date']).to.be.not.empty;",
																	"                });",
																	"                ",
																	"                pm.test(\"accept header should not be sent in the response\", function () {",
																	"                    pm.expect(headers['accept']).to.eql(undefined);",
																	"                });",
																	"                ",
																	"              //Check data",
																	"              var jsonData = response.json().data;",
																	"              pm.test(\"Response transferState should be COMMITTED\", function () {",
																	"                pm.expect(jsonData.transferState).to.eql('COMMITTED');",
																	"              });",
																	"              ",
																	"              pm.test(\"Response fulfilment should be same as in request\", function () {",
																	"                pm.expect(jsonData.fulfilment).to.eql(pm.environment.get(\"validFulfillment\"));",
																	"              });",
																	"              ",
																	"          } else {",
																	"              pm.test(\"Transfer FAILED\", function () {",
																	"                throw new Error('Did not receive response');",
																	"              });",
																	"              // postman.setNextRequest(null)",
																	"          }",
																	"   });",
																	"}, pm.environment.get(\"SET_TIMEOUT_TRANSFERS\"))",
																	"",
																	""
																],
																"type": "text/javascript"
															}
														}
													],
													"request": {
														"auth": {
															"type": "bearer",
															"bearer": [
																{
																	"key": "token",
																	"value": "{{NORESPONSE_SIMPAYEE_BEARER_TOKEN}}",
																	"type": "string"
																}
															]
														},
														"method": "PUT",
														"header": [
															{
																"key": "Accept",
																"value": "application/vnd.interoperability.transfers+json;version=1.0",
																"type": "text"
															},
															{
																"key": "Content-Type",
																"value": "application/vnd.interoperability.transfers+json;version=1.0",
																"type": "text"
															},
															{
																"key": "Date",
																"value": "{{transferDate}}",
																"type": "text"
															},
															{
																"key": "FSPIOP-Source",
																"value": "{{NORESPONSE_SIMPAYEE_NAME}}",
																"type": "text"
															},
															{
																"key": "FSPIOP-Destination",
																"value": "{{SIMPAYER_NAME}}",
																"type": "text"
															},
															{
																"key": "FSPIOP-Signature",
																"value": "{{fspiopSignature}}",
																"type": "text"
															},
															{
																"key": "FSPIOP-URI",
																"value": "/transfers/{{transfer_ID}}",
																"type": "text"
															},
															{
																"key": "FSPIOP-HTTP-Method",
																"value": "PUT",
																"type": "text"
															}
														],
														"body": {
															"mode": "raw",
															"raw": "{{transferResponse}}"
														},
														"url": {
															"raw": "{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}/transfers/{{transfer_ID}}",
															"host": [
																"{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}"
															],
															"path": [
																"transfers",
																"{{transfer_ID}}"
															]
														}
													},
													"response": []
												},
												{
													"name": "Send Duplicate Fulfill",
													"event": [
														{
															"listen": "prerequest",
															"script": {
																"id": "690e2c30-233c-4ad3-861f-884c505651f0",
																"exec": [
																	"var navigator = {}; //fake a navigator object for the lib",
																	"var window = {}; //fake a window object for the lib",
																	"eval(pm.environment.get('jrsassign'));",
																	"",
																	"var uuid = require('uuid');",
																	"var generatedUUID = uuid.v4();",
																	"//pm.environment.set('transfer_ID', pm.environment.get('transactionId'));",
																	"",
																	"",
																	"pm.variables.set('transferDate', (new Date()).toUTCString());",
																	"",
																	"//pm.environment.set(\"transferExpiration\",new Date(new Date().getTime() + 60000))",
																	"",
																	"var oHeader = {alg: \"RS256\", \"FSPIOP-Source\":pm.environment.get('NORESPONSE_SIMPAYEE_NAME'),\"FSPIOP-Destination\":pm.environment.get('SIMPAYER_NAME'), \"FSPIOP-URI\":`/transfers/${pm.environment.get('transfer_ID')}`, \"FSPIOP-HTTP-Method\":\"PUT\", \"Date\":pm.variables.get('transferDate')};",
																	"var sHeader = JSON.stringify(oHeader);",
																	"console.log(`sHeader: ${sHeader}`);",
																	"",
																	"var objPayload = {",
																	"    ",
																	"  \"fulfilment\": pm.environment.get('validFulfillment'),",
																	"  \"completedTimestamp\": pm.environment.get('completedTimestamp'),",
																	"  \"transferState\": \"COMMITTED\"",
																	"}",
																	"",
																	"var sPayload = JSON.stringify(objPayload);",
																	"console.log(`sPayload: ${sPayload}`);",
																	"pm.variables.set(\"transferResponse2\", sPayload);",
																	"var token = KJUR.jws.JWS.sign(\"RS256\", sHeader, sPayload, pm.environment.get('SIMPAYEE_JWS_KEY'));",
																	"//console.log(`token: ${token}`)",
																	"",
																	"// var encodedHeaders = btoa(sHeader)",
																	"",
																	"// var ofspiopSignature = {signature: vSignature, protectedHeader: encodedHeaders}",
																	"// var token = JSON.stringify(ofspiopSignature)",
																	"",
																	"const [ protectedHeaderBase64, , signature ] = token.split('.');",
																	"",
																	"const signatureObject = {",
																	"    signature: signature.replace('\"', ''),",
																	"    protectedHeader: protectedHeaderBase64.replace('\"', '')",
																	"};",
																	"",
																	"console.log(JSON.stringify(signatureObject))",
																	"",
																	"pm.variables.set('fspiopSignature',JSON.stringify(signatureObject))"
																],
																"type": "text/javascript"
															}
														},
														{
															"listen": "test",
															"script": {
																"id": "160d15f1-0e71-4019-b53f-3764590a6c4b",
																"exec": [
																	"pm.test(\"Status code is 200\", function () {",
																	"    pm.response.to.have.status(200);",
																	"});",
																	"",
																	"",
																	"setTimeout(function () {",
																	"  pm.sendRequest(pm.environment.get(\"SIMPAYEE_SDK_TESTAPI_URL\")+\"/callbacks/\"+pm.environment.get(\"transfer_ID\"), function (err, response) {",
																	"          if(response.responseSize !== 0) {",
																	"            //Check headers",
																	"              var headers = response.json().headers;",
																	"              ",
																	"                pm.test(\"fspiop-source is switch\", function () {",
																	"                    pm.expect(headers['fspiop-source']).to.eql('switch');",
																	"                });",
																	"                ",
																	"                pm.test(`fspiop-destination is ${pm.environment.get('NORESPONSE_SIMPAYEE_NAME')}`, function () {",
																	"                    pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('NORESPONSE_SIMPAYEE_NAME'));",
																	"                });",
																	"                ",
																	"                pm.test(\" content-type is same as sent in the request\", function () {",
																	"                    pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.transfers+json;version=1.0');",
																	"                });",
																	"                ",
																	"                pm.test(\"date header should not be empty\", function () {",
																	"                    pm.expect(headers['date']).to.be.not.empty;",
																	"                });",
																	"                ",
																	"                pm.test(\"accept header should not be sent in the response\", function () {",
																	"                    pm.expect(headers['accept']).to.eql(undefined);",
																	"                });",
																	"                ",
																	"                pm.test(\"fspiop-signature is not null\", function () {",
																	"                    pm.expect(headers['fspiop-signature']).not.eql(undefined);",
																	"                });",
																	"                ",
																	"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-http-method is PUT`, function () {",
																	"                    pm.expect(headers['fspiop-http-method']).to.eql('PUT');",
																	"                });",
																	"                ",
																	"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-uri is /transfers/${pm.environment.get('transfer_ID')}`, function () {",
																	"                    pm.expect(headers['fspiop-uri']).to.eql(`/transfers/${pm.environment.get('transfer_ID')}`);",
																	"                });",
																	"                ",
																	"             //Check data    ",
																	"              var jsonData = response.json().data;",
																	"              pm.test(\"Response transferState should be COMMITTED\", function () {",
																	"                pm.expect(jsonData.transferState).to.eql('COMMITTED');",
																	"              });",
																	"              ",
																	"              pm.test(\"Response fulfilment should be same as in request\", function () {",
																	"                pm.expect(jsonData.fulfilment).to.eql(pm.environment.get(\"validFulfillment\"));",
																	"              });",
																	"          } else {",
																	"              pm.test(\"Transfer FAILED\", function () {",
																	"                throw new Error('Did not receive response on payer side');",
																	"              });",
																	"              // postman.setNextRequest(null)",
																	"          }",
																	"   });",
																	"}, pm.environment.get(\"SET_TIMEOUT_TRANSFERS\"))"
																],
																"type": "text/javascript"
															}
														}
													],
													"request": {
														"auth": {
															"type": "bearer",
															"bearer": [
																{
																	"key": "token",
																	"value": "{{NORESPONSE_SIMPAYEE_BEARER_TOKEN}}",
																	"type": "string"
																}
															]
														},
														"method": "PUT",
														"header": [
															{
																"key": "Accept",
																"value": "application/vnd.interoperability.transfers+json;version=1.0",
																"type": "text"
															},
															{
																"key": "Content-Type",
																"value": "application/vnd.interoperability.transfers+json;version=1.0",
																"type": "text"
															},
															{
																"key": "Date",
																"value": "{{transferDate}}",
																"type": "text"
															},
															{
																"key": "FSPIOP-Source",
																"value": "{{NORESPONSE_SIMPAYEE_NAME}}",
																"type": "text"
															},
															{
																"key": "FSPIOP-Destination",
																"value": "{{SIMPAYER_NAME}}",
																"type": "text"
															},
															{
																"key": "FSPIOP-Signature",
																"value": "{{fspiopSignature}}",
																"type": "text"
															},
															{
																"key": "FSPIOP-URI",
																"value": "/transfers/{{transfer_ID}}",
																"type": "text"
															},
															{
																"key": "FSPIOP-HTTP-Method",
																"value": "PUT",
																"type": "text"
															}
														],
														"body": {
															"mode": "raw",
															"raw": "{{transferResponse2}}"
														},
														"url": {
															"raw": "{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}/transfers/{{transfer_ID}}",
															"host": [
																"{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}"
															],
															"path": [
																"transfers",
																"{{transfer_ID}}"
															]
														},
														"description": "Author: Sridevi Miriyala\n\nTo test this feature, since there is no simulator as noresponsepayeefsp, the endpoints for it is set to payeefsp's endpoint. so in the tests, you get the response from payeefsp/callbacks and do assertions."
													},
													"response": []
												},
												{
													"name": "Check Transfer status",
													"event": [
														{
															"listen": "prerequest",
															"script": {
																"id": "4eab654c-5b12-4deb-ae67-8ac909f3f2c2",
																"exec": [
																	"",
																	"   pm.variables.set('transferDate', (new Date()).toUTCString());",
																	""
																],
																"type": "text/javascript"
															}
														},
														{
															"listen": "test",
															"script": {
																"id": "35c6ec33-6700-4897-83eb-eaab6c8f6219",
																"exec": [
																	"pm.test(\"Status code is 202\", function () {",
																	"    pm.response.to.have.status(202);",
																	"});",
																	"",
																	"setTimeout(function () {",
																	"  pm.sendRequest(pm.environment.get(\"SIMPAYER_SDK_TESTAPI_URL\")+\"/callbacks/\"+pm.environment.get(\"transfer_ID\"), function (err, response) {",
																	"          if(response.responseSize !== 0) {",
																	"            //Check headers",
																	"              var headers = response.json().headers;",
																	"              ",
																	"                pm.test(\"fspiop-source is switch\", function () {",
																	"                    pm.expect(headers['fspiop-source']).to.eql('switch');",
																	"                });",
																	"                ",
																	"                pm.test(`fspiop-destination is ${pm.environment.get('SIMPAYER_NAME')}`, function () {",
																	"                    pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('SIMPAYER_NAME'));",
																	"                });",
																	"                ",
																	"                pm.test(\" content-type is same as sent in the request\", function () {",
																	"                    pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.transfers+json;version=1.0');",
																	"                });",
																	"                ",
																	"                pm.test(\"date header should not be empty\", function () {",
																	"                    pm.expect(headers['date']).to.be.not.empty;",
																	"                });",
																	"                ",
																	"                pm.test(\"accept header should not be sent in the response\", function () {",
																	"                    pm.expect(headers['accept']).to.eql(undefined);",
																	"                });",
																	"                ",
																	"                pm.test(\"fspiop-signature is not null\", function () {",
																	"                    pm.expect(headers['fspiop-signature']).not.eql(undefined);",
																	"                });",
																	"                ",
																	"                pm.test(\" fspiop-http-method is PUT\", function () {",
																	"                    pm.expect(headers['fspiop-http-method']).to.eql('PUT');",
																	"                });",
																	"                ",
																	"                pm.test(` fspiop-uri is /transfers/${pm.environment.get('transfer_ID')}`, function () {",
																	"                    pm.expect(headers['fspiop-uri']).to.eql(`/transfers/${pm.environment.get('transfer_ID')}`);",
																	"                });",
																	"                ",
																	"             //Check data    ",
																	"              var jsonData = response.json().data;",
																	"              pm.test(\"Response transferState should be COMMITTED\", function () {",
																	"                pm.expect(jsonData.transferState).to.eql('COMMITTED');",
																	"              });",
																	"              ",
																	"              pm.test(\"Response fulfilment should be same as in request\", function () {",
																	"                pm.expect(jsonData.fulfilment).to.eql(pm.environment.get(\"validFulfillment\"));",
																	"              });",
																	"          } else {",
																	"              pm.test(\"Transfer FAILED\", function () {",
																	"                throw new Error('Did not receive response on payer side');",
																	"              });",
																	"              // postman.setNextRequest(null)",
																	"          }",
																	"   });",
																	"}, 1300)",
																	"",
																	"",
																	""
																],
																"type": "text/javascript"
															}
														}
													],
													"request": {
														"auth": {
															"type": "bearer",
															"bearer": [
																{
																	"key": "token",
																	"value": "{{SIMPAYER_BEARER_TOKEN}}",
																	"type": "string"
																}
															]
														},
														"method": "GET",
														"header": [
															{
																"key": "Accept",
																"value": "application/vnd.interoperability.transfers+json;version=1.0"
															},
															{
																"key": "Content-Type",
																"value": "application/vnd.interoperability.transfers+json;version=1.0"
															},
															{
																"key": "Date",
																"value": "{{transferDate}}"
															},
															{
																"key": "FSPIOP-Source",
																"value": "{{SIMPAYER_NAME}}"
															},
															{
																"key": "FSPIOP-Destination",
																"value": "",
																"disabled": true
															}
														],
														"url": {
															"raw": "{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}/transfers/{{transfer_ID}}",
															"host": [
																"{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}"
															],
															"path": [
																"transfers",
																"{{transfer_ID}}"
															]
														}
													},
													"response": []
												}
											],
											"protocolProfileBehavior": {},
											"_postman_isSubFolder": true
										},
										{
											"name": "negative",
											"item": [
												{
													"name": "Send Quote - RECEIVE",
													"event": [
														{
															"listen": "prerequest",
															"script": {
																"id": "0f2e2e4c-69f6-44af-bd7b-13c52fe546cb",
																"exec": [
																	"var navigator = {}; ",
																	"var window = {}; ",
																	"eval(pm.environment.get('jrsassign'));",
																	"",
																	"",
																	"var uuid = require('uuid');",
																	"var generatedUUID = uuid.v4();",
																	"pm.environment.set('quoteId', generatedUUID);",
																	"generatedUUID = uuid.v4();",
																	"pm.environment.set('transactionId', generatedUUID);",
																	"",
																	"pm.variables.set('quoteDate', (new Date()).toUTCString());",
																	"pm.variables.set('payerName', 'PayerFirst PayerLast');",
																	"",
																	"pm.variables.set('expectedPayeeFirstName', 'GoldenFirst');",
																	"pm.variables.set('expectedPayeeLastName', 'GoldenLast');",
																	"pm.variables.set('expectedPayeeDOB', '2010-10-10');",
																	"",
																	"var oHeader = {alg: \"RS256\", \"FSPIOP-Source\":pm.environment.get('SIMPAYER_NAME'),\"FSPIOP-Destination\":pm.environment.get('SIMPAYEE_NAME'), \"FSPIOP-URI\":\"/quotes\", \"FSPIOP-HTTP-Method\":\"POST\", \"Date\":pm.variables.get('quoteDate')};",
																	"var sHeader = JSON.stringify(oHeader);",
																	"console.log(`sHeader: ${sHeader}`)",
																	"",
																	"var objPayload = {",
																	"  \"quoteId\": pm.environment.get('quoteId'),",
																	"  \"transactionId\": pm.environment.get('transactionId'),",
																	"  \"payer\": {",
																	"    \"partyIdInfo\": {",
																	"      \"partyIdType\": \"MSISDN\",",
																	"      \"partyIdentifier\": pm.environment.get('SIMPAYER_MSISDN'),",
																	"      \"fspId\": pm.environment.get('SIMPAYER_NAME')",
																	"    },",
																	"    \"personalInfo\": {",
																	"      \"complexName\": {",
																	"        \"firstName\": \"Mats\",",
																	"        \"lastName\": \"Hagman\"",
																	"      },",
																	"      \"dateOfBirth\": \"1983-10-25\"",
																	"    }",
																	"  },",
																	"  \"payee\": {",
																	"    \"partyIdInfo\": {",
																	"      \"partyIdType\": \"MSISDN\",",
																	"      \"partyIdentifier\": pm.environment.get('SIMPAYEE_MSISDN'),",
																	"      \"fspId\": pm.environment.get('SIMPAYEE_NAME')",
																	"    }",
																	"  },",
																	"  \"amountType\": \"RECEIVE\",",
																	"  \"amount\": {",
																	"    \"amount\": \"1\",",
																	"    \"currency\": pm.environment.get('SIMPAYEE_CURRENCY')",
																	"  },",
																	"  \"transactionType\": {",
																	"    \"scenario\": \"TRANSFER\",",
																	"    \"initiator\": \"PAYER\",",
																	"    \"initiatorType\": \"CONSUMER\"",
																	"  },",
																	"  \"note\": \"hej\"",
																	"}",
																	"",
																	"var sPayload = JSON.stringify(objPayload)",
																	"console.log(`sPayload: ${sPayload}`)",
																	"pm.variables.set(\"quoteRequest\", sPayload);",
																	"var token = KJUR.jws.JWS.sign(\"RS256\", sHeader, sPayload, pm.environment.get('SIMPAYER_JWS_KEY'));",
																	"console.log(`token: ${token}`)",
																	"",
																	"// var encodedHeaders = btoa(sHeader)",
																	"",
																	"// var ofspiopSignature = {signature: vSignature, protectedHeader: encodedHeaders}",
																	"// var token = JSON.stringify(ofspiopSignature)",
																	"",
																	"const [ protectedHeaderBase64, , signature ] = token.split('.');",
																	"",
																	"const signatureObject = {",
																	"    signature: signature.replace('\"', ''),",
																	"    protectedHeader: protectedHeaderBase64.replace('\"', '')",
																	"};",
																	"",
																	"console.log(JSON.stringify(signatureObject))",
																	"",
																	"pm.variables.set('fspiopSignature',JSON.stringify(signatureObject))",
																	"",
																	"",
																	"",
																	"",
																	""
																],
																"type": "text/javascript"
															}
														},
														{
															"listen": "test",
															"script": {
																"id": "67364c74-62bf-46d8-8078-ec033ab53233",
																"exec": [
																	"pm.test(\"Status code is 202\", function () {",
																	"    pm.response.to.have.status(202);",
																	"});",
																	"",
																	"setTimeout(function () {",
																	"  pm.sendRequest(pm.environment.get(\"SIMPAYEE_SDK_TESTAPI_URL\")+\"/requests/\"+pm.variables.get(\"quoteId\"), function (err, response) {",
																	"          if(response.responseSize !== 0) {",
																	"              ",
																	"              //Check the Headers",
																	"              var headers = response.json().headers;",
																	"              ",
																	"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-source is ${pm.environment.get('SIMPAYER_NAME')}`, function () {",
																	"                    pm.expect(headers['fspiop-source']).to.eql(pm.environment.get('SIMPAYER_NAME'));",
																	"                });",
																	"                ",
																	"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-destination is ${pm.environment.get('SIMPAYEE_NAME')}`, function () {",
																	"                    pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('SIMPAYEE_NAME'));",
																	"                });",
																	"                ",
																	"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-signature is same as sent in the request`, function () {",
																	"                    pm.expect(headers['fspiop-signature']).to.eql(pm.variables.get(\"fspiopSignature\"));",
																	"                });",
																	"                ",
																	"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} accept is same as sent in the request`, function () {",
																	"                    pm.expect(headers['accept']).to.match(/application\\/vnd\\.interoperability\\.quotes\\+json;version=1(\\.\\d)?/);",
																	"                });",
																	"                ",
																	"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} content-typeis same as sent in the request`, function () {",
																	"                    pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.quotes+json;version=1.0');",
																	"                });",
																	"                ",
																	"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-uri is /quotes`, function () {",
																	"                    pm.expect(headers['fspiop-uri']).to.eql('/quotes');",
																	"                });",
																	"                ",
																	"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-http-method is POST`, function () {",
																	"                    pm.expect(headers['fspiop-http-method']).to.eql('POST');",
																	"                });",
																	"                ",
																	"          } else {",
																	"              pm.test(\"Quote FAILED\", function () {",
																	"                throw new Error('Did not receive request on payee side');",
																	"              });",
																	"              // postman.setNextRequest(null)",
																	"          }",
																	"   });",
																	"}, pm.environment.get(\"SET_TIMEOUT_QUOTES\"))",
																	"",
																	"setTimeout(function () {",
																	"  pm.sendRequest(pm.environment.get(\"SIMPAYER_SDK_TESTAPI_URL\")+\"/callbacks/\"+pm.environment.get(\"quoteId\"), function (err, response) {",
																	"      if(response.responseSize !== 0) {",
																	"          //Checking headers",
																	"            var headers = response.json().headers;",
																	"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-source is ${pm.environment.get('SIMPAYEE_NAME')}`, function () {",
																	"                pm.expect(headers['fspiop-source']).to.eql(pm.environment.get('SIMPAYEE_NAME'));",
																	"            });",
																	"            ",
																	"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-destination is ${pm.environment.get('SIMPAYER_NAME')}`, function () {",
																	"                pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('SIMPAYER_NAME'));",
																	"            });",
																	"            ",
																	"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} content-type should be application/vnd.interoperability.quotes+json;version=1.0`, function () {",
																	"                pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.quotes+json;version=1.0');",
																	"            });",
																	"            ",
																	"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} accept is empty`, function () {",
																	"                pm.expect(headers['accept']).to.eql(undefined);",
																	"            });",
																	"            ",
																	"            ",
																	"            ",
																	"            var {signature,protectedHeader} = JSON.parse(headers['fspiop-signature'])",
																	"            // var strData = JSON.stringify(response.json().data)",
																	"            // const token = `${protectedHeader}.${btoa(strData)}.${signature}`",
																	"            // console.log(`token: ${token}`)",
																	"            // var isValid = KJUR.jws.JWS.verify(token, pm.environment.get('goldenpayeefspJWSPubKey'), {alg: ['RS256']})",
																	"            // console.log(`isValid: ${isValid}`)",
																	"            // pm.test(\"Check if the response is JWS valid\", function () {",
																	"            //     pm.expect(isValid).to.eql(true);",
																	"            // });",
																	"            ",
																	"            //Validate protected header inside Signature",
																	"            var decodedProtectedHeaders = JSON.parse(atob(protectedHeader))",
																	"            console.log('decodedProtectedHeaders:',decodedProtectedHeaders)",
																	"            ",
																	"            pm.test(\"FSPIOP-Signature Protected Header alg to be RS256\", function () {",
																	"                pm.expect(decodedProtectedHeaders['alg']).to.eql('RS256');",
																	"            });",
																	"            pm.test(\"FSPIOP-Signature Protected Header FSPIOP-URI to be /quotes/\"+pm.environment.get(\"quoteId\"), function () {",
																	"                pm.expect(decodedProtectedHeaders['FSPIOP-URI']).to.eql('/quotes/'+pm.environment.get(\"quoteId\"));",
																	"            });",
																	"            ",
																	"",
																	"            pm.test(\"FSPIOP-Signature Protected Header FSPIOP-HTTP-Method to be PUT\", function () {",
																	"                pm.expect(decodedProtectedHeaders['FSPIOP-HTTP-Method']).to.eql('PUT');",
																	"            });",
																	"            pm.test(`FSPIOP-Signature Protected Header FSPIOP-Source to be ${pm.environment.get('SIMPAYEE_NAME')}`, function () {",
																	"                pm.expect(decodedProtectedHeaders['FSPIOP-Source']).to.eql(pm.environment.get('SIMPAYEE_NAME'));",
																	"            });",
																	"            pm.test(`FSPIOP-Signature Protected Header FSPIOP-Destination to be ${pm.environment.get('SIMPAYER_NAME')}`, function () {",
																	"                pm.expect(decodedProtectedHeaders['FSPIOP-Destination']).to.eql(pm.environment.get('SIMPAYER_NAME'));",
																	"            });",
																	"            pm.test(\"FSPIOP-Signature Protected Header Date is present\", function () {",
																	"                pm.expect(decodedProtectedHeaders['Date']).to.eql(headers['date']);",
																	"            });",
																	"           ",
																	"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} FSPIOP-URI to be /quotes/${pm.environment.get(\"quoteId\")}`, function () {",
																	"                pm.expect(headers['fspiop-uri']).to.eql(`/quotes/${pm.environment.get(\"quoteId\")}`);",
																	"            });",
																	"            ",
																	"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-http-method is PUT`, function () {",
																	"                pm.expect(headers['fspiop-http-method']).to.eql('PUT');",
																	"            });",
																	"            ",
																	"            var jsonData = response.json().data;",
																	"            ",
																	"            pm.test(\"Response quoteId is  null\", function () {",
																	"                pm.expect(jsonData.quoteId).to.eql(undefined);",
																	"                ",
																	"            });",
																	"          ",
																	"            pm.test(\"Response ilpPacket is not null\", function () {",
																	"                pm.expect(jsonData.ilpPacket).not.equal(undefined);",
																	"                pm.environment.set(\"ilpPacket\", jsonData.ilpPacket);",
																	"            });",
																	"       ",
																	"           pm.test(\"Response condition is not null\", function () {",
																	"               pm.expect(jsonData.condition).not.equal(undefined);",
																	"               pm.environment.set(\"condition\", jsonData.condition);",
																	"           });",
																	"      } else {",
																	"          pm.test(\"Quote FAILED\", function () {",
																	"            throw new Error('Did not receive response on Payer side');",
																	"           });",
																	"           // postman.setNextRequest(null);",
																	"      }",
																	"       ",
																	"   });",
																	"}, pm.environment.get(\"SET_TIMEOUT_QUOTES\"))",
																	"",
																	"",
																	""
																],
																"type": "text/javascript"
															}
														}
													],
													"request": {
														"auth": {
															"type": "bearer",
															"bearer": [
																{
																	"key": "token",
																	"value": "{{SIMPAYER_BEARER_TOKEN}}",
																	"type": "string"
																}
															]
														},
														"method": "POST",
														"header": [
															{
																"key": "Accept",
																"value": "application/vnd.interoperability.quotes+json;version=1.0"
															},
															{
																"key": "Content-Type",
																"value": "application/vnd.interoperability.quotes+json;version=1.0"
															},
															{
																"key": "Date",
																"value": "{{quoteDate}}"
															},
															{
																"key": "FSPIOP-Source",
																"value": "{{SIMPAYER_NAME}}"
															},
															{
																"key": "FSPIOP-Destination",
																"value": "{{SIMPAYEE_NAME}}"
															},
															{
																"key": "FSPIOP-Signature",
																"type": "text",
																"value": "{{fspiopSignature}}"
															},
															{
																"key": "FSPIOP-HTTP-Method",
																"type": "text",
																"value": "POST"
															},
															{
																"key": "FSPIOP-URI",
																"type": "text",
																"value": "/quotes"
															}
														],
														"body": {
															"mode": "raw",
															"raw": "{{quoteRequest}}"
														},
														"url": {
															"raw": "{{HOST_QUOTING_SERVICE}}/quotes",
															"host": [
																"{{HOST_QUOTING_SERVICE}}"
															],
															"path": [
																"quotes"
															]
														}
													},
													"response": []
												},
												{
													"name": "Send Transfer-Prepare",
													"event": [
														{
															"listen": "prerequest",
															"script": {
																"id": "585a4b4c-1930-4b6b-9edb-f3581531569a",
																"exec": [
																	"",
																	"var navigator = {}; //fake a navigator object for the lib",
																	"var window = {}; //fake a window object for the lib",
																	"eval(pm.environment.get('jrsassign'));",
																	"",
																	"var uuid = require('uuid');",
																	"var generatedUUID = uuid.v4();",
																	"pm.environment.set('transfer_ID', pm.environment.get('transactionId'));",
																	"",
																	"",
																	"pm.variables.set('transferDate', (new Date()).toUTCString());",
																	"",
																	"pm.environment.set(\"transferExpiration\",new Date(new Date().getTime() + 60000))",
																	"",
																	"var oHeader = {alg: \"RS256\", \"FSPIOP-Source\":pm.environment.get('SIMPAYER_NAME'),\"FSPIOP-Destination\":pm.environment.get('NORESPONSE_SIMPAYEE_NAME'), \"FSPIOP-URI\":\"/transfers\", \"FSPIOP-HTTP-Method\":\"POST\", \"Date\":pm.variables.get('transferDate')};",
																	"var sHeader = JSON.stringify(oHeader);",
																	"console.log(`sHeader: ${sHeader}`)",
																	"",
																	"var objPayload = {",
																	"  \"transferId\": pm.environment.get('transfer_ID'),",
																	"  \"payerFsp\": pm.environment.get('SIMPAYER_NAME'),",
																	"  \"payeeFsp\": pm.environment.get('NORESPONSE_SIMPAYEE_NAME'),",
																	"  \"amount\": {",
																	"    \"amount\": \"10\",",
																	"    \"currency\": pm.environment.get('SIMPAYEE_CURRENCY')",
																	"  },",
																	"  \"expiration\": pm.environment.get('transferExpiration'),",
																	"  \"ilpPacket\": pm.environment.get('validIlpPacket'),",
																	"  \"condition\": pm.environment.get('validCondition')",
																	"}",
																	"var sPayload = JSON.stringify(objPayload)",
																	"console.log(`sPayload: ${sPayload}`)",
																	"pm.variables.set(\"transferRequest\", sPayload);",
																	"var token = KJUR.jws.JWS.sign(\"RS256\", sHeader, sPayload, pm.environment.get('SIMPAYER_JWS_KEY'));",
																	"//console.log(`token: ${token}`)",
																	"",
																	"// var encodedHeaders = btoa(sHeader)",
																	"",
																	"// var ofspiopSignature = {signature: vSignature, protectedHeader: encodedHeaders}",
																	"// var token = JSON.stringify(ofspiopSignature)",
																	"",
																	"const [ protectedHeaderBase64, , signature ] = token.split('.');",
																	"",
																	"const signatureObject = {",
																	"    signature: signature.replace('\"', ''),",
																	"    protectedHeader: protectedHeaderBase64.replace('\"', '')",
																	"};",
																	"",
																	"console.log(JSON.stringify(signatureObject))",
																	"",
																	"pm.variables.set('fspiopSignature',JSON.stringify(signatureObject))"
																],
																"type": "text/javascript"
															}
														},
														{
															"listen": "test",
															"script": {
																"id": "650cd124-daca-4af7-9284-5df3e8e3fdf1",
																"exec": [
																	"pm.test(\"Status code is 202\", function () {",
																	"    pm.response.to.have.status(202);",
																	"});",
																	"",
																	"",
																	"",
																	"",
																	""
																],
																"type": "text/javascript"
															}
														}
													],
													"request": {
														"auth": {
															"type": "bearer",
															"bearer": [
																{
																	"key": "token",
																	"value": "{{SIMPAYER_BEARER_TOKEN}}",
																	"type": "string"
																}
															]
														},
														"method": "POST",
														"header": [
															{
																"key": "Accept",
																"value": "application/vnd.interoperability.transfers+json;version=1.0",
																"type": "text"
															},
															{
																"key": "Content-Type",
																"value": "application/vnd.interoperability.transfers+json;version=1.0",
																"type": "text"
															},
															{
																"key": "Date",
																"value": "{{transferDate}}",
																"type": "text"
															},
															{
																"key": "FSPIOP-Source",
																"value": "{{SIMPAYER_NAME}}",
																"type": "text"
															},
															{
																"key": "FSPIOP-Destination",
																"value": "{{NORESPONSE_SIMPAYEE_NAME}}",
																"type": "text"
															},
															{
																"key": "FSPIOP-Signature",
																"value": "{{fspiopSignature}}",
																"type": "text"
															},
															{
																"key": "FSPIOP-URI",
																"value": "/transfers",
																"type": "text"
															},
															{
																"key": "FSPIOP-HTTP-Method",
																"value": "POST",
																"type": "text"
															}
														],
														"body": {
															"mode": "raw",
															"raw": "{{transferRequest}}"
														},
														"url": {
															"raw": "{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}/transfers",
															"host": [
																"{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}"
															],
															"path": [
																"transfers"
															]
														}
													},
													"response": []
												},
												{
													"name": "Send Fulfill",
													"event": [
														{
															"listen": "prerequest",
															"script": {
																"id": "0eb95e23-2cd0-4ae5-8b5c-f0945cfee912",
																"exec": [
																	"pm.environment.set(\"completedTimestamp\",new Date().toISOString());",
																	"var navigator = {}; //fake a navigator object for the lib",
																	"var window = {}; //fake a window object for the lib",
																	"eval(pm.environment.get('jrsassign'));",
																	"",
																	"var uuid = require('uuid');",
																	"var generatedUUID = uuid.v4();",
																	"pm.environment.set('transfer_ID', pm.environment.get('transactionId'));",
																	"",
																	"",
																	"pm.variables.set('transferDate', (new Date()).toUTCString());",
																	"",
																	"pm.environment.set(\"transferExpiration\",new Date(new Date().getTime() + 60000))",
																	"",
																	"var oHeader = {alg: \"RS256\", \"FSPIOP-Source\":pm.environment.get('NORESPONSE_SIMPAYEE_NAME'),\"FSPIOP-Destination\":pm.environment.get('SIMPAYER_NAME'), \"FSPIOP-URI\":`/transfers/${pm.environment.get('transfer_ID')}`, \"FSPIOP-HTTP-Method\":\"PUT\", \"Date\":pm.variables.get('transferDate')};",
																	"var sHeader = JSON.stringify(oHeader);",
																	"console.log(`sHeader: ${sHeader}`)",
																	"",
																	"var objPayload = {",
																	"    ",
																	"  \"fulfilment\": pm.environment.get('validFulfillment'),",
																	"  \"completedTimestamp\": pm.environment.get('completedTimestamp'),",
																	"  \"transferState\": \"COMMITTED\"",
																	"}",
																	"",
																	"var sPayload = JSON.stringify(objPayload)",
																	"console.log(`sPayload: ${sPayload}`)",
																	"pm.variables.set(\"transferResponse\", sPayload);",
																	"var token = KJUR.jws.JWS.sign(\"RS256\", sHeader, sPayload, pm.environment.get('SIMPAYEE_JWS_KEY'));",
																	"//console.log(`token: ${token}`)",
																	"",
																	"// var encodedHeaders = btoa(sHeader)",
																	"",
																	"// var ofspiopSignature = {signature: vSignature, protectedHeader: encodedHeaders}",
																	"// var token = JSON.stringify(ofspiopSignature)",
																	"",
																	"const [ protectedHeaderBase64, , signature ] = token.split('.');",
																	"",
																	"const signatureObject = {",
																	"    signature: signature.replace('\"', ''),",
																	"    protectedHeader: protectedHeaderBase64.replace('\"', '')",
																	"};",
																	"",
																	"console.log(JSON.stringify(signatureObject))",
																	"",
																	"pm.variables.set('fspiopSignature',JSON.stringify(signatureObject))"
																],
																"type": "text/javascript"
															}
														},
														{
															"listen": "test",
															"script": {
																"id": "2464bbcc-8ea7-45d0-99b0-969b57f156a2",
																"exec": [
																	"pm.test(\"Status code is 200\", function () {",
																	"    pm.response.to.have.status(200);",
																	"});",
																	"",
																	"setTimeout(function () {",
																	"  pm.sendRequest(pm.environment.get(\"SIMPAYER_SDK_TESTAPI_URL\")+\"/callbacks/\"+pm.environment.get(\"transfer_ID\"), function (err, response) {",
																	"          if(response.responseSize !== 0) {",
																	"             //Check headers",
																	"              var headers = response.json().headers;",
																	"              ",
																	"                pm.test(`fspiop-source is ${pm.environment.get('NORESPONSE_SIMPAYEE_NAME')}`, function () {",
																	"                    pm.expect(headers['fspiop-source']).to.eql(pm.environment.get('NORESPONSE_SIMPAYEE_NAME'));",
																	"                });",
																	"                ",
																	"                pm.test(`fspiop-destination is ${pm.environment.get('SIMPAYER_NAME')}`, function () {",
																	"                    pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('SIMPAYER_NAME'));",
																	"                });",
																	"                ",
																	"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-signature is not empty`, function () {",
																	"                    pm.expect(headers['fspiop-signature']).not.eql(undefined);",
																	"                });",
																	"                ",
																	"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-http-method is PUT`, function () {",
																	"                    pm.expect(headers['fspiop-http-method']).to.eql('PUT');",
																	"                });",
																	"                ",
																	"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-uri contains /transfers/${pm.environment.get('transfer_ID')}`, function () {",
																	"                    pm.expect(headers['fspiop-uri']).to.eql(`/transfers/${pm.environment.get('transfer_ID')}`);",
																	"                });",
																	"                ",
																	"                pm.test(\"date header should not be empty\", function () {",
																	"                    pm.expect(headers['date']).to.be.not.empty;",
																	"                });",
																	"                ",
																	"                pm.test(\"accept header should not be sent in the response\", function () {",
																	"                    pm.expect(headers['accept']).to.eql(undefined);",
																	"                });",
																	"                ",
																	"                pm.test(\"content-type is same as sent in the request\", function () {",
																	"                    pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.transfers+json;version=1.0');",
																	"                });",
																	"                ",
																	"                ",
																	"             //Check data    ",
																	"              var jsonData = response.json().data;",
																	"              ",
																	"              pm.test(\"Response transferState should be COMMITTED\", function () {",
																	"                pm.expect(jsonData.transferState).to.eql('COMMITTED');",
																	"              });",
																	"              ",
																	"          } else {",
																	"              pm.test(\"Transfer FAILED\", function () {",
																	"                throw new Error('Did not receive response on payer side');",
																	"              });",
																	"              // postman.setNextRequest(null)",
																	"          }",
																	"   });",
																	"}, pm.environment.get(\"SET_TIMEOUT_TRANSFERS\"))",
																	"",
																	""
																],
																"type": "text/javascript"
															}
														}
													],
													"request": {
														"auth": {
															"type": "bearer",
															"bearer": [
																{
																	"key": "token",
																	"value": "{{NORESPONSE_SIMPAYEE_BEARER_TOKEN}}",
																	"type": "string"
																}
															]
														},
														"method": "PUT",
														"header": [
															{
																"key": "Accept",
																"value": "application/vnd.interoperability.transfers+json;version=1.0",
																"type": "text"
															},
															{
																"key": "Content-Type",
																"value": "application/vnd.interoperability.transfers+json;version=1.0",
																"type": "text"
															},
															{
																"key": "Date",
																"value": "{{transferDate}}",
																"type": "text"
															},
															{
																"key": "FSPIOP-Source",
																"value": "{{NORESPONSE_SIMPAYEE_NAME}}",
																"type": "text"
															},
															{
																"key": "FSPIOP-Destination",
																"value": "{{SIMPAYER_NAME}}",
																"type": "text"
															},
															{
																"key": "FSPIOP-Signature",
																"value": "{{fspiopSignature}}",
																"type": "text"
															},
															{
																"key": "FSPIOP-URI",
																"value": "/transfers/{{transfer_ID}}",
																"type": "text"
															},
															{
																"key": "FSPIOP-HTTP-Method",
																"value": "PUT",
																"type": "text"
															}
														],
														"body": {
															"mode": "raw",
															"raw": "{{transferResponse}}"
														},
														"url": {
															"raw": "{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}/transfers/{{transfer_ID}}",
															"host": [
																"{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}"
															],
															"path": [
																"transfers",
																"{{transfer_ID}}"
															]
														}
													},
													"response": []
												},
												{
													"name": "Send Invalid Duplicate Fulfill",
													"event": [
														{
															"listen": "prerequest",
															"script": {
																"id": "cdfe26bf-e47b-42c8-b604-bf488e0457bd",
																"exec": [
																	"pm.variables.set(\"updatedTimestamp\",new Date().toISOString());",
																	"var navigator = {}; //fake a navigator object for the lib",
																	"var window = {}; //fake a window object for the lib",
																	"eval(pm.environment.get('jrsassign'));",
																	"",
																	"var uuid = require('uuid');",
																	"var generatedUUID = uuid.v4();",
																	"pm.environment.set('transfer_ID', pm.environment.get('transactionId'));",
																	"",
																	"",
																	"pm.variables.set('transferDate', (new Date()).toUTCString());",
																	"",
																	"pm.environment.set(\"transferExpiration\",new Date(new Date().getTime() + 60000))",
																	"",
																	"var oHeader = {alg: \"RS256\", \"FSPIOP-Source\":pm.environment.get('NORESPONSE_SIMPAYEE_NAME'),\"FSPIOP-Destination\":pm.environment.get('SIMPAYER_NAME'), \"FSPIOP-URI\":`/transfers/${pm.environment.get('transfer_ID')}`, \"FSPIOP-HTTP-Method\":\"PUT\", \"Date\":pm.variables.get('transferDate')};",
																	"var sHeader = JSON.stringify(oHeader);",
																	"console.log(`sHeader: ${sHeader}`)",
																	"",
																	"var objPayload = {",
																	"    ",
																	"  \"fulfilment\": pm.environment.get('invalidFulfillment'),",
																	"  \"completedTimestamp\": pm.variables.get('updatedTimestamp'),",
																	"  \"transferState\": \"COMMITTED\"",
																	"}",
																	"",
																	"var sPayload = JSON.stringify(objPayload)",
																	"console.log(`sPayload: ${sPayload}`)",
																	"pm.variables.set(\"transferResponse\", sPayload);",
																	"var token = KJUR.jws.JWS.sign(\"RS256\", sHeader, sPayload, pm.environment.get('SIMPAYEE_JWS_KEY'));",
																	"//console.log(`token: ${token}`)",
																	"",
																	"// var encodedHeaders = btoa(sHeader)",
																	"",
																	"// var ofspiopSignature = {signature: vSignature, protectedHeader: encodedHeaders}",
																	"// var token = JSON.stringify(ofspiopSignature)",
																	"",
																	"const [ protectedHeaderBase64, , signature ] = token.split('.');",
																	"",
																	"const signatureObject = {",
																	"    signature: signature.replace('\"', ''),",
																	"    protectedHeader: protectedHeaderBase64.replace('\"', '')",
																	"};",
																	"",
																	"console.log(JSON.stringify(signatureObject))",
																	"",
																	"pm.variables.set('fspiopSignature',JSON.stringify(signatureObject))"
																],
																"type": "text/javascript"
															}
														},
														{
															"listen": "test",
															"script": {
																"id": "2d9d8854-9278-44ce-b985-a0f724bb5ee5",
																"exec": [
																	"pm.test(\"Status code is 200\", function () {",
																	"    pm.response.to.have.status(200);",
																	"});",
																	"",
																	"setTimeout(function () {",
																	"  pm.sendRequest(pm.environment.get(\"SIMPAYEE_SDK_TESTAPI_URL\")+\"/callbacks/\"+pm.environment.get(\"transfer_ID\"), function (err, response) {",
																	"          if(response.responseSize !== 0) {",
																	"             //Check headers",
																	"              var headers = response.json().headers;",
																	"              ",
																	"                pm.test(\"fspiop-source is switch\", function () {",
																	"                    pm.expect(headers['fspiop-source']).to.eql('switch');",
																	"                });",
																	"                ",
																	"                pm.test(`fspiop-destination is ${pm.environment.get('NORESPONSE_SIMPAYEE_NAME')}`, function () {",
																	"                    pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('NORESPONSE_SIMPAYEE_NAME'));",
																	"                });",
																	"                ",
																	"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-signature is not empty`, function () {",
																	"                    pm.expect(headers['fspiop-signature']).not.eql(undefined);",
																	"                });",
																	"                ",
																	"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-http-method is PUT`, function () {",
																	"                    pm.expect(headers['fspiop-http-method']).to.eql('PUT');",
																	"                });",
																	"                ",
																	"                pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-uri is /transfers/${pm.environment.get('transfer_ID')}/error);`, function () {",
																	"                    pm.expect(headers['fspiop-uri']).to.eql(`/transfers/${pm.environment.get('transfer_ID')}/error`);",
																	"                });",
																	"                ",
																	"                pm.test(\"date header should not be empty\", function () {",
																	"                    pm.expect(headers['date']).to.be.not.empty;",
																	"                });",
																	"                ",
																	"                pm.test(\"accept header should not be sent in the response\", function () {",
																	"                    pm.expect(headers['accept']).to.eql(undefined);",
																	"                });",
																	"                ",
																	"                pm.test(\"content-type is same as sent in the request\", function () {",
																	"                    pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.transfers+json;version=1.0');",
																	"                });",
																	"                ",
																	"                ",
																	"             //Check data    ",
																	"              var jsonData = response.json().data;",
																	"              ",
																	"              pm.test(\"Response Error Code is 3106\", function () {",
																	"                pm.expect(jsonData.errorInformation.errorCode).to.eql('3106');",
																	"              });",
																	"              ",
																	"              pm.test(\"Response Error Desription is 'Modified request'\", function () {",
																	"                pm.expect(jsonData.errorInformation.errorDescription).to.eql('Modified request');",
																	"              });",
																	"          } else {",
																	"              pm.test(\"Transfer FAILED\", function () {",
																	"                throw new Error('Did not receive response on payer side');",
																	"              });",
																	"              // postman.setNextRequest(null)",
																	"          }",
																	"   });",
																	"}, pm.environment.get(\"SET_TIMEOUT_TRANSFERS\"))"
																],
																"type": "text/javascript"
															}
														}
													],
													"request": {
														"auth": {
															"type": "bearer",
															"bearer": [
																{
																	"key": "token",
																	"value": "{{NORESPONSE_SIMPAYEE_BEARER_TOKEN}}",
																	"type": "string"
																}
															]
														},
														"method": "PUT",
														"header": [
															{
																"key": "Accept",
																"value": "application/vnd.interoperability.transfers+json;version=1.0",
																"type": "text"
															},
															{
																"key": "Content-Type",
																"value": "application/vnd.interoperability.transfers+json;version=1.0",
																"type": "text"
															},
															{
																"key": "Date",
																"value": "{{transferDate}}",
																"type": "text"
															},
															{
																"key": "FSPIOP-Source",
																"value": "{{NORESPONSE_SIMPAYEE_NAME}}",
																"type": "text"
															},
															{
																"key": "FSPIOP-Destination",
																"value": "{{SIMPAYER_NAME}}",
																"type": "text"
															},
															{
																"key": "FSPIOP-Signature",
																"value": "{{fspiopSignature}}",
																"type": "text"
															},
															{
																"key": "FSPIOP-URI",
																"value": "/transfers/{{transfer_ID}}",
																"type": "text"
															},
															{
																"key": "FSPIOP-HTTP-Method",
																"value": "PUT",
																"type": "text"
															}
														],
														"body": {
															"mode": "raw",
															"raw": "{{transferResponse}}"
														},
														"url": {
															"raw": "{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}/transfers/{{transfer_ID}}",
															"host": [
																"{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}"
															],
															"path": [
																"transfers",
																"{{transfer_ID}}"
															]
														}
													},
													"response": []
												}
											],
											"protocolProfileBehavior": {},
											"_postman_isSubFolder": true
										}
									],
									"description": "Send a transfer-prepare from payerfsp to payeefsp\nDo not send transfer-fulfil from payeefsp.\n\nSend a duplicate transfer-prepare with same params.\ncheck the simulator logs to make sure that there should not be any response for the duplicate transfer when the actual transfer is not at terminal state which means neither committed nor aborted but in process.\n\nThis is same as sending duplicate transfer when actual transfer is at ABORTED state.",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "7371b671-1f63-4273-a5d9-9fd5613b72bb",
												"type": "text/javascript",
												"exec": [
													""
												]
											}
										},
										{
											"listen": "test",
											"script": {
												"id": "2238e39a-cacc-4a1f-9378-6de71e645d56",
												"type": "text/javascript",
												"exec": [
													""
												]
											}
										}
									],
									"protocolProfileBehavior": {},
									"_postman_isSubFolder": true
								},
								{
									"name": "fulfill_reject",
									"item": [
										{
											"name": "positive",
											"item": [
												{
													"name": "Send Quote - RECEIVE",
													"event": [
														{
															"listen": "prerequest",
															"script": {
																"id": "24955322-813f-4191-a1fd-79d3e88e6a0b",
																"exec": [
																	"var navigator = {}; ",
																	"var window = {}; ",
																	"eval(pm.environment.get('jrsassign'));",
																	"",
																	"",
																	"var uuid = require('uuid');",
																	"var generatedUUID = uuid.v4();",
																	"pm.environment.set('quoteId', generatedUUID);",
																	"generatedUUID = uuid.v4();",
																	"pm.environment.set('transactionId', generatedUUID);",
																	"",
																	"pm.variables.set('quoteDate', (new Date()).toUTCString());",
																	"pm.variables.set('payerName', 'PayerFirst PayerLast');",
																	"",
																	"pm.variables.set('expectedPayeeFirstName', 'GoldenFirst');",
																	"pm.variables.set('expectedPayeeLastName', 'GoldenLast');",
																	"pm.variables.set('expectedPayeeDOB', '2010-10-10');",
																	"",
																	"var oHeader = {alg: \"RS256\", \"FSPIOP-Source\":pm.environment.get('SIMPAYER_NAME'),\"FSPIOP-Destination\":pm.environment.get('SIMPAYEE_NAME'), \"FSPIOP-URI\":\"/quotes\", \"FSPIOP-HTTP-Method\":\"POST\", \"Date\":pm.variables.get('quoteDate')};",
																	"var sHeader = JSON.stringify(oHeader);",
																	"console.log(`sHeader: ${sHeader}`)",
																	"",
																	"var objPayload = {",
																	"  \"quoteId\": pm.environment.get('quoteId'),",
																	"  \"transactionId\": pm.environment.get('transactionId'),",
																	"  \"payer\": {",
																	"    \"partyIdInfo\": {",
																	"      \"partyIdType\": \"MSISDN\",",
																	"      \"partyIdentifier\": pm.environment.get('SIMPAYER_MSISDN'),",
																	"      \"fspId\": pm.environment.get('SIMPAYER_NAME')",
																	"    },",
																	"    \"personalInfo\": {",
																	"      \"complexName\": {",
																	"        \"firstName\": \"Mats\",",
																	"        \"lastName\": \"Hagman\"",
																	"      },",
																	"      \"dateOfBirth\": \"1983-10-25\"",
																	"    }",
																	"  },",
																	"  \"payee\": {",
																	"    \"partyIdInfo\": {",
																	"      \"partyIdType\": \"MSISDN\",",
																	"      \"partyIdentifier\": pm.environment.get('SIMPAYEE_MSISDN'),",
																	"      \"fspId\": pm.environment.get('SIMPAYEE_NAME')",
																	"    }",
																	"  },",
																	"  \"amountType\": \"RECEIVE\",",
																	"  \"amount\": {",
																	"    \"amount\": \"1\",",
																	"    \"currency\": pm.environment.get('SIMPAYEE_CURRENCY')",
																	"  },",
																	"  \"transactionType\": {",
																	"    \"scenario\": \"TRANSFER\",",
																	"    \"initiator\": \"PAYER\",",
																	"    \"initiatorType\": \"CONSUMER\"",
																	"  },",
																	"  \"note\": \"hej\"",
																	"}",
																	"",
																	"var sPayload = JSON.stringify(objPayload)",
																	"console.log(`sPayload: ${sPayload}`)",
																	"pm.variables.set(\"quoteRequest\", sPayload);",
																	"var token = KJUR.jws.JWS.sign(\"RS256\", sHeader, sPayload, pm.environment.get('SIMPAYER_JWS_KEY'));",
																	"console.log(`token: ${token}`)",
																	"",
																	"// var encodedHeaders = btoa(sHeader)",
																	"",
																	"// var ofspiopSignature = {signature: vSignature, protectedHeader: encodedHeaders}",
																	"// var token = JSON.stringify(ofspiopSignature)",
																	"",
																	"const [ protectedHeaderBase64, , signature ] = token.split('.');",
																	"",
																	"const signatureObject = {",
																	"    signature: signature.replace('\"', ''),",
																	"    protectedHeader: protectedHeaderBase64.replace('\"', '')",
																	"};",
																	"",
																	"console.log(JSON.stringify(signatureObject))",
																	"",
																	"pm.variables.set('fspiopSignature',JSON.stringify(signatureObject))",
																	"",
																	"",
																	"",
																	"",
																	""
																],
																"type": "text/javascript"
															}
														},
														{
															"listen": "test",
															"script": {
																"id": "e03e2926-108f-4a7c-abd2-5af4505c9ecf",
																"exec": [
																	"pm.test(\"Status code is 202\", function () {",
																	"    pm.response.to.have.status(202);",
																	"});",
																	"",
																	"setTimeout(function () {",
																	"  pm.sendRequest(pm.environment.get(\"SIMPAYEE_SDK_TESTAPI_URL\")+\"/requests/\"+pm.variables.get(\"quoteId\"), function (err, response) {",
																	"          if(response.responseSize !== 0) {",
																	"              ",
																	"              //Check the Headers",
																	"              var headers = response.json().headers;",
																	"              ",
																	"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-source is ${pm.environment.get('SIMPAYER_NAME')}`, function () {",
																	"                    pm.expect(headers['fspiop-source']).to.eql(pm.environment.get('SIMPAYER_NAME'));",
																	"                });",
																	"                ",
																	"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-destination is ${pm.environment.get('SIMPAYEE_NAME')}`, function () {",
																	"                    pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('SIMPAYEE_NAME'));",
																	"                });",
																	"                ",
																	"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-signature is same as sent in the request`, function () {",
																	"                    pm.expect(headers['fspiop-signature']).to.eql(pm.variables.get(\"fspiopSignature\"));",
																	"                });",
																	"                ",
																	"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} accept is same as sent in the request`, function () {",
																	"                    pm.expect(headers['accept']).to.match(/application\\/vnd\\.interoperability\\.quotes\\+json;version=1(\\.\\d)?/);",
																	"                });",
																	"                ",
																	"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} content-typeis same as sent in the request`, function () {",
																	"                    pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.quotes+json;version=1.0');",
																	"                });",
																	"                ",
																	"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-uri is /quotes`, function () {",
																	"                    pm.expect(headers['fspiop-uri']).to.eql('/quotes');",
																	"                });",
																	"                ",
																	"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-http-method is POST`, function () {",
																	"                    pm.expect(headers['fspiop-http-method']).to.eql('POST');",
																	"                });",
																	"                ",
																	"          } else {",
																	"              pm.test(\"Quote FAILED\", function () {",
																	"                throw new Error('Did not receive request on payee side');",
																	"              });",
																	"              // postman.setNextRequest(null)",
																	"          }",
																	"   });",
																	"}, pm.environment.get(\"SET_TIMEOUT_QUOTES\"))",
																	"",
																	"setTimeout(function () {",
																	"  pm.sendRequest(pm.environment.get(\"SIMPAYER_SDK_TESTAPI_URL\")+\"/callbacks/\"+pm.environment.get(\"quoteId\"), function (err, response) {",
																	"      if(response.responseSize !== 0) {",
																	"          //Checking headers",
																	"            var headers = response.json().headers;",
																	"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-source is ${pm.environment.get('SIMPAYEE_NAME')}`, function () {",
																	"                pm.expect(headers['fspiop-source']).to.eql(pm.environment.get('SIMPAYEE_NAME'));",
																	"            });",
																	"            ",
																	"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-destination is ${pm.environment.get('SIMPAYER_NAME')}`, function () {",
																	"                pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('SIMPAYER_NAME'));",
																	"            });",
																	"            ",
																	"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} content-type should be application/vnd.interoperability.quotes+json;version=1.0`, function () {",
																	"                pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.quotes+json;version=1.0');",
																	"            });",
																	"            ",
																	"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} accept is empty`, function () {",
																	"                pm.expect(headers['accept']).to.eql(undefined);",
																	"            });",
																	"            ",
																	"            ",
																	"            ",
																	"            var {signature,protectedHeader} = JSON.parse(headers['fspiop-signature'])",
																	"            // var strData = JSON.stringify(response.json().data)",
																	"            // const token = `${protectedHeader}.${btoa(strData)}.${signature}`",
																	"            // console.log(`token: ${token}`)",
																	"            // var isValid = KJUR.jws.JWS.verify(token, pm.environment.get('goldenpayeefspJWSPubKey'), {alg: ['RS256']})",
																	"            // console.log(`isValid: ${isValid}`)",
																	"            // pm.test(\"Check if the response is JWS valid\", function () {",
																	"            //     pm.expect(isValid).to.eql(true);",
																	"            // });",
																	"            ",
																	"            //Validate protected header inside Signature",
																	"            var decodedProtectedHeaders = JSON.parse(atob(protectedHeader))",
																	"            console.log('decodedProtectedHeaders:',decodedProtectedHeaders)",
																	"            ",
																	"            pm.test(\"FSPIOP-Signature Protected Header alg to be RS256\", function () {",
																	"                pm.expect(decodedProtectedHeaders['alg']).to.eql('RS256');",
																	"            });",
																	"            pm.test(\"FSPIOP-Signature Protected Header FSPIOP-URI to be /quotes/\"+pm.environment.get(\"quoteId\"), function () {",
																	"                pm.expect(decodedProtectedHeaders['FSPIOP-URI']).to.eql('/quotes/'+pm.environment.get(\"quoteId\"));",
																	"            });",
																	"            ",
																	"",
																	"            pm.test(\"FSPIOP-Signature Protected Header FSPIOP-HTTP-Method to be PUT\", function () {",
																	"                pm.expect(decodedProtectedHeaders['FSPIOP-HTTP-Method']).to.eql('PUT');",
																	"            });",
																	"            pm.test(`FSPIOP-Signature Protected Header FSPIOP-Source to be ${pm.environment.get('SIMPAYEE_NAME')}`, function () {",
																	"                pm.expect(decodedProtectedHeaders['FSPIOP-Source']).to.eql(pm.environment.get('SIMPAYEE_NAME'));",
																	"            });",
																	"            pm.test(`FSPIOP-Signature Protected Header FSPIOP-Destination to be ${pm.environment.get('SIMPAYER_NAME')}`, function () {",
																	"                pm.expect(decodedProtectedHeaders['FSPIOP-Destination']).to.eql(pm.environment.get('SIMPAYER_NAME'));",
																	"            });",
																	"            pm.test(\"FSPIOP-Signature Protected Header Date is present\", function () {",
																	"                pm.expect(decodedProtectedHeaders['Date']).to.eql(headers['date']);",
																	"            });",
																	"           ",
																	"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} FSPIOP-URI to be /quotes/${pm.environment.get(\"quoteId\")}`, function () {",
																	"                pm.expect(headers['fspiop-uri']).to.eql(`/quotes/${pm.environment.get(\"quoteId\")}`);",
																	"            });",
																	"            ",
																	"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-http-method is PUT`, function () {",
																	"                pm.expect(headers['fspiop-http-method']).to.eql('PUT');",
																	"            });",
																	"            ",
																	"            var jsonData = response.json().data;",
																	"            ",
																	"            pm.test(\"Response quoteId is  null\", function () {",
																	"                pm.expect(jsonData.quoteId).to.eql(undefined);",
																	"                ",
																	"            });",
																	"          ",
																	"            pm.test(\"Response ilpPacket is not null\", function () {",
																	"                pm.expect(jsonData.ilpPacket).not.equal(undefined);",
																	"                pm.environment.set(\"ilpPacket\", jsonData.ilpPacket);",
																	"            });",
																	"       ",
																	"           pm.test(\"Response condition is not null\", function () {",
																	"               pm.expect(jsonData.condition).not.equal(undefined);",
																	"               pm.environment.set(\"condition\", jsonData.condition);",
																	"           });",
																	"      } else {",
																	"          pm.test(\"Quote FAILED\", function () {",
																	"            throw new Error('Did not receive response on Payer side');",
																	"           });",
																	"           // postman.setNextRequest(null);",
																	"      }",
																	"       ",
																	"   });",
																	"}, pm.environment.get(\"SET_TIMEOUT_QUOTES\"))",
																	"",
																	"",
																	""
																],
																"type": "text/javascript"
															}
														}
													],
													"request": {
														"auth": {
															"type": "bearer",
															"bearer": [
																{
																	"key": "token",
																	"value": "{{SIMPAYER_BEARER_TOKEN}}",
																	"type": "string"
																}
															]
														},
														"method": "POST",
														"header": [
															{
																"key": "Accept",
																"value": "application/vnd.interoperability.quotes+json;version=1.0"
															},
															{
																"key": "Content-Type",
																"value": "application/vnd.interoperability.quotes+json;version=1.0"
															},
															{
																"key": "Date",
																"value": "{{quoteDate}}"
															},
															{
																"key": "FSPIOP-Source",
																"value": "{{SIMPAYER_NAME}}"
															},
															{
																"key": "FSPIOP-Destination",
																"value": "{{SIMPAYEE_NAME}}"
															},
															{
																"key": "FSPIOP-Signature",
																"type": "text",
																"value": "{{fspiopSignature}}"
															},
															{
																"key": "FSPIOP-HTTP-Method",
																"type": "text",
																"value": "POST"
															},
															{
																"key": "FSPIOP-URI",
																"type": "text",
																"value": "/quotes"
															}
														],
														"body": {
															"mode": "raw",
															"raw": "{{quoteRequest}}"
														},
														"url": {
															"raw": "{{HOST_QUOTING_SERVICE}}/quotes",
															"host": [
																"{{HOST_QUOTING_SERVICE}}"
															],
															"path": [
																"quotes"
															]
														}
													},
													"response": []
												},
												{
													"name": "Send Transfer-Prepare",
													"event": [
														{
															"listen": "prerequest",
															"script": {
																"id": "91c0134f-fbbd-430f-8ae0-212e2ea5ecb3",
																"exec": [
																	"",
																	"var navigator = {}; //fake a navigator object for the lib",
																	"var window = {}; //fake a window object for the lib",
																	"eval(pm.environment.get('jrsassign'));",
																	"",
																	"var uuid = require('uuid');",
																	"var generatedUUID = uuid.v4();",
																	"pm.environment.set('transfer_ID', pm.environment.get('transactionId'));",
																	"",
																	"",
																	"pm.variables.set('transferDate', (new Date()).toUTCString());",
																	"",
																	"pm.environment.set(\"transferExpiration\",new Date(new Date().getTime() + 60000))",
																	"",
																	"var oHeader = {alg: \"RS256\", \"FSPIOP-Source\":pm.environment.get('SIMPAYER_NAME'),\"FSPIOP-Destination\":pm.environment.get('NORESPONSE_SIMPAYEE_NAME'), \"FSPIOP-URI\":\"/transfers\", \"FSPIOP-HTTP-Method\":\"POST\", \"Date\":pm.variables.get('transferDate')};",
																	"var sHeader = JSON.stringify(oHeader);",
																	"console.log(`sHeader: ${sHeader}`)",
																	"",
																	"var objPayload = {",
																	"  \"transferId\": pm.environment.get('transfer_ID'),",
																	"  \"payerFsp\": pm.environment.get('SIMPAYER_NAME'),",
																	"  \"payeeFsp\": pm.environment.get('NORESPONSE_SIMPAYEE_NAME'),",
																	"  \"amount\": {",
																	"    \"amount\": \"10\",",
																	"    \"currency\": pm.environment.get('SIMPAYEE_CURRENCY')",
																	"  },",
																	"  \"expiration\": pm.environment.get('transferExpiration'),",
																	"  \"ilpPacket\": pm.environment.get('validIlpPacket'),",
																	"  \"condition\": pm.environment.get('validCondition')",
																	"}",
																	"var sPayload = JSON.stringify(objPayload)",
																	"console.log(`sPayload: ${sPayload}`)",
																	"pm.variables.set(\"transferRequest\", sPayload);",
																	"var token = KJUR.jws.JWS.sign(\"RS256\", sHeader, sPayload, pm.environment.get('SIMPAYER_JWS_KEY'));",
																	"//console.log(`token: ${token}`)",
																	"",
																	"// var encodedHeaders = btoa(sHeader)",
																	"",
																	"// var ofspiopSignature = {signature: vSignature, protectedHeader: encodedHeaders}",
																	"// var token = JSON.stringify(ofspiopSignature)",
																	"",
																	"const [ protectedHeaderBase64, , signature ] = token.split('.');",
																	"",
																	"const signatureObject = {",
																	"    signature: signature.replace('\"', ''),",
																	"    protectedHeader: protectedHeaderBase64.replace('\"', '')",
																	"};",
																	"",
																	"console.log(JSON.stringify(signatureObject))",
																	"",
																	"pm.variables.set('fspiopSignature',JSON.stringify(signatureObject))"
																],
																"type": "text/javascript"
															}
														},
														{
															"listen": "test",
															"script": {
																"id": "644d049d-40e7-4b5e-86ae-5ceb71966410",
																"exec": [
																	"pm.test(\"Status code is 202\", function () {",
																	"    pm.response.to.have.status(202);",
																	"});",
																	"",
																	"",
																	"",
																	"",
																	""
																],
																"type": "text/javascript"
															}
														}
													],
													"request": {
														"auth": {
															"type": "bearer",
															"bearer": [
																{
																	"key": "token",
																	"value": "{{SIMPAYER_BEARER_TOKEN}}",
																	"type": "string"
																}
															]
														},
														"method": "POST",
														"header": [
															{
																"key": "Accept",
																"value": "application/vnd.interoperability.transfers+json;version=1.0",
																"type": "text"
															},
															{
																"key": "Content-Type",
																"value": "application/vnd.interoperability.transfers+json;version=1.0",
																"type": "text"
															},
															{
																"key": "Date",
																"value": "{{transferDate}}",
																"type": "text"
															},
															{
																"key": "FSPIOP-Source",
																"value": "{{SIMPAYER_NAME}}",
																"type": "text"
															},
															{
																"key": "FSPIOP-Destination",
																"value": "{{NORESPONSE_SIMPAYEE_NAME}}",
																"type": "text"
															},
															{
																"key": "FSPIOP-Signature",
																"value": "{{fspiopSignature}}",
																"type": "text"
															},
															{
																"key": "FSPIOP-URI",
																"value": "/transfers",
																"type": "text"
															},
															{
																"key": "FSPIOP-HTTP-Method",
																"value": "POST",
																"type": "text"
															}
														],
														"body": {
															"mode": "raw",
															"raw": "{{transferRequest}}"
														},
														"url": {
															"raw": "{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}/transfers",
															"host": [
																"{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}"
															],
															"path": [
																"transfers"
															]
														}
													},
													"response": []
												},
												{
													"name": "Send Fulfill-Reject",
													"event": [
														{
															"listen": "prerequest",
															"script": {
																"id": "2902c3d6-9a04-4030-bac2-d2e57262f7af",
																"exec": [
																	"pm.environment.set(\"completedTimestamp\",new Date().toISOString());",
																	"var navigator = {}; //fake a navigator object for the lib",
																	"var window = {}; //fake a window object for the lib",
																	"eval(pm.environment.get('jrsassign'));",
																	"",
																	"var uuid = require('uuid');",
																	"var generatedUUID = uuid.v4();",
																	"pm.environment.set('transfer_ID', pm.environment.get('transactionId'));",
																	"",
																	"",
																	"pm.variables.set('transferDate', (new Date()).toUTCString());",
																	"",
																	"pm.environment.set(\"transferExpiration\",new Date(new Date().getTime() + 60000))",
																	"",
																	"var oHeader = {alg: \"RS256\", \"FSPIOP-Source\":pm.environment.get('NORESPONSE_SIMPAYEE_NAME'),\"FSPIOP-Destination\":pm.environment.get('SIMPAYER_NAME'), \"FSPIOP-URI\":`/transfers/${pm.environment.get('transfer_ID')}/error`, \"FSPIOP-HTTP-Method\":\"PUT\", \"Date\":pm.variables.get('transferDate')};",
																	"var sHeader = JSON.stringify(oHeader);",
																	"console.log(`sHeader: ${sHeader}`)",
																	"",
																	"var objPayload = {",
																	"\t\"errorInformation\": {",
																	"\t\t\"errorCode\": \"5101\",",
																	"\t\t\"errorDescription\": \"Payee transaction limit reached\",",
																	"\t\t\"extensionList\": {",
																	"\t\t\t\"extension\": [{",
																	"\t\t\t\t\"key\": \"errorDetail\",",
																	"\t\t\t\t\"value\": \"This is an abort extension\"",
																	"\t\t\t}]",
																	"\t\t}",
																	"\t}",
																	"}",
																	"var sPayload = JSON.stringify(objPayload)",
																	"console.log(`sPayload: ${sPayload}`)",
																	"pm.variables.set(\"fulfillResponse\", sPayload);",
																	"var token = KJUR.jws.JWS.sign(\"RS256\", sHeader, sPayload, pm.environment.get('SIMPAYEE_JWS_KEY'));",
																	"//console.log(`token: ${token}`)",
																	"",
																	"// var encodedHeaders = btoa(sHeader)",
																	"",
																	"// var ofspiopSignature = {signature: vSignature, protectedHeader: encodedHeaders}",
																	"// var token = JSON.stringify(ofspiopSignature)",
																	"",
																	"const [ protectedHeaderBase64, , signature ] = token.split('.');",
																	"",
																	"const signatureObject = {",
																	"    signature: signature.replace('\"', ''),",
																	"    protectedHeader: protectedHeaderBase64.replace('\"', '')",
																	"};",
																	"",
																	"console.log(JSON.stringify(signatureObject))",
																	"",
																	"pm.variables.set('fspiopSignature',JSON.stringify(signatureObject))"
																],
																"type": "text/javascript"
															}
														},
														{
															"listen": "test",
															"script": {
																"id": "cb389bf4-80d0-4348-b420-a68a6d96737b",
																"exec": [
																	"pm.test(\"Status code is 200\", function () {",
																	"    pm.response.to.have.status(200);",
																	"});",
																	"",
																	"setTimeout(function () {",
																	"  pm.sendRequest(pm.environment.get(\"SIMPAYER_SDK_TESTAPI_URL\")+\"/callbacks/\"+pm.environment.get(\"transfer_ID\"), function (err, response) {",
																	"          if(response.responseSize !== 0) {",
																	"              //Check headers",
																	"              var headers = response.json().headers;",
																	"              ",
																	"                pm.test(`fspiop-source is ${pm.environment.get('NORESPONSE_SIMPAYEE_NAME')}`, function () {",
																	"                    pm.expect(headers['fspiop-source']).to.eql(pm.environment.get('NORESPONSE_SIMPAYEE_NAME'));",
																	"                });",
																	"                ",
																	"                pm.test(`fspiop-destination is ${pm.environment.get('SIMPAYER_NAME')}`, function () {",
																	"                    pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('SIMPAYER_NAME'));",
																	"                });",
																	"                ",
																	"                pm.test(\"date header should not be empty\", function () {",
																	"                    pm.expect(headers['date']).to.be.not.empty;",
																	"                });",
																	"                ",
																	"                pm.test(\"accept header should not be sent in the response\", function () {",
																	"                    pm.expect(headers['accept']).to.eql(undefined);",
																	"                });",
																	"                ",
																	"                pm.test(`${pm.environment.get('SIMPAYER_NAME')} content-type is same as sent in the request`, function () {",
																	"                    pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.transfers+json;version=1.0');",
																	"                });",
																	"                ",
																	"                pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-signature is not null`, function () {",
																	"                    pm.expect(headers['fspiop-signature']).not.eql(undefined);",
																	"                });",
																	"                ",
																	"                pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-http-method is PUT`, function () {",
																	"                    pm.expect(headers['fspiop-http-method']).to.eql('PUT');",
																	"                });",
																	"                ",
																	"                pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-uri is /transfers/${pm.environment.get('transfer_ID')}/error);`, function () {",
																	"                    pm.expect(headers['fspiop-uri']).to.eql(`/transfers/${pm.environment.get('transfer_ID')}/error`);",
																	"                });",
																	"                ",
																	"              //Check data",
																	"              var jsonData = response.json().data;",
																	"              pm.test(\"Response Error Code is 5101\", function () {",
																	"                pm.expect(jsonData.errorInformation.errorCode).to.eql('5101');",
																	"              });",
																	"              ",
																	"              pm.test(\"Response Error Desription is 'Payee transaction limit reached'\", function () {",
																	"                pm.expect(jsonData.errorInformation.errorDescription).to.eql('Payee transaction limit reached');",
																	"              });",
																	"              ",
																	"          } else {",
																	"              pm.test(\"Transfer FAILED\", function () {",
																	"                throw new Error('Did not receive response');",
																	"              });",
																	"              // postman.setNextRequest(null)",
																	"          }",
																	"   });",
																	"}, pm.environment.get(\"SET_TIMEOUT_TRANSFERS\"))"
																],
																"type": "text/javascript"
															}
														}
													],
													"request": {
														"auth": {
															"type": "bearer",
															"bearer": [
																{
																	"key": "token",
																	"value": "{{NORESPONSE_SIMPAYEE_BEARER_TOKEN}}",
																	"type": "string"
																}
															]
														},
														"method": "PUT",
														"header": [
															{
																"key": "Content-Type",
																"name": "Content-Type",
																"type": "text",
																"value": "application/vnd.interoperability.transfers+json;version=1.0"
															},
															{
																"key": "Accept",
																"value": "application/vnd.interoperability.transfers+json;version=1.0",
																"type": "text"
															},
															{
																"key": "Date",
																"type": "text",
																"value": "{{transferDate}}"
															},
															{
																"key": "FSPIOP-Source",
																"type": "text",
																"value": "{{NORESPONSE_SIMPAYEE_NAME}}"
															},
															{
																"key": "FSPIOP-Destination",
																"type": "text",
																"value": "{{SIMPAYER_NAME}}"
															},
															{
																"key": "FSPIOP-Signature",
																"value": "{{fspiopSignature}}",
																"type": "text"
															},
															{
																"key": "FSPIOP-HTTP-Method",
																"value": "PUT",
																"type": "text"
															},
															{
																"key": "FSPIOP-URI",
																"value": "/transfers/{{transfer_ID}}/error",
																"type": "text"
															}
														],
														"body": {
															"mode": "raw",
															"raw": "{{fulfillResponse}}"
														},
														"url": {
															"raw": "{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}/transfers/{{transfer_ID}}/error",
															"host": [
																"{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}"
															],
															"path": [
																"transfers",
																"{{transfer_ID}}",
																"error"
															]
														}
													},
													"response": []
												},
												{
													"name": "Send Duplicate Fulfill-Reject",
													"event": [
														{
															"listen": "prerequest",
															"script": {
																"id": "38ce134d-0ebd-4d55-9e13-23ea8e98c0d2",
																"exec": [
																	"pm.environment.set(\"completedTimestamp\",new Date().toISOString());",
																	"var navigator = {}; //fake a navigator object for the lib",
																	"var window = {}; //fake a window object for the lib",
																	"eval(pm.environment.get('jrsassign'));",
																	"",
																	"var uuid = require('uuid');",
																	"var generatedUUID = uuid.v4();",
																	"pm.environment.set('transfer_ID', pm.environment.get('transactionId'));",
																	"",
																	"",
																	"pm.variables.set('transferDate', (new Date()).toUTCString());",
																	"",
																	"pm.environment.set(\"transferExpiration\",new Date(new Date().getTime() + 60000))",
																	"",
																	"var oHeader = {alg: \"RS256\", \"FSPIOP-Source\":pm.environment.get('NORESPONSE_SIMPAYEE_NAME'),\"FSPIOP-Destination\":pm.environment.get('SIMPAYER_NAME'), \"FSPIOP-URI\":`/transfers/${pm.environment.get('transfer_ID')}/error`, \"FSPIOP-HTTP-Method\":\"PUT\", \"Date\":pm.variables.get('transferDate')};",
																	"var sHeader = JSON.stringify(oHeader);",
																	"console.log(`sHeader: ${sHeader}`)",
																	"",
																	"var objPayload = {",
																	"\t\"errorInformation\": {",
																	"\t\t\"errorCode\": \"5101\",",
																	"\t\t\"errorDescription\": \"Payee transaction limit reached\",",
																	"\t\t\"extensionList\": {",
																	"\t\t\t\"extension\": [{",
																	"\t\t\t\t\"key\": \"errorDetail\",",
																	"\t\t\t\t\"value\": \"This is an abort extension\"",
																	"\t\t\t}]",
																	"\t\t}",
																	"\t}",
																	"}",
																	"var sPayload = JSON.stringify(objPayload)",
																	"console.log(`sPayload: ${sPayload}`)",
																	"pm.variables.set(\"fulfillResponse\", sPayload);",
																	"var token = KJUR.jws.JWS.sign(\"RS256\", sHeader, sPayload, pm.environment.get('SIMPAYEE_JWS_KEY'));",
																	"//console.log(`token: ${token}`)",
																	"",
																	"// var encodedHeaders = btoa(sHeader)",
																	"",
																	"// var ofspiopSignature = {signature: vSignature, protectedHeader: encodedHeaders}",
																	"// var token = JSON.stringify(ofspiopSignature)",
																	"",
																	"const [ protectedHeaderBase64, , signature ] = token.split('.');",
																	"",
																	"const signatureObject = {",
																	"    signature: signature.replace('\"', ''),",
																	"    protectedHeader: protectedHeaderBase64.replace('\"', '')",
																	"};",
																	"",
																	"console.log(JSON.stringify(signatureObject))",
																	"",
																	"pm.variables.set('fspiopSignature',JSON.stringify(signatureObject))"
																],
																"type": "text/javascript"
															}
														},
														{
															"listen": "test",
															"script": {
																"id": "0ff49dd4-f7f4-4c27-a8b2-ab9fb9ec0f61",
																"exec": [
																	"pm.test(\"Status code is 200\", function () {",
																	"    pm.response.to.have.status(200);",
																	"});",
																	"",
																	"setTimeout(function () {",
																	"  pm.sendRequest(pm.environment.get(\"SIMPAYER_SDK_TESTAPI_URL\")+\"/callbacks/\"+pm.environment.get(\"transfer_ID\"), function (err, response) {",
																	"          if(response.responseSize !== 0) {",
																	"              //Check headers",
																	"              var headers = response.json().headers;",
																	"              ",
																	"                pm.test(`fspiop-source is ${pm.environment.get('NORESPONSE_SIMPAYEE_NAME')}`, function () {",
																	"                    pm.expect(headers['fspiop-source']).to.eql(pm.environment.get('NORESPONSE_SIMPAYEE_NAME'));",
																	"                });",
																	"                ",
																	"                pm.test(`fspiop-destination is ${pm.environment.get('SIMPAYER_NAME')}`, function () {",
																	"                    pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('SIMPAYER_NAME'));",
																	"                });",
																	"                ",
																	"                pm.test(\"date header should not be empty\", function () {",
																	"                    pm.expect(headers['date']).to.be.not.empty;",
																	"                });",
																	"                ",
																	"                pm.test(\"accept header should not be sent in the response\", function () {",
																	"                    pm.expect(headers['accept']).to.eql(undefined);",
																	"                });",
																	"                ",
																	"                pm.test(`${pm.environment.get('SIMPAYER_NAME')} content-type is same as sent in the request`, function () {",
																	"                    pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.transfers+json;version=1.0');",
																	"                });",
																	"                ",
																	"                pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-signature is not null`, function () {",
																	"                    pm.expect(headers['fspiop-signature']).not.eql(undefined);",
																	"                });",
																	"                ",
																	"                pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-http-method is PUT`, function () {",
																	"                    pm.expect(headers['fspiop-http-method']).to.eql('PUT');",
																	"                });",
																	"                ",
																	"                pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-uri is /transfers/${pm.environment.get('transfer_ID')}/error);`, function () {",
																	"                    pm.expect(headers['fspiop-uri']).to.eql(`/transfers/${pm.environment.get('transfer_ID')}/error`);",
																	"                });",
																	"                ",
																	"              //Check data",
																	"              var jsonData = response.json().data;",
																	"              pm.test(\"Response Error Code is 5101\", function () {",
																	"                pm.expect(jsonData.errorInformation.errorCode).to.eql('5101');",
																	"              });",
																	"              ",
																	"              pm.test(\"Response Error Desription is 'Payee transaction limit reached'\", function () {",
																	"                pm.expect(jsonData.errorInformation.errorDescription).to.eql('Payee transaction limit reached');",
																	"              });",
																	"              ",
																	"          } else {",
																	"              pm.test(\"Transfer FAILED\", function () {",
																	"                throw new Error('Did not receive response');",
																	"              });",
																	"              // postman.setNextRequest(null)",
																	"          }",
																	"   });",
																	"}, pm.environment.get(\"SET_TIMEOUT_TRANSFERS\"))"
																],
																"type": "text/javascript"
															}
														}
													],
													"request": {
														"auth": {
															"type": "bearer",
															"bearer": [
																{
																	"key": "token",
																	"value": "{{NORESPONSE_SIMPAYEE_BEARER_TOKEN}}",
																	"type": "string"
																}
															]
														},
														"method": "PUT",
														"header": [
															{
																"key": "Content-Type",
																"value": "application/vnd.interoperability.transfers+json;version=1.0",
																"type": "text"
															},
															{
																"key": "Accept",
																"value": "application/vnd.interoperability.transfers+json;version=1.0",
																"type": "text"
															},
															{
																"key": "Date",
																"value": "{{dateHeader}}",
																"type": "text"
															},
															{
																"key": "FSPIOP-Source",
																"value": "{{NORESPONSE_SIMPAYEE_NAME}}",
																"type": "text"
															},
															{
																"key": "FSPIOP-Destination",
																"value": "{{SIMPAYER_NAME}}",
																"type": "text"
															},
															{
																"key": "FSPIOP-Signature",
																"value": "{{fspiopSignature}}",
																"type": "text"
															},
															{
																"key": "FSPIOP-HTTP-Method",
																"value": "PUT",
																"type": "text"
															},
															{
																"key": "FSPIOP-URI",
																"value": "/transfers/{{transfer_ID}}",
																"type": "text"
															}
														],
														"body": {
															"mode": "raw",
															"raw": "{{fulfillResponse}}"
														},
														"url": {
															"raw": "{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}/transfers/{{transfer_ID}}/error",
															"host": [
																"{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}"
															],
															"path": [
																"transfers",
																"{{transfer_ID}}",
																"error"
															]
														}
													},
													"response": []
												}
											],
											"protocolProfileBehavior": {},
											"_postman_isSubFolder": true
										},
										{
											"name": "negative",
											"item": [
												{
													"name": "Send Quote - RECEIVE",
													"event": [
														{
															"listen": "prerequest",
															"script": {
																"id": "87b032b6-8ce3-4cd6-be89-1800667b6838",
																"exec": [
																	"var navigator = {}; ",
																	"var window = {}; ",
																	"eval(pm.environment.get('jrsassign'));",
																	"",
																	"",
																	"var uuid = require('uuid');",
																	"var generatedUUID = uuid.v4();",
																	"pm.environment.set('quoteId', generatedUUID);",
																	"generatedUUID = uuid.v4();",
																	"pm.environment.set('transactionId', generatedUUID);",
																	"",
																	"pm.variables.set('quoteDate', (new Date()).toUTCString());",
																	"pm.variables.set('payerName', 'PayerFirst PayerLast');",
																	"",
																	"pm.variables.set('expectedPayeeFirstName', 'GoldenFirst');",
																	"pm.variables.set('expectedPayeeLastName', 'GoldenLast');",
																	"pm.variables.set('expectedPayeeDOB', '2010-10-10');",
																	"",
																	"var oHeader = {alg: \"RS256\", \"FSPIOP-Source\":pm.environment.get('SIMPAYER_NAME'),\"FSPIOP-Destination\":pm.environment.get('SIMPAYEE_NAME'), \"FSPIOP-URI\":\"/quotes\", \"FSPIOP-HTTP-Method\":\"POST\", \"Date\":pm.variables.get('quoteDate')};",
																	"var sHeader = JSON.stringify(oHeader);",
																	"console.log(`sHeader: ${sHeader}`)",
																	"",
																	"var objPayload = {",
																	"  \"quoteId\": pm.environment.get('quoteId'),",
																	"  \"transactionId\": pm.environment.get('transactionId'),",
																	"  \"payer\": {",
																	"    \"partyIdInfo\": {",
																	"      \"partyIdType\": \"MSISDN\",",
																	"      \"partyIdentifier\": pm.environment.get('SIMPAYER_MSISDN'),",
																	"      \"fspId\": pm.environment.get('SIMPAYER_NAME')",
																	"    },",
																	"    \"personalInfo\": {",
																	"      \"complexName\": {",
																	"        \"firstName\": \"Mats\",",
																	"        \"lastName\": \"Hagman\"",
																	"      },",
																	"      \"dateOfBirth\": \"1983-10-25\"",
																	"    }",
																	"  },",
																	"  \"payee\": {",
																	"    \"partyIdInfo\": {",
																	"      \"partyIdType\": \"MSISDN\",",
																	"      \"partyIdentifier\": pm.environment.get('SIMPAYEE_MSISDN'),",
																	"      \"fspId\": pm.environment.get('SIMPAYEE_NAME')",
																	"    }",
																	"  },",
																	"  \"amountType\": \"RECEIVE\",",
																	"  \"amount\": {",
																	"    \"amount\": \"1\",",
																	"    \"currency\": pm.environment.get('SIMPAYEE_CURRENCY')",
																	"  },",
																	"  \"transactionType\": {",
																	"    \"scenario\": \"TRANSFER\",",
																	"    \"initiator\": \"PAYER\",",
																	"    \"initiatorType\": \"CONSUMER\"",
																	"  },",
																	"  \"note\": \"hej\"",
																	"}",
																	"",
																	"var sPayload = JSON.stringify(objPayload)",
																	"console.log(`sPayload: ${sPayload}`)",
																	"pm.variables.set(\"quoteRequest\", sPayload);",
																	"var token = KJUR.jws.JWS.sign(\"RS256\", sHeader, sPayload, pm.environment.get('SIMPAYER_JWS_KEY'));",
																	"console.log(`token: ${token}`)",
																	"",
																	"// var encodedHeaders = btoa(sHeader)",
																	"",
																	"// var ofspiopSignature = {signature: vSignature, protectedHeader: encodedHeaders}",
																	"// var token = JSON.stringify(ofspiopSignature)",
																	"",
																	"const [ protectedHeaderBase64, , signature ] = token.split('.');",
																	"",
																	"const signatureObject = {",
																	"    signature: signature.replace('\"', ''),",
																	"    protectedHeader: protectedHeaderBase64.replace('\"', '')",
																	"};",
																	"",
																	"console.log(JSON.stringify(signatureObject))",
																	"",
																	"pm.variables.set('fspiopSignature',JSON.stringify(signatureObject))",
																	"",
																	"",
																	"",
																	"",
																	""
																],
																"type": "text/javascript"
															}
														},
														{
															"listen": "test",
															"script": {
																"id": "99420c04-acd5-4121-b2bd-5442fc28a95e",
																"exec": [
																	"pm.test(\"Status code is 202\", function () {",
																	"    pm.response.to.have.status(202);",
																	"});",
																	"",
																	"setTimeout(function () {",
																	"  pm.sendRequest(pm.environment.get(\"SIMPAYEE_SDK_TESTAPI_URL\")+\"/requests/\"+pm.variables.get(\"quoteId\"), function (err, response) {",
																	"          if(response.responseSize !== 0) {",
																	"              ",
																	"              //Check the Headers",
																	"              var headers = response.json().headers;",
																	"              ",
																	"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-source is ${pm.environment.get('SIMPAYER_NAME')}`, function () {",
																	"                    pm.expect(headers['fspiop-source']).to.eql(pm.environment.get('SIMPAYER_NAME'));",
																	"                });",
																	"                ",
																	"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-destination is ${pm.environment.get('SIMPAYEE_NAME')}`, function () {",
																	"                    pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('SIMPAYEE_NAME'));",
																	"                });",
																	"                ",
																	"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-signature is same as sent in the request`, function () {",
																	"                    pm.expect(headers['fspiop-signature']).to.eql(pm.variables.get(\"fspiopSignature\"));",
																	"                });",
																	"                ",
																	"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} accept is same as sent in the request`, function () {",
																	"                    pm.expect(headers['accept']).to.match(/application\\/vnd\\.interoperability\\.quotes\\+json;version=1(\\.\\d)?/);",
																	"                });",
																	"                ",
																	"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} content-typeis same as sent in the request`, function () {",
																	"                    pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.quotes+json;version=1.0');",
																	"                });",
																	"                ",
																	"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-uri is /quotes`, function () {",
																	"                    pm.expect(headers['fspiop-uri']).to.eql('/quotes');",
																	"                });",
																	"                ",
																	"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-http-method is POST`, function () {",
																	"                    pm.expect(headers['fspiop-http-method']).to.eql('POST');",
																	"                });",
																	"                ",
																	"          } else {",
																	"              pm.test(\"Quote FAILED\", function () {",
																	"                throw new Error('Did not receive request on payee side');",
																	"              });",
																	"              // postman.setNextRequest(null)",
																	"          }",
																	"   });",
																	"}, pm.environment.get(\"SET_TIMEOUT_QUOTES\"))",
																	"",
																	"setTimeout(function () {",
																	"  pm.sendRequest(pm.environment.get(\"SIMPAYER_SDK_TESTAPI_URL\")+\"/callbacks/\"+pm.environment.get(\"quoteId\"), function (err, response) {",
																	"      if(response.responseSize !== 0) {",
																	"          //Checking headers",
																	"            var headers = response.json().headers;",
																	"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-source is ${pm.environment.get('SIMPAYEE_NAME')}`, function () {",
																	"                pm.expect(headers['fspiop-source']).to.eql(pm.environment.get('SIMPAYEE_NAME'));",
																	"            });",
																	"            ",
																	"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-destination is ${pm.environment.get('SIMPAYER_NAME')}`, function () {",
																	"                pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('SIMPAYER_NAME'));",
																	"            });",
																	"            ",
																	"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} content-type should be application/vnd.interoperability.quotes+json;version=1.0`, function () {",
																	"                pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.quotes+json;version=1.0');",
																	"            });",
																	"            ",
																	"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} accept is empty`, function () {",
																	"                pm.expect(headers['accept']).to.eql(undefined);",
																	"            });",
																	"            ",
																	"            ",
																	"            ",
																	"            var {signature,protectedHeader} = JSON.parse(headers['fspiop-signature'])",
																	"            // var strData = JSON.stringify(response.json().data)",
																	"            // const token = `${protectedHeader}.${btoa(strData)}.${signature}`",
																	"            // console.log(`token: ${token}`)",
																	"            // var isValid = KJUR.jws.JWS.verify(token, pm.environment.get('goldenpayeefspJWSPubKey'), {alg: ['RS256']})",
																	"            // console.log(`isValid: ${isValid}`)",
																	"            // pm.test(\"Check if the response is JWS valid\", function () {",
																	"            //     pm.expect(isValid).to.eql(true);",
																	"            // });",
																	"            ",
																	"            //Validate protected header inside Signature",
																	"            var decodedProtectedHeaders = JSON.parse(atob(protectedHeader))",
																	"            console.log('decodedProtectedHeaders:',decodedProtectedHeaders)",
																	"            ",
																	"            pm.test(\"FSPIOP-Signature Protected Header alg to be RS256\", function () {",
																	"                pm.expect(decodedProtectedHeaders['alg']).to.eql('RS256');",
																	"            });",
																	"            pm.test(\"FSPIOP-Signature Protected Header FSPIOP-URI to be /quotes/\"+pm.environment.get(\"quoteId\"), function () {",
																	"                pm.expect(decodedProtectedHeaders['FSPIOP-URI']).to.eql('/quotes/'+pm.environment.get(\"quoteId\"));",
																	"            });",
																	"            ",
																	"",
																	"            pm.test(\"FSPIOP-Signature Protected Header FSPIOP-HTTP-Method to be PUT\", function () {",
																	"                pm.expect(decodedProtectedHeaders['FSPIOP-HTTP-Method']).to.eql('PUT');",
																	"            });",
																	"            pm.test(`FSPIOP-Signature Protected Header FSPIOP-Source to be ${pm.environment.get('SIMPAYEE_NAME')}`, function () {",
																	"                pm.expect(decodedProtectedHeaders['FSPIOP-Source']).to.eql(pm.environment.get('SIMPAYEE_NAME'));",
																	"            });",
																	"            pm.test(`FSPIOP-Signature Protected Header FSPIOP-Destination to be ${pm.environment.get('SIMPAYER_NAME')}`, function () {",
																	"                pm.expect(decodedProtectedHeaders['FSPIOP-Destination']).to.eql(pm.environment.get('SIMPAYER_NAME'));",
																	"            });",
																	"            pm.test(\"FSPIOP-Signature Protected Header Date is present\", function () {",
																	"                pm.expect(decodedProtectedHeaders['Date']).to.eql(headers['date']);",
																	"            });",
																	"           ",
																	"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} FSPIOP-URI to be /quotes/${pm.environment.get(\"quoteId\")}`, function () {",
																	"                pm.expect(headers['fspiop-uri']).to.eql(`/quotes/${pm.environment.get(\"quoteId\")}`);",
																	"            });",
																	"            ",
																	"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-http-method is PUT`, function () {",
																	"                pm.expect(headers['fspiop-http-method']).to.eql('PUT');",
																	"            });",
																	"            ",
																	"            var jsonData = response.json().data;",
																	"            ",
																	"            pm.test(\"Response quoteId is  null\", function () {",
																	"                pm.expect(jsonData.quoteId).to.eql(undefined);",
																	"                ",
																	"            });",
																	"          ",
																	"            pm.test(\"Response ilpPacket is not null\", function () {",
																	"                pm.expect(jsonData.ilpPacket).not.equal(undefined);",
																	"                pm.environment.set(\"ilpPacket\", jsonData.ilpPacket);",
																	"            });",
																	"       ",
																	"           pm.test(\"Response condition is not null\", function () {",
																	"               pm.expect(jsonData.condition).not.equal(undefined);",
																	"               pm.environment.set(\"condition\", jsonData.condition);",
																	"           });",
																	"      } else {",
																	"          pm.test(\"Quote FAILED\", function () {",
																	"            throw new Error('Did not receive response on Payer side');",
																	"           });",
																	"           // postman.setNextRequest(null);",
																	"      }",
																	"       ",
																	"   });",
																	"}, pm.environment.get(\"SET_TIMEOUT_QUOTES\"))",
																	"",
																	"",
																	""
																],
																"type": "text/javascript"
															}
														}
													],
													"request": {
														"auth": {
															"type": "bearer",
															"bearer": [
																{
																	"key": "token",
																	"value": "{{SIMPAYER_BEARER_TOKEN}}",
																	"type": "string"
																}
															]
														},
														"method": "POST",
														"header": [
															{
																"key": "Accept",
																"value": "application/vnd.interoperability.quotes+json;version=1.0"
															},
															{
																"key": "Content-Type",
																"value": "application/vnd.interoperability.quotes+json;version=1.0"
															},
															{
																"key": "Date",
																"value": "{{quoteDate}}"
															},
															{
																"key": "FSPIOP-Source",
																"value": "{{SIMPAYER_NAME}}"
															},
															{
																"key": "FSPIOP-Destination",
																"value": "{{SIMPAYEE_NAME}}"
															},
															{
																"key": "FSPIOP-Signature",
																"type": "text",
																"value": "{{fspiopSignature}}"
															},
															{
																"key": "FSPIOP-HTTP-Method",
																"type": "text",
																"value": "POST"
															},
															{
																"key": "FSPIOP-URI",
																"type": "text",
																"value": "/quotes"
															}
														],
														"body": {
															"mode": "raw",
															"raw": "{{quoteRequest}}"
														},
														"url": {
															"raw": "{{HOST_QUOTING_SERVICE}}/quotes",
															"host": [
																"{{HOST_QUOTING_SERVICE}}"
															],
															"path": [
																"quotes"
															]
														}
													},
													"response": []
												},
												{
													"name": "Send Transfer-Prepare",
													"event": [
														{
															"listen": "prerequest",
															"script": {
																"id": "1e9b2a51-9f7e-4d3c-9329-f92580936a41",
																"exec": [
																	"",
																	"var navigator = {}; //fake a navigator object for the lib",
																	"var window = {}; //fake a window object for the lib",
																	"eval(pm.environment.get('jrsassign'));",
																	"",
																	"var uuid = require('uuid');",
																	"var generatedUUID = uuid.v4();",
																	"pm.environment.set('transfer_ID', pm.environment.get('transactionId'));",
																	"",
																	"",
																	"pm.variables.set('transferDate', (new Date()).toUTCString());",
																	"",
																	"pm.environment.set(\"transferExpiration\",new Date(new Date().getTime() + 60000))",
																	"",
																	"var oHeader = {alg: \"RS256\", \"FSPIOP-Source\":pm.environment.get('SIMPAYER_NAME'),\"FSPIOP-Destination\":pm.environment.get('NORESPONSE_SIMPAYEE_NAME'), \"FSPIOP-URI\":\"/transfers\", \"FSPIOP-HTTP-Method\":\"POST\", \"Date\":pm.variables.get('transferDate')};",
																	"var sHeader = JSON.stringify(oHeader);",
																	"console.log(`sHeader: ${sHeader}`)",
																	"",
																	"var objPayload = {",
																	"  \"transferId\": pm.environment.get('transfer_ID'),",
																	"  \"payerFsp\": pm.environment.get('SIMPAYER_NAME'),",
																	"  \"payeeFsp\": pm.environment.get('NORESPONSE_SIMPAYEE_NAME'),",
																	"  \"amount\": {",
																	"    \"amount\": \"10\",",
																	"    \"currency\": pm.environment.get('SIMPAYEE_CURRENCY')",
																	"  },",
																	"  \"expiration\": pm.environment.get('transferExpiration'),",
																	"  \"ilpPacket\": pm.environment.get('validIlpPacket'),",
																	"  \"condition\": pm.environment.get('validCondition')",
																	"}",
																	"var sPayload = JSON.stringify(objPayload)",
																	"console.log(`sPayload: ${sPayload}`)",
																	"pm.variables.set(\"transferRequest\", sPayload);",
																	"var token = KJUR.jws.JWS.sign(\"RS256\", sHeader, sPayload, pm.environment.get('SIMPAYER_JWS_KEY'));",
																	"//console.log(`token: ${token}`)",
																	"",
																	"// var encodedHeaders = btoa(sHeader)",
																	"",
																	"// var ofspiopSignature = {signature: vSignature, protectedHeader: encodedHeaders}",
																	"// var token = JSON.stringify(ofspiopSignature)",
																	"",
																	"const [ protectedHeaderBase64, , signature ] = token.split('.');",
																	"",
																	"const signatureObject = {",
																	"    signature: signature.replace('\"', ''),",
																	"    protectedHeader: protectedHeaderBase64.replace('\"', '')",
																	"};",
																	"",
																	"console.log(JSON.stringify(signatureObject))",
																	"",
																	"pm.variables.set('fspiopSignature',JSON.stringify(signatureObject))"
																],
																"type": "text/javascript"
															}
														},
														{
															"listen": "test",
															"script": {
																"id": "d2a535a3-6287-4afd-af97-6b7e03d68604",
																"exec": [
																	"pm.test(\"Status code is 202\", function () {",
																	"    pm.response.to.have.status(202);",
																	"});",
																	"",
																	"",
																	"",
																	"",
																	""
																],
																"type": "text/javascript"
															}
														}
													],
													"request": {
														"auth": {
															"type": "bearer",
															"bearer": [
																{
																	"key": "token",
																	"value": "{{SIMPAYER_BEARER_TOKEN}}",
																	"type": "string"
																}
															]
														},
														"method": "POST",
														"header": [
															{
																"key": "Accept",
																"value": "application/vnd.interoperability.transfers+json;version=1.0",
																"type": "text"
															},
															{
																"key": "Content-Type",
																"value": "application/vnd.interoperability.transfers+json;version=1.0",
																"type": "text"
															},
															{
																"key": "Date",
																"value": "{{transferDate}}",
																"type": "text"
															},
															{
																"key": "FSPIOP-Source",
																"value": "{{SIMPAYER_NAME}}",
																"type": "text"
															},
															{
																"key": "FSPIOP-Destination",
																"value": "{{NORESPONSE_SIMPAYEE_NAME}}",
																"type": "text"
															},
															{
																"key": "FSPIOP-Signature",
																"value": "{{fspiopSignature}}",
																"type": "text"
															},
															{
																"key": "FSPIOP-URI",
																"value": "/transfers",
																"type": "text"
															},
															{
																"key": "FSPIOP-HTTP-Method",
																"value": "POST",
																"type": "text"
															}
														],
														"body": {
															"mode": "raw",
															"raw": "{{transferRequest}}"
														},
														"url": {
															"raw": "{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}/transfers",
															"host": [
																"{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}"
															],
															"path": [
																"transfers"
															]
														}
													},
													"response": []
												},
												{
													"name": "Send Fulfill-Reject",
													"event": [
														{
															"listen": "prerequest",
															"script": {
																"id": "796e3af5-98c6-43dc-b6ee-02a25d258f2e",
																"exec": [
																	"pm.environment.set(\"completedTimestamp\",new Date().toISOString());",
																	"var navigator = {}; //fake a navigator object for the lib",
																	"var window = {}; //fake a window object for the lib",
																	"eval(pm.environment.get('jrsassign'));",
																	"",
																	"var uuid = require('uuid');",
																	"var generatedUUID = uuid.v4();",
																	"pm.environment.set('transfer_ID', pm.environment.get('transactionId'));",
																	"",
																	"",
																	"pm.variables.set('transferDate', (new Date()).toUTCString());",
																	"",
																	"pm.environment.set(\"transferExpiration\",new Date(new Date().getTime() + 60000))",
																	"",
																	"var oHeader = {alg: \"RS256\", \"FSPIOP-Source\":pm.environment.get('NORESPONSE_SIMPAYEE_NAME'),\"FSPIOP-Destination\":pm.environment.get('SIMPAYER_NAME'), \"FSPIOP-URI\":`/transfers/${pm.environment.get('transfer_ID')}/error`, \"FSPIOP-HTTP-Method\":\"PUT\", \"Date\":pm.variables.get('transferDate')};",
																	"var sHeader = JSON.stringify(oHeader);",
																	"console.log(`sHeader: ${sHeader}`)",
																	"",
																	"var objPayload = {",
																	"\t\"errorInformation\": {",
																	"\t\t\"errorCode\": \"5101\",",
																	"\t\t\"errorDescription\": \"Payee transaction limit reached\",",
																	"\t\t\"extensionList\": {",
																	"\t\t\t\"extension\": [{",
																	"\t\t\t\t\"key\": \"errorDetail\",",
																	"\t\t\t\t\"value\": \"This is an abort extension\"",
																	"\t\t\t}]",
																	"\t\t}",
																	"\t}",
																	"}",
																	"var sPayload = JSON.stringify(objPayload)",
																	"console.log(`sPayload: ${sPayload}`)",
																	"pm.variables.set(\"fulfillResponse\", sPayload);",
																	"var token = KJUR.jws.JWS.sign(\"RS256\", sHeader, sPayload, pm.environment.get('SIMPAYEE_JWS_KEY'));",
																	"//console.log(`token: ${token}`)",
																	"",
																	"// var encodedHeaders = btoa(sHeader)",
																	"",
																	"// var ofspiopSignature = {signature: vSignature, protectedHeader: encodedHeaders}",
																	"// var token = JSON.stringify(ofspiopSignature)",
																	"",
																	"const [ protectedHeaderBase64, , signature ] = token.split('.');",
																	"",
																	"const signatureObject = {",
																	"    signature: signature.replace('\"', ''),",
																	"    protectedHeader: protectedHeaderBase64.replace('\"', '')",
																	"};",
																	"",
																	"console.log(JSON.stringify(signatureObject))",
																	"",
																	"pm.variables.set('fspiopSignature',JSON.stringify(signatureObject))"
																],
																"type": "text/javascript"
															}
														},
														{
															"listen": "test",
															"script": {
																"id": "bf088be3-bff8-420e-b211-2abb245a1523",
																"exec": [
																	"pm.test(\"Status code is 200\", function () {",
																	"    pm.response.to.have.status(200);",
																	"});",
																	"",
																	"setTimeout(function () {",
																	"  pm.sendRequest(pm.environment.get(\"SIMPAYER_SDK_TESTAPI_URL\")+\"/callbacks/\"+pm.environment.get(\"transfer_ID\"), function (err, response) {",
																	"          if(response.responseSize !== 0) {",
																	"              //Check headers",
																	"              var headers = response.json().headers;",
																	"              ",
																	"                pm.test(`fspiop-source is ${pm.environment.get('NORESPONSE_SIMPAYEE_NAME')}`, function () {",
																	"                    pm.expect(headers['fspiop-source']).to.eql(pm.environment.get('NORESPONSE_SIMPAYEE_NAME'));",
																	"                });",
																	"                ",
																	"                pm.test(`fspiop-destination is ${pm.environment.get('SIMPAYER_NAME')}`, function () {",
																	"                    pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('SIMPAYER_NAME'));",
																	"                });",
																	"                ",
																	"                pm.test(\"date header should not be empty\", function () {",
																	"                    pm.expect(headers['date']).to.be.not.empty;",
																	"                });",
																	"                ",
																	"                pm.test(\"accept header should not be sent in the response\", function () {",
																	"                    pm.expect(headers['accept']).to.eql(undefined);",
																	"                });",
																	"                ",
																	"                pm.test(`${pm.environment.get('SIMPAYER_NAME')} content-type is same as sent in the request`, function () {",
																	"                    pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.transfers+json;version=1.0');",
																	"                });",
																	"                ",
																	"                pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-signature is not null`, function () {",
																	"                    pm.expect(headers['fspiop-signature']).not.eql(undefined);",
																	"                });",
																	"                ",
																	"                pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-http-method is PUT`, function () {",
																	"                    pm.expect(headers['fspiop-http-method']).to.eql('PUT');",
																	"                });",
																	"                ",
																	"                pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-uri is /transfers/${pm.environment.get('transfer_ID')}`, function () {",
																	"                    pm.expect(headers['fspiop-uri']).to.eql(`/transfers/${pm.environment.get('transfer_ID')}/error`);",
																	"                });",
																	"                ",
																	"              //Check data",
																	"              var jsonData = response.json().data;",
																	"              pm.test(\"Response Error Code is 5101\", function () {",
																	"                pm.expect(jsonData.errorInformation.errorCode).to.eql('5101');",
																	"              });",
																	"              ",
																	"              pm.test(\"Response Error Desription is 'Payee transaction limit reached'\", function () {",
																	"                pm.expect(jsonData.errorInformation.errorDescription).to.eql('Payee transaction limit reached');",
																	"              });",
																	"              ",
																	"          } else {",
																	"              pm.test(\"Transfer FAILED\", function () {",
																	"                throw new Error('Did not receive response');",
																	"              });",
																	"              // postman.setNextRequest(null)",
																	"          }",
																	"   });",
																	"}, pm.environment.get(\"SET_TIMEOUT_TRANSFERS\"))"
																],
																"type": "text/javascript"
															}
														}
													],
													"request": {
														"auth": {
															"type": "bearer",
															"bearer": [
																{
																	"key": "token",
																	"value": "{{NORESPONSE_SIMPAYEE_BEARER_TOKEN}}",
																	"type": "string"
																}
															]
														},
														"method": "PUT",
														"header": [
															{
																"key": "Content-Type",
																"value": "application/vnd.interoperability.transfers+json;version=1.0",
																"type": "text"
															},
															{
																"key": "Accept",
																"value": "application/vnd.interoperability.transfers+json;version=1.0",
																"type": "text"
															},
															{
																"key": "Date",
																"value": "{{transferDate}}",
																"type": "text"
															},
															{
																"key": "FSPIOP-Source",
																"value": "{{NORESPONSE_SIMPAYEE_NAME}}",
																"type": "text"
															},
															{
																"key": "FSPIOP-Destination",
																"value": "{{SIMPAYER_NAME}}",
																"type": "text"
															},
															{
																"key": "FSPIOP-Signature",
																"value": "{{fspiopSignature}}",
																"type": "text"
															},
															{
																"key": "FSPIOP-HTTP-Method",
																"value": "PUT",
																"type": "text"
															},
															{
																"key": "FSPIOP-URI",
																"value": "/transfers/{{transfer_ID}}/error",
																"type": "text"
															}
														],
														"body": {
															"mode": "raw",
															"raw": "{{fulfillResponse}}"
														},
														"url": {
															"raw": "{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}/transfers/{{transfer_ID}}/error",
															"host": [
																"{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}"
															],
															"path": [
																"transfers",
																"{{transfer_ID}}",
																"error"
															]
														}
													},
													"response": []
												},
												{
													"name": "Send Invalid Duplicate Fulfill-Reject",
													"event": [
														{
															"listen": "prerequest",
															"script": {
																"id": "95a1b44a-ad82-483c-be5c-d117b2c2e8e1",
																"exec": [
																	"pm.environment.set(\"completedTimestamp\",new Date().toISOString());",
																	"var navigator = {}; //fake a navigator object for the lib",
																	"var window = {}; //fake a window object for the lib",
																	"eval(pm.environment.get('jrsassign'));",
																	"",
																	"var uuid = require('uuid');",
																	"var generatedUUID = uuid.v4();",
																	"pm.environment.set('transfer_ID', pm.environment.get('transactionId'));",
																	"",
																	"",
																	"pm.variables.set('transferDate', (new Date()).toUTCString());",
																	"",
																	"pm.environment.set(\"transferExpiration\",new Date(new Date().getTime() + 60000))",
																	"",
																	"var oHeader = {alg: \"RS256\", \"FSPIOP-Source\":pm.environment.get('SIMPAYER_NAME'),\"FSPIOP-Destination\":pm.environment.get('SIMPAYEE_NAME'), \"FSPIOP-URI\":\"/transfers\", \"FSPIOP-HTTP-Method\":\"POST\", \"Date\":pm.variables.get('transferDate')};",
																	"var sHeader = JSON.stringify(oHeader);",
																	"console.log(`sHeader: ${sHeader}`)",
																	"",
																	"var objPayload = {",
																	"\t\"errorInformation\": {",
																	"\t\t\"errorCode\": \"5101\",",
																	"\t\t\"errorDescription\": \"This is an invalid duplicate request\",",
																	"\t\t\"extensionList\": {",
																	"\t\t\t\"extension\": [{",
																	"\t\t\t\t\"key\": \"errorDetail\",",
																	"\t\t\t\t\"value\": \"This is an abort extension\"",
																	"\t\t\t}]",
																	"\t\t}",
																	"\t}",
																	"}",
																	"var sPayload = JSON.stringify(objPayload)",
																	"console.log(`sPayload: ${sPayload}`)",
																	"pm.variables.set(\"fulfillResponse\", sPayload);",
																	"var token = KJUR.jws.JWS.sign(\"RS256\", sHeader, sPayload, pm.environment.get('SIMPAYEE_JWS_KEY'));",
																	"//console.log(`token: ${token}`)",
																	"",
																	"// var encodedHeaders = btoa(sHeader)",
																	"",
																	"// var ofspiopSignature = {signature: vSignature, protectedHeader: encodedHeaders}",
																	"// var token = JSON.stringify(ofspiopSignature)",
																	"",
																	"const [ protectedHeaderBase64, , signature ] = token.split('.');",
																	"",
																	"const signatureObject = {",
																	"    signature: signature.replace('\"', ''),",
																	"    protectedHeader: protectedHeaderBase64.replace('\"', '')",
																	"};",
																	"",
																	"console.log(JSON.stringify(signatureObject))",
																	"",
																	"pm.variables.set('fspiopSignature',JSON.stringify(signatureObject))"
																],
																"type": "text/javascript"
															}
														},
														{
															"listen": "test",
															"script": {
																"id": "a1f534bd-2ef9-4a89-87a0-c212907eb480",
																"exec": [
																	"pm.test(\"Status code is 200\", function () {",
																	"    pm.response.to.have.status(200);",
																	"});",
																	"",
																	"setTimeout(function () {",
																	"  pm.sendRequest(pm.environment.get(\"SIMPAYER_SDK_TESTAPI_URL\")+\"/callbacks/\"+pm.environment.get(\"transfer_ID\"), function (err, response) {",
																	"          if(response.responseSize !== 0) {",
																	"              //Check headers",
																	"              var headers = response.json().headers;",
																	"              ",
																	"                pm.test(`fspiop-source is ${pm.environment.get('NORESPONSE_SIMPAYEE_NAME')}`, function () {",
																	"                    pm.expect(headers['fspiop-source']).to.eql(pm.environment.get('NORESPONSE_SIMPAYEE_NAME'));",
																	"                });",
																	"                ",
																	"                pm.test(`fspiop-destination is ${pm.environment.get('SIMPAYER_NAME')}`, function () {",
																	"                    pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('SIMPAYER_NAME'));",
																	"                });",
																	"                ",
																	"                pm.test(\"date header should not be empty\", function () {",
																	"                    pm.expect(headers['date']).to.be.not.empty;",
																	"                });",
																	"                ",
																	"                pm.test(\"accept header should not be sent in the response\", function () {",
																	"                    pm.expect(headers['accept']).to.eql(undefined);",
																	"                });",
																	"                ",
																	"                pm.test(`${pm.environment.get('SIMPAYER_NAME')} content-type is same as sent in the request`, function () {",
																	"                    pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.transfers+json;version=1.0');",
																	"                });",
																	"                ",
																	"                pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-signature is not null`, function () {",
																	"                    pm.expect(headers['fspiop-signature']).not.eql(undefined);",
																	"                });",
																	"                ",
																	"                pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-http-method is PUT`, function () {",
																	"                    pm.expect(headers['fspiop-http-method']).to.eql('PUT');",
																	"                });",
																	"                ",
																	"                pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-uri is /transfers/${pm.environment.get('transfer_ID')}/error`, function () {",
																	"                    pm.expect(headers['fspiop-uri']).to.eql(`/transfers/${pm.environment.get('transfer_ID')}/error`);",
																	"                });",
																	"                ",
																	"              //Check data",
																	"              var jsonData = response.json().data;",
																	"              pm.test(\"Response Error Code is 5101\", function () {",
																	"                pm.expect(jsonData.errorInformation.errorCode).to.eql('5101');",
																	"              });",
																	"              ",
																	"              pm.test(\"Response Error Desription is 'Payee transaction limit reached'\", function () {",
																	"                pm.expect(jsonData.errorInformation.errorDescription).to.eql('Payee transaction limit reached');",
																	"              });",
																	"              ",
																	"          } else {",
																	"              pm.test(\"Transfer FAILED\", function () {",
																	"                throw new Error('Did not receive response');",
																	"              });",
																	"              // postman.setNextRequest(null)",
																	"          }",
																	"   });",
																	"}, pm.environment.get(\"SET_TIMEOUT_TRANSFERS\"))"
																],
																"type": "text/javascript"
															}
														}
													],
													"request": {
														"auth": {
															"type": "bearer",
															"bearer": [
																{
																	"key": "token",
																	"value": "{{NORESPONSE_SIMPAYEE_BEARER_TOKEN}}",
																	"type": "string"
																}
															]
														},
														"method": "PUT",
														"header": [
															{
																"key": "Content-Type",
																"value": "application/vnd.interoperability.transfers+json;version=1.0",
																"type": "text"
															},
															{
																"key": "Accept",
																"value": "application/vnd.interoperability.transfers+json;version=1.0",
																"type": "text"
															},
															{
																"key": "Date",
																"value": "{{dateHeader}}",
																"type": "text"
															},
															{
																"key": "FSPIOP-Source",
																"value": "{{NORESPONSE_SIMPAYEE_NAME}}",
																"type": "text"
															},
															{
																"key": "FSPIOP-Destination",
																"value": "{{SIMPAYER_NAME}}",
																"type": "text"
															},
															{
																"key": "FSPIOP-Signature",
																"value": "{{fspiopSignature}}",
																"type": "text"
															},
															{
																"key": "FSPIOP-HTTP-Method",
																"value": "PUT",
																"type": "text"
															},
															{
																"key": "FSPIOP-URI",
																"value": "/transfers/{{transfer_ID}}",
																"type": "text"
															}
														],
														"body": {
															"mode": "raw",
															"raw": "{{fulfillResponse}}"
														},
														"url": {
															"raw": "{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}/transfers/{{transfer_ID}}/error",
															"host": [
																"{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}"
															],
															"path": [
																"transfers",
																"{{transfer_ID}}",
																"error"
															]
														}
													},
													"response": []
												}
											],
											"protocolProfileBehavior": {},
											"_postman_isSubFolder": true
										}
									],
									"description": "Send a transfer-prepare from payerfsp to payeefsp\nDo not send transfer-fulfil from payeefsp.\n\nSend a duplicate transfer-prepare with same params.\ncheck the simulator logs to make sure that there should not be any response for the duplicate transfer when the actual transfer is not at terminal state which means neither committed nor aborted but in process.\n\nThis is same as sending duplicate transfer when actual transfer is at ABORTED state.",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "9d211227-8825-4e5f-9ae4-6111fb4e7751",
												"type": "text/javascript",
												"exec": [
													""
												]
											}
										},
										{
											"listen": "test",
											"script": {
												"id": "80012af7-7091-4d2f-8f7a-600e68e8ff0a",
												"type": "text/javascript",
												"exec": [
													""
												]
											}
										}
									],
									"protocolProfileBehavior": {},
									"_postman_isSubFolder": true
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				},
				{
					"name": "Active_Inactive_participants",
					"item": [
						{
							"name": "089 - Active and inactive participant",
							"item": [
								{
									"name": "Update participant (SIM2 to inactive)",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "ec5c3b39-81db-4a5c-9567-07abe976d6de",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
													"type": "string"
												}
											]
										},
										"method": "PUT",
										"header": [
											{
												"key": "Content-Type",
												"type": "text",
												"value": "application/json"
											},
											{
												"key": "FSPIOP-Source",
												"type": "text",
												"value": "{{hub_operator}}"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\r\n  \"isActive\": false\r\n}"
										},
										"url": {
											"raw": "{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}/participants/{{SIM2_NAME}}",
											"host": [
												"{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}"
											],
											"path": [
												"participants",
												"{{SIM2_NAME}}"
											]
										},
										"description": "Inactives participant testfsp4"
									},
									"response": []
								},
								{
									"name": "(BUG) Send Quote fail (SIM1 to SIM2)",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "76370bd1-03a9-4fb3-aaa3-b5ef2eee0ff7",
												"exec": [
													"var navigator = {}; ",
													"var window = {}; ",
													"eval(pm.environment.get('jrsassign'));",
													"",
													"",
													"var uuid = require('uuid');",
													"var generatedUUID = uuid.v4();",
													"pm.environment.set('quoteId', generatedUUID);",
													"generatedUUID = uuid.v4();",
													"pm.environment.set('transactionId', generatedUUID);",
													"",
													"pm.variables.set('quoteDate', (new Date()).toUTCString());",
													"pm.variables.set('payerName', 'PayerFirst PayerLast');",
													"",
													"pm.variables.set('expectedPayeeFirstName', 'GoldenFirst');",
													"pm.variables.set('expectedPayeeLastName', 'GoldenLast');",
													"pm.variables.set('expectedPayeeDOB', '2010-10-10');",
													"",
													"var oHeader = {alg: \"RS256\", \"FSPIOP-Source\":pm.environment.get('SIM1_NAME'),\"FSPIOP-Destination\":pm.environment.get('SIM2_NAME'), \"FSPIOP-URI\":\"/quotes\", \"FSPIOP-HTTP-Method\":\"POST\", \"Date\":pm.variables.get('quoteDate')};",
													"var sHeader = JSON.stringify(oHeader);",
													"console.log(`sHeader: ${sHeader}`)",
													"",
													"var objPayload = {",
													"  \"quoteId\": pm.environment.get('quoteId'),",
													"  \"transactionId\": pm.environment.get('transactionId'),",
													"  \"payer\": {",
													"    \"partyIdInfo\": {",
													"      \"partyIdType\": \"MSISDN\",",
													"      \"partyIdentifier\": pm.environment.get('SIM1_MSISDN'),",
													"      \"fspId\": pm.environment.get('SIM1_NAME')",
													"    },",
													"    \"personalInfo\": {",
													"      \"complexName\": {",
													"        \"firstName\": \"Mats\",",
													"        \"lastName\": \"Hagman\"",
													"      },",
													"      \"dateOfBirth\": \"1983-10-25\"",
													"    }",
													"  },",
													"  \"payee\": {",
													"    \"partyIdInfo\": {",
													"      \"partyIdType\": \"MSISDN\",",
													"      \"partyIdentifier\": pm.environment.get('SIM2_MSISDN'),",
													"      \"fspId\": pm.environment.get('SIM2_NAME')",
													"    }",
													"  },",
													"  \"amountType\": \"RECEIVE\",",
													"  \"amount\": {",
													"    \"amount\": \"60\",",
													"    \"currency\": pm.environment.get('SIM2_CURRENCY')",
													"  },",
													"  \"transactionType\": {",
													"    \"scenario\": \"TRANSFER\",",
													"    \"initiator\": \"PAYER\",",
													"    \"initiatorType\": \"CONSUMER\"",
													"  },",
													"  \"note\": \"hej\"",
													"}",
													"",
													"var sPayload = JSON.stringify(objPayload)",
													"console.log(`sPayload: ${sPayload}`)",
													"pm.variables.set(\"quoteRequest\", sPayload);",
													"var token = KJUR.jws.JWS.sign(\"RS256\", sHeader, sPayload, pm.environment.get('SIM1_JWS_KEY'));",
													"console.log(`token: ${token}`)",
													"",
													"// var encodedHeaders = btoa(sHeader)",
													"",
													"// var ofspiopSignature = {signature: vSignature, protectedHeader: encodedHeaders}",
													"// var token = JSON.stringify(ofspiopSignature)",
													"",
													"const [ protectedHeaderBase64, , signature ] = token.split('.');",
													"",
													"const signatureObject = {",
													"    signature: signature.replace('\"', ''),",
													"    protectedHeader: protectedHeaderBase64.replace('\"', '')",
													"};",
													"",
													"console.log(JSON.stringify(signatureObject))",
													"",
													"pm.variables.set('fspiopSignature',JSON.stringify(signatureObject))",
													"",
													"",
													"",
													"",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"id": "a50b9530-e941-4ded-985c-0322b1348a5a",
												"exec": [
													"pm.test(\"Status code is 202\", function () {",
													"    pm.response.to.have.status(202);",
													"});",
													"",
													"setTimeout(function () {",
													"    pm.sendRequest(pm.environment.get(\"SIM1_SDK_TESTAPI_URL\") + \"/callbacks/\" + pm.environment.get(\"quoteId\"), function (err, response) {",
													"        if (response.responseSize !== 0) {",
													"            //Checking headers",
													"            var headers = response.json().headers;",
													"            pm.test(`${pm.environment.get('SIM1_NAME')} fspiop-source is switch`, function () {",
													"                pm.expect(headers['fspiop-source']).to.eql('switch');",
													"            });",
													"",
													"            pm.test(`${pm.environment.get('SIM1_NAME')} fspiop-destination is ${pm.environment.get('SIM1_NAME')}`, function () {",
													"                pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('SIM1_NAME'));",
													"            });",
													"",
													"            pm.test(`${pm.environment.get('SIM1_NAME')} content-type should be application/vnd.interoperability.quotes+json;version=1.0`, function () {",
													"                pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.quotes+json;version=1.0');",
													"            });",
													"",
													"            pm.test(`${pm.environment.get('SIM1_NAME')} accept is empty`, function () {",
													"                pm.expect(headers['accept']).to.eql(undefined);",
													"            });",
													"",
													"",
													"",
													"            var { signature, protectedHeader } = JSON.parse(headers['fspiop-signature'])",
													"            // var strData = JSON.stringify(response.json().data)",
													"            // const token = `${protectedHeader}.${btoa(strData)}.${signature}`",
													"            // console.log(`token: ${token}`)",
													"            // var isValid = KJUR.jws.JWS.verify(token, pm.environment.get('goldenpayeefspJWSPubKey'), {alg: ['RS256']})",
													"            // console.log(`isValid: ${isValid}`)",
													"            // pm.test(\"Check if the response is JWS valid\", function () {",
													"            //     pm.expect(isValid).to.eql(true);",
													"            // });",
													"",
													"            //Validate protected header inside Signature",
													"            var decodedProtectedHeaders = JSON.parse(atob(protectedHeader))",
													"            console.log('decodedProtectedHeaders:', decodedProtectedHeaders)",
													"",
													"            pm.test(\"FSPIOP-Signature Protected Header alg to be RS256\", function () {",
													"                pm.expect(decodedProtectedHeaders['alg']).to.eql('RS256');",
													"            });",
													"            pm.test(\"FSPIOP-Signature Protected Header FSPIOP-URI to be /quotes/\" + pm.environment.get(\"quoteId\"), function () {",
													"                pm.expect(decodedProtectedHeaders['FSPIOP-URI']).to.eql('/quotes/' + pm.environment.get(\"quoteId\") + '/error');",
													"            });",
													"",
													"",
													"            pm.test(\"FSPIOP-Signature Protected Header FSPIOP-HTTP-Method to be PUT\", function () {",
													"                pm.expect(decodedProtectedHeaders['FSPIOP-HTTP-Method']).to.eql('PUT');",
													"            });",
													"            pm.test(\"FSPIOP-Signature Protected Header FSPIOP-Source to be switch\", function () {",
													"                pm.expect(decodedProtectedHeaders['FSPIOP-Source']).to.eql('switch');",
													"            });",
													"            pm.test(\"FSPIOP-Signature Protected Header FSPIOP-Destination to be testfsp1\", function () {",
													"                pm.expect(decodedProtectedHeaders['FSPIOP-Destination']).to.eql(pm.environment.get('SIM1_NAME'));",
													"            });",
													"            pm.test(\"FSPIOP-Signature Protected Header Date is present\", function () {",
													"                pm.expect(decodedProtectedHeaders['Date']).to.eql(headers['date']);",
													"            });",
													"",
													"            pm.test(`${pm.environment.get('SIM1_NAME')} FSPIOP-URI to be /quotes/${pm.environment.get(\"quoteId\")}/error`, function () {",
													"                pm.expect(headers['fspiop-uri']).to.eql(`/quotes/${pm.environment.get(\"quoteId\")}/error`);",
													"            });",
													"",
													"            pm.test(`${pm.environment.get('SIM1_NAME')} fspiop-http-method is PUT`, function () {",
													"                pm.expect(headers['fspiop-http-method']).to.eql('PUT');",
													"            });",
													"",
													"            var jsonData = response.json().data;",
													"",
													"            pm.test(\"Error code is 3201\", function () {",
													"                pm.expect(jsonData.errorInformation.errorCode).to.eql('3201');",
													"            });",
													"",
													"            pm.test(`Error Description is Destination FSP Error - '${pm.environment.get('SIM2_NAME')}' is inactive`, function () {",
													"                pm.expect(jsonData.errorInformation.errorDescription).to.include('Unsupported participant');",
													"            });",
													"",
													"        } else {",
													"            pm.test(\"Quote FAILED\", function () {",
													"                throw new Error('Did not receive response on Payer side');",
													"            });",
													"            // postman.setNextRequest(null);",
													"        }",
													"",
													"    });",
													"}, pm.environment.get(\"SET_TIMEOUT_QUOTES\"))",
													"",
													"",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{SIM1_BEARER_TOKEN}}",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Accept",
												"value": "application/vnd.interoperability.quotes+json;version=1.0"
											},
											{
												"key": "Content-Type",
												"value": "application/vnd.interoperability.quotes+json;version=1.0"
											},
											{
												"key": "Date",
												"value": "{{quoteDate}}"
											},
											{
												"key": "FSPIOP-Source",
												"value": "{{SIM1_NAME}}"
											},
											{
												"key": "FSPIOP-Destination",
												"value": "{{SIM2_NAME}}"
											},
											{
												"key": "FSPIOP-Signature",
												"type": "text",
												"value": "{{fspiopSignature}}"
											},
											{
												"key": "FSPIOP-HTTP-Method",
												"type": "text",
												"value": "POST"
											},
											{
												"key": "FSPIOP-URI",
												"type": "text",
												"value": "/quotes"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{{quoteRequest}}"
										},
										"url": {
											"raw": "{{HOST_QUOTING_SERVICE}}/quotes",
											"host": [
												"{{HOST_QUOTING_SERVICE}}"
											],
											"path": [
												"quotes"
											]
										}
									},
									"response": []
								},
								{
									"name": "(BUG) Send Transfer fail (SIM1 to SIM2)",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "c6622734-2423-4f5d-9be8-513a6c0685cc",
												"exec": [
													"pm.test(\"Status code is 202\", function () {",
													"    pm.response.to.have.status(202);",
													"});",
													"",
													"//Check the callback response that Switch forwards to payerfsp",
													"setTimeout(function () {",
													"  pm.sendRequest(pm.environment.get(\"SIM1_SDK_TESTAPI_URL\")+\"/callbacks/\"+pm.environment.get(\"transfer_ID\"), function (err, response) {",
													"          if(response.responseSize !== 0) {",
													"            //Checking headers",
													"            var headers = response.json().headers;",
													"            pm.test(\"fspiop-source is switch \", function () {",
													"                pm.expect(headers['fspiop-source']).to.eql('switch');",
													"            });",
													"            ",
													"            pm.test(`fspiop-destination is ${pm.environment.get('SIM1_NAME')}`, function () {",
													"                pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('SIM1_NAME'));",
													"            });",
													"            ",
													"            pm.test(\"content-type should be application/vnd.interoperability.transfers+json;version=1.0\", function () {",
													"                pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.transfers+json;version=1.0');",
													"            });",
													"            ",
													"            pm.test(\"accept is empty\", function () {",
													"                pm.expect(headers['accept']).to.eql(undefined);",
													"            });",
													"            ",
													"            pm.test(\"fspiop-signature is not empty\", function () {",
													"                    pm.expect(headers['fspiop-signature']).not.eql(undefined);",
													"                });",
													"            ",
													"            ",
													"            pm.test(`fspiop-uri includes /transfers/${pm.environment.get(\"transfer_ID\")}/error}`, function () {",
													"                pm.expect(headers['fspiop-uri']).to.eql('/transfers/'+ pm.environment.get(\"transfer_ID\")+'/error');",
													"            });",
													"            ",
													"            pm.test(\"fspiop-http-method is PUT\", function () {",
													"                pm.expect(headers['fspiop-http-method']).to.eql('PUT');",
													"            });",
													"            ",
													"            var jsonData = response.json().data;",
													"            pm.test(\"Error code is 3100\", function () {",
													"                pm.expect(jsonData.errorInformation.errorCode).to.eql('3100');",
													"            });",
													"           ",
													"           pm.test(`Error Description is Generic validation error - Participant ${pm.environment.get('SIM2_NAME')} is inactive`, function () {",
													"                pm.expect(jsonData.errorInformation.errorDescription).to.include(`Generic validation error - Participant ${pm.environment.get('SIM2_NAME')} is inactive`);",
													"           });",
													"          } else {",
													"              pm.test(\"Transfer FAILED\", function () {",
													"                throw new Error('Did not receive response on payer side');",
													"              });",
													"              // postman.setNextRequest(null)",
													"          }",
													"   });",
													"}, pm.environment.get(\"SET_TIMEOUT_TRANSFERS\"))",
													"",
													"",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "prerequest",
											"script": {
												"id": "89a67140-de88-4c7e-94ae-972b8623dcd6",
												"exec": [
													"var navigator = {}; //fake a navigator object for the lib",
													"var window = {}; //fake a window object for the lib",
													"eval(pm.environment.get('jrsassign'));",
													"",
													"var uuid = require('uuid');",
													"var generatedUUID = uuid.v4();",
													"pm.environment.set('transfer_ID', pm.environment.get('transactionId'));",
													"",
													"",
													"pm.variables.set('transferDate', (new Date()).toUTCString());",
													"",
													"pm.environment.set(\"transferExpiration\",new Date(new Date().getTime() + 60000))",
													"",
													"var oHeader = {alg: \"RS256\", \"FSPIOP-Source\":pm.environment.get('SIM1_NAME'),\"FSPIOP-Destination\":pm.environment.get('SIM2_NAME'), \"FSPIOP-URI\":\"/transfers\", \"FSPIOP-HTTP-Method\":\"POST\", \"Date\":pm.variables.get('transferDate')};",
													"var sHeader = JSON.stringify(oHeader);",
													"console.log(`sHeader: ${sHeader}`)",
													"",
													"var objPayload = {",
													"  \"transferId\": pm.environment.get('transfer_ID'),",
													"  \"payerFsp\": pm.environment.get('SIM1_NAME'),",
													"  \"payeeFsp\": pm.environment.get('SIM2_NAME'),",
													"  \"amount\": {",
													"    \"amount\": \"10\",",
													"    \"currency\": pm.environment.get('SIM2_CURRENCY')",
													"  },",
													"  \"expiration\": pm.environment.get('transferExpiration'),",
													"  \"ilpPacket\": pm.environment.get('ilpPacket'),",
													"  \"condition\": pm.environment.get('condition')",
													"}",
													"var sPayload = JSON.stringify(objPayload)",
													"console.log(`sPayload: ${sPayload}`)",
													"pm.variables.set(\"transferRequest\", sPayload);",
													"var token = KJUR.jws.JWS.sign(\"RS256\", sHeader, sPayload, pm.environment.get('SIM1_JWS_KEY'));",
													"//console.log(`token: ${token}`)",
													"",
													"// var encodedHeaders = btoa(sHeader)",
													"",
													"// var ofspiopSignature = {signature: vSignature, protectedHeader: encodedHeaders}",
													"// var token = JSON.stringify(ofspiopSignature)",
													"",
													"const [ protectedHeaderBase64, , signature ] = token.split('.');",
													"",
													"const signatureObject = {",
													"    signature: signature.replace('\"', ''),",
													"    protectedHeader: protectedHeaderBase64.replace('\"', '')",
													"};",
													"",
													"console.log(JSON.stringify(signatureObject))",
													"",
													"pm.variables.set('fspiopSignature',JSON.stringify(signatureObject))"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{SIM1_BEARER_TOKEN}}",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Accept",
												"value": "application/vnd.interoperability.transfers+json;version=1.0"
											},
											{
												"key": "Content-Type",
												"value": "application/vnd.interoperability.transfers+json;version=1.0"
											},
											{
												"key": "Date",
												"value": "{{transferDate}}"
											},
											{
												"key": "FSPIOP-Source",
												"value": "{{SIM1_NAME}}"
											},
											{
												"key": "FSPIOP-Destination",
												"value": "{{SIM2_NAME}}"
											},
											{
												"key": "FSPIOP-Signature",
												"type": "text",
												"value": "{{fspiopSignature}}"
											},
											{
												"key": "FSPIOP-URI",
												"type": "text",
												"value": "/transfers"
											},
											{
												"key": "FSPIOP-HTTP-Method",
												"type": "text",
												"value": "POST"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{{transferRequest}}"
										},
										"url": {
											"raw": "{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}/transfers",
											"host": [
												"{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}"
											],
											"path": [
												"transfers"
											]
										}
									},
									"response": []
								},
								{
									"name": "Update participant (SIM2 to active)",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "97a08525-024d-4ba6-b43e-a8465054fc8b",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
													"type": "string"
												}
											]
										},
										"method": "PUT",
										"header": [
											{
												"key": "Content-Type",
												"type": "text",
												"value": "application/json"
											},
											{
												"key": "FSPIOP-Source",
												"type": "text",
												"value": "{{hub_operator}}"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\r\n              \"isActive\": true\r\n            }"
										},
										"url": {
											"raw": "{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}/participants/{{SIM2_NAME}}",
											"host": [
												"{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}"
											],
											"path": [
												"participants",
												"{{SIM2_NAME}}"
											]
										},
										"description": "Reactivate participant testfsp4"
									},
									"response": []
								},
								{
									"name": "Send Quote (SIM1 to SIM2) - pass",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "f0876d75-75f3-4e90-b9f8-2e553bc748f1",
												"exec": [
													"  var navigator = {}; ",
													"var window = {}; ",
													"eval(pm.environment.get('jrsassign'));",
													"",
													"",
													"var uuid = require('uuid');",
													"var generatedUUID = uuid.v4();",
													"pm.environment.set('quoteId', generatedUUID);",
													"generatedUUID = uuid.v4();",
													"pm.environment.set('transactionId', generatedUUID);",
													"",
													"pm.variables.set('quoteDate', (new Date()).toUTCString());",
													"pm.variables.set('payerName', 'PayerFirst PayerLast');",
													"",
													"pm.variables.set('expectedPayeeFirstName', 'GoldenFirst');",
													"pm.variables.set('expectedPayeeLastName', 'GoldenLast');",
													"pm.variables.set('expectedPayeeDOB', '2010-10-10');",
													"",
													"var oHeader = {alg: \"RS256\", \"FSPIOP-Source\":pm.environment.get('SIM1_NAME'),\"FSPIOP-Destination\":pm.environment.get('SIM2_NAME'), \"FSPIOP-URI\":\"/quotes\", \"FSPIOP-HTTP-Method\":\"POST\", \"Date\":pm.variables.get('quoteDate')};",
													"var sHeader = JSON.stringify(oHeader);",
													"console.log(`sHeader: ${sHeader}`)",
													"",
													"var objPayload = {",
													"  \"quoteId\": pm.environment.get('quoteId'),",
													"  \"transactionId\": pm.environment.get('transactionId'),",
													"  \"payer\": {",
													"    \"partyIdInfo\": {",
													"      \"partyIdType\": \"MSISDN\",",
													"      \"partyIdentifier\": pm.environment.get('SIM1_MSISDN'),",
													"      \"fspId\": pm.environment.get('SIM1_NAME')",
													"    },",
													"    \"personalInfo\": {",
													"      \"complexName\": {",
													"        \"firstName\": \"Mats\",",
													"        \"lastName\": \"Hagman\"",
													"      },",
													"      \"dateOfBirth\": \"1983-10-25\"",
													"    }",
													"  },",
													"  \"payee\": {",
													"    \"partyIdInfo\": {",
													"      \"partyIdType\": \"MSISDN\",",
													"      \"partyIdentifier\": pm.environment.get('SIM2_MSISDN'),",
													"      \"fspId\": pm.environment.get('SIM2_NAME')",
													"    }",
													"  },",
													"  \"amountType\": \"RECEIVE\",",
													"  \"amount\": {",
													"    \"amount\": \"60\",",
													"    \"currency\": pm.environment.get('SIM2_CURRENCY')",
													"  },",
													"  \"transactionType\": {",
													"    \"scenario\": \"TRANSFER\",",
													"    \"initiator\": \"PAYER\",",
													"    \"initiatorType\": \"CONSUMER\"",
													"  },",
													"  \"note\": \"hej\"",
													"}",
													"",
													"var sPayload = JSON.stringify(objPayload)",
													"console.log(`sPayload: ${sPayload}`)",
													"pm.variables.set(\"quoteRequest\", sPayload);",
													"var token = KJUR.jws.JWS.sign(\"RS256\", sHeader, sPayload, pm.environment.get('SIM1_JWS_KEY'));",
													"console.log(`token: ${token}`)",
													"",
													"// var encodedHeaders = btoa(sHeader)",
													"",
													"// var ofspiopSignature = {signature: vSignature, protectedHeader: encodedHeaders}",
													"// var token = JSON.stringify(ofspiopSignature)",
													"",
													"const [ protectedHeaderBase64, , signature ] = token.split('.');",
													"",
													"const signatureObject = {",
													"    signature: signature.replace('\"', ''),",
													"    protectedHeader: protectedHeaderBase64.replace('\"', '')",
													"};",
													"",
													"console.log(JSON.stringify(signatureObject))",
													"",
													"pm.variables.set('fspiopSignature',JSON.stringify(signatureObject))",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"id": "d9449225-e4df-44aa-9079-74b101c3e0a7",
												"exec": [
													"pm.test(\"Status code is 202\", function () {\r",
													"    pm.response.to.have.status(202);\r",
													"});\r",
													"\r",
													"setTimeout(function () {\r",
													"  pm.sendRequest(pm.environment.get(\"SIM2_SDK_TESTAPI_URL\")+\"/requests/\"+pm.variables.get(\"quoteId\"), function (err, response) {\r",
													"          if(response.responseSize !== 0) {\r",
													"              \r",
													"              //Check the Headers\r",
													"              var headers = response.json().headers;\r",
													"              \r",
													"                pm.test(`${pm.environment.get('SIM2_NAME')} fspiop-source is ${pm.environment.get('SIM1_NAME')}`, function () {\r",
													"                    pm.expect(headers['fspiop-source']).to.eql(pm.environment.get('SIM1_NAME'));\r",
													"                });\r",
													"                \r",
													"                pm.test(`${pm.environment.get('SIM2_NAME')} fspiop-destination is ${pm.environment.get('SIM2_NAME')}`, function () {\r",
													"                    pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('SIM2_NAME'));\r",
													"                });\r",
													"                \r",
													"                pm.test(`${pm.environment.get('SIM2_NAME')} fspiop-signature is same as sent in the request`, function () {\r",
													"                    pm.expect(headers['fspiop-signature']).to.eql(pm.variables.get(\"fspiopSignature\"));\r",
													"                });\r",
													"                \r",
													"                pm.test(`${pm.environment.get('SIM2_NAME')} accept is same as sent in the request`, function () {\r",
													"                    pm.expect(headers['accept']).to.match(/application\\/vnd\\.interoperability\\.quotes\\+json;version=1(\\.\\d)?/);\r",
													"                });\r",
													"                \r",
													"                pm.test(`${pm.environment.get('SIM2_NAME')} content-typeis same as sent in the request`, function () {\r",
													"                    pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.quotes+json;version=1.0');\r",
													"                });\r",
													"                \r",
													"                pm.test(`${pm.environment.get('SIM2_NAME')} fspiop-uri is /quotes`, function () {\r",
													"                    pm.expect(headers['fspiop-uri']).to.eql('/quotes');\r",
													"                });\r",
													"                \r",
													"                pm.test(`${pm.environment.get('SIM2_NAME')} fspiop-http-method is POST`, function () {\r",
													"                    pm.expect(headers['fspiop-http-method']).to.eql('POST');\r",
													"                });\r",
													"                \r",
													"          } else {\r",
													"              pm.test(\"Quote FAILED\", function () {\r",
													"                throw new Error('Did not receive request on payee side');\r",
													"              });\r",
													"              // postman.setNextRequest(null)\r",
													"          }\r",
													"   });\r",
													"}, pm.environment.get(\"SET_TIMEOUT_QUOTES\"))\r",
													"\r",
													"setTimeout(function () {\r",
													"  pm.sendRequest(pm.environment.get(\"SIM1_SDK_TESTAPI_URL\")+\"/callbacks/\"+pm.environment.get(\"quoteId\"), function (err, response) {\r",
													"      if(response.responseSize !== 0) {\r",
													"          //Checking headers\r",
													"            var headers = response.json().headers;\r",
													"            pm.test(`${pm.environment.get('SIM1_NAME')} fspiop-source is ${pm.environment.get('SIM2_NAME')}`, function () {\r",
													"                pm.expect(headers['fspiop-source']).to.eql(pm.environment.get('SIM2_NAME'));\r",
													"            });\r",
													"            \r",
													"            pm.test(`${pm.environment.get('SIM1_NAME')} fspiop-destination is ${pm.environment.get('SIM1_NAME')}`, function () {\r",
													"                pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('SIM1_NAME'));\r",
													"            });\r",
													"            \r",
													"            pm.test(`${pm.environment.get('SIM1_NAME')} content-type should be application/vnd.interoperability.quotes+json;version=1.0`, function () {\r",
													"                pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.quotes+json;version=1.0');\r",
													"            });\r",
													"            \r",
													"            pm.test(`${pm.environment.get('SIM1_NAME')} accept is empty`, function () {\r",
													"                pm.expect(headers['accept']).to.eql(undefined);\r",
													"            });\r",
													"            \r",
													"            \r",
													"            \r",
													"            var {signature,protectedHeader} = JSON.parse(headers['fspiop-signature'])\r",
													"            // var strData = JSON.stringify(response.json().data)\r",
													"            // const token = `${protectedHeader}.${btoa(strData)}.${signature}`\r",
													"            // console.log(`token: ${token}`)\r",
													"            // var isValid = KJUR.jws.JWS.verify(token, pm.environment.get('goldentestfsp2JWSPubKey'), {alg: ['RS256']})\r",
													"            // console.log(`isValid: ${isValid}`)\r",
													"            // pm.test(\"Check if the response is JWS valid\", function () {\r",
													"            //     pm.expect(isValid).to.eql(true);\r",
													"            // });\r",
													"            \r",
													"            //Validate protected header inside Signature\r",
													"            var decodedProtectedHeaders = JSON.parse(atob(protectedHeader))\r",
													"            console.log('decodedProtectedHeaders:',decodedProtectedHeaders)\r",
													"            \r",
													"            pm.test(\"FSPIOP-Signature Protected Header alg to be RS256\", function () {\r",
													"                pm.expect(decodedProtectedHeaders['alg']).to.eql('RS256');\r",
													"            });\r",
													"            pm.test(\"FSPIOP-Signature Protected Header FSPIOP-URI to be /quotes/\"+pm.environment.get(\"quoteId\"), function () {\r",
													"                pm.expect(decodedProtectedHeaders['FSPIOP-URI']).to.eql('/quotes/'+pm.environment.get(\"quoteId\"));\r",
													"            });\r",
													"            \r",
													"\r",
													"            pm.test(\"FSPIOP-Signature Protected Header FSPIOP-HTTP-Method to be PUT\", function () {\r",
													"                pm.expect(decodedProtectedHeaders['FSPIOP-HTTP-Method']).to.eql('PUT');\r",
													"            });\r",
													"            pm.test(`FSPIOP-Signature Protected Header FSPIOP-Source to be ${pm.environment.get('SIM2_NAME')}`, function () {\r",
													"                pm.expect(decodedProtectedHeaders['FSPIOP-Source']).to.eql(pm.environment.get('SIM2_NAME'));\r",
													"            });\r",
													"            pm.test(`FSPIOP-Signature Protected Header FSPIOP-Destination to be ${pm.environment.get('SIM1_NAME')}`, function () {\r",
													"                pm.expect(decodedProtectedHeaders['FSPIOP-Destination']).to.eql(pm.environment.get('SIM1_NAME'));\r",
													"            });\r",
													"            pm.test(\"FSPIOP-Signature Protected Header Date is present\", function () {\r",
													"                pm.expect(decodedProtectedHeaders['Date']).to.eql(headers['date']);\r",
													"            });\r",
													"           \r",
													"            pm.test(`${pm.environment.get('SIM1_NAME')} FSPIOP-URI to be /quotes/\"+pm.environment.get(\"quoteId\")`, function () {\r",
													"                pm.expect(headers['fspiop-uri']).to.eql('/quotes/'+pm.environment.get(\"quoteId\"));\r",
													"            });\r",
													"            \r",
													"            pm.test(`${pm.environment.get('SIM1_NAME')} fspiop-http-method is PUT`, function () {\r",
													"                pm.expect(headers['fspiop-http-method']).to.eql('PUT');\r",
													"            });\r",
													"            \r",
													"            var jsonData = response.json().data;\r",
													"            \r",
													"            pm.test(\"Response quoteId is  null\", function () {\r",
													"                pm.expect(jsonData.quoteId).to.eql(undefined);\r",
													"                \r",
													"            });\r",
													"          \r",
													"            pm.test(\"Response ilpPacket is not null\", function () {\r",
													"                pm.expect(jsonData.ilpPacket).not.equal(undefined);\r",
													"                pm.environment.set(\"ilpPacket\", jsonData.ilpPacket);\r",
													"            });\r",
													"       \r",
													"           pm.test(\"Response condition is not null\", function () {\r",
													"               pm.expect(jsonData.condition).not.equal(undefined);\r",
													"               pm.environment.set(\"condition\", jsonData.condition);\r",
													"           });\r",
													"      } else {\r",
													"          pm.test(\"Quote FAILED\", function () {\r",
													"            throw new Error('Did not receive response on Payer side');\r",
													"           });\r",
													"           // postman.setNextRequest(null);\r",
													"      }\r",
													"       \r",
													"   });\r",
													"}, pm.environment.get(\"SET_TIMEOUT_QUOTES\"))\r",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{SIM1_BEARER_TOKEN}}",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Accept",
												"type": "text",
												"value": "application/vnd.interoperability.quotes+json;version=1.0"
											},
											{
												"key": "Content-Type",
												"type": "text",
												"value": "application/vnd.interoperability.quotes+json;version=1.0"
											},
											{
												"key": "Date",
												"type": "text",
												"value": "{{quoteDate}}"
											},
											{
												"key": "FSPIOP-Source",
												"type": "text",
												"value": "{{SIM1_NAME}}"
											},
											{
												"key": "FSPIOP-Destination",
												"type": "text",
												"value": "{{SIM2_NAME}}"
											},
											{
												"key": "FSPIOP-Signature",
												"type": "text",
												"value": "{{fspiopSignature}}"
											},
											{
												"key": "FSPIOP-HTTP-Method",
												"type": "text",
												"value": "POST"
											},
											{
												"key": "FSPIOP-URI",
												"type": "text",
												"value": "/quotes"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{{quoteRequest}}"
										},
										"url": {
											"raw": "{{HOST_QUOTING_SERVICE}}/quotes",
											"host": [
												"{{HOST_QUOTING_SERVICE}}"
											],
											"path": [
												"quotes"
											]
										}
									},
									"response": []
								},
								{
									"name": "Send Transfer (SIM1 to SIM2) - pass",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "58d38fab-d26c-414c-8942-f051a0d2ce10",
												"exec": [
													"var navigator = {}; //fake a navigator object for the lib\r",
													"var window = {}; //fake a window object for the lib\r",
													"eval(pm.environment.get('jrsassign'));\r",
													"\r",
													"var uuid = require('uuid');\r",
													"var generatedUUID = uuid.v4();\r",
													"pm.environment.set('transfer_ID', pm.environment.get('transactionId'));\r",
													"\r",
													"\r",
													"pm.variables.set('transferDate', (new Date()).toUTCString());\r",
													"\r",
													"pm.environment.set(\"transferExpiration\",new Date(new Date().getTime() + 60000))\r",
													"\r",
													"var oHeader = {alg: \"RS256\", \"FSPIOP-Source\":pm.environment.get('SIM1_NAME'),\"FSPIOP-Destination\":pm.environment.get('SIM2_NAME'), \"FSPIOP-URI\":\"/transfers\", \"FSPIOP-HTTP-Method\":\"POST\", \"Date\":pm.variables.get('transferDate')};\r",
													"var sHeader = JSON.stringify(oHeader);\r",
													"console.log(`sHeader: ${sHeader}`)\r",
													"\r",
													"var objPayload = {\r",
													"  \"transferId\": pm.environment.get('transfer_ID'),\r",
													"  \"payerFsp\": pm.environment.get('SIM1_NAME'),\r",
													"  \"payeeFsp\": pm.environment.get('SIM2_NAME'),\r",
													"  \"amount\": {\r",
													"    \"amount\": \"60\",\r",
													"    \"currency\": pm.environment.get('SIM2_CURRENCY')\r",
													"  },\r",
													"  \"expiration\": pm.environment.get('transferExpiration'),\r",
													"  \"ilpPacket\": pm.environment.get('ilpPacket'),\r",
													"  \"condition\": pm.environment.get('condition')\r",
													"}\r",
													"var sPayload = JSON.stringify(objPayload)\r",
													"console.log(`sPayload: ${sPayload}`)\r",
													"pm.variables.set(\"transferRequest\", sPayload);\r",
													"var token = KJUR.jws.JWS.sign(\"RS256\", sHeader, sPayload, pm.environment.get('SIM1_JWS_KEY'));\r",
													"//console.log(`token: ${token}`)\r",
													"\r",
													"// var encodedHeaders = btoa(sHeader)\r",
													"\r",
													"// var ofspiopSignature = {signature: vSignature, protectedHeader: encodedHeaders}\r",
													"// var token = JSON.stringify(ofspiopSignature)\r",
													"\r",
													"const [ protectedHeaderBase64, , signature ] = token.split('.');\r",
													"\r",
													"const signatureObject = {\r",
													"    signature: signature.replace('\"', ''),\r",
													"    protectedHeader: protectedHeaderBase64.replace('\"', '')\r",
													"};\r",
													"\r",
													"console.log(JSON.stringify(signatureObject))\r",
													"\r",
													"pm.variables.set('fspiopSignature',JSON.stringify(signatureObject))"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"id": "163909ef-9e8a-4348-af0c-edf45e5a19e5",
												"exec": [
													"pm.test(\"Status code is 202\", function () {\r",
													"    pm.response.to.have.status(202);\r",
													"});\r",
													"\r",
													"// //Check the request that Switch forwards to testfsp2\r",
													"setTimeout(function () {\r",
													"  pm.sendRequest(pm.environment.get(\"SIM2_SDK_TESTAPI_URL\")+\"/requests/\"+pm.environment.get(\"transfer_ID\"), function (err, response) {\r",
													"          if(response.responseSize !== 0) {\r",
													"              \r",
													"              //Check the Headers\r",
													"              var headers = response.json().headers;\r",
													"              \r",
													"                pm.test(`${pm.environment.get('SIM2_NAME')} fspiop-source is ${pm.environment.get('SIM1_NAME')}`, function () {\r",
													"                    pm.expect(headers['fspiop-source']).to.eql(pm.environment.get('SIM1_NAME'));\r",
													"                });\r",
													"                \r",
													"                pm.test(`${pm.environment.get('SIM2_NAME')} fspiop-destination is ${pm.environment.get('SIM2_NAME')}`, function () {\r",
													"                    pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('SIM2_NAME'));\r",
													"                });\r",
													"                \r",
													"                pm.test(`${pm.environment.get('SIM2_NAME')} content-typeis same as sent in the request`, function () {\r",
													"                    pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.transfers+json;version=1.0');\r",
													"                });\r",
													"                \r",
													"                pm.test(`${pm.environment.get('SIM2_NAME')} accept is same as sent in the request`, function () {\r",
													"                    pm.expect(headers['accept']).to.match(/application\\/vnd\\.interoperability\\.transfers\\+json;version=1(\\.\\d)?/);\r",
													"                });\r",
													"                \r",
													"                pm.test(`${pm.environment.get('SIM2_NAME')} fspiop-signature is same as sent in the request`, function () {\r",
													"                    pm.expect(headers['fspiop-signature']).to.eql(pm.variables.get(\"fspiopSignature\"));\r",
													"                });\r",
													"                \r",
													"                pm.test(`${pm.environment.get('SIM2_NAME')} fspiop-http-method is POST`, function () {\r",
													"                    pm.expect(headers['fspiop-http-method']).to.eql('POST');\r",
													"                });\r",
													"                \r",
													"                pm.test(`${pm.environment.get('SIM2_NAME')} fspiop-uri is /transfers`, function () {\r",
													"                    pm.expect(headers['fspiop-uri']).to.eql('/transfers');\r",
													"                });\r",
													"                \r",
													"                \r",
													"                //Check the data\r",
													"                var jsonData = response.json().data;\r",
													"                pm.test(`${pm.environment.get('SIM2_NAME')} data should have the same transferId as request`, function () {\r",
													"                  pm.expect(jsonData.transferId).to.eql(pm.environment.get(\"transfer_ID\"));\r",
													"                });\r",
													"                pm.test(`${pm.environment.get('SIM2_NAME')} data should have the same amount as request`, function () {\r",
													"                  pm.expect(jsonData.amount.amount).to.eql('60');\r",
													"                });\r",
													"                pm.test(`${pm.environment.get('SIM2_NAME')} data should have the same currency as request`, function () {\r",
													"                  pm.expect(jsonData.amount.currency).to.eql(pm.environment.get(\"currency\"));\r",
													"                });\r",
													"                pm.test(`${pm.environment.get('SIM2_NAME')} data should have the same expiration as request`, function () {\r",
													"                  pm.expect(jsonData.expiration).to.eql(pm.environment.get(\"transferExpiration\"));\r",
													"                });\r",
													"                pm.test(`${pm.environment.get('SIM2_NAME')} data should have the same ilpPacket as request`, function () {\r",
													"                  pm.expect(jsonData.ilpPacket).to.eql(pm.environment.get(\"ilpPacket\"));\r",
													"                });\r",
													"                pm.test(`${pm.environment.get('SIM2_NAME')} data should have the same condition as request`, function () {\r",
													"                  pm.expect(jsonData.condition).to.eql(pm.environment.get(\"condition\"));\r",
													"                });\r",
													"                \r",
													"          } else {\r",
													"              pm.test(\"Transfer FAILED\", function () {\r",
													"                throw new Error('Did not receive response on payee side');\r",
													"              });\r",
													"              // postman.setNextRequest(null)\r",
													"          }\r",
													"  });\r",
													"}, pm.environment.get(\"SET_TIMEOUT_TRANSFERS\"))\r",
													"\r",
													"//Check the callback response that Switch forwards to testfsp1\r",
													"setTimeout(function () {\r",
													"  pm.sendRequest(pm.environment.get(\"SIM1_SDK_TESTAPI_URL\")+\"/callbacks/\"+pm.environment.get(\"transfer_ID\"), function (err, response) {\r",
													"          if(response.responseSize !== 0) {\r",
													"            //Checking headers\r",
													"            var headers = response.json().headers;\r",
													"            pm.test(`${pm.environment.get('SIM1_NAME')} fspiop-source is ${pm.environment.get('SIM2_NAME')}`, function () {\r",
													"                pm.expect(headers['fspiop-source']).to.eql(pm.environment.get('SIM2_NAME'));\r",
													"            });\r",
													"            \r",
													"            pm.test(`${pm.environment.get('SIM1_NAME')} fspiop-destination is ${pm.environment.get('SIM1_NAME')}`, function () {\r",
													"                pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('SIM1_NAME'));\r",
													"            });\r",
													"            \r",
													"            pm.test(`${pm.environment.get('SIM1_NAME')} content-type should be application/vnd.interoperability.transfers+json;version=1.0`, function () {\r",
													"                pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.transfers+json;version=1.0');\r",
													"            });\r",
													"            \r",
													"            pm.test(`${pm.environment.get('SIM1_NAME')} accept is empty`, function () {\r",
													"                pm.expect(headers['accept']).to.eql(undefined);\r",
													"            });\r",
													"            \r",
													"            \r",
													"            pm.test(`${pm.environment.get('SIM1_NAME')} fspiop-uri includes /transfers/${pm.environment.get(\"transfer_ID\")}`, function () {\r",
													"                pm.expect(headers['fspiop-uri']).to.eql('/transfers/'+ pm.environment.get(\"transfer_ID\"));\r",
													"            });\r",
													"            \r",
													"            pm.test(`${pm.environment.get('SIM1_NAME')} fspiop-http-method is PUT`, function () {\r",
													"                pm.expect(headers['fspiop-http-method']).to.eql('PUT');\r",
													"            });\r",
													"            \r",
													"            var jsonData = response.json().data;\r",
													"            pm.test(\"Response data does not have transferId\", function () {\r",
													"               pm.expect(jsonData.transferId).to.eql(undefined);\r",
													"            });\r",
													"            pm.test(\"Response status is COMMITTED\", function () {\r",
													"                pm.expect(jsonData.transferState).to.eql('COMMITTED');\r",
													"            });\r",
													"          } else {\r",
													"              pm.test(\"Transfer FAILED\", function () {\r",
													"                throw new Error('Did not receive response on payer side');\r",
													"              });\r",
													"              // postman.setNextRequest(null)\r",
													"          }\r",
													"   });\r",
													"}, pm.environment.get(\"SET_TIMEOUT_TRANSFERS\"))"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{SIM1_BEARER_TOKEN}}",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Accept",
												"type": "text",
												"value": "application/vnd.interoperability.transfers+json;version=1.0"
											},
											{
												"key": "Content-Type",
												"type": "text",
												"value": "application/vnd.interoperability.transfers+json;version=1.0"
											},
											{
												"key": "Date",
												"type": "text",
												"value": "{{transferDate}}"
											},
											{
												"key": "FSPIOP-Source",
												"type": "text",
												"value": "{{SIM1_NAME}}"
											},
											{
												"key": "FSPIOP-Destination",
												"type": "text",
												"value": "{{SIM2_NAME}}"
											},
											{
												"key": "FSPIOP-Signature",
												"type": "text",
												"value": "{{fspiopSignature}}"
											},
											{
												"key": "FSPIOP-URI",
												"type": "text",
												"value": "/transfers"
											},
											{
												"key": "FSPIOP-HTTP-Method",
												"type": "text",
												"value": "POST"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{{transferRequest}}"
										},
										"url": {
											"raw": "{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}/transfers",
											"host": [
												"{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}"
											],
											"path": [
												"transfers"
											]
										}
									},
									"response": []
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						},
						{
							"name": "090 - Active and inactive participants accounts",
							"item": [
								{
									"name": "3. Get SIM2 Participant Account",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "ad773fd2-1fa4-4fa1-94af-37bbf2abe396",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"id": "f0d816be-8aa0-464b-8fef-68cb7fe07ed9",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"});",
													"",
													"var jsonData = pm.response.json();",
													"jsonData",
													"    .filter(account => account.currency === pm.environment.get('SIM2_CURRENCY'))",
													"    .forEach(curAccount => {",
													"        if(curAccount.ledgerAccountType === \"POSITION\") {",
													"            pm.environment.set(`${pm.environment.get('SIM2_NAME')}PositionAccountId`, curAccount.id);",
													"            ",
													"        }",
													"    })",
													"",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
													"type": "string"
												}
											]
										},
										"method": "GET",
										"header": [
											{
												"key": "FSPIOP-Source",
												"type": "text",
												"value": "{{hub_operator}}"
											}
										],
										"url": {
											"raw": "{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}/participants/{{SIM2_NAME}}/accounts",
											"host": [
												"{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}"
											],
											"path": [
												"participants",
												"{{SIM2_NAME}}",
												"accounts"
											]
										}
									},
									"response": []
								},
								{
									"name": "Update SIM2 to inactive_XOF account",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "9c280830-4f75-4d04-aae1-b25896ef012f",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
													"type": "string"
												}
											]
										},
										"method": "PUT",
										"header": [
											{
												"key": "Content-Type",
												"type": "text",
												"value": "application/json"
											},
											{
												"key": "FSPIOP-Source",
												"type": "text",
												"value": "{{hub_operator}}"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\r\n  \"isActive\": false\r\n}"
										},
										"url": {
											"raw": "{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}/participants/{{SIM2_NAME}}/accounts/{{{{SIM2_NAME}}PositionAccountId}}",
											"host": [
												"{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}"
											],
											"path": [
												"participants",
												"{{SIM2_NAME}}",
												"accounts",
												"{{{{SIM2_NAME}}PositionAccountId}}"
											]
										},
										"description": "inactives testfsp4 position account"
									},
									"response": []
								},
								{
									"name": "Send Quote fail (SIM1 to SIM2)",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "bf470e41-0833-4ef0-89d2-3c55b2c22cbb",
												"exec": [
													"var navigator = {}; ",
													"var window = {}; ",
													"eval(pm.environment.get('jrsassign'));",
													"",
													"",
													"var uuid = require('uuid');",
													"var generatedUUID = uuid.v4();",
													"pm.environment.set('quoteId', generatedUUID);",
													"generatedUUID = uuid.v4();",
													"pm.environment.set('transactionId', generatedUUID);",
													"",
													"pm.variables.set('quoteDate', (new Date()).toUTCString());",
													"pm.variables.set('payerName', 'PayerFirst PayerLast');",
													"",
													"pm.variables.set('expectedPayeeFirstName', 'GoldenFirst');",
													"pm.variables.set('expectedPayeeLastName', 'GoldenLast');",
													"pm.variables.set('expectedPayeeDOB', '2010-10-10');",
													"",
													"var oHeader = {alg: \"RS256\", \"FSPIOP-Source\":pm.environment.get('SIM1_NAME'),\"FSPIOP-Destination\":pm.environment.get('SIM2_NAME'), \"FSPIOP-URI\":\"/quotes\", \"FSPIOP-HTTP-Method\":\"POST\", \"Date\":pm.variables.get('quoteDate')};",
													"var sHeader = JSON.stringify(oHeader);",
													"console.log(`sHeader: ${sHeader}`)",
													"",
													"var objPayload = {",
													"  \"quoteId\": pm.environment.get('quoteId'),",
													"  \"transactionId\": pm.environment.get('transactionId'),",
													"  \"payer\": {",
													"    \"partyIdInfo\": {",
													"      \"partyIdType\": \"MSISDN\",",
													"      \"partyIdentifier\": pm.environment.get('SIM1_MSISDN'),",
													"      \"fspId\": pm.environment.get('SIM1_NAME')",
													"    },",
													"    \"personalInfo\": {",
													"      \"complexName\": {",
													"        \"firstName\": \"Mats\",",
													"        \"lastName\": \"Hagman\"",
													"      },",
													"      \"dateOfBirth\": \"1983-10-25\"",
													"    }",
													"  },",
													"  \"payee\": {",
													"    \"partyIdInfo\": {",
													"      \"partyIdType\": \"MSISDN\",",
													"      \"partyIdentifier\": pm.environment.get('SIM2_MSISDN'),",
													"      \"fspId\": pm.environment.get('SIM2_NAME')",
													"    }",
													"  },",
													"  \"amountType\": \"RECEIVE\",",
													"  \"amount\": {",
													"    \"amount\": \"60\",",
													"    \"currency\": pm.environment.get('SIM2_CURRENCY')",
													"  },",
													"  \"transactionType\": {",
													"    \"scenario\": \"TRANSFER\",",
													"    \"initiator\": \"PAYER\",",
													"    \"initiatorType\": \"CONSUMER\"",
													"  },",
													"  \"note\": \"hej\"",
													"}",
													"",
													"var sPayload = JSON.stringify(objPayload)",
													"console.log(`sPayload: ${sPayload}`)",
													"pm.variables.set(\"quoteRequest\", sPayload);",
													"var token = KJUR.jws.JWS.sign(\"RS256\", sHeader, sPayload, pm.environment.get('SIM1_JWS_KEY'));",
													"console.log(`token: ${token}`)",
													"",
													"// var encodedHeaders = btoa(sHeader)",
													"",
													"// var ofspiopSignature = {signature: vSignature, protectedHeader: encodedHeaders}",
													"// var token = JSON.stringify(ofspiopSignature)",
													"",
													"const [ protectedHeaderBase64, , signature ] = token.split('.');",
													"",
													"const signatureObject = {",
													"    signature: signature.replace('\"', ''),",
													"    protectedHeader: protectedHeaderBase64.replace('\"', '')",
													"};",
													"",
													"console.log(JSON.stringify(signatureObject))",
													"",
													"pm.variables.set('fspiopSignature',JSON.stringify(signatureObject))",
													"",
													"",
													"",
													"",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"id": "df89eee5-4994-4557-8a6a-38e73aa08d5b",
												"exec": [
													"pm.test(\"Status code is 202\", function () {",
													"    pm.response.to.have.status(202);",
													"});",
													"",
													"setTimeout(function () {",
													"    pm.sendRequest(pm.environment.get(\"SIM1_SDK_TESTAPI_URL\") + \"/callbacks/\" + pm.environment.get(\"quoteId\"), function (err, response) {",
													"        if (response.responseSize !== 0) {",
													"            //Checking headers",
													"            var headers = response.json().headers;",
													"            pm.test(`${pm.environment.get('SIM1_NAME')} fspiop-source is switch`, function () {",
													"                pm.expect(headers['fspiop-source']).to.eql('switch');",
													"            });",
													"",
													"            pm.test(`${pm.environment.get('SIM1_NAME')} fspiop-destination is ${pm.environment.get('SIM1_NAME')}`, function () {",
													"                pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('SIM1_NAME'));",
													"            });",
													"",
													"            pm.test(`${pm.environment.get('SIM1_NAME')} content-type should be application/vnd.interoperability.quotes+json;version=1.0`, function () {",
													"                pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.quotes+json;version=1.0');",
													"            });",
													"",
													"            pm.test(`${pm.environment.get('SIM1_NAME')} accept is empty`, function () {",
													"                pm.expect(headers['accept']).to.eql(undefined);",
													"            });",
													"",
													"",
													"",
													"            var { signature, protectedHeader } = JSON.parse(headers['fspiop-signature'])",
													"            // var strData = JSON.stringify(response.json().data)",
													"            // const token = `${protectedHeader}.${btoa(strData)}.${signature}`",
													"            // console.log(`token: ${token}`)",
													"            // var isValid = KJUR.jws.JWS.verify(token, pm.environment.get('goldenpayeefspJWSPubKey'), {alg: ['RS256']})",
													"            // console.log(`isValid: ${isValid}`)",
													"            // pm.test(\"Check if the response is JWS valid\", function () {",
													"            //     pm.expect(isValid).to.eql(true);",
													"            // });",
													"",
													"            //Validate protected header inside Signature",
													"            var decodedProtectedHeaders = JSON.parse(atob(protectedHeader))",
													"            console.log('decodedProtectedHeaders:', decodedProtectedHeaders)",
													"",
													"            pm.test(\"FSPIOP-Signature Protected Header alg to be RS256\", function () {",
													"                pm.expect(decodedProtectedHeaders['alg']).to.eql('RS256');",
													"            });",
													"            pm.test(`FSPIOP-Signature Protected Header FSPIOP-URI to be /quotes/${pm.environment.get(\"quoteId\")}/error`, function () {",
													"                pm.expect(decodedProtectedHeaders['FSPIOP-URI']).to.eql(`/quotes/${pm.environment.get(\"quoteId\")}/error`);",
													"            });",
													"",
													"",
													"            pm.test(\"FSPIOP-Signature Protected Header FSPIOP-HTTP-Method to be PUT\", function () {",
													"                pm.expect(decodedProtectedHeaders['FSPIOP-HTTP-Method']).to.eql('PUT');",
													"            });",
													"            pm.test(`FSPIOP-Signature Protected Header FSPIOP-Source to be ${pm.environment.get('SIMPAYEE_NAME')}`, function () {",
													"                pm.expect(decodedProtectedHeaders['FSPIOP-Source']).to.eql('switch');",
													"            });",
													"            pm.test(`FSPIOP-Signature Protected Header FSPIOP-Destination to be ${pm.environment.get('SIMPAYER_NAME')}`, function () {",
													"                pm.expect(decodedProtectedHeaders['FSPIOP-Destination']).to.eql(pm.environment.get('SIM1_NAME'));",
													"            });",
													"            pm.test(\"FSPIOP-Signature Protected Header Date is present\", function () {",
													"                pm.expect(decodedProtectedHeaders['Date']).to.eql(headers['date']);",
													"            });",
													"",
													"            pm.test(`${pm.environment.get('SIM1_NAME')} FSPIOP-URI to be /quotes/${pm.environment.get(\"quoteId\")}/error`, function () {",
													"                pm.expect(headers['fspiop-uri']).to.eql(`/quotes/${pm.environment.get(\"quoteId\")}/error`);",
													"            });",
													"",
													"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-http-method is PUT`, function () {",
													"                pm.expect(headers['fspiop-http-method']).to.eql('PUT');",
													"            });",
													"",
													"            var jsonData = response.json().data;",
													"",
													"            //TODO: Update test and leave only 3201 code once SDK is updated",
													"            pm.test(\"Error code is 3201 or 5000\", function () {",
													"                pm.expect(jsonData.errorInformation.errorCode).to.be.oneOf(['3201', '5000']);",
													"            });",
													"",
													"            pm.test(\"Error Description is Unsupported participant\", function () {",
													"                pm.expect(jsonData.errorInformation.errorDescription).to.include('Unsupported participant ');",
													"            });",
													"",
													"        } else {",
													"            pm.test(\"Quote FAILED\", function () {",
													"                throw new Error('Did not receive response on Payer side');",
													"            });",
													"            // postman.setNextRequest(null);",
													"        }",
													"",
													"    });",
													"}, pm.environment.get(\"SET_TIMEOUT_QUOTES\"))",
													"",
													"",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{SIM1_BEARER_TOKEN}}",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Accept",
												"value": "application/vnd.interoperability.quotes+json;version=1.0"
											},
											{
												"key": "Content-Type",
												"value": "application/vnd.interoperability.quotes+json;version=1.0"
											},
											{
												"key": "Date",
												"value": "{{quoteDate}}"
											},
											{
												"key": "FSPIOP-Source",
												"value": "{{SIM1_NAME}}"
											},
											{
												"key": "FSPIOP-Destination",
												"value": "{{SIM2_NAME}}"
											},
											{
												"key": "FSPIOP-Signature",
												"type": "text",
												"value": "{{fspiopSignature}}"
											},
											{
												"key": "FSPIOP-HTTP-Method",
												"type": "text",
												"value": "POST"
											},
											{
												"key": "FSPIOP-URI",
												"type": "text",
												"value": "/quotes"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{{quoteRequest}}"
										},
										"url": {
											"raw": "{{HOST_QUOTING_SERVICE}}/quotes",
											"host": [
												"{{HOST_QUOTING_SERVICE}}"
											],
											"path": [
												"quotes"
											]
										}
									},
									"response": []
								},
								{
									"name": "(BUG) Send Transfer fail (SIM1 to SIM2)",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "219416e5-a41b-4063-ad54-58273e719c9b",
												"exec": [
													"pm.test(\"Status code is 202\", function () {",
													"    pm.response.to.have.status(202);",
													"});",
													"",
													"//Check the callback response that Switch forwards to payerfsp",
													"setTimeout(function () {",
													"  pm.sendRequest(pm.environment.get(\"SIM1_SDK_TESTAPI_URL\")+\"/callbacks/\"+pm.environment.get(\"transfer_ID\"), function (err, response) {",
													"          if(response.responseSize !== 0) {",
													"            //Checking headers",
													"            var headers = response.json().headers;",
													"            pm.test(\"fspiop-source is switch \", function () {",
													"                pm.expect(headers['fspiop-source']).to.eql('switch');",
													"            });",
													"            ",
													"            pm.test(`fspiop-destination is ${pm.environment.get('SIM1_NAME')}`, function () {",
													"                pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('SIM1_NAME'));",
													"            });",
													"            ",
													"            pm.test(\"content-type should be application/vnd.interoperability.transfers+json;version=1.0\", function () {",
													"                pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.transfers+json;version=1.0');",
													"            });",
													"            ",
													"            pm.test(\"accept is empty\", function () {",
													"                pm.expect(headers['accept']).to.eql(undefined);",
													"            });",
													"            ",
													"            pm.test(\"fspiop-signature is not empty\", function () {",
													"                    pm.expect(headers['fspiop-signature']).not.eql(undefined);",
													"                });",
													"            ",
													"            ",
													"            pm.test(`fspiop-uri includes /transfers/${pm.environment.get(\"transfer_ID\")}/error`, function () {",
													"                pm.expect(headers['fspiop-uri']).to.eql(`/transfers/${pm.environment.get(\"transfer_ID\")}/error`);",
													"            });",
													"            ",
													"            pm.test(\"fspiop-http-method is PUT\", function () {",
													"                pm.expect(headers['fspiop-http-method']).to.eql('PUT');",
													"            });",
													"            ",
													"            var jsonData = response.json().data;",
													"            pm.test(\"Error code is 3100\", function () {",
													"                pm.expect(jsonData.errorInformation.errorCode).to.eql('3100');",
													"            });",
													"           ",
													"           pm.test(\"Error Description is GENERIC VALIDATION ERROR \", function () {",
													"                pm.expect(jsonData.errorInformation.errorDescription).to.include(`Generic validation error - Participant ${pm.environment.get('SIM2_NAME')} ${pm.environment.get('SIM2_CURRENCY')} account is inactive`);",
													"           });",
													"          } else {",
													"              pm.test(\"Transfer FAILED\", function () {",
													"                throw new Error('Did not receive response on payer side');",
													"              });",
													"              // postman.setNextRequest(null)",
													"          }",
													"   });",
													"}, pm.environment.get(\"SET_TIMEOUT_TRANSFERS\"))",
													"",
													"",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "prerequest",
											"script": {
												"id": "1dcd72b2-4a7c-44a8-abdd-82dd907ffd47",
												"exec": [
													"var navigator = {}; //fake a navigator object for the lib",
													"var window = {}; //fake a window object for the lib",
													"eval(pm.environment.get('jrsassign'));",
													"",
													"var uuid = require('uuid');",
													"var generatedUUID = uuid.v4();",
													"pm.environment.set('transfer_ID', pm.environment.get('transactionId'));",
													"",
													"",
													"pm.variables.set('transferDate', (new Date()).toUTCString());",
													"",
													"pm.environment.set(\"transferExpiration\",new Date(new Date().getTime() + 60000))",
													"",
													"var oHeader = {alg: \"RS256\", \"FSPIOP-Source\":pm.environment.get('SIM1_NAME'),\"FSPIOP-Destination\":pm.environment.get('SIM2_NAME'), \"FSPIOP-URI\":\"/transfers\", \"FSPIOP-HTTP-Method\":\"POST\", \"Date\":pm.variables.get('transferDate')};",
													"var sHeader = JSON.stringify(oHeader);",
													"console.log(`sHeader: ${sHeader}`)",
													"",
													"var objPayload = {",
													"  \"transferId\": pm.environment.get('transfer_ID'),",
													"  \"payerFsp\": pm.environment.get('SIM1_NAME'),",
													"  \"payeeFsp\": pm.environment.get('SIM2_NAME'),",
													"  \"amount\": {",
													"    \"amount\": \"10\",",
													"    \"currency\": pm.environment.get('SIM2_CURRENCY')",
													"  },",
													"  \"expiration\": pm.environment.get('transferExpiration'),",
													"  \"ilpPacket\": pm.environment.get('ilpPacket'),",
													"  \"condition\": pm.environment.get('condition')",
													"}",
													"var sPayload = JSON.stringify(objPayload)",
													"console.log(`sPayload: ${sPayload}`)",
													"pm.variables.set(\"transferRequest\", sPayload);",
													"var token = KJUR.jws.JWS.sign(\"RS256\", sHeader, sPayload, pm.environment.get('SIM1_JWS_KEY'));",
													"//console.log(`token: ${token}`)",
													"",
													"// var encodedHeaders = btoa(sHeader)",
													"",
													"// var ofspiopSignature = {signature: vSignature, protectedHeader: encodedHeaders}",
													"// var token = JSON.stringify(ofspiopSignature)",
													"",
													"const [ protectedHeaderBase64, , signature ] = token.split('.');",
													"",
													"const signatureObject = {",
													"    signature: signature.replace('\"', ''),",
													"    protectedHeader: protectedHeaderBase64.replace('\"', '')",
													"};",
													"",
													"console.log(JSON.stringify(signatureObject))",
													"",
													"pm.variables.set('fspiopSignature',JSON.stringify(signatureObject))"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{SIM1_BEARER_TOKEN}}",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Accept",
												"value": "application/vnd.interoperability.transfers+json;version=1.0"
											},
											{
												"key": "Content-Type",
												"value": "application/vnd.interoperability.transfers+json;version=1.0"
											},
											{
												"key": "Date",
												"value": "{{transferDate}}"
											},
											{
												"key": "FSPIOP-Source",
												"value": "{{SIM1_NAME}}"
											},
											{
												"key": "FSPIOP-Destination",
												"value": "{{SIM2_NAME}}"
											},
											{
												"key": "FSPIOP-Signature",
												"type": "text",
												"value": "{{fspiopSignature}}"
											},
											{
												"key": "FSPIOP-URI",
												"type": "text",
												"value": "/transfers"
											},
											{
												"key": "FSPIOP-HTTP-Method",
												"type": "text",
												"value": "POST"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{{transferRequest}}"
										},
										"url": {
											"raw": "{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}/transfers",
											"host": [
												"{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}"
											],
											"path": [
												"transfers"
											]
										}
									},
									"response": []
								},
								{
									"name": "Update participant (SIM2 to active) account",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "e26faa9f-5350-4015-a613-2f8623e3e655",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
													"type": "string"
												}
											]
										},
										"method": "PUT",
										"header": [
											{
												"key": "Content-Type",
												"type": "text",
												"value": "application/json"
											},
											{
												"key": "FSPIOP-Source",
												"type": "text",
												"value": "{{hub_operator}}"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\r\n  \"isActive\": true\r\n}"
										},
										"url": {
											"raw": "{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}/participants/{{SIM2_NAME}}/accounts/{{{{SIM2_NAME}}PositionAccountId}}",
											"host": [
												"{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}"
											],
											"path": [
												"participants",
												"{{SIM2_NAME}}",
												"accounts",
												"{{{{SIM2_NAME}}PositionAccountId}}"
											]
										},
										"description": "inactives testfsp4 position account"
									},
									"response": []
								},
								{
									"name": "Send Quote (SIM1 to SIM2) - pass",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "dae1c0df-499e-4e72-93b9-ccbb5232edde",
												"exec": [
													"  var navigator = {}; ",
													"var window = {}; ",
													"eval(pm.environment.get('jrsassign'));",
													"",
													"",
													"var uuid = require('uuid');",
													"var generatedUUID = uuid.v4();",
													"pm.environment.set('quoteId', generatedUUID);",
													"generatedUUID = uuid.v4();",
													"pm.environment.set('transactionId', generatedUUID);",
													"",
													"pm.variables.set('quoteDate', (new Date()).toUTCString());",
													"pm.variables.set('payerName', 'PayerFirst PayerLast');",
													"",
													"pm.variables.set('expectedPayeeFirstName', 'GoldenFirst');",
													"pm.variables.set('expectedPayeeLastName', 'GoldenLast');",
													"pm.variables.set('expectedPayeeDOB', '2010-10-10');",
													"",
													"var oHeader = {alg: \"RS256\", \"FSPIOP-Source\":pm.environment.get('SIM1_NAME'),\"FSPIOP-Destination\":pm.environment.get('SIM2_NAME'), \"FSPIOP-URI\":\"/quotes\", \"FSPIOP-HTTP-Method\":\"POST\", \"Date\":pm.variables.get('quoteDate')};",
													"var sHeader = JSON.stringify(oHeader);",
													"console.log(`sHeader: ${sHeader}`)",
													"",
													"var objPayload = {",
													"  \"quoteId\": pm.environment.get('quoteId'),",
													"  \"transactionId\": pm.environment.get('transactionId'),",
													"  \"payer\": {",
													"    \"partyIdInfo\": {",
													"      \"partyIdType\": \"MSISDN\",",
													"      \"partyIdentifier\": pm.environment.get('SIM1_MSISDN'),",
													"      \"fspId\": pm.environment.get('SIM1_NAME')",
													"    },",
													"    \"personalInfo\": {",
													"      \"complexName\": {",
													"        \"firstName\": \"Mats\",",
													"        \"lastName\": \"Hagman\"",
													"      },",
													"      \"dateOfBirth\": \"1983-10-25\"",
													"    }",
													"  },",
													"  \"payee\": {",
													"    \"partyIdInfo\": {",
													"      \"partyIdType\": \"MSISDN\",",
													"      \"partyIdentifier\": pm.environment.get('SIM2_MSISDN'),",
													"      \"fspId\": pm.environment.get('SIM2_NAME')",
													"    }",
													"  },",
													"  \"amountType\": \"RECEIVE\",",
													"  \"amount\": {",
													"    \"amount\": \"60\",",
													"    \"currency\": pm.environment.get('SIM2_CURRENCY')",
													"  },",
													"  \"transactionType\": {",
													"    \"scenario\": \"TRANSFER\",",
													"    \"initiator\": \"PAYER\",",
													"    \"initiatorType\": \"CONSUMER\"",
													"  },",
													"  \"note\": \"hej\"",
													"}",
													"",
													"var sPayload = JSON.stringify(objPayload)",
													"console.log(`sPayload: ${sPayload}`)",
													"pm.variables.set(\"quoteRequest\", sPayload);",
													"var token = KJUR.jws.JWS.sign(\"RS256\", sHeader, sPayload, pm.environment.get('SIM1_JWS_KEY'));",
													"console.log(`token: ${token}`)",
													"",
													"// var encodedHeaders = btoa(sHeader)",
													"",
													"// var ofspiopSignature = {signature: vSignature, protectedHeader: encodedHeaders}",
													"// var token = JSON.stringify(ofspiopSignature)",
													"",
													"const [ protectedHeaderBase64, , signature ] = token.split('.');",
													"",
													"const signatureObject = {",
													"    signature: signature.replace('\"', ''),",
													"    protectedHeader: protectedHeaderBase64.replace('\"', '')",
													"};",
													"",
													"console.log(JSON.stringify(signatureObject))",
													"",
													"pm.variables.set('fspiopSignature',JSON.stringify(signatureObject))",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"id": "0d394354-acb2-42b3-9c3a-930be90e7715",
												"exec": [
													"pm.test(\"Status code is 202\", function () {\r",
													"    pm.response.to.have.status(202);\r",
													"});\r",
													"\r",
													"setTimeout(function () {\r",
													"  pm.sendRequest(pm.environment.get(\"SIM2_SDK_TESTAPI_URL\")+\"/requests/\"+pm.variables.get(\"quoteId\"), function (err, response) {\r",
													"          if(response.responseSize !== 0) {\r",
													"              \r",
													"              //Check the Headers\r",
													"              var headers = response.json().headers;\r",
													"              \r",
													"                pm.test(`${pm.environment.get('SIM2_NAME')} fspiop-source is ${pm.environment.get('SIM1_NAME')}`, function () {\r",
													"                    pm.expect(headers['fspiop-source']).to.eql(pm.environment.get('SIM1_NAME'));\r",
													"                });\r",
													"                \r",
													"                pm.test(`${pm.environment.get('SIM2_NAME')} fspiop-destination is ${pm.environment.get('SIM2_NAME')}`, function () {\r",
													"                    pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('SIM2_NAME'));\r",
													"                });\r",
													"                \r",
													"                pm.test(`${pm.environment.get('SIM2_NAME')} fspiop-signature is same as sent in the request`, function () {\r",
													"                    pm.expect(headers['fspiop-signature']).to.eql(pm.variables.get(\"fspiopSignature\"));\r",
													"                });\r",
													"                \r",
													"                pm.test(`${pm.environment.get('SIM2_NAME')} accept is same as sent in the request`, function () {\r",
													"                    pm.expect(headers['accept']).to.match(/application\\/vnd\\.interoperability\\.quotes\\+json;version=1(\\.\\d)?/);\r",
													"                });\r",
													"                \r",
													"                pm.test(`${pm.environment.get('SIM2_NAME')} content-typeis same as sent in the request`, function () {\r",
													"                    pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.quotes+json;version=1.0');\r",
													"                });\r",
													"                \r",
													"                pm.test(`${pm.environment.get('SIM2_NAME')} fspiop-uri is /quotes`, function () {\r",
													"                    pm.expect(headers['fspiop-uri']).to.eql('/quotes');\r",
													"                });\r",
													"                \r",
													"                pm.test(`${pm.environment.get('SIM2_NAME')} fspiop-http-method is POST`, function () {\r",
													"                    pm.expect(headers['fspiop-http-method']).to.eql('POST');\r",
													"                });\r",
													"                \r",
													"          } else {\r",
													"              pm.test(\"Quote FAILED\", function () {\r",
													"                throw new Error('Did not receive request on payee side');\r",
													"              });\r",
													"              // postman.setNextRequest(null)\r",
													"          }\r",
													"   });\r",
													"}, pm.environment.get(\"SET_TIMEOUT_QUOTES\"))\r",
													"\r",
													"setTimeout(function () {\r",
													"  pm.sendRequest(pm.environment.get(\"SIM1_SDK_TESTAPI_URL\")+\"/callbacks/\"+pm.environment.get(\"quoteId\"), function (err, response) {\r",
													"      if(response.responseSize !== 0) {\r",
													"          //Checking headers\r",
													"            var headers = response.json().headers;\r",
													"            pm.test(`${pm.environment.get('SIM1_NAME')} fspiop-source is ${pm.environment.get('SIM2_NAME')}`, function () {\r",
													"                pm.expect(headers['fspiop-source']).to.eql(pm.environment.get('SIM2_NAME'));\r",
													"            });\r",
													"            \r",
													"            pm.test(`${pm.environment.get('SIM1_NAME')} fspiop-destination is ${pm.environment.get('SIM1_NAME')}`, function () {\r",
													"                pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('SIM1_NAME'));\r",
													"            });\r",
													"            \r",
													"            pm.test(`${pm.environment.get('SIM1_NAME')} content-type should be application/vnd.interoperability.quotes+json;version=1.0`, function () {\r",
													"                pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.quotes+json;version=1.0');\r",
													"            });\r",
													"            \r",
													"            pm.test(`${pm.environment.get('SIM1_NAME')} accept is empty`, function () {\r",
													"                pm.expect(headers['accept']).to.eql(undefined);\r",
													"            });\r",
													"            \r",
													"            \r",
													"            \r",
													"            var {signature,protectedHeader} = JSON.parse(headers['fspiop-signature'])\r",
													"            // var strData = JSON.stringify(response.json().data)\r",
													"            // const token = `${protectedHeader}.${btoa(strData)}.${signature}`\r",
													"            // console.log(`token: ${token}`)\r",
													"            // var isValid = KJUR.jws.JWS.verify(token, pm.environment.get('goldentestfsp2JWSPubKey'), {alg: ['RS256']})\r",
													"            // console.log(`isValid: ${isValid}`)\r",
													"            // pm.test(\"Check if the response is JWS valid\", function () {\r",
													"            //     pm.expect(isValid).to.eql(true);\r",
													"            // });\r",
													"            \r",
													"            //Validate protected header inside Signature\r",
													"            var decodedProtectedHeaders = JSON.parse(atob(protectedHeader))\r",
													"            console.log('decodedProtectedHeaders:',decodedProtectedHeaders)\r",
													"            \r",
													"            pm.test(\"FSPIOP-Signature Protected Header alg to be RS256\", function () {\r",
													"                pm.expect(decodedProtectedHeaders['alg']).to.eql('RS256');\r",
													"            });\r",
													"            pm.test(\"FSPIOP-Signature Protected Header FSPIOP-URI to be /quotes/\"+pm.environment.get(\"quoteId\"), function () {\r",
													"                pm.expect(decodedProtectedHeaders['FSPIOP-URI']).to.eql('/quotes/'+pm.environment.get(\"quoteId\"));\r",
													"            });\r",
													"            \r",
													"\r",
													"            pm.test(\"FSPIOP-Signature Protected Header FSPIOP-HTTP-Method to be PUT\", function () {\r",
													"                pm.expect(decodedProtectedHeaders['FSPIOP-HTTP-Method']).to.eql('PUT');\r",
													"            });\r",
													"            pm.test(`FSPIOP-Signature Protected Header FSPIOP-Source to be ${pm.environment.get('SIM2_NAME')}`, function () {\r",
													"                pm.expect(decodedProtectedHeaders['FSPIOP-Source']).to.eql(pm.environment.get('SIM2_NAME'));\r",
													"            });\r",
													"            pm.test(`FSPIOP-Signature Protected Header FSPIOP-Destination to be ${pm.environment.get('SIM1_NAME')}`, function () {\r",
													"                pm.expect(decodedProtectedHeaders['FSPIOP-Destination']).to.eql(pm.environment.get('SIM1_NAME'));\r",
													"            });\r",
													"            pm.test(\"FSPIOP-Signature Protected Header Date is present\", function () {\r",
													"                pm.expect(decodedProtectedHeaders['Date']).to.eql(headers['date']);\r",
													"            });\r",
													"           \r",
													"            pm.test(`${pm.environment.get('SIM1_NAME')} FSPIOP-URI to be /quotes/${pm.environment.get(\"quoteId\")}`, function () {\r",
													"                pm.expect(headers['fspiop-uri']).to.eql(`/quotes/${pm.environment.get(\"quoteId\")}`);\r",
													"            });\r",
													"            \r",
													"            pm.test(`${pm.environment.get('SIM1_NAME')} fspiop-http-method is PUT`, function () {\r",
													"                pm.expect(headers['fspiop-http-method']).to.eql('PUT');\r",
													"            });\r",
													"            \r",
													"            var jsonData = response.json().data;\r",
													"            \r",
													"            pm.test(\"Response quoteId is  null\", function () {\r",
													"                pm.expect(jsonData.quoteId).to.eql(undefined);\r",
													"                \r",
													"            });\r",
													"          \r",
													"            pm.test(\"Response ilpPacket is not null\", function () {\r",
													"                pm.expect(jsonData.ilpPacket).not.equal(undefined);\r",
													"                pm.environment.set(\"ilpPacket\", jsonData.ilpPacket);\r",
													"            });\r",
													"       \r",
													"           pm.test(\"Response condition is not null\", function () {\r",
													"               pm.expect(jsonData.condition).not.equal(undefined);\r",
													"               pm.environment.set(\"condition\", jsonData.condition);\r",
													"           });\r",
													"      } else {\r",
													"          pm.test(\"Quote FAILED\", function () {\r",
													"            throw new Error('Did not receive response on Payer side');\r",
													"           });\r",
													"           // postman.setNextRequest(null);\r",
													"      }\r",
													"       \r",
													"   });\r",
													"}, pm.environment.get(\"SET_TIMEOUT_QUOTES\"))\r",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{SIM1_BEARER_TOKEN}}",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Accept",
												"type": "text",
												"value": "application/vnd.interoperability.quotes+json;version=1.0"
											},
											{
												"key": "Content-Type",
												"type": "text",
												"value": "application/vnd.interoperability.quotes+json;version=1.0"
											},
											{
												"key": "Date",
												"type": "text",
												"value": "{{quoteDate}}"
											},
											{
												"key": "FSPIOP-Source",
												"type": "text",
												"value": "{{SIM1_NAME}}"
											},
											{
												"key": "FSPIOP-Destination",
												"type": "text",
												"value": "{{SIM2_NAME}}"
											},
											{
												"key": "FSPIOP-Signature",
												"type": "text",
												"value": "{{fspiopSignature}}"
											},
											{
												"key": "FSPIOP-HTTP-Method",
												"type": "text",
												"value": "POST"
											},
											{
												"key": "FSPIOP-URI",
												"type": "text",
												"value": "/quotes"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{{quoteRequest}}"
										},
										"url": {
											"raw": "{{HOST_QUOTING_SERVICE}}/quotes",
											"host": [
												"{{HOST_QUOTING_SERVICE}}"
											],
											"path": [
												"quotes"
											]
										}
									},
									"response": []
								},
								{
									"name": "Send Transfer (SIM1 to SIM2) - pass",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "7616c4b9-06be-42e5-b7f2-96e60eab54d8",
												"exec": [
													"var navigator = {}; //fake a navigator object for the lib\r",
													"var window = {}; //fake a window object for the lib\r",
													"eval(pm.environment.get('jrsassign'));\r",
													"\r",
													"var uuid = require('uuid');\r",
													"var generatedUUID = uuid.v4();\r",
													"pm.environment.set('transfer_ID', pm.environment.get('transactionId'));\r",
													"\r",
													"\r",
													"pm.variables.set('transferDate', (new Date()).toUTCString());\r",
													"\r",
													"pm.environment.set(\"transferExpiration\",new Date(new Date().getTime() + 60000))\r",
													"\r",
													"var oHeader = {alg: \"RS256\", \"FSPIOP-Source\":pm.environment.get('SIM1_NAME'),\"FSPIOP-Destination\":pm.environment.get('SIM2_NAME'), \"FSPIOP-URI\":\"/transfers\", \"FSPIOP-HTTP-Method\":\"POST\", \"Date\":pm.variables.get('transferDate')};\r",
													"var sHeader = JSON.stringify(oHeader);\r",
													"console.log(`sHeader: ${sHeader}`)\r",
													"\r",
													"var objPayload = {\r",
													"  \"transferId\": pm.environment.get('transfer_ID'),\r",
													"  \"payerFsp\": pm.environment.get('SIM1_NAME'),\r",
													"  \"payeeFsp\": pm.environment.get('SIM2_NAME'),\r",
													"  \"amount\": {\r",
													"    \"amount\": \"60\",\r",
													"    \"currency\": pm.environment.get('SIM2_CURRENCY')\r",
													"  },\r",
													"  \"expiration\": pm.environment.get('transferExpiration'),\r",
													"  \"ilpPacket\": pm.environment.get('ilpPacket'),\r",
													"  \"condition\": pm.environment.get('condition')\r",
													"}\r",
													"var sPayload = JSON.stringify(objPayload)\r",
													"console.log(`sPayload: ${sPayload}`)\r",
													"pm.variables.set(\"transferRequest\", sPayload);\r",
													"var token = KJUR.jws.JWS.sign(\"RS256\", sHeader, sPayload, pm.environment.get('SIM1_JWS_KEY'));\r",
													"//console.log(`token: ${token}`)\r",
													"\r",
													"// var encodedHeaders = btoa(sHeader)\r",
													"\r",
													"// var ofspiopSignature = {signature: vSignature, protectedHeader: encodedHeaders}\r",
													"// var token = JSON.stringify(ofspiopSignature)\r",
													"\r",
													"const [ protectedHeaderBase64, , signature ] = token.split('.');\r",
													"\r",
													"const signatureObject = {\r",
													"    signature: signature.replace('\"', ''),\r",
													"    protectedHeader: protectedHeaderBase64.replace('\"', '')\r",
													"};\r",
													"\r",
													"console.log(JSON.stringify(signatureObject))\r",
													"\r",
													"pm.variables.set('fspiopSignature',JSON.stringify(signatureObject))"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"id": "68946302-6c92-46fb-8cd2-aa6828b8e37a",
												"exec": [
													"pm.test(\"Status code is 202\", function () {\r",
													"    pm.response.to.have.status(202);\r",
													"});\r",
													"\r",
													"// //Check the request that Switch forwards to testfsp2\r",
													"setTimeout(function () {\r",
													"  pm.sendRequest(pm.environment.get(\"SIM2_SDK_TESTAPI_URL\")+\"/requests/\"+pm.environment.get(\"transfer_ID\"), function (err, response) {\r",
													"          if(response.responseSize !== 0) {\r",
													"              \r",
													"              //Check the Headers\r",
													"              var headers = response.json().headers;\r",
													"              \r",
													"                pm.test(`${pm.environment.get('SIM2_NAME')} fspiop-source is ${pm.environment.get('SIM1_NAME')}`, function () {\r",
													"                    pm.expect(headers['fspiop-source']).to.eql(pm.environment.get('SIM1_NAME'));\r",
													"                });\r",
													"                \r",
													"                pm.test(`${pm.environment.get('SIM2_NAME')} fspiop-destination is ${pm.environment.get('SIM2_NAME')}`, function () {\r",
													"                    pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('SIM2_NAME'));\r",
													"                });\r",
													"                \r",
													"                pm.test(`${pm.environment.get('SIM2_NAME')} content-typeis same as sent in the request`, function () {\r",
													"                    pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.transfers+json;version=1.0');\r",
													"                });\r",
													"                \r",
													"                pm.test(`${pm.environment.get('SIM2_NAME')} accept is same as sent in the request`, function () {\r",
													"                    pm.expect(headers['accept']).to.match(/application\\/vnd\\.interoperability\\.transfers\\+json;version=1(\\.\\d)?/);\r",
													"                });\r",
													"                \r",
													"                pm.test(`${pm.environment.get('SIM2_NAME')} fspiop-signature is same as sent in the request`, function () {\r",
													"                    pm.expect(headers['fspiop-signature']).to.eql(pm.variables.get(\"fspiopSignature\"));\r",
													"                });\r",
													"                \r",
													"                pm.test(`${pm.environment.get('SIM2_NAME')} fspiop-http-method is POST`, function () {\r",
													"                    pm.expect(headers['fspiop-http-method']).to.eql('POST');\r",
													"                });\r",
													"                \r",
													"                pm.test(`${pm.environment.get('SIM2_NAME')} fspiop-uri is /transfers`, function () {\r",
													"                    pm.expect(headers['fspiop-uri']).to.eql('/transfers');\r",
													"                });\r",
													"                \r",
													"                \r",
													"                //Check the data\r",
													"                var jsonData = response.json().data;\r",
													"                pm.test(`${pm.environment.get('SIM2_NAME')} data should have the same transferId as request`, function () {\r",
													"                  pm.expect(jsonData.transferId).to.eql(pm.environment.get(\"transfer_ID\"));\r",
													"                });\r",
													"                pm.test(`${pm.environment.get('SIM2_NAME')} data should have the same amount as request`, function () {\r",
													"                  pm.expect(jsonData.amount.amount).to.eql('60');\r",
													"                });\r",
													"                pm.test(`${pm.environment.get('SIM2_NAME')} data should have the same currency as request`, function () {\r",
													"                  pm.expect(jsonData.amount.currency).to.eql(pm.environment.get(\"currency\"));\r",
													"                });\r",
													"                pm.test(`${pm.environment.get('SIM2_NAME')} data should have the same expiration as request`, function () {\r",
													"                  pm.expect(jsonData.expiration).to.eql(pm.environment.get(\"transferExpiration\"));\r",
													"                });\r",
													"                pm.test(`${pm.environment.get('SIM2_NAME')} data should have the same ilpPacket as request`, function () {\r",
													"                  pm.expect(jsonData.ilpPacket).to.eql(pm.environment.get(\"ilpPacket\"));\r",
													"                });\r",
													"                pm.test(`${pm.environment.get('SIM2_NAME')} data should have the same condition as request`, function () {\r",
													"                  pm.expect(jsonData.condition).to.eql(pm.environment.get(\"condition\"));\r",
													"                });\r",
													"                \r",
													"          } else {\r",
													"              pm.test(\"Transfer FAILED\", function () {\r",
													"                throw new Error('Did not receive response on payee side');\r",
													"              });\r",
													"              // postman.setNextRequest(null)\r",
													"          }\r",
													"  });\r",
													"}, pm.environment.get(\"SET_TIMEOUT_TRANSFERS\"))\r",
													"\r",
													"//Check the callback response that Switch forwards to testfsp1\r",
													"setTimeout(function () {\r",
													"  pm.sendRequest(pm.environment.get(\"SIM1_SDK_TESTAPI_URL\")+\"/callbacks/\"+pm.environment.get(\"transfer_ID\"), function (err, response) {\r",
													"          if(response.responseSize !== 0) {\r",
													"            //Checking headers\r",
													"            var headers = response.json().headers;\r",
													"            pm.test(`${pm.environment.get('SIM1_NAME')} fspiop-source is ${pm.environment.get('SIM2_NAME')}`, function () {\r",
													"                pm.expect(headers['fspiop-source']).to.eql(pm.environment.get('SIM2_NAME'));\r",
													"            });\r",
													"            \r",
													"            pm.test(`${pm.environment.get('SIM1_NAME')} fspiop-destination is ${pm.environment.get('SIM1_NAME')}`, function () {\r",
													"                pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('SIM1_NAME'));\r",
													"            });\r",
													"            \r",
													"            pm.test(`${pm.environment.get('SIM1_NAME')} content-type should be application/vnd.interoperability.transfers+json;version=1.0`, function () {\r",
													"                pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.transfers+json;version=1.0');\r",
													"            });\r",
													"            \r",
													"            pm.test(`${pm.environment.get('SIM1_NAME')} accept is empty`, function () {\r",
													"                pm.expect(headers['accept']).to.eql(undefined);\r",
													"            });\r",
													"            \r",
													"            \r",
													"            pm.test(`${pm.environment.get('SIM1_NAME')} fspiop-uri includes /transfers/${pm.environment.get(\"transfer_ID\")}`, function () {\r",
													"                pm.expect(headers['fspiop-uri']).to.eql(`/transfers/${pm.environment.get(\"transfer_ID\")}`);\r",
													"            });\r",
													"            \r",
													"            pm.test(`${pm.environment.get('SIM1_NAME')} fspiop-http-method is PUT`, function () {\r",
													"                pm.expect(headers['fspiop-http-method']).to.eql('PUT');\r",
													"            });\r",
													"            \r",
													"            var jsonData = response.json().data;\r",
													"            pm.test(\"Response data does not have transferId\", function () {\r",
													"               pm.expect(jsonData.transferId).to.eql(undefined);\r",
													"            });\r",
													"            pm.test(\"Response status is COMMITTED\", function () {\r",
													"                pm.expect(jsonData.transferState).to.eql('COMMITTED');\r",
													"            });\r",
													"          } else {\r",
													"              pm.test(\"Transfer FAILED\", function () {\r",
													"                throw new Error('Did not receive response on payer side');\r",
													"              });\r",
													"              // postman.setNextRequest(null)\r",
													"          }\r",
													"   });\r",
													"}, pm.environment.get(\"SET_TIMEOUT_TRANSFERS\"))"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{SIM1_BEARER_TOKEN}}",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Accept",
												"type": "text",
												"value": "application/vnd.interoperability.transfers+json;version=1.0"
											},
											{
												"key": "Content-Type",
												"type": "text",
												"value": "application/vnd.interoperability.transfers+json;version=1.0"
											},
											{
												"key": "Date",
												"type": "text",
												"value": "{{transferDate}}"
											},
											{
												"key": "FSPIOP-Source",
												"type": "text",
												"value": "{{SIM1_NAME}}"
											},
											{
												"key": "FSPIOP-Destination",
												"type": "text",
												"value": "{{SIM2_NAME}}"
											},
											{
												"key": "FSPIOP-Signature",
												"type": "text",
												"value": "{{fspiopSignature}}"
											},
											{
												"key": "FSPIOP-URI",
												"type": "text",
												"value": "/transfers"
											},
											{
												"key": "FSPIOP-HTTP-Method",
												"type": "text",
												"value": "POST"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{{transferRequest}}"
										},
										"url": {
											"raw": "{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}/transfers",
											"host": [
												"{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}"
											],
											"path": [
												"transfers"
											]
										}
									},
									"response": []
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "api-tests",
			"item": [
				{
					"name": "admin-api-tests",
					"item": [
						{
							"name": "Get participants List",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "40ea2ea7-8cfb-42b4-9e89-0e11af5b0219",
										"exec": [
											"pm.test(\"Status code is 200\", function () {",
											"    pm.response.to.have.status(200);",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "FSPIOP-Source",
										"value": "{{hub_operator}}",
										"type": "text"
									}
								],
								"url": {
									"raw": "{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}/participants",
									"host": [
										"{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}"
									],
									"path": [
										"participants"
									]
								}
							},
							"response": []
						},
						{
							"name": "3. Get Participant",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "893df4d5-68ad-4fdc-9d54-1d7de999a1a4",
										"exec": [
											"pm.test(\"Status code is 200\", function () {",
											"    pm.response.to.have.status(200);",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "FSPIOP-Source",
										"value": "{{hub_operator}}",
										"type": "text"
									}
								],
								"url": {
									"raw": "{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}/participants/{{SIMPAYER_NAME}}",
									"host": [
										"{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}"
									],
									"path": [
										"participants",
										"{{SIMPAYER_NAME}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "3. Get Hub Account",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "9f8d2141-5c3d-4c0b-bd15-320f0faf4a82",
										"exec": [
											"pm.test(\"Status code is 200\", function () {",
											"    pm.response.to.have.status(200);",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "FSPIOP-Source",
										"value": "{{hub_operator}}",
										"type": "text"
									}
								],
								"url": {
									"raw": "{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}/participants/Hub/accounts",
									"host": [
										"{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}"
									],
									"path": [
										"participants",
										"Hub",
										"accounts"
									]
								}
							},
							"response": []
						},
						{
							"name": "11. Get Endpoints",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "d928a22d-22bf-4f9d-b9a8-30888e69400d",
										"exec": [
											"pm.test(\"Status code is 200\", function () {",
											"    pm.response.to.have.status(200);",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Cache-Control",
										"value": "no-cache"
									},
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "FSPIOP-Source",
										"value": "{{hub_operator}}",
										"type": "text"
									}
								],
								"url": {
									"raw": "{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}/participants/{{SIMPAYER_NAME}}/endpoints",
									"host": [
										"{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}"
									],
									"path": [
										"participants",
										"{{SIMPAYER_NAME}}",
										"endpoints"
									]
								},
								"description": "Generated from a curl request: \ncurl -i -X POST     http://test-central-ledger.mojaloop.test/admin/participants/testfsp2/initialPositionAndLimits     -H 'Cache-Control: no-cache'     -H 'Content-Type: application/json'     -d '{\n    \\\"currency\\\": \\\"USD\\\",\n    \\\"limit\\\": {\n      \\\"type\\\": \\\"NET_DEBIT_CAP\\\",\n      \\\"value\\\": 1000\n    },\n    \\\"initialPosition\\\": 0\n  }'"
							},
							"response": []
						},
						{
							"name": "Get - limits - All FSPs",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "b731fb41-bcda-4ae7-9e06-c3163d8ced17",
										"exec": [
											"pm.test(\"Status code is 200\", function () {",
											"    pm.response.to.have.status(200);",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "FSPIOP-Source",
										"value": "{{hub_operator}}",
										"type": "text"
									},
									{
										"key": "currency",
										"value": "{{SIMPAYER_CURRENCY}}",
										"type": "text"
									}
								],
								"url": {
									"raw": "{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}/participants/limits?type=NET_DEBIT_CAP",
									"host": [
										"{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}"
									],
									"path": [
										"participants",
										"limits"
									],
									"query": [
										{
											"key": "currency",
											"value": "{{SIMPAYER_CURRENCY}}",
											"disabled": true
										},
										{
											"key": "type",
											"value": "NET_DEBIT_CAP"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Get SIMPAYER position",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "0bb9767d-8b41-4017-b9db-06ae26c52404",
										"exec": [
											"pm.test(\"Status code is 200\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"var jsonData = pm.response.json();",
											"",
											"pm.test(\"Atleast one account position should be returned\", function () {",
											"    pm.variables.set(`${pm.environment.get('SIMPAYER_NAME')}PositionBeforeTransfer`, jsonData[0].value);",
											"    pm.expect(jsonData).to.be.not.empty;",
											"});",
											"",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "FSPIOP-Source",
										"type": "text",
										"value": "{{hub_operator}}"
									}
								],
								"url": {
									"raw": "{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}/participants/{{SIMPAYER_NAME}}/positions",
									"host": [
										"{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}"
									],
									"path": [
										"participants",
										"{{SIMPAYER_NAME}}",
										"positions"
									]
								}
							},
							"response": []
						}
					],
					"description": "Author: Sridevi Miriyala\n\nThese are the requests that only HUB operator can run.",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "e179fe1f-a635-4926-88a5-933de040f420",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "c6fdb1a4-b35d-4a84-bc37-1fa171be2726",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				},
				{
					"name": "SettlementWindows",
					"item": [
						{
							"name": "200 - ValidRequest - closedWindowById",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "c8c0e53b-76f3-4a5f-81fc-4b0a0dff06a2",
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "41e80540-2dc4-487a-9172-e238fd044085",
										"exec": [
											"pm.test(\"Status code is 200\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"//if the settlements tests are not success then these tests may fail",
											"",
											"var jsonData = pm.response.json();",
											"",
											"pm.test(\"Expected Settlement Window Id should be: \"+pm.variables.get(\"closedWindowID\"), function () {",
											"    pm.expect(jsonData.settlementWindowId).to.eql(pm.variables.get(\"closedWindowID\"));",
											"});",
											"",
											"pm.test(\"Expected Settlement State should be SETTLED\", function () {",
											"    pm.expect(jsonData.state).to.eql(\"SETTLED\");",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "FSPIOP-Source",
										"type": "text",
										"value": "{{hub_operator}}"
									}
								],
								"url": {
									"raw": "{{HOST_CENTRAL_SETTLEMENT}}{{BASE_CENTRAL_SETTLEMENT}}/settlementWindows/{{closedWindowID}}",
									"host": [
										"{{HOST_CENTRAL_SETTLEMENT}}{{BASE_CENTRAL_SETTLEMENT}}"
									],
									"path": [
										"settlementWindows",
										"{{closedWindowID}}"
									]
								},
								"description": "Happy path test"
							},
							"response": []
						},
						{
							"name": "200 - Window- state (OPEN)-643a",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "3d710552-79ec-43b2-bdb9-24d48014a327",
										"exec": [
											"pm.test(\"Status code is 200\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"var jsonData = pm.response.json();",
											"for (var i in jsonData){",
											"    pm.test(\"Window State is OPEN\", function () {",
											"        pm.expect(jsonData[i].state).to.eql('OPEN');",
											"    });",
											"}",
											"pm.environment.set(\"openSettlementWindowId\",jsonData[0].settlementWindowId);",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "FSPIOP-Source",
										"value": "{{hub_operator}}",
										"type": "text"
									}
								],
								"url": {
									"raw": "{{HOST_CENTRAL_SETTLEMENT}}{{BASE_CENTRAL_SETTLEMENT}}/settlementWindows?state=OPEN",
									"host": [
										"{{HOST_CENTRAL_SETTLEMENT}}{{BASE_CENTRAL_SETTLEMENT}}"
									],
									"path": [
										"settlementWindows"
									],
									"query": [
										{
											"key": "participantId",
											"value": "",
											"disabled": true
										},
										{
											"key": "state",
											"value": "OPEN",
											"description": "Available values : OPEN, CLOSED, PENDING_SETTLEMENT, SETTLED, NOT_SETTLED"
										},
										{
											"key": "fromDateTime",
											"value": "",
											"disabled": true
										},
										{
											"key": "toDateTime",
											"value": "",
											"disabled": true
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "400 - Bad Request-CloseWindow",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "800af200-184a-4e83-b3af-f51aa5667425",
										"exec": [
											"",
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "c9a8f49e-5419-418a-b871-9bbcb0ebd1f5",
										"exec": [
											"pm.test(\"Status code is 400\", function () {",
											"    pm.response.to.have.status(400);",
											"});",
											"",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "FSPIOP-Source",
										"value": "{{hub_operator}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"state\": \"CLOSE\",\n  \"reason\": \"TESTING\"\n}"
								},
								"url": {
									"raw": "{{HOST_CENTRAL_SETTLEMENT}}{{BASE_CENTRAL_SETTLEMENT}}/settlementWindows/{{openSettlementWindowId}}",
									"host": [
										"{{HOST_CENTRAL_SETTLEMENT}}{{BASE_CENTRAL_SETTLEMENT}}"
									],
									"path": [
										"settlementWindows",
										"{{openSettlementWindowId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "200 - param - state (SETTLED)",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "9a34388f-6764-4269-b03d-65de51f3385f",
										"exec": [
											"pm.test(\"Status code is 200\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"var jsonData = pm.response.json();",
											"for (var i in jsonData){",
											"    pm.test(\"Window State is SETTLED\", function () {",
											"        pm.expect(jsonData[i].state).to.eql('SETTLED');",
											"    });",
											"}",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "FSPIOP-Source",
										"value": "{{hub_operator}}",
										"type": "text"
									}
								],
								"url": {
									"raw": "{{HOST_CENTRAL_SETTLEMENT}}{{BASE_CENTRAL_SETTLEMENT}}/settlementWindows?state=SETTLED",
									"host": [
										"{{HOST_CENTRAL_SETTLEMENT}}{{BASE_CENTRAL_SETTLEMENT}}"
									],
									"path": [
										"settlementWindows"
									],
									"query": [
										{
											"key": "participantId",
											"value": "",
											"disabled": true
										},
										{
											"key": "state",
											"value": "SETTLED",
											"description": "Available values : OPEN, CLOSED, PENDING_SETTLEMENT, SETTLED, NOT_SETTLED"
										},
										{
											"key": "fromDateTime",
											"value": "",
											"disabled": true
										},
										{
											"key": "toDateTime",
											"value": "",
											"disabled": true
										}
									]
								}
							},
							"response": []
						}
					],
					"description": "Author: Sridevi Miriyala",
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "bug_fixes",
			"item": [
				{
					"name": "Tests for Bugfix #998 - Quoting service not using most recent endpoint",
					"item": [
						{
							"name": "Add payeefsp request URL - QUOTES PUT with incorrect endpoint",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "4e294cc1-c46e-4323-bff2-a41a9a46d090",
										"exec": [
											"pm.test(\"Status code is 201\", function () {",
											"    pm.response.to.have.status(201);",
											"});",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"name": "Content-Type",
										"type": "text",
										"value": "application/json"
									},
									{
										"key": "FSPIOP-Source",
										"value": "{{hub_operator}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"type\": \"FSPIOP_CALLBACK_URL_QUOTES\",\n  \"value\": \"{{SIMPAYEE_CALLBACK_URL}}/incorrectpayeefsp\"\n}"
								},
								"url": {
									"raw": "{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}/participants/{{SIMPAYEE_NAME}}/endpoints",
									"host": [
										"{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}"
									],
									"path": [
										"participants",
										"{{SIMPAYEE_NAME}}",
										"endpoints"
									]
								}
							},
							"response": []
						},
						{
							"name": "Send Quote_SEND should not get callback",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "2d3d4103-ffb0-4ac6-9781-03aef42a9a76",
										"exec": [
											"var navigator = {}; ",
											"var window = {}; ",
											"eval(pm.environment.get('jrsassign'));",
											"",
											"var uuid = require('uuid');",
											"var generatedUUID = uuid.v4();",
											"pm.environment.set('quoteId', generatedUUID);",
											"generatedUUID = uuid.v4();",
											"pm.environment.set('transactionId', generatedUUID);",
											"",
											"pm.variables.set('quoteDate', (new Date()).toUTCString());",
											"",
											"var oHeader = {alg: \"RS256\", \"FSPIOP-Source\": pm.environment.get('SIMPAYER_NAME'),\"FSPIOP-Destination\":pm.environment.get('SIMPAYEE_NAME'), \"FSPIOP-URI\":\"/quotes\", \"FSPIOP-HTTP-Method\":\"POST\", \"Date\":pm.variables.get('quoteDate')};",
											"var sHeader = JSON.stringify(oHeader);",
											"console.log(`sHeader: ${sHeader}`)",
											"",
											"var objPayload = {",
											"  \"quoteId\": pm.environment.get('quoteId'),",
											"  \"transactionId\": pm.environment.get('transactionId'),",
											"  \"payer\": {",
											"    \"partyIdInfo\": {",
											"      \"partyIdType\": \"MSISDN\",",
											"      \"partyIdentifier\": pm.environment.get('SIMPAYER_MSISDN'),",
											"      \"fspId\": \"payerfsp\"",
											"    },",
											"    \"personalInfo\": {",
											"      \"complexName\": {",
											"        \"firstName\": \"Mats\",",
											"        \"lastName\": \"Hagman\"",
											"      },",
											"      \"dateOfBirth\": \"1983-10-25\"",
											"    }",
											"  },",
											"  \"payee\": {",
											"    \"partyIdInfo\": {",
											"      \"partyIdType\": \"MSISDN\",",
											"      \"partyIdentifier\": pm.environment.get('SIMPAYEE_MSISDN'),",
											"      \"fspId\": pm.environment.get('SIMPAYEE_NAME')",
											"    }",
											"  },",
											"  \"amountType\": \"RECEIVE\",",
											"  \"amount\": {",
											"    \"amount\": \"60\",",
											"    \"currency\": pm.environment.get('SIMPAYEE_CURRENCY')",
											"  },",
											"  \"transactionType\": {",
											"    \"scenario\": \"TRANSFER\",",
											"    \"initiator\": \"PAYER\",",
											"    \"initiatorType\": \"CONSUMER\"",
											"  },",
											"  \"note\": \"hej\"",
											"}",
											"",
											"var sPayload = JSON.stringify(objPayload)",
											"console.log(`sPayload: ${sPayload}`)",
											"pm.variables.set(\"quoteRequest\", sPayload);",
											"var token = KJUR.jws.JWS.sign(\"RS256\", sHeader, sPayload, pm.environment.get('SIMPAYER_JWS_KEY'));",
											"console.log(`token: ${token}`)",
											"",
											"// var encodedHeaders = btoa(sHeader)",
											"",
											"// var ofspiopSignature = {signature: vSignature, protectedHeader: encodedHeaders}",
											"// var token = JSON.stringify(ofspiopSignature)",
											"",
											"const [ protectedHeaderBase64, , signature ] = token.split('.');",
											"",
											"const signatureObject = {",
											"    signature: signature.replace('\"', ''),",
											"    protectedHeader: protectedHeaderBase64.replace('\"', '')",
											"};",
											"",
											"console.log(JSON.stringify(signatureObject))",
											"",
											"pm.variables.set('fspiopSignature',JSON.stringify(signatureObject))",
											"",
											"",
											"",
											"",
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "48a80c1f-bec9-4adb-b91e-bea49bce677b",
										"exec": [
											"pm.test(\"Status code is 202\", function () {",
											"    pm.response.to.have.status(202);",
											"});",
											"",
											"",
											"//Check Data on payee side - payeefsp should not receive any data as we added the incorrectpayeefsp as endpoint in the previous step",
											"setTimeout(function () {",
											"  pm.sendRequest(pm.environment.get(\"SIMPAYEE_SDK_TESTAPI_URL\")+\"/requests/\"+pm.variables.get(\"quoteId\"), function (err, response) {",
											"      if(response.responseSize !== 0) {",
											"          ",
											"            pm.test(\"Test Failed\", function () {",
											"                throw new Error('Recieved request at payeefsp, so failed');",
											"            });",
											"          ",
											"      } else {",
											"          pm.test(\"Test Passed - Because didn't get request at payeefsp request URL\", function () {",
											"            //Do nothing",
											"           });",
											"",
											"      }",
											"       ",
											"   });",
											"}, pm.environment.get(\"SET_TIMEOUT_QUOTES\"))",
											"",
											"",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{SIMPAYER_BEARER_TOKEN}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Accept",
										"value": "application/vnd.interoperability.quotes+json;version=1.0"
									},
									{
										"key": "Content-Type",
										"value": "application/vnd.interoperability.quotes+json;version=1.0"
									},
									{
										"key": "Date",
										"value": "{{quoteDate}}"
									},
									{
										"key": "FSPIOP-Source",
										"value": "{{SIMPAYER_NAME}}"
									},
									{
										"key": "FSPIOP-Destination",
										"value": "{{SIMPAYEE_NAME}}"
									},
									{
										"key": "FSPIOP-Signature",
										"value": "{{fspiopSignature}}",
										"type": "text"
									},
									{
										"key": "FSPIOP-HTTP-Method",
										"value": "POST",
										"type": "text"
									},
									{
										"key": "FSPIOP-URI",
										"value": "/quotes",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{{quoteRequest}}"
								},
								"url": {
									"raw": "{{HOST_QUOTING_SERVICE}}/quotes",
									"host": [
										"{{HOST_QUOTING_SERVICE}}"
									],
									"path": [
										"quotes"
									]
								}
							},
							"response": []
						},
						{
							"name": "Add payeefsp request URL - QUOTES PUT with correct endpoint",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "766b1b03-a575-436c-a8a4-031117d230c5",
										"exec": [
											"pm.test(\"Status code is 201\", function () {",
											"    pm.response.to.have.status(201);",
											"});",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"name": "Content-Type",
										"type": "text",
										"value": "application/json"
									},
									{
										"key": "FSPIOP-Source",
										"value": "{{hub_operator}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"type\": \"FSPIOP_CALLBACK_URL_QUOTES\",\n  \"value\": \"{{SIMPAYEE_CALLBACK_URL}}\"\n}"
								},
								"url": {
									"raw": "{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}/participants/{{SIMPAYEE_NAME}}/endpoints",
									"host": [
										"{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}"
									],
									"path": [
										"participants",
										"{{SIMPAYEE_NAME}}",
										"endpoints"
									]
								}
							},
							"response": []
						},
						{
							"name": "Send Quote_SEND should get callback",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "240c5aed-e036-435d-a5f5-f062927fcfeb",
										"exec": [
											"var navigator = {}; ",
											"var window = {}; ",
											"eval(pm.environment.get('jrsassign'));",
											"",
											"var uuid = require('uuid');",
											"var generatedUUID = uuid.v4();",
											"pm.environment.set('quoteId', generatedUUID);",
											"generatedUUID = uuid.v4();",
											"pm.environment.set('transactionId', generatedUUID);",
											"",
											"pm.variables.set('quoteDate', (new Date()).toUTCString());",
											"",
											"var oHeader = {alg: \"RS256\", \"FSPIOP-Source\": pm.environment.get('SIMPAYER_NAME'),\"FSPIOP-Destination\":pm.environment.get('SIMPAYEE_NAME'), \"FSPIOP-URI\":\"/quotes\", \"FSPIOP-HTTP-Method\":\"POST\", \"Date\":pm.variables.get('quoteDate')};",
											"var sHeader = JSON.stringify(oHeader);",
											"console.log(`sHeader: ${sHeader}`)",
											"",
											"var objPayload = {",
											"  \"quoteId\": pm.environment.get('quoteId'),",
											"  \"transactionId\": pm.environment.get('transactionId'),",
											"  \"payer\": {",
											"    \"partyIdInfo\": {",
											"      \"partyIdType\": \"MSISDN\",",
											"      \"partyIdentifier\": pm.environment.get('SIMPAYER_MSISDN'),",
											"      \"fspId\": \"payerfsp\"",
											"    },",
											"    \"personalInfo\": {",
											"      \"complexName\": {",
											"        \"firstName\": \"Mats\",",
											"        \"lastName\": \"Hagman\"",
											"      },",
											"      \"dateOfBirth\": \"1983-10-25\"",
											"    }",
											"  },",
											"  \"payee\": {",
											"    \"partyIdInfo\": {",
											"      \"partyIdType\": \"MSISDN\",",
											"      \"partyIdentifier\": pm.environment.get('SIMPAYEE_MSISDN'),",
											"      \"fspId\": pm.environment.get('SIMPAYEE_NAME')",
											"    }",
											"  },",
											"  \"amountType\": \"RECEIVE\",",
											"  \"amount\": {",
											"    \"amount\": \"60\",",
											"    \"currency\": pm.environment.get('SIMPAYEE_CURRENCY')",
											"  },",
											"  \"transactionType\": {",
											"    \"scenario\": \"TRANSFER\",",
											"    \"initiator\": \"PAYER\",",
											"    \"initiatorType\": \"CONSUMER\"",
											"  },",
											"  \"note\": \"hej\"",
											"}",
											"",
											"var sPayload = JSON.stringify(objPayload)",
											"console.log(`sPayload: ${sPayload}`)",
											"pm.variables.set(\"quoteRequest\", sPayload);",
											"var token = KJUR.jws.JWS.sign(\"RS256\", sHeader, sPayload, pm.environment.get('SIMPAYER_JWS_KEY'));",
											"console.log(`token: ${token}`)",
											"",
											"// var encodedHeaders = btoa(sHeader)",
											"",
											"// var ofspiopSignature = {signature: vSignature, protectedHeader: encodedHeaders}",
											"// var token = JSON.stringify(ofspiopSignature)",
											"",
											"const [ protectedHeaderBase64, , signature ] = token.split('.');",
											"",
											"const signatureObject = {",
											"    signature: signature.replace('\"', ''),",
											"    protectedHeader: protectedHeaderBase64.replace('\"', '')",
											"};",
											"",
											"console.log(JSON.stringify(signatureObject))",
											"",
											"pm.variables.set('fspiopSignature',JSON.stringify(signatureObject))",
											"",
											"",
											"",
											"",
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "a26597b1-27f7-42b7-9c4f-ef0fcdff20ff",
										"exec": [
											"pm.test(\"Status code is 202\", function () {",
											"    pm.response.to.have.status(202);",
											"});",
											"",
											"//Check Data on payee side - payeefsp should get request now as we updated the correct endpoint in the previous step",
											"setTimeout(function () {",
											"  pm.sendRequest(pm.environment.get(\"SIMPAYEE_SDK_TESTAPI_URL\")+\"/requests/\"+pm.variables.get(\"quoteId\"), function (err, response) {",
											"      if(response.responseSize !== 0) {",
											"            pm.test(\"Test Passed, request received at payeefsp\", function () {",
											"            //Do Nothing",
											"           });",
											"          ",
											"      } else {",
											"            pm.test(\"Test Failed\", function () {",
											"                throw new Error('Did not get response, so failed');",
											"            });",
											"      }",
											"       ",
											"   });",
											"}, pm.environment.get(\"SET_TIMEOUT_QUOTES\"))",
											"",
											"",
											"",
											"",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{SIMPAYER_BEARER_TOKEN}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Accept",
										"value": "application/vnd.interoperability.quotes+json;version=1.0"
									},
									{
										"key": "Content-Type",
										"value": "application/vnd.interoperability.quotes+json;version=1.0"
									},
									{
										"key": "Date",
										"value": "{{quoteDate}}"
									},
									{
										"key": "FSPIOP-Source",
										"value": "{{SIMPAYER_NAME}}"
									},
									{
										"key": "FSPIOP-Destination",
										"value": "{{SIMPAYEE_NAME}}"
									},
									{
										"key": "FSPIOP-Signature",
										"value": "{{fspiopSignature}}",
										"type": "text"
									},
									{
										"key": "FSPIOP-HTTP-Method",
										"value": "POST",
										"type": "text"
									},
									{
										"key": "FSPIOP-URI",
										"value": "/quotes",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{{quoteRequest}}"
								},
								"url": {
									"raw": "{{HOST_QUOTING_SERVICE}}/quotes",
									"host": [
										"{{HOST_QUOTING_SERVICE}}"
									],
									"path": [
										"quotes"
									]
								}
							},
							"response": []
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				},
				{
					"name": "Tests for Bugfix #1009 - ML Adapter and ALS service health should include broker status Copy",
					"item": [
						{
							"name": "Get health status of ML Adapter",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "f0419021-5664-4b91-add8-28c96ffab2ed",
										"exec": [
											"pm.test(\"Status code is 200\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"//Checking data",
											"var jsonData = pm.response.json();",
											"pm.test(\"ML Adaptor - Expected Status is OK\", function () {",
											"   pm.expect(jsonData.status).to.eql(\"OK\");",
											"",
											"    pm.test(\"ML Adaptor - Expected body to have services array\", function () {",
											"       pm.expect(jsonData.services).to.be.an('array');",
											"       ",
											"        pm.test(\"ML Adaptor - Expected services to have broker and status is OK\", function () {",
											"            const brokerOk = jsonData.services.find(item => {",
											"               return item.name=='broker' && item.status=='OK'; ",
											"            });",
											"            pm.expect(brokerOk).to.be.an('object');",
											"   ",
											"        });",
											"    });",
											"    ",
											"",
											"});",
											"",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "FSPIOP-Source",
										"value": "{{hub_operator}}",
										"type": "text"
									}
								],
								"url": {
									"raw": "{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}/health",
									"host": [
										"{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}"
									],
									"path": [
										"health"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get health status of ALS",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "cc2e58c7-9de6-4fd0-9b8f-7a818ae75182",
										"exec": [
											"pm.test(\"Status code is 200\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"//Checking data",
											"var jsonData = pm.response.json();",
											"pm.test(\"ALS - Expected Status is OK\", function () {",
											"   pm.expect(jsonData.status).to.eql(\"OK\");",
											"",
											"    pm.test(\"ALS - Expected body to have services array\", function () {",
											"       pm.expect(jsonData.services).to.be.an('array');",
											"       ",
											"        pm.test(\"ALS - Expected services to have datastore and status is OK\", function () {",
											"            const brokerOk = jsonData.services.find(item => {",
											"               return item.name=='datastore' && item.status=='OK'; ",
											"            });",
											"            pm.expect(brokerOk).to.be.an('object');",
											"   ",
											"        });",
											"    });",
											"    ",
											"",
											"});",
											"",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "FSPIOP-Source",
										"value": "{{hub_operator}}",
										"type": "text"
									}
								],
								"url": {
									"raw": "{{HOST_ACCOUNT_LOOKUP_SERVICE}}/health",
									"host": [
										"{{HOST_ACCOUNT_LOOKUP_SERVICE}}"
									],
									"path": [
										"health"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get health status of Central Ledger",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "97b59fed-34dc-4724-8d03-02a63a0e698a",
										"exec": [
											"pm.test(\"Status code is 200\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"//Checking data",
											"var jsonData = pm.response.json();",
											"pm.test(\"Expected Status is OK\", function () {",
											"   pm.expect(jsonData.status).to.eql(\"OK\");",
											"",
											"    pm.test(\"Central Ledger - Expected body to have services array\", function () {",
											"       pm.expect(jsonData.services).to.be.an('array');",
											"       ",
											"        pm.test(\"Central Ledger - Expected services to have datastore and status is OK\", function () {",
											"            const brokerOk = jsonData.services.find(item => {",
											"               return item.name=='datastore' && item.status=='OK'; ",
											"            });",
											"            pm.expect(brokerOk).to.be.an('object');",
											"   ",
											"        });",
											"        pm.test(\"Central Ledger - Expected services to have broker and status is OK\", function () {",
											"            const brokerOk = jsonData.services.find(item => {",
											"               return item.name=='broker' && item.status=='OK'; ",
											"            });",
											"            pm.expect(brokerOk).to.be.an('object');",
											"   ",
											"        });        ",
											"    });",
											"    ",
											"",
											"});",
											"",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "FSPIOP-Source",
										"type": "text",
										"value": "{{hub_operator}}"
									}
								],
								"url": {
									"raw": "{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}/health",
									"host": [
										"{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}"
									],
									"path": [
										"health"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get health status of Central Settlement",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "48374d84-742d-4873-9a05-7067f62c45b6",
										"exec": [
											"pm.test(\"Status code is 200\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"//Checking data",
											"var jsonData = pm.response.json();",
											"pm.test(\"Central Settlement - Expected Status is OK\", function () {",
											"   pm.expect(jsonData.status).to.eql(\"OK\");",
											"",
											"    pm.test(\"Central Settlement - Expected body to have services array\", function () {",
											"       pm.expect(jsonData.services).to.be.an('array');",
											"       ",
											"        pm.test(\"Central Settlement - Expected services to have datastore and status is OK\", function () {",
											"            const brokerOk = jsonData.services.find(item => {",
											"               return item.name=='datastore' && item.status=='OK'; ",
											"            });",
											"            pm.expect(brokerOk).to.be.an('object');",
											"   ",
											"        });",
											"    });",
											"    ",
											"",
											"});",
											"",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "FSPIOP-Source",
										"type": "text",
										"value": "{{hub_operator}}"
									}
								],
								"url": {
									"raw": "{{HOST_CENTRAL_SETTLEMENT}}{{BASE_CENTRAL_SETTLEMENT}}/health",
									"host": [
										"{{HOST_CENTRAL_SETTLEMENT}}{{BASE_CENTRAL_SETTLEMENT}}"
									],
									"path": [
										"health"
									]
								}
							},
							"response": []
						}
					],
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "125f7ac1-5656-4870-a370-c6320c5420cf",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "86860910-ffbd-4455-bdca-5977e92ce1c2",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				},
				{
					"name": "Tests for Bugfix #981 - Fix 500 http code instead of 400",
					"item": [
						{
							"name": "Add Participant - Duplicate account",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "e2803d53-38ea-4bcf-8333-01003194645c",
										"exec": [
											"const jsonData = pm.response.json();",
											"",
											"pm.test(\"Status code is 400\", function () {",
											"    pm.response.to.have.status(400);",
											"});",
											"",
											"pm.test(\"Check Generic client error for duplicate currency\", function () {",
											"    pm.expect(jsonData.errorInformation.errorDescription).to.include('Generic client error');",
											"});",
											"",
											"pm.test(\"Check Error code 3000\", function () {",
											"    pm.expect(jsonData.errorInformation.errorCode).to.eql('3000');",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"name\": \"{{SIMPAYER_NAME}}\",\n  \"currency\": \"{{SIMPAYER_CURRENCY}}\"\n}"
								},
								"url": {
									"raw": "{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}/participants",
									"host": [
										"{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}"
									],
									"path": [
										"participants"
									]
								}
							},
							"response": []
						},
						{
							"name": "Add non existing Participant",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "811b1482-9b40-4a10-8e7d-be9319d3858c",
										"exec": [
											"const jsonData = pm.response.json();",
											"",
											"pm.test(\"Status code is 400\", function () {",
											"    pm.response.to.have.status(400);",
											"});",
											"",
											"pm.test(\"Check Generic ID not found - non existing participant\", function () {",
											"    pm.expect(jsonData.errorInformation.errorDescription).to.include('Generic ID not found');",
											"});",
											"",
											"pm.test(\"Check Error code 3200\", function () {",
											"    pm.expect(jsonData.errorInformation.errorCode).to.eql('3200');",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "FSPIOP-Source",
										"value": "{{hub_operator}}",
										"type": "text"
									}
								],
								"url": {
									"raw": "{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}/participants/xyz",
									"host": [
										"{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}"
									],
									"path": [
										"participants",
										"xyz"
									]
								}
							},
							"response": [
								{
									"name": "Get Participant",
									"originalRequest": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "http://{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}/participants/{{participant}}",
											"protocol": "http",
											"host": [
												"{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}"
											],
											"path": [
												"participants",
												"{{participant}}"
											]
										}
									},
									"status": "OK",
									"code": 200,
									"_postman_previewlanguage": "json",
									"header": [
										{
											"key": "Connection",
											"value": "keep-alive",
											"name": "Connection",
											"description": "Options that are desired for the connection"
										},
										{
											"key": "Content-Length",
											"value": "251",
											"name": "Content-Length",
											"description": "The length of the response body in octets (8-bit bytes)"
										},
										{
											"key": "Content-Type",
											"value": "application/json; charset=utf-8",
											"name": "Content-Type",
											"description": "The mime type of this content"
										},
										{
											"key": "Date",
											"value": "Wed, 22 Aug 2018 15:25:18 GMT",
											"name": "Date",
											"description": "The date and time that the message was sent"
										},
										{
											"key": "Server",
											"value": "nginx/1.13.8",
											"name": "Server",
											"description": "A name for the server"
										},
										{
											"key": "accept-ranges",
											"value": "bytes",
											"name": "accept-ranges",
											"description": "Content-Types that are acceptable"
										},
										{
											"key": "cache-control",
											"value": "no-cache",
											"name": "cache-control",
											"description": "Tells all caching mechanisms from server to client whether they may cache this object. It is measured in seconds"
										}
									],
									"cookie": [],
									"body": "{\"name\":\"testfsp\",\"id\":\"test-central-ledger.mojaloop.test/participants/testfsp\",\"created\":\"2018-08-22T08:16:50.000Z\",\"isActive\":1,\"links\":{\"self\":\"test-central-ledger.mojaloop.test/participants/testfsp\"},\"currencies\":[{\"currency\":\"USD\",\"isActive\":1}]}"
								}
							]
						},
						{
							"name": "Add Participant - Invalid Currency",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "08c289e7-7893-485b-9fbe-c1a41da7d36b",
										"exec": [
											"const jsonData = pm.response.json();",
											"",
											"pm.test(\"Status code is 400\", function () {",
											"    pm.response.to.have.status(400);",
											"});",
											"",
											"pm.test(\"Check Malformed syntax - malformed currency\", function () {",
											"    pm.expect(jsonData.errorInformation.errorDescription).to.include('Malformed syntax');",
											"});",
											"",
											"pm.test(\"Check Error code 3101\", function () {",
											"    pm.expect(jsonData.errorInformation.errorCode).to.eql('3101');",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "FSPIOP-Source",
										"value": "{{hub_operator}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"name\": \"payer10\",\n  \"currency\": \"A#\"\n}"
								},
								"url": {
									"raw": "{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}/participants",
									"host": [
										"{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}"
									],
									"path": [
										"participants"
									]
								}
							},
							"response": []
						}
					],
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "61ce1607-0b54-4a12-a0ad-de29c66a05de",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "0c502d1e-0e91-4956-8159-bb612286a695",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				},
				{
					"name": "Tests for Bugfix #1331 - 405 status code - unsupported method",
					"item": [
						{
							"name": "Post Party Receiver - Unsupported Method",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "cfdd3215-520c-465e-978d-fa1d6be78c7f",
										"exec": [
											"if (pm.environment.get('WS02_OAUTH_ENABLED') === 'true') {",
											"    pm.test(\"Status code is 404\", function () {",
											"        pm.response.to.have.status(404);",
											"    });",
											"} else {",
											"    const jsonData = pm.response.json();",
											"",
											"    pm.test(\"Status code is 405\", function () {",
											"        pm.response.to.have.status(405);",
											"    });",
											"",
											"    pm.test(\"Check Method Not Allowed\", function () {",
											"        pm.expect(jsonData.errorInformation.errorDescription).to.include('Method Not Allowed');",
											"    });",
											"",
											"    pm.test(\"Check Error code 3000\", function () {",
											"        pm.expect(jsonData.errorInformation.errorCode).to.eql('3000');",
											"    });",
											"}"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "a7720e99-623e-46b6-b979-e5cf51f0f377",
										"exec": [
											"pm.variables.set('expectedFullName', 'Siabelo Maroka');",
											"pm.variables.set('expectedFirstName', 'Siabelo');",
											"pm.variables.set('expectedLastName', 'Maroka');",
											"pm.variables.set('expectedDOB', '1973-03-03');",
											"",
											"",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{SIMPAYER_BEARER_TOKEN}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Accept",
										"type": "text",
										"value": "application/vnd.interoperability.parties+json;version=1.0"
									},
									{
										"key": "Content-Type",
										"type": "text",
										"value": "application/vnd.interoperability.parties+json;version=1.0"
									},
									{
										"key": "FSPIOP-Source",
										"type": "text",
										"value": "{{SIMPAYER_NAME}}"
									},
									{
										"key": "Date",
										"type": "text",
										"value": "{{dateHeader}}"
									}
								],
								"url": {
									"raw": "{{HOST_ACCOUNT_LOOKUP_SERVICE}}/parties/MSISDN/{{SIMPAYER_MSISDN}}",
									"host": [
										"{{HOST_ACCOUNT_LOOKUP_SERVICE}}"
									],
									"path": [
										"parties",
										"MSISDN",
										"{{SIMPAYER_MSISDN}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Delete Quote - Unsupported Method",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "8bc38228-7a38-40de-924d-82e755e54037",
										"exec": [
											"var navigator = {}; ",
											"var window = {}; ",
											"eval(pm.environment.get('jrsassign'));",
											"",
											"var uuid = require('uuid');",
											"var generatedUUID = uuid.v4();",
											"pm.environment.set('quoteId', generatedUUID);",
											"generatedUUID = uuid.v4();",
											"pm.environment.set('transactionId', generatedUUID);",
											"",
											"pm.variables.set('quoteDate', (new Date()).toUTCString());",
											"",
											"var oHeader = {alg: \"RS256\", \"FSPIOP-Source\": pm.environment.get('SIMPAYER_NAME'),\"FSPIOP-Destination\":pm.environment.get('SIMPAYEE_NAME'), \"FSPIOP-URI\":\"/quotes\", \"FSPIOP-HTTP-Method\":\"POST\", \"Date\":pm.variables.get('quoteDate')};",
											"var sHeader = JSON.stringify(oHeader);",
											"console.log(`sHeader: ${sHeader}`)",
											"",
											"var objPayload = {",
											"  \"quoteId\": pm.environment.get('quoteId'),",
											"  \"transactionId\": pm.environment.get('transactionId'),",
											"  \"payer\": {",
											"    \"partyIdInfo\": {",
											"      \"partyIdType\": \"MSISDN\",",
											"      \"partyIdentifier\": pm.environment.get('SIMPAYER_MSISDN'),",
											"      \"fspId\": \"payerfsp\"",
											"    },",
											"    \"personalInfo\": {",
											"      \"complexName\": {",
											"        \"firstName\": \"Mats\",",
											"        \"lastName\": \"Hagman\"",
											"      },",
											"      \"dateOfBirth\": \"1983-10-25\"",
											"    }",
											"  },",
											"  \"payee\": {",
											"    \"partyIdInfo\": {",
											"      \"partyIdType\": \"MSISDN\",",
											"      \"partyIdentifier\": pm.environment.get('SIMPAYEE_MSISDN'),",
											"      \"fspId\": pm.environment.get('SIMPAYEE_NAME')",
											"    }",
											"  },",
											"  \"amountType\": \"RECEIVE\",",
											"  \"amount\": {",
											"    \"amount\": \"60\",",
											"    \"currency\": pm.environment.get('SIMPAYEE_CURRENCY')",
											"  },",
											"  \"transactionType\": {",
											"    \"scenario\": \"TRANSFER\",",
											"    \"initiator\": \"PAYER\",",
											"    \"initiatorType\": \"CONSUMER\"",
											"  },",
											"  \"note\": \"hej\"",
											"}",
											"",
											"var sPayload = JSON.stringify(objPayload)",
											"console.log(`sPayload: ${sPayload}`)",
											"pm.variables.set(\"quoteRequest\", sPayload);",
											"var token = KJUR.jws.JWS.sign(\"RS256\", sHeader, sPayload, pm.environment.get('SIMPAYER_JWS_KEY'));",
											"console.log(`token: ${token}`)",
											"",
											"// var encodedHeaders = btoa(sHeader)",
											"",
											"// var ofspiopSignature = {signature: vSignature, protectedHeader: encodedHeaders}",
											"// var token = JSON.stringify(ofspiopSignature)",
											"",
											"const [ protectedHeaderBase64, , signature ] = token.split('.');",
											"",
											"const signatureObject = {",
											"    signature: signature.replace('\"', ''),",
											"    protectedHeader: protectedHeaderBase64.replace('\"', '')",
											"};",
											"",
											"console.log(JSON.stringify(signatureObject))",
											"",
											"pm.variables.set('fspiopSignature',JSON.stringify(signatureObject))",
											"",
											"",
											"",
											"",
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "88c46d7f-defc-434f-bf2d-e4f45fcb4231",
										"exec": [
											"if (pm.environment.get('WS02_OAUTH_ENABLED') === 'true') {",
											"    pm.test(\"Status code is 404\", function () {",
											"        pm.response.to.have.status(404);",
											"    });",
											"} else {",
											"    const jsonData = pm.response.json();",
											"",
											"    pm.test(\"Status code is 405\", function () {",
											"        pm.response.to.have.status(405);",
											"    });",
											"",
											"    pm.test(\"Check Delete Quotes - 'Method Not Allowed' \", function () {",
											"        pm.expect(jsonData.errorInformation.errorDescription).to.include('Method Not Allowed');",
											"    });",
											"",
											"    pm.test(\"Check Error code 3000\", function () {",
											"        pm.expect(jsonData.errorInformation.errorCode).to.eql('3000');",
											"    });",
											"}",
											"",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{SIMPAYER_BEARER_TOKEN}}",
											"type": "string"
										}
									]
								},
								"method": "DELETE",
								"header": [
									{
										"key": "Accept",
										"value": "application/vnd.interoperability.quotes+json;version=1.0"
									},
									{
										"key": "Content-Type",
										"value": "application/vnd.interoperability.quotes+json;version=1.0"
									},
									{
										"key": "Date",
										"value": "{{quoteDate}}"
									},
									{
										"key": "FSPIOP-Source",
										"value": "{{SIMPAYER_NAME}}"
									},
									{
										"key": "FSPIOP-Destination",
										"value": "{{SIMPAYEE_NAME}}"
									},
									{
										"key": "FSPIOP-Signature",
										"type": "text",
										"value": "{{fspiopSignature}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{{quoteRequest}}"
								},
								"url": {
									"raw": "{{HOST_QUOTING_SERVICE}}/quotes",
									"host": [
										"{{HOST_QUOTING_SERVICE}}"
									],
									"path": [
										"quotes"
									]
								}
							},
							"response": []
						},
						{
							"name": "Delete Transfer - Unsupported method",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "a5edcc34-c3ed-414f-8341-256529b5a10b",
										"exec": [
											"if (pm.environment.get('WS02_OAUTH_ENABLED') === 'true') {",
											"    pm.test(\"Status code is 404\", function () {",
											"        pm.response.to.have.status(404);",
											"    });",
											"} else {",
											"    const jsonData = pm.response.json();",
											"",
											"    pm.test(\"Status code is 405\", function () {",
											"        pm.response.to.have.status(405);",
											"    });",
											"",
											"    pm.test(\"Check Method Not Allowed\", function () {",
											"        pm.expect(jsonData.errorInformation.errorDescription).to.include('Method Not Allowed');",
											"    });",
											"",
											"    pm.test(\"Check Error code 3000\", function () {",
											"        pm.expect(jsonData.errorInformation.errorCode).to.eql('3000');",
											"    });",
											"}",
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "41925428-5e17-49f2-914f-a866548ec8fe",
										"exec": [
											"var navigator = {}; //fake a navigator object for the lib",
											"var window = {}; //fake a window object for the lib",
											"eval(pm.environment.get('jrsassign'));",
											"",
											"var uuid = require('uuid');",
											"var generatedUUID = uuid.v4();",
											"pm.environment.set('transfer_ID', pm.environment.get('transactionId'));",
											"",
											"",
											"pm.variables.set('transferDate', (new Date()).toUTCString());",
											"",
											"pm.environment.set(\"transferExpiration\",new Date(new Date().getTime() + 60000))",
											"",
											"var oHeader = {alg: \"RS256\", \"FSPIOP-Source\": pm.environment.get('SIMPAYER_NAME'),\"FSPIOP-Destination\": pm.environment.get('SIMPAYEE_NAME'), \"FSPIOP-URI\":\"/transfers\", \"FSPIOP-HTTP-Method\":\"POST\", \"Date\":pm.variables.get('transferDate')};",
											"var sHeader = JSON.stringify(oHeader);",
											"console.log(`sHeader: ${sHeader}`)",
											"",
											"var objPayload = {",
											"  \"transferId\": pm.environment.get('transfer_ID'),",
											"  \"payerFsp\": pm.environment.get('SIMPAYER_NAME'),",
											"  \"payeeFsp\": pm.environment.get('SIMPAYEE_NAME'),",
											"  \"amount\": {",
											"    \"amount\": \"10\",",
											"    \"currency\": pm.environment.get('SIMPAYER_CURRENCY')",
											"  },",
											"  \"expiration\": pm.environment.get('transferExpiration'),",
											"  \"ilpPacket\": pm.environment.get('ilpPacket'),",
											"  \"condition\": pm.environment.get('condition')",
											"}",
											"var sPayload = JSON.stringify(objPayload)",
											"console.log(`sPayload: ${sPayload}`)",
											"pm.variables.set(\"transferRequest\", sPayload);",
											"var token = KJUR.jws.JWS.sign(\"RS256\", sHeader, sPayload, pm.environment.get('SIMPAYER_JWS_KEY'));",
											"//console.log(`token: ${token}`)",
											"",
											"// var encodedHeaders = btoa(sHeader)",
											"",
											"// var ofspiopSignature = {signature: vSignature, protectedHeader: encodedHeaders}",
											"// var token = JSON.stringify(ofspiopSignature)",
											"",
											"const [ protectedHeaderBase64, , signature ] = token.split('.');",
											"",
											"const signatureObject = {",
											"    signature: signature.replace('\"', ''),",
											"    protectedHeader: protectedHeaderBase64.replace('\"', '')",
											"};",
											"",
											"console.log(JSON.stringify(signatureObject))",
											"",
											"pm.variables.set('fspiopSignature',JSON.stringify(signatureObject))"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{SIMPAYER_BEARER_TOKEN}}",
											"type": "string"
										}
									]
								},
								"method": "DELETE",
								"header": [
									{
										"key": "Accept",
										"value": "application/vnd.interoperability.transfers+json;version=1.0"
									},
									{
										"key": "Content-Type",
										"value": "application/vnd.interoperability.transfers+json;version=1.0"
									},
									{
										"key": "Date",
										"value": "{{transferDate}}"
									},
									{
										"key": "FSPIOP-Source",
										"value": "{{SIMPAYER_NAME}}"
									},
									{
										"key": "FSPIOP-Destination",
										"value": "{{SIMPAYEE_NAME}}"
									},
									{
										"key": "FSPIOP-Signature",
										"type": "text",
										"value": "{{fspiopSignature}}"
									},
									{
										"key": "FSPIOP-URI",
										"type": "text",
										"value": "/transfers"
									},
									{
										"key": "FSPIOP-HTTP-Method",
										"type": "text",
										"value": "POST"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{{transferRequest}}"
								},
								"url": {
									"raw": "{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}/transfers",
									"host": [
										"{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}"
									],
									"path": [
										"transfers"
									]
								}
							},
							"response": []
						}
					],
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "5477a49e-fb1c-4920-9084-a1e326d27be9",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "9a57071e-4922-4fdb-ab33-033e4b3e2b40",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				},
				{
					"name": "Test for Bugfix #1378 - extension list missing",
					"item": [
						{
							"name": "Send Quote_SEND  - with wrong content version",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "a997ee7d-c375-4e60-b39b-c9bd5ba51e70",
										"exec": [
											"var navigator = {}; ",
											"var window = {}; ",
											"eval(pm.environment.get('jrsassign'));",
											"",
											"var uuid = require('uuid');",
											"var generatedUUID = uuid.v4();",
											"pm.environment.set('quoteId', generatedUUID);",
											"generatedUUID = uuid.v4();",
											"pm.environment.set('transactionId', generatedUUID);",
											"",
											"pm.variables.set('quoteDate', (new Date()).toUTCString());",
											"",
											"var oHeader = {alg: \"RS256\", \"FSPIOP-Source\": pm.environment.get('SIMPAYER_NAME'),\"FSPIOP-Destination\":pm.environment.get('SIMPAYEE_NAME'), \"FSPIOP-URI\":\"/quotes\", \"FSPIOP-HTTP-Method\":\"POST\", \"Date\":pm.variables.get('quoteDate')};",
											"var sHeader = JSON.stringify(oHeader);",
											"console.log(`sHeader: ${sHeader}`)",
											"",
											"var objPayload = {",
											"  \"quoteId\": pm.environment.get('quoteId'),",
											"  \"transactionId\": pm.environment.get('transactionId'),",
											"  \"payer\": {",
											"    \"partyIdInfo\": {",
											"      \"partyIdType\": \"MSISDN\",",
											"      \"partyIdentifier\": pm.environment.get('SIMPAYER_MSISDN'),",
											"      \"fspId\": pm.environment.get('SIMPAYER_NAME')",
											"    },",
											"    \"personalInfo\": {",
											"      \"complexName\": {",
											"        \"firstName\": \"Mats\",",
											"        \"lastName\": \"Hagman\"",
											"      },",
											"      \"dateOfBirth\": \"1983-10-25\"",
											"    }",
											"  },",
											"  \"payee\": {",
											"    \"partyIdInfo\": {",
											"      \"partyIdType\": \"MSISDN\",",
											"      \"partyIdentifier\": pm.environment.get('SIMPAYEE_MSISDN'),",
											"      \"fspId\": pm.environment.get('SIMPAYEE_NAME')",
											"    }",
											"  },",
											"  \"amountType\": \"SEND\",",
											"  \"amount\": {",
											"    \"amount\": \"10\",",
											"    \"currency\": pm.environment.get('SIMPAYER_CURRENCY')",
											"  },",
											"  \"transactionType\": {",
											"    \"scenario\": \"TRANSFER\",",
											"    \"initiator\": \"PAYER\",",
											"    \"initiatorType\": \"CONSUMER\"",
											"  },",
											"  \"note\": \"hej\"",
											"}",
											"",
											"var sPayload = JSON.stringify(objPayload)",
											"console.log(`sPayload: ${sPayload}`)",
											"pm.variables.set(\"quoteRequest\", sPayload);",
											"var token = KJUR.jws.JWS.sign(\"RS256\", sHeader, sPayload, pm.environment.get('SIMPAYER_JWS_KEY'));",
											"console.log(`token: ${token}`)",
											"",
											"// var encodedHeaders = btoa(sHeader)",
											"",
											"// var ofspiopSignature = {signature: vSignature, protectedHeader: encodedHeaders}",
											"// var token = JSON.stringify(ofspiopSignature)",
											"",
											"const [ protectedHeaderBase64, , signature ] = token.split('.');",
											"",
											"const signatureObject = {",
											"    signature: signature.replace('\"', ''),",
											"    protectedHeader: protectedHeaderBase64.replace('\"', '')",
											"};",
											"",
											"console.log(JSON.stringify(signatureObject))",
											"",
											"pm.variables.set('fspiopSignature',JSON.stringify(signatureObject))",
											"",
											"",
											"",
											"",
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "c4fc73cf-16a4-4e6a-a5f9-4ee5b65333d5",
										"exec": [
											"const jsonData = pm.response.json();",
											"",
											"pm.test(\"Status code is 406\", function () {",
											"    pm.response.to.have.status(406);",
											"});",
											"",
											"pm.test(\"Check Unacceptable version requested\", function () {",
											"    pm.expect(jsonData.errorInformation.errorDescription).to.include('Unacceptable version requested');",
											"});",
											"",
											"pm.test(\"Check Error code 3001\", function () {",
											"    pm.expect(jsonData.errorInformation.errorCode).to.eql('3001');",
											"});",
											"",
											"",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{SIMPAYER_BEARER_TOKEN}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Accept",
										"value": "application/vnd.interoperability.quotes+json;version=1.0"
									},
									{
										"key": "Content-Type",
										"value": "application/vnd.interoperability.quotes+json;version=3.2"
									},
									{
										"key": "Date",
										"value": "{{quoteDate}}"
									},
									{
										"key": "FSPIOP-Source",
										"value": "{{SIMPAYER_NAME}}"
									},
									{
										"key": "FSPIOP-Destination",
										"value": "{{SIMPAYEE_NAME}}"
									},
									{
										"key": "FSPIOP-Signature",
										"type": "text",
										"value": "{{fspiopSignature}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{{quoteRequest}}"
								},
								"url": {
									"raw": "{{HOST_QUOTING_SERVICE}}/quotes",
									"host": [
										"{{HOST_QUOTING_SERVICE}}"
									],
									"path": [
										"quotes"
									]
								}
							},
							"response": []
						},
						{
							"name": "Send Quote_SEND  - with wrong accept header version",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "019a11d8-2ce0-46a9-9a81-8155c93b4a04",
										"exec": [
											"var navigator = {}; ",
											"var window = {}; ",
											"eval(pm.environment.get('jrsassign'));",
											"",
											"var uuid = require('uuid');",
											"var generatedUUID = uuid.v4();",
											"pm.environment.set('quoteId', generatedUUID);",
											"generatedUUID = uuid.v4();",
											"pm.environment.set('transactionId', generatedUUID);",
											"",
											"pm.variables.set('quoteDate', (new Date()).toUTCString());",
											"",
											"var oHeader = {alg: \"RS256\", \"FSPIOP-Source\": pm.environment.get('SIMPAYER_NAME'),\"FSPIOP-Destination\":pm.environment.get('SIMPAYEE_NAME'), \"FSPIOP-URI\":\"/quotes\", \"FSPIOP-HTTP-Method\":\"POST\", \"Date\":pm.variables.get('quoteDate')};",
											"var sHeader = JSON.stringify(oHeader);",
											"console.log(`sHeader: ${sHeader}`)",
											"",
											"var objPayload = {",
											"  \"quoteId\": pm.environment.get('quoteId'),",
											"  \"transactionId\": pm.environment.get('transactionId'),",
											"  \"payer\": {",
											"    \"partyIdInfo\": {",
											"      \"partyIdType\": \"MSISDN\",",
											"      \"partyIdentifier\": pm.environment.get('SIMPAYER_MSISDN'),",
											"      \"fspId\": pm.environment.get('SIMPAYER_NAME')",
											"    },",
											"    \"personalInfo\": {",
											"      \"complexName\": {",
											"        \"firstName\": \"Mats\",",
											"        \"lastName\": \"Hagman\"",
											"      },",
											"      \"dateOfBirth\": \"1983-10-25\"",
											"    }",
											"  },",
											"  \"payee\": {",
											"    \"partyIdInfo\": {",
											"      \"partyIdType\": \"MSISDN\",",
											"      \"partyIdentifier\": pm.environment.get('SIMPAYEE_MSISDN'),",
											"      \"fspId\": pm.environment.get('SIMPAYEE_NAME')",
											"    }",
											"  },",
											"  \"amountType\": \"SEND\",",
											"  \"amount\": {",
											"    \"amount\": \"10\",",
											"    \"currency\": pm.environment.get('SIMPAYER_CURRENCY')",
											"  },",
											"  \"transactionType\": {",
											"    \"scenario\": \"TRANSFER\",",
											"    \"initiator\": \"PAYER\",",
											"    \"initiatorType\": \"CONSUMER\"",
											"  },",
											"  \"note\": \"hej\"",
											"}",
											"",
											"var sPayload = JSON.stringify(objPayload)",
											"console.log(`sPayload: ${sPayload}`)",
											"pm.variables.set(\"quoteRequest\", sPayload);",
											"var token = KJUR.jws.JWS.sign(\"RS256\", sHeader, sPayload, pm.environment.get('SIMPAYER_JWS_KEY'));",
											"console.log(`token: ${token}`)",
											"",
											"// var encodedHeaders = btoa(sHeader)",
											"",
											"// var ofspiopSignature = {signature: vSignature, protectedHeader: encodedHeaders}",
											"// var token = JSON.stringify(ofspiopSignature)",
											"",
											"const [ protectedHeaderBase64, , signature ] = token.split('.');",
											"",
											"const signatureObject = {",
											"    signature: signature.replace('\"', ''),",
											"    protectedHeader: protectedHeaderBase64.replace('\"', '')",
											"};",
											"",
											"console.log(JSON.stringify(signatureObject))",
											"",
											"pm.variables.set('fspiopSignature',JSON.stringify(signatureObject))",
											"",
											"",
											"",
											"",
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "a1b285a7-84d9-429c-acd2-1f9e94f1b89e",
										"exec": [
											"const jsonData = pm.response.json();",
											"",
											"pm.test(\"Status code is 406\", function () {",
											"    pm.response.to.have.status(406);",
											"});",
											"",
											"pm.test(\"Check Unacceptable version requested\", function () {",
											"    pm.expect(jsonData.errorInformation.errorDescription).to.include('Unacceptable version requested');",
											"});",
											"",
											"pm.test(\"Check Error code 3001\", function () {",
											"    pm.expect(jsonData.errorInformation.errorCode).to.eql('3001');",
											"});",
											"",
											"",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{SIMPAYER_BEARER_TOKEN}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Accept",
										"value": "application/vnd.interoperability.quotes+json;version=1.4"
									},
									{
										"key": "Content-Type",
										"value": "application/vnd.interoperability.quotes+json;version=1.0"
									},
									{
										"key": "Date",
										"value": "{{quoteDate}}"
									},
									{
										"key": "FSPIOP-Source",
										"value": "{{SIMPAYER_NAME}}"
									},
									{
										"key": "FSPIOP-Destination",
										"value": "{{SIMPAYEE_NAME}}"
									},
									{
										"key": "FSPIOP-Signature",
										"type": "text",
										"value": "{{fspiopSignature}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{{quoteRequest}}"
								},
								"url": {
									"raw": "{{HOST_QUOTING_SERVICE}}/quotes",
									"host": [
										"{{HOST_QUOTING_SERVICE}}"
									],
									"path": [
										"quotes"
									]
								}
							},
							"response": []
						}
					],
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "7f781c73-8ade-4881-8ae6-38be0f5f9288",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "e23a6eb9-8cb1-4094-8c76-6f1d2c395d69",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				},
				{
					"name": "Test for Bugfix #849 - missing ID for transfers and quotes",
					"item": [
						{
							"name": "Check transfers/ Missing ID #849",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "99e0f07a-cc38-412c-a53f-b331e3dc33b3",
										"exec": [
											"pm.environment.set(\"completedTimestamp\",new Date().toISOString());",
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "1d96c5f0-c797-445d-adec-3ea93a464d25",
										"exec": [
											"if (pm.environment.get('WS02_OAUTH_ENABLED') === 'true') {",
											"    pm.test(\"Status code is 404\", function () {",
											"        pm.response.to.have.status(404);",
											"    });",
											"} else {",
											"    const jsonData = pm.response.json();",
											"",
											"    pm.test(\"Status code is 404\", function () {",
											"        pm.response.to.have.status(404);",
											"    });",
											"",
											"    pm.test(\"Check ID missing\", function () {",
											"        pm.expect(jsonData.errorInformation.errorDescription).to.include('Unknown URI');",
											"    });",
											"",
											"    pm.test(\"Check Error code 3002\", function () {",
											"        pm.expect(jsonData.errorInformation.errorCode).to.eql('3002');",
											"    });",
											"}"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{NORESPONSE_SIMPAYEE_BEARER_TOKEN}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"name": "Content-Type",
										"type": "text",
										"value": "application/vnd.interoperability.transfers+json;version=1.0"
									},
									{
										"key": "Date",
										"type": "text",
										"value": "{{dateHeader}}"
									},
									{
										"key": "FSPIOP-Source",
										"type": "text",
										"value": "{{NORESPONSE_SIMPAYEE_NAME}}"
									},
									{
										"key": "FSPIOP-Destination",
										"type": "text",
										"value": "{{SIMPAYEE_NAME}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"fulfilment\": \"{{validFulfillment}}\",\n  \"completedTimestamp\": \"{{completedTimestamp}}\",\n  \"transferState\": \"COMMITTED\"\n}"
								},
								"url": {
									"raw": "{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}/transfers/",
									"host": [
										"{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}"
									],
									"path": [
										"transfers",
										""
									]
								}
							},
							"response": []
						},
						{
							"name": "Check quotes/ Missing ID #849",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "0686c3b9-6825-4ae6-874d-806624361c46",
										"exec": [
											"pm.environment.set(\"completedTimestamp\",new Date().toISOString());",
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "f1d339ef-40d9-47e9-95e2-deb88545d57e",
										"exec": [
											"if (pm.environment.get('WS02_OAUTH_ENABLED') === 'true') {",
											"    pm.test(\"Status code is 404\", function () {",
											"        pm.response.to.have.status(404);",
											"    });",
											"} else {",
											"    const jsonData = pm.response.json();",
											"",
											"    pm.test(\"Status code is 404\", function () {",
											"        pm.response.to.have.status(404);",
											"    });",
											"",
											"    pm.test(\"Check ID missing\", function () {",
											"        pm.expect(jsonData.errorInformation.errorDescription).to.include('Unknown URI');",
											"    });",
											"",
											"    pm.test(\"Check Error code 3002\", function () {",
											"        pm.expect(jsonData.errorInformation.errorCode).to.eql('3002');",
											"    });",
											"}"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{NORESPONSE_SIMPAYEE_BEARER_TOKEN}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"name": "Content-Type",
										"type": "text",
										"value": "application/vnd.interoperability.transfers+json;version=1.0"
									},
									{
										"key": "Date",
										"type": "text",
										"value": "{{quoteDate}}"
									},
									{
										"key": "FSPIOP-Source",
										"type": "text",
										"value": "{{NORESPONSE_SIMPAYEE_NAME}}"
									},
									{
										"key": "FSPIOP-Destination",
										"type": "text",
										"value": "{{SIMPAYEE_NAME}}"
									},
									{
										"key": "FSPIOP-Signature",
										"value": "{{fspiopSignature}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"fulfilment\": \"{{validFulfillment}}\",\n  \"completedTimestamp\": \"{{completedTimestamp}}\",\n  \"transferState\": \"COMMITTED\"\n}"
								},
								"url": {
									"raw": "{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}/quotes",
									"host": [
										"{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}"
									],
									"path": [
										"quotes"
									]
								}
							},
							"response": []
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				},
				{
					"name": "Test for 4 decimal points #949",
					"item": [
						{
							"name": "Send Quote - SEND",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "71e4986f-226e-423e-8b8f-ae18f5c0f3fd",
										"exec": [
											"var navigator = {}; //fake a navigator object for the lib",
											"var window = {}; //fake a window object for the lib",
											"eval(pm.environment.get('jrsassign'));",
											"",
											"",
											"var uuid = require('uuid');",
											"var generatedUUID = uuid.v4();",
											"pm.environment.set('quoteId', generatedUUID);",
											"generatedUUID = uuid.v4();",
											"pm.environment.set('transactionId', generatedUUID);",
											"",
											"pm.variables.set('quoteDate', (new Date()).toUTCString());",
											"pm.variables.set('transferAmount', 60.1234);",
											"",
											"var oHeader = {alg: \"RS256\", \"FSPIOP-Source\":pm.environment.get('SIMPAYER_NAME'),\"FSPIOP-Destination\":pm.environment.get('SIMPAYEE_NAME'), \"FSPIOP-URI\":\"/quotes\", \"FSPIOP-HTTP-Method\":\"POST\", \"Date\":pm.variables.get('quoteDate')};",
											"var sHeader = JSON.stringify(oHeader);",
											"console.log(`sHeader: ${sHeader}`)",
											"",
											"var objPayload = {",
											"  \"quoteId\": pm.environment.get('quoteId'),",
											"  \"transactionId\": pm.environment.get('transactionId'),",
											"  \"payer\": {",
											"    \"partyIdInfo\": {",
											"      \"partyIdType\": \"MSISDN\",",
											"      \"partyIdentifier\": pm.variables.get('SIMPAYER_MSISDN'),",
											"      \"fspId\": pm.environment.get('SIMPAYER_NAME')",
											"    },",
											"    \"personalInfo\": {",
											"      \"complexName\": {",
											"        \"firstName\": \"Mats\",",
											"        \"lastName\": \"Hagman\"",
											"      },",
											"      \"dateOfBirth\": \"1983-10-25\"",
											"    }",
											"  },",
											"  \"payee\": {",
											"    \"partyIdInfo\": {",
											"      \"partyIdType\": \"MSISDN\",",
											"      \"partyIdentifier\": pm.environment.get('SIMPAYEE_MSISDN'),",
											"      \"fspId\": pm.environment.get('SIMPAYEE_NAME')",
											"    }",
											"  },",
											"  \"amountType\": \"SEND\",",
											"  \"amount\": {",
											"    \"amount\": `${pm.variables.get('transferAmount')}`,",
											"    \"currency\": pm.environment.get('SIMPAYER_CURRENCY')",
											"  },",
											"  \"transactionType\": {",
											"    \"scenario\": \"TRANSFER\",",
											"    \"initiator\": \"PAYER\",",
											"    \"initiatorType\": \"CONSUMER\"",
											"  },",
											"  \"note\": \"hej\"",
											"}",
											"",
											"var sPayload = JSON.stringify(objPayload)",
											"console.log(`sPayload: ${sPayload}`)",
											"pm.variables.set(\"quoteRequest\", sPayload);",
											"var token = KJUR.jws.JWS.sign(\"RS256\", sHeader, sPayload, pm.environment.get('SIMPAYER_JWS_KEY'));",
											"console.log(`token: ${token}`)",
											"",
											"// var encodedHeaders = btoa(sHeader)",
											"",
											"// var ofspiopSignature = {signature: vSignature, protectedHeader: encodedHeaders}",
											"// var token = JSON.stringify(ofspiopSignature)",
											"",
											"const [ protectedHeaderBase64, , signature ] = token.split('.');",
											"",
											"const signatureObject = {",
											"    signature: signature.replace('\"', ''),",
											"    protectedHeader: protectedHeaderBase64.replace('\"', '')",
											"};",
											"",
											"console.log(JSON.stringify(signatureObject))",
											"",
											"pm.variables.set('fspiopSignature',JSON.stringify(signatureObject))",
											"",
											"",
											"",
											"",
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "631ab7a3-1273-4a5c-9e80-cfaa975f7dc4",
										"exec": [
											"pm.test(\"Status code is 202\", function () {",
											"    pm.response.to.have.status(202);",
											"});",
											"",
											"setTimeout(function () {",
											"  pm.sendRequest(pm.environment.get(\"SIMPAYEE_SDK_TESTAPI_URL\")+\"/requests/\"+pm.variables.get(\"quoteId\"), function (err, response) {",
											"          if(response.responseSize !== 0) {",
											"              ",
											"              //Check the Headers",
											"              var headers = response.json().headers;",
											"              ",
											"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-source is ${pm.environment.get('SIMPAYER_NAME')}`, function () {",
											"                    pm.expect(headers['fspiop-source']).to.eql(pm.environment.get('SIMPAYER_NAME'));",
											"                });",
											"                ",
											"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-destination is ${pm.environment.get('SIMPAYEE_NAME')}`, function () {",
											"                    pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('SIMPAYEE_NAME'));",
											"                });",
											"                ",
											"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-signature is same as sent in the request`, function () {",
											"                    pm.expect(headers['fspiop-signature']).to.eql(pm.variables.get(\"fspiopSignature\"));",
											"                });",
											"                ",
											"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} accept is same as sent in the request`, function () {",
											"                    pm.expect(headers['accept']).to.match(/application\\/vnd\\.interoperability\\.quotes\\+json;version=1(\\.\\d)?/);",
											"                });",
											"                ",
											"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} content-typeis same as sent in the request`, function () {",
											"                    pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.quotes+json;version=1.0');",
											"                });",
											"                ",
											"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-uri is /quotes`, function () {",
											"                    pm.expect(headers['fspiop-uri']).to.eql('/quotes');",
											"                });",
											"                ",
											"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-http-method is POST`, function () {",
											"                    pm.expect(headers['fspiop-http-method']).to.eql('POST');",
											"                });",
											"                ",
											"          } else {",
											"              pm.test(\"Quote FAILED\", function () {",
											"                throw new Error('Did not receive request on payee side');",
											"              });",
											"              // postman.setNextRequest(null)",
											"          }",
											"   });",
											"}, pm.environment.get(\"SET_TIMEOUT_QUOTES\"))",
											"",
											"setTimeout(function () {",
											"  pm.sendRequest(pm.environment.get(\"SIMPAYER_SDK_TESTAPI_URL\")+\"/callbacks/\"+pm.environment.get(\"quoteId\"), function (err, response) {",
											"      if(response.responseSize !== 0) {",
											"          //Checking headers",
											"            var headers = response.json().headers;",
											"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-source is ${pm.environment.get('SIMPAYEE_NAME')}`, function () {",
											"                pm.expect(headers['fspiop-source']).to.eql(pm.environment.get('SIMPAYEE_NAME'));",
											"            });",
											"            ",
											"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-destination is ${pm.environment.get('SIMPAYER_NAME')}`, function () {",
											"                pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('SIMPAYER_NAME'));",
											"            });",
											"            ",
											"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} content-type should be application/vnd.interoperability.quotes+json;version=1.0`, function () {",
											"                pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.quotes+json;version=1.0');",
											"            });",
											"            ",
											"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} accept is empty`, function () {",
											"                pm.expect(headers['accept']).to.eql(undefined);",
											"            });",
											"            ",
											"            ",
											"            ",
											"            var {signature,protectedHeader} = JSON.parse(headers['fspiop-signature'])",
											"            // var strData = JSON.stringify(response.json().data)",
											"            // const token = `${protectedHeader}.${btoa(strData)}.${signature}`",
											"            // console.log(`token: ${token}`)",
											"            // var isValid = KJUR.jws.JWS.verify(token, pm.environment.get('goldenpayeefspJWSPubKey'), {alg: ['RS256']})",
											"            // console.log(`isValid: ${isValid}`)",
											"            // pm.test(\"Check if the response is JWS valid\", function () {",
											"            //     pm.expect(isValid).to.eql(true);",
											"            // });",
											"            ",
											"            //Validate protected header inside Signature",
											"            var decodedProtectedHeaders = JSON.parse(atob(protectedHeader))",
											"            console.log('decodedProtectedHeaders:',decodedProtectedHeaders)",
											"            ",
											"            pm.test(\"FSPIOP-Signature Protected Header alg to be RS256\", function () {",
											"                pm.expect(decodedProtectedHeaders['alg']).to.eql('RS256');",
											"            });",
											"            pm.test(\"FSPIOP-Signature Protected Header FSPIOP-URI to be /quotes/\"+pm.environment.get(\"quoteId\"), function () {",
											"                pm.expect(decodedProtectedHeaders['FSPIOP-URI']).to.eql('/quotes/'+pm.environment.get(\"quoteId\"));",
											"            });",
											"            ",
											"",
											"            pm.test(\"FSPIOP-Signature Protected Header FSPIOP-HTTP-Method to be PUT\", function () {",
											"                pm.expect(decodedProtectedHeaders['FSPIOP-HTTP-Method']).to.eql('PUT');",
											"            });",
											"            pm.test(`FSPIOP-Signature Protected Header FSPIOP-Source to be ${pm.environment.get('SIMPAYEE_NAME')}`, function () {",
											"                pm.expect(decodedProtectedHeaders['FSPIOP-Source']).to.eql(pm.environment.get('SIMPAYEE_NAME'));",
											"            });",
											"            pm.test(`FSPIOP-Signature Protected Header FSPIOP-Destination to be ${pm.environment.get('SIMPAYER_NAME')}`, function () {",
											"                pm.expect(decodedProtectedHeaders['FSPIOP-Destination']).to.eql(pm.environment.get('SIMPAYER_NAME'));",
											"            });",
											"            pm.test(\"FSPIOP-Signature Protected Header Date is present\", function () {",
											"                pm.expect(decodedProtectedHeaders['Date']).to.not.eql(undefined);",
											"            });",
											"           ",
											"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} FSPIOP-URI to be /quotes/`+pm.environment.get(\"quoteId\"), function () {",
											"                pm.expect(headers['fspiop-uri']).to.eql('/quotes/'+pm.environment.get(\"quoteId\"));",
											"            });",
											"            ",
											"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-http-method is PUT`, function () {",
											"                pm.expect(headers['fspiop-http-method']).to.eql('PUT');",
											"            });",
											"            ",
											"            var jsonData = response.json().data;",
											"",
											"            pm.test(\"Send Quote Amount in 4 decimal returned\", function () {",
											"                pm.expect(+jsonData.transferAmount.amount).equal(pm.variables.get(\"transferAmount\"));",
											"            });",
											"            ",
											"            pm.test(\"Response quoteId is  null\", function () {",
											"                pm.expect(jsonData.quoteId).to.eql(undefined);",
											"                ",
											"            });",
											"          ",
											"            pm.test(\"Response ilpPacket is not null\", function () {",
											"                pm.expect(jsonData.ilpPacket).not.equal(undefined);",
											"                pm.environment.set(\"ilpPacket\", jsonData.ilpPacket);",
											"            });",
											"       ",
											"           pm.test(\"Response condition is not null\", function () {",
											"               pm.expect(jsonData.condition).not.equal(undefined);",
											"               pm.environment.set(\"condition\", jsonData.condition);",
											"           });",
											"      } else {",
											"          pm.test(\"Quote FAILED\", function () {",
											"            throw new Error('Did not receive response on Payer side');",
											"           });",
											"           // postman.setNextRequest(null);",
											"      }",
											"       ",
											"   });",
											"}, pm.environment.get(\"SET_TIMEOUT_QUOTES\"))",
											"",
											"",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{SIMPAYER_BEARER_TOKEN}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Accept",
										"value": "application/vnd.interoperability.quotes+json;version=1.0"
									},
									{
										"key": "Content-Type",
										"value": "application/vnd.interoperability.quotes+json;version=1.0"
									},
									{
										"key": "Date",
										"value": "{{quoteDate}}"
									},
									{
										"key": "FSPIOP-Source",
										"value": "{{SIMPAYER_NAME}}"
									},
									{
										"key": "FSPIOP-Destination",
										"value": "{{SIMPAYEE_NAME}}"
									},
									{
										"key": "FSPIOP-Signature",
										"type": "text",
										"value": "{{fspiopSignature}}"
									},
									{
										"key": "FSPIOP-HTTP-Method",
										"type": "text",
										"value": "POST"
									},
									{
										"key": "FSPIOP-URI",
										"type": "text",
										"value": "/quotes"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{{quoteRequest}}"
								},
								"url": {
									"raw": "{{HOST_QUOTING_SERVICE}}/quotes",
									"host": [
										"{{HOST_QUOTING_SERVICE}}"
									],
									"path": [
										"quotes"
									]
								}
							},
							"response": []
						},
						{
							"name": "Send Transfer - SEND",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "9cf9d2b8-113c-49b6-bfb9-6c99b7477572",
										"exec": [
											"pm.test(\"Status code is 202\", function () {",
											"    pm.response.to.have.status(202);",
											"});",
											"",
											"// //Check the request that Switch forwards to payeefsp",
											"setTimeout(function () {",
											"  pm.sendRequest(pm.environment.get(\"SIMPAYEE_SDK_TESTAPI_URL\")+\"/requests/\"+pm.environment.get(\"transfer_ID\"), function (err, response) {",
											"          if(response.responseSize !== 0) {",
											"              ",
											"              //Check the Headers",
											"              var headers = response.json().headers;",
											"              ",
											"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-source is ${pm.environment.get('SIMPAYER_NAME')}`, function () {",
											"                    pm.expect(headers['fspiop-source']).to.eql(pm.environment.get('SIMPAYER_NAME'));",
											"                });",
											"                ",
											"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-destination is ${pm.environment.get('SIMPAYEE_NAME')}`, function () {",
											"                    pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('SIMPAYEE_NAME'));",
											"                });",
											"                ",
											"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} content-typeis same as sent in the request`, function () {",
											"                    pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.transfers+json;version=1.0');",
											"                });",
											"                ",
											"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} accept is same as sent in the request`, function () {",
											"                    pm.expect(headers['accept']).to.match(/application\\/vnd\\.interoperability\\.transfers\\+json;version=1(\\.\\d)?/);",
											"                });",
											"                ",
											"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-signature is same as sent in the request`, function () {",
											"                    pm.expect(headers['fspiop-signature']).to.eql(pm.variables.get(\"fspiopSignature\"));",
											"                });",
											"                ",
											"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-http-method is POST`, function () {",
											"                    pm.expect(headers['fspiop-http-method']).to.eql('POST');",
											"                });",
											"                ",
											"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} fspiop-uri is /transfers`, function () {",
											"                    pm.expect(headers['fspiop-uri']).to.eql('/transfers');",
											"                });",
											"                ",
											"                ",
											"                //Check the data",
											"                var jsonData = response.json().data;",
											"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} data should have the same transferId as request`, function () {",
											"                  pm.expect(jsonData.transferId).to.eql(pm.environment.get(\"transfer_ID\"));",
											"                });",
											"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} data should have the same payerfspId as request`, function () {",
											"                  pm.expect(jsonData.payerFsp).to.eql(pm.environment.get('SIMPAYER_NAME'));",
											"                });",
											"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} data should have the same ${pm.environment.get('SIMPAYEE_NAME')}Id as request`, function () {",
											"                  pm.expect(`${pm.environment.get('SIMPAYEE_NAME')}`);",
											"                });",
											"",
											"                pm.test(\"Send Transfer Amount in 4 decimal returned\", function () {",
											"                pm.expect(+jsonData.amount.amount).equal(pm.variables.get(\"transferAmount\"));",
											"                ",
											"                });",
											"",
											"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} data should have the same currency as request`, function () {",
											"                  pm.expect(jsonData.amount.currency).to.eql(pm.environment.get(\"SIMPAYER_CURRENCY\"));",
											"                });",
											"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} data should have the same expiration as request`, function () {",
											"                  pm.expect(jsonData.expiration).to.eql(pm.environment.get(\"transferExpiration\"));",
											"                });",
											"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} data should have the same ilpPacket as request`, function () {",
											"                  pm.expect(jsonData.ilpPacket).to.eql(pm.environment.get(\"ilpPacket\"));",
											"                });",
											"                pm.test(`${pm.environment.get('SIMPAYEE_NAME')} data should have the same condition as request`, function () {",
											"                  pm.expect(jsonData.condition).to.eql(pm.environment.get(\"condition\"));",
											"                });",
											"                ",
											"          } else {",
											"              pm.test(\"Transfer FAILED\", function () {",
											"                throw new Error('Did not receive response on payee side');",
											"              });",
											"              // postman.setNextRequest(null)",
											"          }",
											"  });",
											"}, pm.environment.get(\"SET_TIMEOUT_TRANSFERS\"))",
											"",
											"//Check the callback response that Switch forwards to payerfsp",
											"setTimeout(function () {",
											"  pm.sendRequest(pm.environment.get(\"SIMPAYER_SDK_TESTAPI_URL\")+\"/callbacks/\"+pm.environment.get(\"transfer_ID\"), function (err, response) {",
											"          if(response.responseSize !== 0) {",
											"            //Checking headers",
											"            var headers = response.json().headers;",
											"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-source is ${pm.environment.get('SIMPAYEE_NAME')}`, function () {",
											"                pm.expect(headers['fspiop-source']).to.eql(pm.environment.get('SIMPAYEE_NAME'));",
											"            });",
											"            ",
											"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-destination is ${pm.environment.get('SIMPAYER_NAME')}`, function () {",
											"                pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('SIMPAYER_NAME'));",
											"            });",
											"            ",
											"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} content-type should be application/vnd.interoperability.transfers+json;version=1.0`, function () {",
											"                pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.transfers+json;version=1.0');",
											"            });",
											"            ",
											"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} accept is empty`, function () {",
											"                pm.expect(headers['accept']).to.eql(undefined);",
											"            });",
											"            ",
											"            ",
											"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-uri includes /transfers/{{transfer_ID}}`, function () {",
											"                pm.expect(headers['fspiop-uri']).to.eql('/transfers/'+ pm.environment.get(\"transfer_ID\"));",
											"            });",
											"            ",
											"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-http-method is PUT`, function () {",
											"                pm.expect(headers['fspiop-http-method']).to.eql('PUT');",
											"            });",
											"            ",
											"            var jsonData = response.json().data;",
											"            pm.test(\"Response data does not have transferId\", function () {",
											"               pm.expect(jsonData.transferId).to.eql(undefined);",
											"            });",
											"            pm.test(\"Response status is COMMITTED\", function () {",
											"                pm.expect(jsonData.transferState).to.eql('COMMITTED');",
											"            });",
											"          } else {",
											"              pm.test(\"Transfer FAILED\", function () {",
											"                throw new Error('Did not receive response on payer side');",
											"              });",
											"              // postman.setNextRequest(null)",
											"          }",
											"   });",
											"}, pm.environment.get(\"SET_TIMEOUT_TRANSFERS\"))",
											"",
											"setTimeout(function () {",
											"  pm.sendRequest(pm.environment.get(\"SIMPAYEE_SDK_TESTAPI_URL\")+\"/callbacks/\"+pm.environment.get(\"transfer_ID\"), function (err, response) {",
											"       pm.test(`${pm.environment.get('SIMPAYEE_NAME')} does not receive additional final notification`, function () {",
											"            pm.expect(response.text()).to.eql('');",
											"        });",
											"       ",
											"      ",
											"    });",
											"}, pm.environment.get(\"SET_TIMEOUT_TRANSFERS\"))",
											"",
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "6968af70-d06a-4ffc-927d-b9c8313a06f5",
										"exec": [
											"var navigator = {}; //fake a navigator object for the lib",
											"var window = {}; //fake a window object for the lib",
											"eval(pm.environment.get('jrsassign'));",
											"",
											"var uuid = require('uuid');",
											"var generatedUUID = uuid.v4();",
											"pm.environment.set('transfer_ID', pm.environment.get('transactionId'));",
											"",
											"",
											"pm.variables.set('transferDate', (new Date()).toUTCString());",
											"pm.variables.set('transferAmount', 60.1234);",
											"",
											"pm.environment.set(\"transferExpiration\",new Date(new Date().getTime() + 60000))",
											"",
											"var oHeader = {alg: \"RS256\", \"FSPIOP-Source\": pm.environment.get('SIMPAYER_NAME'),\"FSPIOP-Destination\": pm.environment.get('SIMPAYEE_NAME'), \"FSPIOP-URI\":\"/transfers\", \"FSPIOP-HTTP-Method\":\"POST\", \"Date\":pm.variables.get('transferDate')};",
											"var sHeader = JSON.stringify(oHeader);",
											"console.log(`sHeader: ${sHeader}`)",
											"",
											"var objPayload = {",
											"  \"transferId\": pm.environment.get('transfer_ID'),",
											"  \"payerFsp\": pm.environment.get('SIMPAYER_NAME'),",
											"  \"payeeFsp\": pm.environment.get('SIMPAYEE_NAME'),",
											"  \"amount\": {",
											"    \"amount\": `${pm.variables.get('transferAmount')}`,",
											"    \"currency\": pm.environment.get('SIMPAYER_CURRENCY')",
											"  },",
											"  \"expiration\": pm.environment.get('transferExpiration'),",
											"  \"ilpPacket\": pm.environment.get('ilpPacket'),",
											"  \"condition\": pm.environment.get('condition')",
											"}",
											"var sPayload = JSON.stringify(objPayload)",
											"console.log(`sPayload: ${sPayload}`)",
											"pm.variables.set(\"transferRequest\", sPayload);",
											"var token = KJUR.jws.JWS.sign(\"RS256\", sHeader, sPayload, pm.environment.get('SIMPAYER_JWS_KEY'));",
											"//console.log(`token: ${token}`)",
											"",
											"// var encodedHeaders = btoa(sHeader)",
											"",
											"// var ofspiopSignature = {signature: vSignature, protectedHeader: encodedHeaders}",
											"// var token = JSON.stringify(ofspiopSignature)",
											"",
											"const [ protectedHeaderBase64, , signature ] = token.split('.');",
											"",
											"const signatureObject = {",
											"    signature: signature.replace('\"', ''),",
											"    protectedHeader: protectedHeaderBase64.replace('\"', '')",
											"};",
											"",
											"console.log(JSON.stringify(signatureObject))",
											"",
											"pm.variables.set('fspiopSignature',JSON.stringify(signatureObject))"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{SIMPAYER_BEARER_TOKEN}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Accept",
										"value": "application/vnd.interoperability.transfers+json;version=1.0"
									},
									{
										"key": "Content-Type",
										"value": "application/vnd.interoperability.transfers+json;version=1.0"
									},
									{
										"key": "Date",
										"value": "{{transferDate}}"
									},
									{
										"key": "FSPIOP-Source",
										"value": "{{SIMPAYER_NAME}}"
									},
									{
										"key": "FSPIOP-Destination",
										"value": "{{SIMPAYEE_NAME}}"
									},
									{
										"key": "FSPIOP-Signature",
										"type": "text",
										"value": "{{fspiopSignature}}"
									},
									{
										"key": "FSPIOP-URI",
										"type": "text",
										"value": "/transfers"
									},
									{
										"key": "FSPIOP-HTTP-Method",
										"type": "text",
										"value": "POST"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{{transferRequest}}"
								},
								"url": {
									"raw": "{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}/transfers",
									"host": [
										"{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}"
									],
									"path": [
										"transfers"
									]
								}
							},
							"response": []
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				},
				{
					"name": "Test for Bugfix #742 - Error code check",
					"item": [
						{
							"name": "Check Error 2001 Internal server error #742",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "559f5d8d-bc27-4199-94dc-a9adc5bb11a5",
										"exec": [
											"const jsonData = pm.response.json();",
											"",
											"pm.test(\"Check Malformed syntax error \", function () {",
											"    pm.expect(jsonData.errorInformation.errorDescription).to.include('Malformed syntax');",
											"});",
											"",
											"pm.test(\"Check currency is included in the Error description\", function () {",
											"    pm.expect(jsonData.errorInformation.errorDescription).to.include('currency');",
											"});",
											"",
											"pm.test(\"Check Error code 3101\", function () {",
											"    pm.expect(jsonData.errorInformation.errorCode).to.eql('3101');",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"name": "Content-Type",
										"value": "application/json",
										"type": "text"
									},
									{
										"key": "FSPIOP-Source",
										"value": "{{hub_operator}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"name\": \"payer10\",\n  \"currency\": \"A#\"\n}"
								},
								"url": {
									"raw": "{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}/participants",
									"host": [
										"{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}"
									],
									"path": [
										"participants"
									]
								}
							},
							"response": []
						},
						{
							"name": "Check Error 3003 Add Party information error #742",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "99ccfa66-dcab-4899-97fb-c82413e9ec43",
										"exec": [
											"const jsonData = pm.response.json();",
											"",
											"pm.test(\"Check ID missing\", function () {",
											"    pm.expect(jsonData.errorInformation.errorDescription).to.include('Add Party information error');",
											"});",
											"",
											"pm.test(\"Check Error code 3003\", function () {",
											"    pm.expect(jsonData.errorInformation.errorCode).to.eql('3003');",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "FSPIOP-Source",
										"value": "{{hub_operator}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"name\": \"{{SIMPAYER_NAME}}\",\n  \"currency\": \"{{NOT_EXISTING_HUB_ACCOUNT_CURRENCY}}\"\n}"
								},
								"url": {
									"raw": "{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}/participants",
									"host": [
										"{{HOST_CENTRAL_LEDGER}}{{BASE_CENTRAL_LEDGER_ADMIN}}"
									],
									"path": [
										"participants"
									]
								}
							},
							"response": []
						},
						{
							"name": "Check Error 3100  validation error#742",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "21dc80cc-1ae9-47c2-b3e7-56e7bc3ffc57",
										"exec": [
											"const jsonData = pm.response.json();",
											"",
											"pm.test(\"Status code is 400\", function () {",
											"    pm.response.to.have.status(400);",
											"});",
											"",
											"pm.test(\"Check Generic validation error\", function () {",
											"    pm.expect(jsonData.errorInformation.errorDescription).to.include('Generic validation error');",
											"});",
											"",
											"pm.test(\"Check payerFsp1 is included in Error description\", function () {",
											"    pm.expect(jsonData.errorInformation.errorDescription).to.include('payerFsp1');",
											"});",
											"",
											"pm.test(\"Check Error code 3100\", function () {",
											"    pm.expect(jsonData.errorInformation.errorCode).to.eql('3100');",
											"});"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "00c49c2f-7f64-4520-a7b3-7895d708cfea",
										"exec": [
											"var navigator = {}; //fake a navigator object for the lib",
											"var window = {}; //fake a window object for the lib",
											"eval(pm.environment.get('jrsassign'));",
											"",
											"var uuid = require('uuid');",
											"var generatedUUID = uuid.v4();",
											"pm.environment.set('transfer_ID', pm.environment.get('transactionId'));",
											"",
											"",
											"pm.variables.set('transferDate', (new Date()).toUTCString());",
											"",
											"pm.environment.set(\"transferExpiration\",new Date(new Date().getTime() + 60000))",
											"",
											"var oHeader = {alg: \"RS256\", \"FSPIOP-Source\": pm.environment.get('SIMPAYER_NAME'),\"FSPIOP-Destination\": pm.environment.get('SIMPAYEE_NAME'), \"FSPIOP-URI\":\"/transfers\", \"FSPIOP-HTTP-Method\":\"POST\", \"Date\":pm.variables.get('transferDate')};",
											"var sHeader = JSON.stringify(oHeader);",
											"console.log(`sHeader: ${sHeader}`)",
											"",
											"var objPayload = {",
											"  \"transferId\": pm.environment.get('transfer_ID'),",
											"  \"payerFsp\": pm.environment.get('SIMPAYER_NAME'),",
											"  \"payerFsp1\": pm.environment.get('SIMPAYER_NAME'),",
											"  \"payeeFsp\": pm.environment.get('SIMPAYEE_NAME'),",
											"  \"amount\": {",
											"    \"amount\": \"10\",",
											"    \"currency\": pm.environment.get('SIMPAYER_CURRENCY')",
											"  },",
											"  \"expiration\": pm.environment.get('transferExpiration'),",
											"  \"ilpPacket\": pm.environment.get('ilpPacket'),",
											"  \"condition\": pm.environment.get('condition')",
											"}",
											"var sPayload = JSON.stringify(objPayload)",
											"console.log(`sPayload: ${sPayload}`)",
											"pm.variables.set(\"transferRequest\", sPayload);",
											"var token = KJUR.jws.JWS.sign(\"RS256\", sHeader, sPayload, pm.environment.get('SIMPAYER_JWS_KEY'));",
											"//console.log(`token: ${token}`)",
											"",
											"// var encodedHeaders = btoa(sHeader)",
											"",
											"// var ofspiopSignature = {signature: vSignature, protectedHeader: encodedHeaders}",
											"// var token = JSON.stringify(ofspiopSignature)",
											"",
											"const [ protectedHeaderBase64, , signature ] = token.split('.');",
											"",
											"const signatureObject = {",
											"    signature: signature.replace('\"', ''),",
											"    protectedHeader: protectedHeaderBase64.replace('\"', '')",
											"};",
											"",
											"console.log(JSON.stringify(signatureObject))",
											"",
											"pm.variables.set('fspiopSignature',JSON.stringify(signatureObject))"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{SIMPAYER_BEARER_TOKEN}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Accept",
										"value": "application/vnd.interoperability.transfers+json;version=1.0"
									},
									{
										"key": "Content-Type",
										"value": "application/vnd.interoperability.transfers+json;version=1.0"
									},
									{
										"key": "Date",
										"value": "{{transferDate}}"
									},
									{
										"key": "FSPIOP-Source",
										"value": "{{SIMPAYER_NAME}}"
									},
									{
										"key": "FSPIOP-Destination",
										"value": "{{SIMPAYEE_NAME}}"
									},
									{
										"key": "FSPIOP-Signature",
										"value": "{{fspiopSignature}}",
										"type": "text"
									},
									{
										"key": "FSPIOP-URI",
										"value": "/transfers",
										"type": "text"
									},
									{
										"key": "FSPIOP-HTTP-Method",
										"value": "POST",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{{transferRequest}}"
								},
								"url": {
									"raw": "{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}/transfers",
									"host": [
										"{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}"
									],
									"path": [
										"transfers"
									]
								}
							},
							"response": []
						},
						{
							"name": "Check Error 3101 Malformed syntax #742",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "07d9639a-f241-41b2-8fb3-e7526425d8eb",
										"exec": [
											"const jsonData = pm.response.json();",
											"",
											"pm.test(\"Status code is 400\", function () {",
											"    pm.response.to.have.status(400);",
											"});",
											"",
											"pm.test(\"Check Malformed syntax\", function () {",
											"    pm.expect(jsonData.errorInformation.errorDescription).to.include('Malformed syntax');",
											"});",
											"",
											"pm.test(\"Check Transfer Id is included in error\", function () {",
											"    pm.expect(jsonData.errorInformation.errorDescription).to.include('Transfer Id');",
											"});",
											"",
											"pm.test(\"Check Error code 3101\", function () {",
											"    pm.expect(jsonData.errorInformation.errorCode).to.eql('3101');",
											"});"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "d67a9471-39a7-4c82-9933-fdfaf3a2ea4c",
										"exec": [
											"var navigator = {}; //fake a navigator object for the lib",
											"var window = {}; //fake a window object for the lib",
											"eval(pm.environment.get('jrsassign'));",
											"",
											"var uuid = require('uuid');",
											"var generatedUUID = uuid.v4();",
											"pm.environment.set('transfer_ID', pm.environment.get('transactionId'));",
											"",
											"",
											"pm.variables.set('transferDate', (new Date()).toUTCString());",
											"",
											"pm.environment.set(\"transferExpiration\",new Date(new Date().getTime() + 60000))",
											"",
											"var oHeader = {alg: \"RS256\", \"FSPIOP-Source\": pm.environment.get('SIMPAYER_NAME'),\"FSPIOP-Destination\": pm.environment.get('SIMPAYEE_NAME'), \"FSPIOP-URI\":\"/transfers\", \"FSPIOP-HTTP-Method\":\"POST\", \"Date\":pm.variables.get('transferDate')};",
											"var sHeader = JSON.stringify(oHeader);",
											"console.log(`sHeader: ${sHeader}`)",
											"",
											"var objPayload = {",
											"  \"transferId\": pm.environment.get('transfer_ID')+'+1',",
											"  \"payerFsp\": pm.environment.get('SIMPAYER_NAME'),",
											"  \"payeeFsp\": pm.environment.get('SIMPAYEE_NAME'),",
											"  \"amount\": {",
											"    \"amount\": \"10\",",
											"    \"currency\": pm.environment.get('SIMPAYER_CURRENCY')",
											"  },",
											"  \"expiration\": pm.environment.get('transferExpiration'),",
											"  \"ilpPacket\": pm.environment.get('ilpPacket'),",
											"  \"condition\": pm.environment.get('condition')",
											"}",
											"var sPayload = JSON.stringify(objPayload)",
											"console.log(`sPayload: ${sPayload}`)",
											"pm.variables.set(\"transferRequest\", sPayload);",
											"var token = KJUR.jws.JWS.sign(\"RS256\", sHeader, sPayload, pm.environment.get('SIMPAYER_JWS_KEY'));",
											"//console.log(`token: ${token}`)",
											"",
											"// var encodedHeaders = btoa(sHeader)",
											"",
											"// var ofspiopSignature = {signature: vSignature, protectedHeader: encodedHeaders}",
											"// var token = JSON.stringify(ofspiopSignature)",
											"",
											"const [ protectedHeaderBase64, , signature ] = token.split('.');",
											"",
											"const signatureObject = {",
											"    signature: signature.replace('\"', ''),",
											"    protectedHeader: protectedHeaderBase64.replace('\"', '')",
											"};",
											"",
											"console.log(JSON.stringify(signatureObject))",
											"",
											"pm.variables.set('fspiopSignature',JSON.stringify(signatureObject))"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{SIMPAYER_BEARER_TOKEN}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Accept",
										"value": "application/vnd.interoperability.transfers+json;version=1.0"
									},
									{
										"key": "Content-Type",
										"value": "application/vnd.interoperability.transfers+json;version=1.0"
									},
									{
										"key": "Date",
										"value": "{{transferDate}}"
									},
									{
										"key": "FSPIOP-Source",
										"value": "{{SIMPAYER_NAME}}"
									},
									{
										"key": "FSPIOP-Destination",
										"value": "{{SIMPAYEE_NAME}}"
									},
									{
										"key": "FSPIOP-Signature",
										"type": "text",
										"value": "{{fspiopSignature}}"
									},
									{
										"key": "FSPIOP-URI",
										"type": "text",
										"value": "/transfers"
									},
									{
										"key": "FSPIOP-HTTP-Method",
										"type": "text",
										"value": "POST"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{{transferRequest}}"
								},
								"url": {
									"raw": "{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}/transfers",
									"host": [
										"{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}"
									],
									"path": [
										"transfers"
									]
								}
							},
							"response": []
						},
						{
							"name": "Check Error 3102  Missing mandatory element#742",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "68d69574-f21b-4fc1-9dc5-1e727637b2cd",
										"exec": [
											"const jsonData = pm.response.json();",
											"",
											"pm.test(\"Status code is 400\", function () {",
											"    pm.response.to.have.status(400);",
											"});",
											"",
											"pm.test(\"Check Missing mandatory element\", function () {",
											"    pm.expect(jsonData.errorInformation.errorDescription).to.include('Missing mandatory element');",
											"});",
											"",
											"pm.test(\"Check valid Payee FSP missing \", function () {",
											"    pm.expect(jsonData.errorInformation.errorDescription).to.include('Payee FSP');",
											"});",
											"",
											"pm.test(\"Check Error code 3102\", function () {",
											"    pm.expect(jsonData.errorInformation.errorCode).to.eql('3102');",
											"});"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "cb1b0064-b9eb-4202-a05c-e4262eb58b21",
										"exec": [
											"var navigator = {}; //fake a navigator object for the lib",
											"var window = {}; //fake a window object for the lib",
											"eval(pm.environment.get('jrsassign'));",
											"",
											"var uuid = require('uuid');",
											"var generatedUUID = uuid.v4();",
											"pm.environment.set('transfer_ID', pm.environment.get('transactionId'));",
											"",
											"",
											"pm.variables.set('transferDate', (new Date()).toUTCString());",
											"",
											"pm.environment.set(\"transferExpiration\",new Date(new Date().getTime() + 60000))",
											"",
											"var oHeader = {alg: \"RS256\", \"FSPIOP-Source\": pm.environment.get('SIMPAYER_NAME'),\"FSPIOP-Destination\": pm.environment.get('SIMPAYEE_NAME'), \"FSPIOP-URI\":\"/transfers\", \"FSPIOP-HTTP-Method\":\"POST\", \"Date\":pm.variables.get('transferDate')};",
											"var sHeader = JSON.stringify(oHeader);",
											"console.log(`sHeader: ${sHeader}`)",
											"",
											"var objPayload = {",
											"  \"transferId\": pm.environment.get('transfer_ID'),",
											"  \"payerFsp\": pm.environment.get('SIMPAYER_NAME'),",
											"  \"amount\": {",
											"    \"amount\": \"10\",",
											"    \"currency\": pm.environment.get('SIMPAYER_CURRENCY')",
											"  },",
											"  \"expiration\": pm.environment.get('transferExpiration'),",
											"  \"ilpPacket\": pm.environment.get('ilpPacket'),",
											"  \"condition\": pm.environment.get('condition')",
											"}",
											"var sPayload = JSON.stringify(objPayload)",
											"console.log(`sPayload: ${sPayload}`)",
											"pm.variables.set(\"transferRequest\", sPayload);",
											"var token = KJUR.jws.JWS.sign(\"RS256\", sHeader, sPayload, pm.environment.get('SIMPAYER_JWS_KEY'));",
											"//console.log(`token: ${token}`)",
											"",
											"// var encodedHeaders = btoa(sHeader)",
											"",
											"// var ofspiopSignature = {signature: vSignature, protectedHeader: encodedHeaders}",
											"// var token = JSON.stringify(ofspiopSignature)",
											"",
											"const [ protectedHeaderBase64, , signature ] = token.split('.');",
											"",
											"const signatureObject = {",
											"    signature: signature.replace('\"', ''),",
											"    protectedHeader: protectedHeaderBase64.replace('\"', '')",
											"};",
											"",
											"console.log(JSON.stringify(signatureObject))",
											"",
											"pm.variables.set('fspiopSignature',JSON.stringify(signatureObject))"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{SIMPAYER_BEARER_TOKEN}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Accept",
										"value": "application/vnd.interoperability.transfers+json;version=1.0"
									},
									{
										"key": "Content-Type",
										"value": "application/vnd.interoperability.transfers+json;version=1.0"
									},
									{
										"key": "Date",
										"value": "{{transferDate}}"
									},
									{
										"key": "FSPIOP-Source",
										"value": "{{SIMPAYER_NAME}}"
									},
									{
										"key": "FSPIOP-Destination",
										"value": "{{SIMPAYEE_NAME}}"
									},
									{
										"key": "FSPIOP-Signature",
										"value": "{{fspiopSignature}}",
										"type": "text"
									},
									{
										"key": "FSPIOP-URI",
										"value": "/transfers",
										"type": "text"
									},
									{
										"key": "FSPIOP-HTTP-Method",
										"value": "POST",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{{transferRequest}}"
								},
								"url": {
									"raw": "{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}/transfers",
									"host": [
										"{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}"
									],
									"path": [
										"transfers"
									]
								}
							},
							"response": []
						}
					],
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "81b1ceef-1f23-421d-ad6d-5fe568f6485a",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "d490b6eb-bf5a-47b4-ba98-9674effbd856",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				},
				{
					"name": "Tests for Bugfix #990 and #1016 - Quotes",
					"item": [
						{
							"name": "Check duplicate quote before and after expiration",
							"item": [
								{
									"name": "Send Quote_SEND",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "3266a1d0-2b07-4cec-92c6-056d17c62937",
												"exec": [
													"var navigator = {}; //fake a navigator object for the lib",
													"var window = {}; //fake a window object for the lib",
													"eval(pm.environment.get('jrsassign'));",
													"",
													"",
													"var uuid = require('uuid');",
													"var generatedUUID = uuid.v4();",
													"pm.environment.set('quoteId', generatedUUID);",
													"generatedUUID = uuid.v4();",
													"pm.environment.set('transactionId', generatedUUID);",
													"pm.environment.set(\"transferExpiration\",new Date(new Date().getTime() + 3000))",
													"pm.variables.set('quoteDate', (new Date()).toUTCString());",
													"",
													"var oHeader = {alg: \"RS256\", \"FSPIOP-Source\":pm.environment.get('SIMPAYER_NAME'),\"FSPIOP-Destination\":pm.environment.get('SIMPAYEE_NAME'), \"FSPIOP-URI\":\"/quotes\", \"FSPIOP-HTTP-Method\":\"POST\", \"Date\":pm.variables.get('quoteDate')};",
													"var sHeader = JSON.stringify(oHeader);",
													"console.log(`sHeader: ${sHeader}`)",
													"",
													"var objPayload = {",
													"  \"quoteId\": pm.environment.get('quoteId'),",
													"  \"transactionId\": pm.environment.get('transactionId'),",
													"  \"payer\": {",
													"    \"partyIdInfo\": {",
													"      \"partyIdType\": \"MSISDN\",",
													"      \"partyIdentifier\": pm.variables.get('SIMPAYER_MSISDN'),",
													"      \"fspId\": pm.environment.get('SIMPAYER_NAME')",
													"    },",
													"    \"personalInfo\": {",
													"      \"complexName\": {",
													"        \"firstName\": \"Mats\",",
													"        \"lastName\": \"Hagman\"",
													"      },",
													"      \"dateOfBirth\": \"1983-10-25\"",
													"    }",
													"  },",
													"  \"payee\": {",
													"    \"partyIdInfo\": {",
													"      \"partyIdType\": \"MSISDN\",",
													"      \"partyIdentifier\": pm.environment.get('SIMPAYEE_MSISDN'),",
													"      \"fspId\": pm.environment.get('SIMPAYEE_NAME')",
													"    }",
													"  },",
													"  \"amountType\": \"SEND\",",
													"  \"amount\": {",
													"    \"amount\": \"60\",",
													"    \"currency\": pm.environment.get('SIMPAYER_CURRENCY')",
													"  },",
													"  \"transactionType\": {",
													"    \"scenario\": \"TRANSFER\",",
													"    \"initiator\": \"PAYER\",",
													"    \"initiatorType\": \"CONSUMER\"",
													"  },",
													"  \"note\": \"hej\"",
													"}",
													"",
													"var sPayload = JSON.stringify(objPayload)",
													"console.log(`sPayload: ${sPayload}`)",
													"pm.variables.set(\"quoteRequest\", sPayload);",
													"var token = KJUR.jws.JWS.sign(\"RS256\", sHeader, sPayload, pm.environment.get('SIMPAYER_JWS_KEY'));",
													"console.log(`token: ${token}`)",
													"",
													"// var encodedHeaders = btoa(sHeader)",
													"",
													"// var ofspiopSignature = {signature: vSignature, protectedHeader: encodedHeaders}",
													"// var token = JSON.stringify(ofspiopSignature)",
													"",
													"const [ protectedHeaderBase64, , signature ] = token.split('.');",
													"",
													"const signatureObject = {",
													"    signature: signature.replace('\"', ''),",
													"    protectedHeader: protectedHeaderBase64.replace('\"', '')",
													"};",
													"",
													"console.log(JSON.stringify(signatureObject))",
													"",
													"pm.variables.set('fspiopSignature',JSON.stringify(signatureObject))",
													"",
													"",
													"",
													"",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"id": "d057232f-2bec-46f5-930f-fbd4f3f40185",
												"exec": [
													"pm.test(\"Status code is 202\", function () {",
													"    pm.response.to.have.status(202);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{SIMPAYER_BEARER_TOKEN}}",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Accept",
												"value": "application/vnd.interoperability.quotes+json;version=1.0"
											},
											{
												"key": "Content-Type",
												"value": "application/vnd.interoperability.quotes+json;version=1.0"
											},
											{
												"key": "Date",
												"value": "{{quoteDate}}"
											},
											{
												"key": "FSPIOP-Source",
												"value": "{{SIMPAYER_NAME}}"
											},
											{
												"key": "FSPIOP-Destination",
												"value": "{{SIMPAYEE_NAME}}"
											},
											{
												"key": "FSPIOP-Signature",
												"type": "text",
												"value": "{{fspiopSignature}}"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{{quoteRequest}}"
										},
										"url": {
											"raw": "{{HOST_QUOTING_SERVICE}}/quotes",
											"host": [
												"{{HOST_QUOTING_SERVICE}}"
											],
											"path": [
												"quotes"
											]
										}
									},
									"response": []
								},
								{
									"name": "Send Quote_SEND - 12 - Validate Within Expire Time w Duplicate Quote Id Copy",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "9cfb7b9e-e53d-47a1-8196-406afae99005",
												"exec": [
													"var navigator = {}; //fake a navigator object for the lib",
													"var window = {}; //fake a window object for the lib",
													"eval(pm.environment.get('jrsassign'));",
													"",
													"",
													"var uuid = require('uuid');",
													"var generatedUUID = uuid.v4();",
													"generatedUUID = uuid.v4();",
													"pm.environment.set('transactionId', generatedUUID);",
													"pm.variables.set('quoteDate', (new Date()).toUTCString());",
													"",
													"var oHeader = {alg: \"RS256\", \"FSPIOP-Source\":pm.environment.get('SIMPAYER_NAME'),\"FSPIOP-Destination\":pm.environment.get('SIMPAYEE_NAME'), \"FSPIOP-URI\":\"/quotes\", \"FSPIOP-HTTP-Method\":\"POST\", \"Date\":pm.variables.get('quoteDate')};",
													"var sHeader = JSON.stringify(oHeader);",
													"console.log(`sHeader: ${sHeader}`)",
													"",
													"var objPayload = {",
													"  \"quoteId\": pm.environment.get('quoteId'),",
													"  \"transactionId\": pm.environment.get('transactionId'),",
													"  \"payer\": {",
													"    \"partyIdInfo\": {",
													"      \"partyIdType\": \"MSISDN\",",
													"      \"partyIdentifier\": pm.variables.get('SIMPAYER_MSISDN'),",
													"      \"fspId\": pm.environment.get('SIMPAYER_NAME')",
													"    },",
													"    \"personalInfo\": {",
													"      \"complexName\": {",
													"        \"firstName\": \"Mats\",",
													"        \"lastName\": \"Hagman\"",
													"      },",
													"      \"dateOfBirth\": \"1983-10-25\"",
													"    }",
													"  },",
													"  \"payee\": {",
													"    \"partyIdInfo\": {",
													"      \"partyIdType\": \"MSISDN\",",
													"      \"partyIdentifier\": pm.environment.get('SIMPAYEE_MSISDN'),",
													"      \"fspId\": pm.environment.get('SIMPAYEE_NAME')",
													"    }",
													"  },",
													"  \"amountType\": \"SEND\",",
													"  \"amount\": {",
													"    \"amount\": \"60\",",
													"    \"currency\": pm.environment.get('SIMPAYER_CURRENCY')",
													"  },",
													"  \"transactionType\": {",
													"    \"scenario\": \"TRANSFER\",",
													"    \"initiator\": \"PAYER\",",
													"    \"initiatorType\": \"CONSUMER\"",
													"  },",
													"  \"note\": \"hej\"",
													"}",
													"",
													"var sPayload = JSON.stringify(objPayload)",
													"console.log(`sPayload: ${sPayload}`)",
													"pm.variables.set(\"quoteRequest\", sPayload);",
													"var token = KJUR.jws.JWS.sign(\"RS256\", sHeader, sPayload, pm.environment.get('SIMPAYER_JWS_KEY'));",
													"console.log(`token: ${token}`)",
													"",
													"// var encodedHeaders = btoa(sHeader)",
													"",
													"// var ofspiopSignature = {signature: vSignature, protectedHeader: encodedHeaders}",
													"// var token = JSON.stringify(ofspiopSignature)",
													"",
													"const [ protectedHeaderBase64, , signature ] = token.split('.');",
													"",
													"const signatureObject = {",
													"    signature: signature.replace('\"', ''),",
													"    protectedHeader: protectedHeaderBase64.replace('\"', '')",
													"};",
													"",
													"console.log(JSON.stringify(signatureObject))",
													"",
													"pm.variables.set('fspiopSignature',JSON.stringify(signatureObject))",
													"",
													"",
													"",
													"",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"id": "43eaf182-7e8a-4b0b-b961-128d15b6518b",
												"exec": [
													"pm.test(\"Status code is 202\", function () {",
													"    pm.response.to.have.status(202);",
													"});",
													"",
													"// Check the request that Switch forwards to payeefsp",
													"setTimeout(function () {",
													"  pm.sendRequest(pm.environment.get(\"SIMPAYER_SDK_TESTAPI_URL\")+\"/callbacks/\"+pm.environment.get(\"quoteId\"), function (err, response)  {",
													"          if(response.responseSize !== 0) {",
													"              ",
													"            var jsonData = response.json().data;",
													"",
													"            console.log(jsonData)",
													"            ",
													"            pm.test(\"Check Modified request - Duplicate Quote before expire time\", function () {",
													"                pm.expect(jsonData.errorInformation.errorDescription).to.include('Modified request');",
													"            });",
													"            ",
													"            pm.test(\"Check Error code 3106\", function () {",
													"                pm.expect(jsonData.errorInformation.errorCode).to.eql('3106');",
													"            });",
													"                ",
													"          } else {",
													"              pm.test(\"Quote FAILED\", function () {",
													"                throw new Error('Did not receive request on payee side');",
													"              });",
													"          }",
													"  });",
													"}, pm.environment.get(\"SET_TIMEOUT_QUOTES\"))",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{SIMPAYER_BEARER_TOKEN}}",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Accept",
												"value": "application/vnd.interoperability.quotes+json;version=1.0"
											},
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"value": "application/vnd.interoperability.quotes+json;version=1.0",
												"type": "text"
											},
											{
												"key": "Date",
												"value": "{{quoteDate}}"
											},
											{
												"key": "FSPIOP-Source",
												"value": "{{SIMPAYER_NAME}}"
											},
											{
												"key": "FSPIOP-Destination",
												"value": "{{SIMPAYEE_NAME}}"
											},
											{
												"key": "FSPIOP-Signature",
												"value": "{{fspiopSignature}}",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{{quoteRequest}}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{HOST_QUOTING_SERVICE}}/quotes",
											"host": [
												"{{HOST_QUOTING_SERVICE}}"
											],
											"path": [
												"quotes"
											]
										}
									},
									"response": []
								},
								{
									"name": "Send Quote_SEND - 12 - Validate After Expire Time w Duplicate Quote Id",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "77f4b53a-5c5c-4c05-821c-c61286b82d92",
												"exec": [
													"var navigator = {}; //fake a navigator object for the lib",
													"var window = {}; //fake a window object for the lib",
													"eval(pm.environment.get('jrsassign'));",
													"",
													"",
													"var uuid = require('uuid');",
													"var generatedUUID = uuid.v4();",
													"generatedUUID = uuid.v4();",
													"pm.environment.set('transactionId', generatedUUID);",
													"pm.variables.set('quoteDate', (new Date()).toUTCString());",
													"",
													"var oHeader = {alg: \"RS256\", \"FSPIOP-Source\":pm.environment.get('SIMPAYER_NAME'),\"FSPIOP-Destination\":pm.environment.get('SIMPAYEE_NAME'), \"FSPIOP-URI\":\"/quotes\", \"FSPIOP-HTTP-Method\":\"POST\", \"Date\":pm.variables.get('quoteDate')};",
													"var sHeader = JSON.stringify(oHeader);",
													"console.log(`sHeader: ${sHeader}`)",
													"",
													"var objPayload = {",
													"  \"quoteId\": pm.environment.get('quoteId'),",
													"  \"transactionId\": pm.environment.get('transactionId'),",
													"  \"payer\": {",
													"    \"partyIdInfo\": {",
													"      \"partyIdType\": \"MSISDN\",",
													"      \"partyIdentifier\": pm.variables.get('SIMPAYER_MSISDN'),",
													"      \"fspId\": pm.environment.get('SIMPAYER_NAME')",
													"    },",
													"    \"personalInfo\": {",
													"      \"complexName\": {",
													"        \"firstName\": \"Mats\",",
													"        \"lastName\": \"Hagman\"",
													"      },",
													"      \"dateOfBirth\": \"1983-10-25\"",
													"    }",
													"  },",
													"  \"payee\": {",
													"    \"partyIdInfo\": {",
													"      \"partyIdType\": \"MSISDN\",",
													"      \"partyIdentifier\": pm.environment.get('SIMPAYEE_MSISDN'),",
													"      \"fspId\": pm.environment.get('SIMPAYEE_NAME')",
													"    }",
													"  },",
													"  \"amountType\": \"SEND\",",
													"  \"amount\": {",
													"    \"amount\": \"60\",",
													"    \"currency\": pm.environment.get('SIMPAYER_CURRENCY')",
													"  },",
													"  \"transactionType\": {",
													"    \"scenario\": \"TRANSFER\",",
													"    \"initiator\": \"PAYER\",",
													"    \"initiatorType\": \"CONSUMER\"",
													"  },",
													"  \"note\": \"hej\"",
													"}",
													"",
													"setTimeout(function () {",
													"  pm.sendRequest('www.google.com', function (err, response) {}",
													"    );",
													"}, 3000)",
													"",
													"var sPayload = JSON.stringify(objPayload)",
													"console.log(`sPayload: ${sPayload}`)",
													"pm.variables.set(\"quoteRequest\", sPayload);",
													"var token = KJUR.jws.JWS.sign(\"RS256\", sHeader, sPayload, pm.environment.get('SIMPAYER_JWS_KEY'));",
													"console.log(`token: ${token}`)",
													"",
													"// var encodedHeaders = btoa(sHeader)",
													"",
													"// var ofspiopSignature = {signature: vSignature, protectedHeader: encodedHeaders}",
													"// var token = JSON.stringify(ofspiopSignature)",
													"",
													"const [ protectedHeaderBase64, , signature ] = token.split('.');",
													"",
													"const signatureObject = {",
													"    signature: signature.replace('\"', ''),",
													"    protectedHeader: protectedHeaderBase64.replace('\"', '')",
													"};",
													"",
													"console.log(JSON.stringify(signatureObject))",
													"",
													"pm.variables.set('fspiopSignature',JSON.stringify(signatureObject))",
													"",
													"",
													"",
													"",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"id": "c2fef853-beaa-42b1-8614-d598c676faa5",
												"exec": [
													"pm.test(\"Status code is 202\", function () {",
													"    pm.response.to.have.status(202);",
													"});",
													"",
													"// Check the request that Switch forwards to payeefsp",
													"setTimeout(function () {",
													"  pm.sendRequest(pm.environment.get(\"SIMPAYER_SDK_TESTAPI_URL\")+\"/callbacks/\"+pm.environment.get(\"quoteId\"), function (err, response)  {",
													"          if(response.responseSize !== 0) {",
													"              ",
													"            var jsonData = response.json().data;",
													"            ",
													"            pm.test(\"Check Modified request - Duplicate Quote before expire time\", function () {",
													"                pm.expect(jsonData.errorInformation.errorDescription).to.include('Modified request');",
													"            });",
													"            ",
													"            pm.test(\"Check Error code 3106\", function () {",
													"                pm.expect(jsonData.errorInformation.errorCode).to.eql('3106');",
													"            });",
													"                ",
													"          } else {",
													"              pm.test(\"Quote FAILED\", function () {",
													"                throw new Error('Did not receive request on payee side');",
													"              });",
													"          }",
													"  });",
													"}, pm.environment.get(\"SET_TIMEOUT_QUOTES\"))",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{SIMPAYER_BEARER_TOKEN}}",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Accept",
												"value": "application/vnd.interoperability.quotes+json;version=1.0"
											},
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"value": "application/vnd.interoperability.quotes+json;version=1.0",
												"type": "text"
											},
											{
												"key": "Date",
												"value": "{{quoteDate}}"
											},
											{
												"key": "FSPIOP-Source",
												"value": "{{SIMPAYER_NAME}}"
											},
											{
												"key": "FSPIOP-Destination",
												"value": "{{SIMPAYEE_NAME}}"
											},
											{
												"key": "FSPIOP-Signature",
												"value": "{{fspiopSignature}}",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{{quoteRequest}}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{HOST_QUOTING_SERVICE}}/quotes",
											"host": [
												"{{HOST_QUOTING_SERVICE}}"
											],
											"path": [
												"quotes"
											]
										}
									},
									"response": []
								}
							],
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "32a2c24c-62c4-4b50-a3d6-e3518db9044f",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "bf980086-af25-4c27-b510-e11e9d2300f4",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						},
						{
							"name": "bug8-DuplicateQuoteId",
							"item": [
								{
									"name": "Send Quote_SEND",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "359bd99b-7a9f-48f0-8ea4-ef505e25620d",
												"exec": [
													"var navigator = {}; ",
													"var window = {}; ",
													"eval(pm.environment.get('jrsassign'));",
													"",
													"",
													"var uuid = require('uuid');",
													"var generatedUUID = uuid.v4();",
													"pm.environment.set('quoteId', generatedUUID);",
													"generatedUUID = uuid.v4();",
													"pm.environment.set('transactionId', generatedUUID);",
													"",
													"pm.variables.set('quoteDate', (new Date()).toUTCString());",
													"",
													"var oHeader = {alg: \"RS256\", \"FSPIOP-Source\":pm.environment.get('SIMPAYER_NAME'),\"FSPIOP-Destination\":pm.environment.get('SIMPAYEE_NAME'), \"FSPIOP-URI\":\"/quotes\", \"FSPIOP-HTTP-Method\":\"POST\", \"Date\":pm.variables.get('quoteDate')};",
													"var sHeader = JSON.stringify(oHeader);",
													"console.log(`sHeader: ${sHeader}`)",
													"",
													"var objPayload = {",
													"  \"quoteId\": pm.environment.get('quoteId'),",
													"  \"transactionId\": pm.environment.get('transactionId'),",
													"  \"payer\": {",
													"    \"partyIdInfo\": {",
													"      \"partyIdType\": \"MSISDN\",",
													"      \"partyIdentifier\": pm.variables.get('SIMPAYER_MSISDN'),",
													"      \"fspId\": pm.environment.get('SIMPAYER_NAME')",
													"    },",
													"    \"personalInfo\": {",
													"      \"complexName\": {",
													"        \"firstName\": \"Mats\",",
													"        \"lastName\": \"Hagman\"",
													"      },",
													"      \"dateOfBirth\": \"1983-10-25\"",
													"    }",
													"  },",
													"  \"payee\": {",
													"    \"partyIdInfo\": {",
													"      \"partyIdType\": \"MSISDN\",",
													"      \"partyIdentifier\": pm.environment.get('SIMPAYEE_MSISDN'),",
													"      \"fspId\": pm.environment.get('SIMPAYEE_NAME')",
													"    }",
													"  },",
													"  \"amountType\": \"SEND\",",
													"  \"amount\": {",
													"    \"amount\": \"60\",",
													"    \"currency\": pm.environment.get('SIMPAYER_CURRENCY')",
													"  },",
													"  \"transactionType\": {",
													"    \"scenario\": \"TRANSFER\",",
													"    \"initiator\": \"PAYER\",",
													"    \"initiatorType\": \"CONSUMER\"",
													"  },",
													"  \"note\": \"hej\"",
													"}",
													"",
													"var sPayload = JSON.stringify(objPayload)",
													"console.log(`sPayload: ${sPayload}`)",
													"pm.variables.set(\"quoteRequest\", sPayload);",
													"var token = KJUR.jws.JWS.sign(\"RS256\", sHeader, sPayload, pm.environment.get('SIMPAYER_JWS_KEY'));",
													"console.log(`token: ${token}`)",
													"",
													"// var encodedHeaders = btoa(sHeader)",
													"",
													"// var ofspiopSignature = {signature: vSignature, protectedHeader: encodedHeaders}",
													"// var token = JSON.stringify(ofspiopSignature)",
													"",
													"const [ protectedHeaderBase64, , signature ] = token.split('.');",
													"",
													"const signatureObject = {",
													"    signature: signature.replace('\"', ''),",
													"    protectedHeader: protectedHeaderBase64.replace('\"', '')",
													"};",
													"",
													"console.log(JSON.stringify(signatureObject))",
													"",
													"pm.variables.set('fspiopSignature',JSON.stringify(signatureObject))"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"id": "027ff017-6231-48e4-94a1-1aa238c40558",
												"exec": [
													"pm.test(\"Status code is 202\", function () {",
													"    pm.response.to.have.status(202);",
													"});",
													"",
													"//Check the request that Switch forwards to payeefsp",
													"// setTimeout(function () {",
													"//   pm.sendRequest(pm.environment.get(\"HOST_SIMULATOR\")+\"/payeefsp/requests/\"+pm.variables.get(\"quoteId\"), function (err, response) {",
													"//           if(response.responseSize !== 0) {",
													"              ",
													"//               //Check the Headers",
													"//               var headers = response.json().headers;",
													"              ",
													"//                 pm.test(\"payeefsp fspiop-source is payerfsp\", function () {",
													"//                     pm.expect(headers['fspiop-source']).to.eql('payerfsp');",
													"//                 });",
													"                ",
													"//                 pm.test(\"payeefsp fspiop-destination is payerfsp\", function () {",
													"//                     pm.expect(headers['fspiop-destination']).to.eql('payeefsp');",
													"//                 });",
													"                ",
													"//                 pm.test(\"payeefsp fspiop-signature is same as sent in the request\", function () {",
													"//                     pm.expect(headers['fspiop-signature']).to.eql(pm.environment.get(\"fspiop-signature\"));",
													"//                 });",
													"                ",
													"//                 pm.test(\"payeefsp accept is same as sent in the request\", function () {",
													"//                     pm.expect(headers['accept']).to.eql('application/vnd.interoperability.quotes+json;version=1.0');",
													"//                 });",
													"                ",
													"//                 pm.test(\"payeefsp content-typeis same as sent in the request\", function () {",
													"//                     pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.quotes+json;version=1.0');",
													"//                 });",
													"                ",
													"//           } else {",
													"//               pm.test(\"Quote FAILED\", function () {",
													"//                 throw new Error('Did not receive request on payee side');",
													"//               });",
													"//               postman.setNextRequest(null)",
													"//           }",
													"//   });",
													"// }, 1100)",
													"",
													"// //Check Data on payer side",
													"// setTimeout(function () {",
													"//   pm.sendRequest(pm.environment.get(\"HOST_SIMULATOR\")+\"/payerfsp/callbacks/\"+pm.variables.get(\"quoteId\"), function (err, response) {",
													"//       if(response.responseSize !== 0) {",
													"//           //Checking headers",
													"//             var headers = response.json().headers;",
													"//             pm.test(\"payerfsp fspiop-source is payeefsp\", function () {",
													"//                 pm.expect(headers['fspiop-source']).to.eql('payeefsp');",
													"//             });",
													"            ",
													"//             pm.test(\"payerfsp fspiop-destination is payerfsp\", function () {",
													"//                 pm.expect(headers['fspiop-destination']).to.eql('payerfsp');",
													"//             });",
													"            ",
													"//             pm.test(\"payerfsp content-type should be application/vnd.interoperability.quotes+json;version=1.0\", function () {",
													"//                 pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.quotes+json;version=1.0');",
													"//             });",
													"            ",
													"//             pm.test(\"payerfsp accept is empty\", function () {",
													"//                 pm.expect(headers['accept']).to.eql(undefined);",
													"//             });",
													"            ",
													"            ",
													"            ",
													"//             //Validate protected header inside Signature",
													"//             var {signature,protectedHeader} = JSON.parse(headers['fspiop-signature'])",
													"//             var decodedProtectedHeaders = JSON.parse(atob(protectedHeader))",
													"//             console.log('decodedProtectedHeaders:',decodedProtectedHeaders)",
													"            ",
													"//             // pm.test(\"FSPIOP-Signature signature is returned\", function () {",
													"//             //     pm.expect(signature).to.eql(pm.environment.get(\"payeefsp-signature\"));",
													"//             // });",
													"            ",
													"//             pm.test(\"FSPIOP-Signature Protected Header alg to be RS256\", function () {",
													"//                 pm.expect(decodedProtectedHeaders['alg']).to.eql('RS256');",
													"//             });",
													"//             pm.test(\"FSPIOP-Signature Protected Header FSPIOP-URI to be /quotes/\"+pm.environment.get(\"quoteId\"), function () {",
													"//                 pm.expect(decodedProtectedHeaders['FSPIOP-URI']).to.eql('/quotes/'+pm.environment.get(\"quoteId\"));",
													"//             });",
													"            ",
													"",
													"//             pm.test(\"FSPIOP-Signature Protected Header FSPIOP-HTTP-Method to be PUT\", function () {",
													"//                 pm.expect(decodedProtectedHeaders['FSPIOP-HTTP-Method']).to.eql('PUT');",
													"//             });",
													"//             pm.test(\"FSPIOP-Signature Protected Header FSPIOP-Source to be mojaloop-sdk\", function () {",
													"//                 pm.expect(decodedProtectedHeaders['FSPIOP-Source']).to.eql('payeefsp');",
													"//             });",
													"//             pm.test(\"FSPIOP-Signature Protected Header FSPIOP-Destination to be payerfsp\", function () {",
													"//                 pm.expect(decodedProtectedHeaders['FSPIOP-Destination']).to.eql('payerfsp');",
													"//             });",
													"//             pm.test(\"FSPIOP-Signature Protected Header Date is present\", function () {",
													"//                 pm.expect(decodedProtectedHeaders['Date']).to.not.eql(undefined);",
													"//             });",
													"           ",
													"//             pm.test(\"payerfsp FSPIOP-URI to be /quotes/\"+pm.environment.get(\"quoteId\"), function () {",
													"//                 pm.expect(headers['fspiop-uri']).to.eql('/quotes/'+pm.environment.get(\"quoteId\"));",
													"//             });",
													"            ",
													"//             pm.test(\"payerfsp fspiop-http-method is PUT\", function () {",
													"//                 pm.expect(headers['fspiop-http-method']).to.eql('PUT');",
													"//             });",
													"            ",
													"//             var jsonData = response.json().data;",
													"            ",
													"//           pm.test(\"Response fees is returned\", function () {",
													"//                 pm.expect(jsonData.payeeFspFee.amount).equal(\"1\");",
													"                ",
													"//             });",
													"//             pm.test(\"Response Commission is returned\", function () {",
													"//                 pm.expect(jsonData.payeeFspCommission.amount).equal(\"1\");",
													"                ",
													"//             });",
													"            ",
													"//             pm.test(\"Response ilpPacket is not undefined\", function () {",
													"//                 pm.expect(jsonData.ilpPacket).not.equal(undefined);",
													"//                 pm.environment.set(\"ilpPacket\", jsonData.ilpPacket);",
													"//             });",
													"       ",
													"//           pm.test(\"Response condition is not undefined\", function () {",
													"//               pm.expect(jsonData.condition).not.equal(undefined);",
													"//               pm.environment.set(\"condition\", jsonData.condition);",
													"//           });",
													"//       } else {",
													"//           pm.test(\"Quote FAILED\", function () {",
													"//             throw new Error('Did not receive response');",
													"//           });",
													"",
													"//       }",
													"       ",
													"//   });",
													"// }, 1000)",
													"",
													"",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{SIMPAYER_BEARER_TOKEN}}",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Accept",
												"value": "application/vnd.interoperability.quotes+json;version=1.0"
											},
											{
												"key": "Content-Type",
												"value": "application/vnd.interoperability.quotes+json;version=1.0"
											},
											{
												"key": "Date",
												"value": "{{quoteDate}}"
											},
											{
												"key": "FSPIOP-Source",
												"value": "{{SIMPAYER_NAME}}"
											},
											{
												"key": "FSPIOP-Destination",
												"value": "{{SIMPAYEE_NAME}}"
											},
											{
												"key": "FSPIOP-Signature",
												"value": "{{fspiopSignature}}",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{{quoteRequest}}"
										},
										"url": {
											"raw": "{{HOST_QUOTING_SERVICE}}/quotes",
											"host": [
												"{{HOST_QUOTING_SERVICE}}"
											],
											"path": [
												"quotes"
											]
										}
									},
									"response": []
								},
								{
									"name": "Send Quote_SEND - 8 - Duplicate QuoteId",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "bafd3bde-3209-422e-8903-a15d7bec43fa",
												"exec": [
													"var navigator = {}; ",
													"var window = {}; ",
													"eval(pm.environment.get('jrsassign'));",
													"",
													"",
													"var uuid = require('uuid');",
													"var generatedUUID = uuid.v4();",
													"generatedUUID = uuid.v4();",
													"pm.environment.set('transactionId', generatedUUID);",
													"",
													"pm.variables.set('quoteDate', (new Date()).toUTCString());",
													"",
													"var oHeader = {alg: \"RS256\", \"FSPIOP-Source\":pm.environment.get('SIMPAYER_NAME'),\"FSPIOP-Destination\":pm.environment.get('SIMPAYEE_NAME'), \"FSPIOP-URI\":\"/quotes\", \"FSPIOP-HTTP-Method\":\"POST\", \"Date\":pm.variables.get('quoteDate')};",
													"var sHeader = JSON.stringify(oHeader);",
													"console.log(`sHeader: ${sHeader}`)",
													"",
													"var objPayload = {",
													"  \"quoteId\": pm.environment.get('quoteId'),",
													"  \"transactionId\": pm.environment.get('transactionId'),",
													"  \"payer\": {",
													"    \"partyIdInfo\": {",
													"      \"partyIdType\": \"MSISDN\",",
													"      \"partyIdentifier\": pm.variables.get('SIMPAYER_MSISDN'),",
													"      \"fspId\": pm.environment.get('SIMPAYER_NAME')",
													"    },",
													"    \"personalInfo\": {",
													"      \"complexName\": {",
													"        \"firstName\": \"Mats\",",
													"        \"lastName\": \"Hagman\"",
													"      },",
													"      \"dateOfBirth\": \"1983-10-25\"",
													"    }",
													"  },",
													"  \"payee\": {",
													"    \"partyIdInfo\": {",
													"      \"partyIdType\": \"MSISDN\",",
													"      \"partyIdentifier\": pm.environment.get('SIMPAYEE_MSISDN'),",
													"      \"fspId\": pm.environment.get('SIMPAYEE_NAME')",
													"    }",
													"  },",
													"  \"amountType\": \"SEND\",",
													"  \"amount\": {",
													"    \"amount\": \"60\",",
													"    \"currency\": pm.environment.get('SIMPAYER_CURRENCY')",
													"  },",
													"  \"transactionType\": {",
													"    \"scenario\": \"TRANSFER\",",
													"    \"initiator\": \"PAYER\",",
													"    \"initiatorType\": \"CONSUMER\"",
													"  },",
													"  \"note\": \"hej\"",
													"}",
													"",
													"var sPayload = JSON.stringify(objPayload)",
													"console.log(`sPayload: ${sPayload}`)",
													"pm.variables.set(\"quoteRequest\", sPayload);",
													"var token = KJUR.jws.JWS.sign(\"RS256\", sHeader, sPayload, pm.environment.get('SIMPAYER_JWS_KEY'));",
													"console.log(`token: ${token}`)",
													"",
													"// var encodedHeaders = btoa(sHeader)",
													"",
													"// var ofspiopSignature = {signature: vSignature, protectedHeader: encodedHeaders}",
													"// var token = JSON.stringify(ofspiopSignature)",
													"",
													"const [ protectedHeaderBase64, , signature ] = token.split('.');",
													"",
													"const signatureObject = {",
													"    signature: signature.replace('\"', ''),",
													"    protectedHeader: protectedHeaderBase64.replace('\"', '')",
													"};",
													"",
													"console.log(JSON.stringify(signatureObject))",
													"",
													"pm.variables.set('fspiopSignature',JSON.stringify(signatureObject))"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"id": "8e6298af-f3bf-4c31-bccb-ea6becf1afa0",
												"exec": [
													"pm.test(\"Status code is 202\", function () {",
													"    pm.response.to.have.status(202);",
													"});",
													"",
													"//Check Data on payer side",
													"setTimeout(function () {",
													"  pm.sendRequest(pm.environment.get(\"SIMPAYER_SDK_TESTAPI_URL\")+\"/callbacks/\"+pm.environment.get(\"quoteId\"), function (err, response) {",
													"      if(response.responseSize !== 0) {",
													"            ",
													"            var jsonData = response.json().data;",
													"            ",
													"            pm.test(\"Check Modified request - Duplicate Quote\", function () {",
													"                pm.expect(jsonData.errorInformation.errorDescription).to.include('Modified request');",
													"            });",
													"            ",
													"            pm.test(\"Check Error code 3106\", function () {",
													"                pm.expect(jsonData.errorInformation.errorCode).to.eql('3106');",
													"            });",
													"            ",
													"      } else {",
													"          pm.test(\"Quote FAILED\", function () {",
													"            throw new Error('Did not receive response');",
													"          });",
													"",
													"      }",
													"       ",
													"  });",
													"}, pm.environment.get(\"SET_TIMEOUT_QUOTES\"))"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{SIMPAYER_BEARER_TOKEN}}",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Accept",
												"value": "application/vnd.interoperability.quotes+json;version=1.0"
											},
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"type": "text",
												"value": "application/vnd.interoperability.quotes+json;version=1.0"
											},
											{
												"key": "Date",
												"value": "{{quoteDate}}"
											},
											{
												"key": "FSPIOP-Source",
												"value": "{{SIMPAYER_NAME}}"
											},
											{
												"key": "FSPIOP-Destination",
												"value": "{{SIMPAYEE_NAME}}"
											},
											{
												"key": "FSPIOP-Signature",
												"type": "text",
												"value": "{{fspiopSignature}}"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{{quoteRequest}}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{HOST_QUOTING_SERVICE}}/quotes",
											"host": [
												"{{HOST_QUOTING_SERVICE}}"
											],
											"path": [
												"quotes"
											]
										}
									},
									"response": []
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						},
						{
							"name": "Send Quote_SEND - Missing content-type version",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "89602763-9d64-4d83-b638-3414398e8d11",
										"exec": [
											"var navigator = {}; ",
											"var window = {}; ",
											"eval(pm.environment.get('jrsassign'));",
											"",
											"",
											"var uuid = require('uuid');",
											"var generatedUUID = uuid.v4();",
											"pm.environment.set('quoteId', generatedUUID);",
											"generatedUUID = uuid.v4();",
											"pm.environment.set('transactionId', generatedUUID);",
											"",
											"pm.variables.set('quoteDate', (new Date()).toUTCString());",
											"",
											"var oHeader = {alg: \"RS256\", \"FSPIOP-Source\":pm.environment.get('SIMPAYER_NAME'),\"FSPIOP-Destination\":pm.environment.get('SIMPAYEE_NAME'), \"FSPIOP-URI\":\"/quotes\", \"FSPIOP-HTTP-Method\":\"POST\", \"Date\":pm.variables.get('quoteDate')};",
											"var sHeader = JSON.stringify(oHeader);",
											"console.log(`sHeader: ${sHeader}`)",
											"",
											"var objPayload = {",
											"  \"quoteId\": pm.environment.get('quoteId'),",
											"  \"transactionId\": pm.environment.get('transactionId'),",
											"  \"payer\": {",
											"    \"partyIdInfo\": {",
											"      \"partyIdType\": \"MSISDN\",",
											"      \"partyIdentifier\": pm.variables.get('SIMPAYER_MSISDN'),",
											"      \"fspId\": pm.environment.get('SIMPAYER_NAME')",
											"    },",
											"    \"personalInfo\": {",
											"      \"complexName\": {",
											"        \"firstName\": \"Mats\",",
											"        \"lastName\": \"Hagman\"",
											"      },",
											"      \"dateOfBirth\": \"1983-10-25\"",
											"    }",
											"  },",
											"  \"payee\": {",
											"    \"partyIdInfo\": {",
											"      \"partyIdType\": \"MSISDN\",",
											"      \"partyIdentifier\": pm.environment.get('SIMPAYEE_MSISDN'),",
											"      \"fspId\": pm.environment.get('SIMPAYEE_NAME')",
											"    }",
											"  },",
											"  \"amountType\": \"SEND\",",
											"  \"amount\": {",
											"    \"amount\": \"60\",",
											"    \"currency\": pm.environment.get('SIMPAYER_CURRENCY')",
											"  },",
											"  \"transactionType\": {",
											"    \"scenario\": \"TRANSFER\",",
											"    \"initiator\": \"PAYER\",",
											"    \"initiatorType\": \"CONSUMER\"",
											"  },",
											"  \"note\": \"hej\"",
											"}",
											"",
											"var sPayload = JSON.stringify(objPayload)",
											"console.log(`sPayload: ${sPayload}`)",
											"pm.variables.set(\"quoteRequest\", sPayload);",
											"var token = KJUR.jws.JWS.sign(\"RS256\", sHeader, sPayload, pm.environment.get('SIMPAYER_JWS_KEY'));",
											"console.log(`token: ${token}`)",
											"",
											"// var encodedHeaders = btoa(sHeader)",
											"",
											"// var ofspiopSignature = {signature: vSignature, protectedHeader: encodedHeaders}",
											"// var token = JSON.stringify(ofspiopSignature)",
											"",
											"const [ protectedHeaderBase64, , signature ] = token.split('.');",
											"",
											"const signatureObject = {",
											"    signature: signature.replace('\"', ''),",
											"    protectedHeader: protectedHeaderBase64.replace('\"', '')",
											"};",
											"",
											"console.log(JSON.stringify(signatureObject))",
											"",
											"pm.variables.set('fspiopSignature',JSON.stringify(signatureObject))"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "56b9c277-1d58-446f-bcf6-2bf3349f9407",
										"exec": [
											"const jsonData = pm.response.json();",
											"",
											"pm.test(\"Status code is 400\", function () {",
											"    pm.response.to.have.status(400);",
											"});",
											"",
											"pm.test(\"Check Missing mandatory element\", function () {",
											"    pm.expect(jsonData.errorInformation.errorDescription).to.include('Malformed syntax');",
											"});",
											"",
											"pm.test(\"Check Error code 3101\", function () {",
											"    pm.expect(jsonData.errorInformation.errorCode).to.eql('3101');",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{SIMPAYER_BEARER_TOKEN}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Accept",
										"value": "application/vnd.interoperability.quotes+json;version=1.0"
									},
									{
										"key": "Content-Type",
										"value": "application/vnd.interoperability.quotes+json;"
									},
									{
										"key": "Date",
										"value": "{{quoteDate}}"
									},
									{
										"key": "FSPIOP-Source",
										"value": "{{SIMPAYER_NAME}}"
									},
									{
										"key": "FSPIOP-Destination",
										"value": "{{SIMPAYEE_NAME}}"
									},
									{
										"key": "FSPIOP-Signature",
										"type": "text",
										"value": "{{fspiopSignature}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{{quoteRequest}}"
								},
								"url": {
									"raw": "{{HOST_QUOTING_SERVICE}}/quotes",
									"host": [
										"{{HOST_QUOTING_SERVICE}}"
									],
									"path": [
										"quotes"
									]
								}
							},
							"response": []
						},
						{
							"name": "Send Quote_SEND - 6a - Invalid Content Type - application/json",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "b1a1f4e2-f5fc-49c1-a070-2ff8ef7dd22f",
										"exec": [
											"var navigator = {}; ",
											"var window = {}; ",
											"eval(pm.environment.get('jrsassign'));",
											"",
											"",
											"var uuid = require('uuid');",
											"var generatedUUID = uuid.v4();",
											"pm.environment.set('quoteId', generatedUUID);",
											"generatedUUID = uuid.v4();",
											"pm.environment.set('transactionId', generatedUUID);",
											"",
											"pm.variables.set('quoteDate', (new Date()).toUTCString());",
											"",
											"var oHeader = {alg: \"RS256\", \"FSPIOP-Source\":pm.environment.get('SIMPAYER_NAME'),\"FSPIOP-Destination\":pm.environment.get('SIMPAYEE_NAME'), \"FSPIOP-URI\":\"/quotes\", \"FSPIOP-HTTP-Method\":\"POST\", \"Date\":pm.variables.get('quoteDate')};",
											"var sHeader = JSON.stringify(oHeader);",
											"console.log(`sHeader: ${sHeader}`)",
											"",
											"var objPayload = {",
											"  \"quoteId\": pm.environment.get('quoteId'),",
											"  \"transactionId\": pm.environment.get('transactionId'),",
											"  \"payer\": {",
											"    \"partyIdInfo\": {",
											"      \"partyIdType\": \"MSISDN\",",
											"      \"partyIdentifier\": pm.variables.get('SIMPAYER_MSISDN'),",
											"      \"fspId\": pm.environment.get('SIMPAYER_NAME')",
											"    },",
											"    \"personalInfo\": {",
											"      \"complexName\": {",
											"        \"firstName\": \"Mats\",",
											"        \"lastName\": \"Hagman\"",
											"      },",
											"      \"dateOfBirth\": \"1983-10-25\"",
											"    }",
											"  },",
											"  \"payee\": {",
											"    \"partyIdInfo\": {",
											"      \"partyIdType\": \"MSISDN\",",
											"      \"partyIdentifier\": pm.environment.get('SIMPAYEE_MSISDN'),",
											"      \"fspId\": pm.environment.get('SIMPAYEE_NAME')",
											"    }",
											"  },",
											"  \"amountType\": \"SEND\",",
											"  \"amount\": {",
											"    \"amount\": \"60\",",
											"    \"currency\": pm.environment.get('SIMPAYER_CURRENCY')",
											"  },",
											"  \"transactionType\": {",
											"    \"scenario\": \"TRANSFER\",",
											"    \"initiator\": \"PAYER\",",
											"    \"initiatorType\": \"CONSUMER\"",
											"  },",
											"  \"note\": \"hej\"",
											"}",
											"",
											"var sPayload = JSON.stringify(objPayload)",
											"console.log(`sPayload: ${sPayload}`)",
											"pm.variables.set(\"quoteRequest\", sPayload);",
											"var token = KJUR.jws.JWS.sign(\"RS256\", sHeader, sPayload, pm.environment.get('SIMPAYER_JWS_KEY'));",
											"console.log(`token: ${token}`)",
											"",
											"// var encodedHeaders = btoa(sHeader)",
											"",
											"// var ofspiopSignature = {signature: vSignature, protectedHeader: encodedHeaders}",
											"// var token = JSON.stringify(ofspiopSignature)",
											"",
											"const [ protectedHeaderBase64, , signature ] = token.split('.');",
											"",
											"const signatureObject = {",
											"    signature: signature.replace('\"', ''),",
											"    protectedHeader: protectedHeaderBase64.replace('\"', '')",
											"};",
											"",
											"console.log(JSON.stringify(signatureObject))",
											"",
											"pm.variables.set('fspiopSignature',JSON.stringify(signatureObject))"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "d6e31f4e-5ade-4988-a01d-965febf7f684",
										"exec": [
											"const jsonData = pm.response.json();",
											"",
											"pm.test(\"Status code is 400\", function () {",
											"    pm.response.to.have.status(400);",
											"});",
											"",
											"pm.test(\"Check Missing mandatory element\", function () {",
											"    pm.expect(jsonData.errorInformation.errorDescription).to.include('Malformed syntax');",
											"});",
											"",
											"pm.test(\"Check Error code 3101\", function () {",
											"    pm.expect(jsonData.errorInformation.errorCode).to.eql('3101');",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{SIMPAYER_BEARER_TOKEN}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Accept",
										"value": "application/vnd.interoperability.quotes+json;version=1.0"
									},
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "Date",
										"value": "{{quoteDate}}"
									},
									{
										"key": "FSPIOP-Source",
										"value": "{{SIMPAYER_NAME}}"
									},
									{
										"key": "FSPIOP-Destination",
										"value": "{{SIMPAYEE_NAME}}"
									},
									{
										"key": "FSPIOP-Signature",
										"type": "text",
										"value": "{{fspiopSignature}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{{quoteRequest}}"
								},
								"url": {
									"raw": "{{HOST_QUOTING_SERVICE}}/quotes",
									"host": [
										"{{HOST_QUOTING_SERVICE}}"
									],
									"path": [
										"quotes"
									]
								}
							},
							"response": []
						},
						{
							"name": "Send Quote_SEND - 6b - Invalid Content Type - xml",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "b399f5a7-a032-4288-a254-26ead58bac46",
										"exec": [
											"var navigator = {}; ",
											"var window = {}; ",
											"eval(pm.environment.get('jrsassign'));",
											"",
											"",
											"var uuid = require('uuid');",
											"var generatedUUID = uuid.v4();",
											"pm.environment.set('quoteId', generatedUUID);",
											"generatedUUID = uuid.v4();",
											"pm.environment.set('transactionId', generatedUUID);",
											"",
											"pm.variables.set('quoteDate', (new Date()).toUTCString());",
											"",
											"var oHeader = {alg: \"RS256\", \"FSPIOP-Source\":pm.environment.get('SIMPAYER_NAME'),\"FSPIOP-Destination\":pm.environment.get('SIMPAYEE_NAME'), \"FSPIOP-URI\":\"/quotes\", \"FSPIOP-HTTP-Method\":\"POST\", \"Date\":pm.variables.get('quoteDate')};",
											"var sHeader = JSON.stringify(oHeader);",
											"console.log(`sHeader: ${sHeader}`)",
											"",
											"var objPayload = {",
											"  \"quoteId\": pm.environment.get('quoteId'),",
											"  \"transactionId\": pm.environment.get('transactionId'),",
											"  \"payer\": {",
											"    \"partyIdInfo\": {",
											"      \"partyIdType\": \"MSISDN\",",
											"      \"partyIdentifier\": pm.variables.get('SIMPAYER_MSISDN'),",
											"      \"fspId\": pm.environment.get('SIMPAYER_NAME')",
											"    },",
											"    \"personalInfo\": {",
											"      \"complexName\": {",
											"        \"firstName\": \"Mats\",",
											"        \"lastName\": \"Hagman\"",
											"      },",
											"      \"dateOfBirth\": \"1983-10-25\"",
											"    }",
											"  },",
											"  \"payee\": {",
											"    \"partyIdInfo\": {",
											"      \"partyIdType\": \"MSISDN\",",
											"      \"partyIdentifier\": pm.environment.get('SIMPAYEE_MSISDN'),",
											"      \"fspId\": pm.environment.get('SIMPAYEE_NAME')",
											"    }",
											"  },",
											"  \"amountType\": \"SEND\",",
											"  \"amount\": {",
											"    \"amount\": \"60\",",
											"    \"currency\": pm.environment.get('SIMPAYER_CURRENCY')",
											"  },",
											"  \"transactionType\": {",
											"    \"scenario\": \"TRANSFER\",",
											"    \"initiator\": \"PAYER\",",
											"    \"initiatorType\": \"CONSUMER\"",
											"  },",
											"  \"note\": \"hej\"",
											"}",
											"",
											"var sPayload = JSON.stringify(objPayload)",
											"console.log(`sPayload: ${sPayload}`)",
											"pm.variables.set(\"quoteRequest\", sPayload);",
											"var token = KJUR.jws.JWS.sign(\"RS256\", sHeader, sPayload, pm.environment.get('SIMPAYER_JWS_KEY'));",
											"console.log(`token: ${token}`)",
											"",
											"// var encodedHeaders = btoa(sHeader)",
											"",
											"// var ofspiopSignature = {signature: vSignature, protectedHeader: encodedHeaders}",
											"// var token = JSON.stringify(ofspiopSignature)",
											"",
											"const [ protectedHeaderBase64, , signature ] = token.split('.');",
											"",
											"const signatureObject = {",
											"    signature: signature.replace('\"', ''),",
											"    protectedHeader: protectedHeaderBase64.replace('\"', '')",
											"};",
											"",
											"console.log(JSON.stringify(signatureObject))",
											"",
											"pm.variables.set('fspiopSignature',JSON.stringify(signatureObject))"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "ac170c22-c2f4-4e0e-bbde-1a833100b316",
										"exec": [
											"pm.test(\"Status code is 400\", function () {",
											"    pm.response.to.have.status(400);",
											"});",
											"",
											"var jsonData = pm.response.json();",
											"            ",
											"pm.test(\"Check Invalid content Type - Check XML type \", function () {",
											"    pm.expect(jsonData.errorInformation.errorDescription).to.include('Unsupported Media Type');",
											"});            ",
											"            ",
											"pm.test(\"Check Error code 3101\", function () {",
											"    pm.expect(jsonData.errorInformation.errorCode).to.eql('3101');",
											"});",
											"",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{SIMPAYER_BEARER_TOKEN}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Accept",
										"value": "application/vnd.interoperability.quotes+json;version=1.0"
									},
									{
										"key": "Content-Type",
										"value": "application/xml"
									},
									{
										"key": "Date",
										"value": "{{quoteDate}}"
									},
									{
										"key": "FSPIOP-Source",
										"value": "{{SIMPAYER_NAME}}"
									},
									{
										"key": "FSPIOP-Destination",
										"value": "{{SIMPAYEE_NAME}}"
									},
									{
										"key": "FSPIOP-Signature",
										"type": "text",
										"value": "{{fspiopSignature}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{{quoteRequest}}"
								},
								"url": {
									"raw": "{{HOST_QUOTING_SERVICE}}/quotes",
									"host": [
										"{{HOST_QUOTING_SERVICE}}"
									],
									"path": [
										"quotes"
									]
								}
							},
							"response": []
						},
						{
							"name": "Send Quote_SEND - 6c - Invalid Content Type - empty body",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "6a6f8518-2303-43d0-ad24-616316881c4c",
										"exec": [
											"var navigator = {}; ",
											"var window = {}; ",
											"eval(pm.environment.get('jrsassign'));",
											"",
											"",
											"var uuid = require('uuid');",
											"var generatedUUID = uuid.v4();",
											"pm.environment.set('quoteId', generatedUUID);",
											"generatedUUID = uuid.v4();",
											"pm.environment.set('transactionId', generatedUUID);",
											"",
											"pm.variables.set('quoteDate', (new Date()).toUTCString());",
											"",
											"var oHeader = {alg: \"RS256\", \"FSPIOP-Source\":pm.environment.get('SIMPAYER_NAME'),\"FSPIOP-Destination\":pm.environment.get('SIMPAYEE_NAME'), \"FSPIOP-URI\":\"/quotes\", \"FSPIOP-HTTP-Method\":\"POST\", \"Date\":pm.variables.get('quoteDate')};",
											"var sHeader = JSON.stringify(oHeader);",
											"console.log(`sHeader: ${sHeader}`)",
											"",
											"var objPayload = {",
											"",
											"}",
											"",
											"var sPayload = JSON.stringify(objPayload)",
											"console.log(`sPayload: ${sPayload}`)",
											"pm.variables.set(\"quoteRequest\", sPayload);",
											"var token = KJUR.jws.JWS.sign(\"RS256\", sHeader, sPayload, pm.environment.get('SIMPAYER_JWS_KEY'));",
											"console.log(`token: ${token}`)",
											"",
											"// var encodedHeaders = btoa(sHeader)",
											"",
											"// var ofspiopSignature = {signature: vSignature, protectedHeader: encodedHeaders}",
											"// var token = JSON.stringify(ofspiopSignature)",
											"",
											"const [ protectedHeaderBase64, , signature ] = token.split('.');",
											"",
											"const signatureObject = {",
											"    signature: signature.replace('\"', ''),",
											"    protectedHeader: protectedHeaderBase64.replace('\"', '')",
											"};",
											"",
											"console.log(JSON.stringify(signatureObject))",
											"",
											"pm.variables.set('fspiopSignature',JSON.stringify(signatureObject))"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "c7b99fb8-a114-47be-9c3d-b58f251b7d2d",
										"exec": [
											"pm.test(\"Status code is 400\", function () {",
											"    pm.response.to.have.status(400);",
											"});",
											"",
											"var jsonData = pm.response.json();",
											"            ",
											"pm.test(\"Check Invalid content Type - Check XML type \", function () {",
											"    pm.expect(jsonData.errorInformation.errorDescription).to.include('Unsupported Media Type');",
											"});            ",
											"            ",
											"pm.test(\"Check Error code 3101\", function () {",
											"    pm.expect(jsonData.errorInformation.errorCode).to.eql('3101');",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{SIMPAYER_BEARER_TOKEN}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Accept",
										"value": "application/vnd.interoperability.quotes+json;version=1.0"
									},
									{
										"key": "Content-Type",
										"value": "application/xml"
									},
									{
										"key": "Date",
										"value": "{{quoteDate}}"
									},
									{
										"key": "FSPIOP-Source",
										"value": "{{SIMPAYER_NAME}}"
									},
									{
										"key": "FSPIOP-Destination",
										"value": "{{SIMPAYEE_NAME}}"
									},
									{
										"key": "FSPIOP-Signature",
										"type": "text",
										"value": "{{fspiopSignature}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{{quoteRequest}}"
								},
								"url": {
									"raw": "{{HOST_QUOTING_SERVICE}}/quotes",
									"host": [
										"{{HOST_QUOTING_SERVICE}}"
									],
									"path": [
										"quotes"
									]
								}
							},
							"response": []
						},
						{
							"name": "Send Quote_SEND - 7 - Missing Payer PartyIdType",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "a178295d-ffff-4be4-9197-ea8b670aa451",
										"exec": [
											"var navigator = {}; ",
											"var window = {}; ",
											"eval(pm.environment.get('jrsassign'));",
											"",
											"",
											"var uuid = require('uuid');",
											"var generatedUUID = uuid.v4();",
											"pm.environment.set('quoteId', generatedUUID);",
											"generatedUUID = uuid.v4();",
											"pm.environment.set('transactionId', generatedUUID);",
											"",
											"pm.variables.set('quoteDate', (new Date()).toUTCString());",
											"",
											"var oHeader = {alg: \"RS256\", \"FSPIOP-Source\":pm.environment.get('SIMPAYER_NAME'),\"FSPIOP-Destination\":pm.environment.get('SIMPAYEE_NAME'), \"FSPIOP-URI\":\"/quotes\", \"FSPIOP-HTTP-Method\":\"POST\", \"Date\":pm.variables.get('quoteDate')};",
											"var sHeader = JSON.stringify(oHeader);",
											"console.log(`sHeader: ${sHeader}`)",
											"",
											"var objPayload = {",
											"  \"quoteId\": pm.environment.get('quoteId'),",
											"  \"transactionId\": pm.environment.get('transactionId'),",
											"  \"payer\": {",
											"    \"partyIdInfo\": {",
											"      \"partyIdentifier\": pm.variables.get('SIMPAYER_MSISDN'),",
											"      \"fspId\": pm.environment.get('SIMPAYER_NAME')",
											"    },",
											"    \"personalInfo\": {",
											"      \"complexName\": {",
											"        \"firstName\": \"Mats\",",
											"        \"lastName\": \"Hagman\"",
											"      },",
											"      \"dateOfBirth\": \"1983-10-25\"",
											"    }",
											"  },",
											"  \"payee\": {",
											"    \"partyIdInfo\": {",
											"      \"partyIdType\": \"MSISDN\",",
											"      \"partyIdentifier\": pm.environment.get('SIMPAYEE_MSISDN'),",
											"      \"fspId\": pm.environment.get('SIMPAYEE_NAME')",
											"    }",
											"  },",
											"  \"amountType\": \"SEND\",",
											"  \"amount\": {",
											"    \"amount\": \"60\",",
											"    \"currency\": pm.environment.get('SIMPAYER_CURRENCY')",
											"  },",
											"  \"transactionType\": {",
											"    \"scenario\": \"TRANSFER\",",
											"    \"initiator\": \"PAYER\",",
											"    \"initiatorType\": \"CONSUMER\"",
											"  },",
											"  \"note\": \"hej\"",
											"}",
											"",
											"var sPayload = JSON.stringify(objPayload)",
											"console.log(`sPayload: ${sPayload}`)",
											"pm.variables.set(\"quoteRequest\", sPayload);",
											"var token = KJUR.jws.JWS.sign(\"RS256\", sHeader, sPayload, pm.environment.get('SIMPAYER_JWS_KEY'));",
											"console.log(`token: ${token}`)",
											"",
											"// var encodedHeaders = btoa(sHeader)",
											"",
											"// var ofspiopSignature = {signature: vSignature, protectedHeader: encodedHeaders}",
											"// var token = JSON.stringify(ofspiopSignature)",
											"",
											"const [ protectedHeaderBase64, , signature ] = token.split('.');",
											"",
											"const signatureObject = {",
											"    signature: signature.replace('\"', ''),",
											"    protectedHeader: protectedHeaderBase64.replace('\"', '')",
											"};",
											"",
											"console.log(JSON.stringify(signatureObject))",
											"",
											"pm.variables.set('fspiopSignature',JSON.stringify(signatureObject))"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "25462b49-e1bb-493e-9485-f4730283d123",
										"exec": [
											"pm.test(\"Status code is 400\", function () {",
											"    pm.response.to.have.status(400);",
											"});",
											"",
											"var jsonData = pm.response.json();",
											"            ",
											"pm.test(\"Check Missing mandatory element error\", function () {",
											"    pm.expect(jsonData.errorInformation.errorDescription).to.include('Missing mandatory element ');",
											"});         ",
											"",
											"pm.test(\"Check Missing payer partyIdType\", function () {",
											"    pm.expect(jsonData.errorInformation.errorDescription).to.include('partyIdType');",
											"});        ",
											"            ",
											"pm.test(\"Check Error code 3102\", function () {",
											"    pm.expect(jsonData.errorInformation.errorCode).to.eql('3102');",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{SIMPAYER_BEARER_TOKEN}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Accept",
										"value": "application/vnd.interoperability.quotes+json;version=1.0"
									},
									{
										"key": "Content-Type",
										"value": "application/vnd.interoperability.quotes+json;version=1.0"
									},
									{
										"key": "Date",
										"value": "{{quoteDate}}"
									},
									{
										"key": "FSPIOP-Source",
										"value": "{{SIMPAYER_NAME}}"
									},
									{
										"key": "FSPIOP-Destination",
										"value": "{{SIMPAYEE_NAME}}"
									},
									{
										"key": "FSPIOP-Signature",
										"value": "{{fspiopSignature}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{{quoteRequest}}"
								},
								"url": {
									"raw": "{{HOST_QUOTING_SERVICE}}/quotes",
									"host": [
										"{{HOST_QUOTING_SERVICE}}"
									],
									"path": [
										"quotes"
									]
								}
							},
							"response": []
						},
						{
							"name": "Send Quote_SEND - 7 - Missing Payer PartyIdentifier",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "ca781e20-d080-4216-846a-62be81c590b8",
										"exec": [
											"var navigator = {}; ",
											"var window = {}; ",
											"eval(pm.environment.get('jrsassign'));",
											"",
											"",
											"var uuid = require('uuid');",
											"var generatedUUID = uuid.v4();",
											"pm.environment.set('quoteId', generatedUUID);",
											"generatedUUID = uuid.v4();",
											"pm.environment.set('transactionId', generatedUUID);",
											"",
											"pm.variables.set('quoteDate', (new Date()).toUTCString());",
											"",
											"var oHeader = {alg: \"RS256\", \"FSPIOP-Source\":pm.environment.get('SIMPAYER_NAME'),\"FSPIOP-Destination\":pm.environment.get('SIMPAYEE_NAME'), \"FSPIOP-URI\":\"/quotes\", \"FSPIOP-HTTP-Method\":\"POST\", \"Date\":pm.variables.get('quoteDate')};",
											"var sHeader = JSON.stringify(oHeader);",
											"console.log(`sHeader: ${sHeader}`)",
											"",
											"var objPayload = {",
											"  \"quoteId\": pm.environment.get('quoteId'),",
											"  \"transactionId\": pm.environment.get('transactionId'),",
											"  \"payer\": {",
											"    \"partyIdInfo\": {",
											"      \"partyIdType\": \"MSISDN\",",
											"      \"fspId\": pm.environment.get('SIMPAYER_NAME')",
											"    },",
											"    \"personalInfo\": {",
											"      \"complexName\": {",
											"        \"firstName\": \"Mats\",",
											"        \"lastName\": \"Hagman\"",
											"      },",
											"      \"dateOfBirth\": \"1983-10-25\"",
											"    }",
											"  },",
											"  \"payee\": {",
											"    \"partyIdInfo\": {",
											"      \"partyIdType\": \"MSISDN\",",
											"      \"partyIdentifier\": pm.environment.get('SIMPAYEE_MSISDN'),",
											"      \"fspId\": pm.environment.get('SIMPAYEE_NAME')",
											"    }",
											"  },",
											"  \"amountType\": \"SEND\",",
											"  \"amount\": {",
											"    \"amount\": \"60\",",
											"    \"currency\": pm.environment.get('SIMPAYER_CURRENCY')",
											"  },",
											"  \"transactionType\": {",
											"    \"scenario\": \"TRANSFER\",",
											"    \"initiator\": \"PAYER\",",
											"    \"initiatorType\": \"CONSUMER\"",
											"  },",
											"  \"note\": \"hej\"",
											"}",
											"",
											"var sPayload = JSON.stringify(objPayload)",
											"console.log(`sPayload: ${sPayload}`)",
											"pm.variables.set(\"quoteRequest\", sPayload);",
											"var token = KJUR.jws.JWS.sign(\"RS256\", sHeader, sPayload, pm.environment.get('SIMPAYER_JWS_KEY'));",
											"console.log(`token: ${token}`)",
											"",
											"// var encodedHeaders = btoa(sHeader)",
											"",
											"// var ofspiopSignature = {signature: vSignature, protectedHeader: encodedHeaders}",
											"// var token = JSON.stringify(ofspiopSignature)",
											"",
											"const [ protectedHeaderBase64, , signature ] = token.split('.');",
											"",
											"const signatureObject = {",
											"    signature: signature.replace('\"', ''),",
											"    protectedHeader: protectedHeaderBase64.replace('\"', '')",
											"};",
											"",
											"console.log(JSON.stringify(signatureObject))",
											"",
											"pm.variables.set('fspiopSignature',JSON.stringify(signatureObject))"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "c44dc320-bc16-486b-a0a0-25914702735d",
										"exec": [
											"pm.test(\"Status code is 400\", function () {",
											"    pm.response.to.have.status(400);",
											"});",
											"",
											"var jsonData = pm.response.json();",
											"",
											"pm.test(\"Check Missing mandatory element error\", function () {",
											"    pm.expect(jsonData.errorInformation.errorDescription).to.include('Missing mandatory element ');",
											"});         ",
											"",
											"pm.test(\"Check Missing payer partyIdentifier\", function () {",
											"    pm.expect(jsonData.errorInformation.errorDescription).to.include('partyIdentifier');",
											"});        ",
											"            ",
											"pm.test(\"Check Error code 3102\", function () {",
											"    pm.expect(jsonData.errorInformation.errorCode).to.eql('3102');",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{SIMPAYER_BEARER_TOKEN}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Accept",
										"value": "application/vnd.interoperability.quotes+json;version=1.0"
									},
									{
										"key": "Content-Type",
										"value": "application/vnd.interoperability.quotes+json;version=1.0"
									},
									{
										"key": "Date",
										"value": "{{quoteDate}}"
									},
									{
										"key": "FSPIOP-Source",
										"value": "{{SIMPAYER_NAME}}"
									},
									{
										"key": "FSPIOP-Destination",
										"value": "{{SIMPAYEE_NAME}}"
									},
									{
										"key": "FSPIOP-Signature",
										"value": "{{fspiopSignature}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{{quoteRequest}}"
								},
								"url": {
									"raw": "{{HOST_QUOTING_SERVICE}}/quotes",
									"host": [
										"{{HOST_QUOTING_SERVICE}}"
									],
									"path": [
										"quotes"
									]
								}
							},
							"response": []
						},
						{
							"name": "Send Quote_SEND - 7 - Missing Payee PartyIdentifier",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "6a85cbbc-5471-4813-921e-637022b25df8",
										"exec": [
											"var navigator = {}; ",
											"var window = {}; ",
											"eval(pm.environment.get('jrsassign'));",
											"",
											"",
											"var uuid = require('uuid');",
											"var generatedUUID = uuid.v4();",
											"pm.environment.set('quoteId', generatedUUID);",
											"generatedUUID = uuid.v4();",
											"pm.environment.set('transactionId', generatedUUID);",
											"",
											"pm.variables.set('quoteDate', (new Date()).toUTCString());",
											"",
											"var oHeader = {alg: \"RS256\", \"FSPIOP-Source\":pm.environment.get('SIMPAYER_NAME'),\"FSPIOP-Destination\":pm.environment.get('SIMPAYEE_NAME'), \"FSPIOP-URI\":\"/quotes\", \"FSPIOP-HTTP-Method\":\"POST\", \"Date\":pm.variables.get('quoteDate')};",
											"var sHeader = JSON.stringify(oHeader);",
											"console.log(`sHeader: ${sHeader}`)",
											"",
											"var objPayload = {",
											"  \"quoteId\": pm.environment.get('quoteId'),",
											"  \"transactionId\": pm.environment.get('transactionId'),",
											"  \"payer\": {",
											"    \"partyIdInfo\": {",
											"      \"partyIdType\": \"MSISDN\",",
											"      \"partyIdentifier\": pm.variables.get('SIMPAYER_MSISDN'),",
											"      \"fspId\": pm.environment.get('SIMPAYER_NAME')",
											"    },",
											"    \"personalInfo\": {",
											"      \"complexName\": {",
											"        \"firstName\": \"Mats\",",
											"        \"lastName\": \"Hagman\"",
											"      },",
											"      \"dateOfBirth\": \"1983-10-25\"",
											"    }",
											"  },",
											"  \"payee\": {",
											"    \"partyIdInfo\": {",
											"      \"partyIdType\": \"MSISDN\",",
											"      \"fspId\": pm.environment.get('SIMPAYEE_NAME')",
											"    }",
											"  },",
											"  \"amountType\": \"SEND\",",
											"  \"amount\": {",
											"    \"amount\": \"60\",",
											"    \"currency\": pm.environment.get('SIMPAYER_CURRENCY')",
											"  },",
											"  \"transactionType\": {",
											"    \"scenario\": \"TRANSFER\",",
											"    \"initiator\": \"PAYER\",",
											"    \"initiatorType\": \"CONSUMER\"",
											"  },",
											"  \"note\": \"hej\"",
											"}",
											"",
											"var sPayload = JSON.stringify(objPayload)",
											"console.log(`sPayload: ${sPayload}`)",
											"pm.variables.set(\"quoteRequest\", sPayload);",
											"var token = KJUR.jws.JWS.sign(\"RS256\", sHeader, sPayload, pm.environment.get('SIMPAYER_JWS_KEY'));",
											"console.log(`token: ${token}`)",
											"",
											"// var encodedHeaders = btoa(sHeader)",
											"",
											"// var ofspiopSignature = {signature: vSignature, protectedHeader: encodedHeaders}",
											"// var token = JSON.stringify(ofspiopSignature)",
											"",
											"const [ protectedHeaderBase64, , signature ] = token.split('.');",
											"",
											"const signatureObject = {",
											"    signature: signature.replace('\"', ''),",
											"    protectedHeader: protectedHeaderBase64.replace('\"', '')",
											"};",
											"",
											"console.log(JSON.stringify(signatureObject))",
											"",
											"pm.variables.set('fspiopSignature',JSON.stringify(signatureObject))"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "312a6a7e-b516-4372-aea3-6444410bdd03",
										"exec": [
											"pm.test(\"Status code is 400\", function () {",
											"    pm.response.to.have.status(400);",
											"});",
											"",
											"var jsonData = pm.response.json();",
											"            ",
											"",
											"pm.test(\"Check Missing mandatory element error\", function () {",
											"    pm.expect(jsonData.errorInformation.errorDescription).to.include('Missing mandatory element ');",
											"});         ",
											"",
											"pm.test(\"Check Missing payer partyIdentifier\", function () {",
											"    pm.expect(jsonData.errorInformation.errorDescription).to.include('partyIdentifier');",
											"});        ",
											"",
											"pm.test(\"Check Error code 3102\", function () {",
											"    pm.expect(jsonData.errorInformation.errorCode).to.eql('3102');",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{SIMPAYER_BEARER_TOKEN}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Accept",
										"value": "application/vnd.interoperability.quotes+json;version=1.0"
									},
									{
										"key": "Content-Type",
										"value": "application/vnd.interoperability.quotes+json;version=1.0"
									},
									{
										"key": "Date",
										"value": "{{quoteDate}}"
									},
									{
										"key": "FSPIOP-Source",
										"value": "{{SIMPAYER_NAME}}"
									},
									{
										"key": "FSPIOP-Destination",
										"value": "{{SIMPAYEE_NAME}}"
									},
									{
										"key": "FSPIOP-Signature",
										"value": "{{fspiopSignature}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{{quoteRequest}}"
								},
								"url": {
									"raw": "{{HOST_QUOTING_SERVICE}}/quotes",
									"host": [
										"{{HOST_QUOTING_SERVICE}}"
									],
									"path": [
										"quotes"
									]
								}
							},
							"response": []
						},
						{
							"name": "Send Quote_SEND - 7 - Missing Payee PartyIdType",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "16478a8c-5a0c-4e1f-bf4b-14df79422b4b",
										"exec": [
											"var navigator = {}; ",
											"var window = {}; ",
											"eval(pm.environment.get('jrsassign'));",
											"",
											"",
											"var uuid = require('uuid');",
											"var generatedUUID = uuid.v4();",
											"pm.environment.set('quoteId', generatedUUID);",
											"generatedUUID = uuid.v4();",
											"pm.environment.set('transactionId', generatedUUID);",
											"",
											"pm.variables.set('quoteDate', (new Date()).toUTCString());",
											"",
											"var oHeader = {alg: \"RS256\", \"FSPIOP-Source\":pm.environment.get('SIMPAYER_NAME'),\"FSPIOP-Destination\":pm.environment.get('SIMPAYEE_NAME'), \"FSPIOP-URI\":\"/quotes\", \"FSPIOP-HTTP-Method\":\"POST\", \"Date\":pm.variables.get('quoteDate')};",
											"var sHeader = JSON.stringify(oHeader);",
											"console.log(`sHeader: ${sHeader}`)",
											"",
											"var objPayload = {",
											"  \"quoteId\": pm.environment.get('quoteId'),",
											"  \"transactionId\": pm.environment.get('transactionId'),",
											"  \"payer\": {",
											"    \"partyIdInfo\": {",
											"      \"partyIdType\": \"MSISDN\",",
											"      \"partyIdentifier\": pm.variables.get('SIMPAYER_MSISDN'),",
											"      \"fspId\": pm.environment.get('SIMPAYER_NAME')",
											"    },",
											"    \"personalInfo\": {",
											"      \"complexName\": {",
											"        \"firstName\": \"Mats\",",
											"        \"lastName\": \"Hagman\"",
											"      },",
											"      \"dateOfBirth\": \"1983-10-25\"",
											"    }",
											"  },",
											"  \"payee\": {",
											"    \"partyIdInfo\": {",
											"      \"partyIdentifier\": pm.environment.get('SIMPAYEE_MSISDN'),",
											"      \"fspId\": pm.environment.get('SIMPAYEE_NAME')",
											"    }",
											"  },",
											"  \"amountType\": \"SEND\",",
											"  \"amount\": {",
											"    \"amount\": \"60\",",
											"    \"currency\": pm.environment.get('SIMPAYER_CURRENCY')",
											"  },",
											"  \"transactionType\": {",
											"    \"scenario\": \"TRANSFER\",",
											"    \"initiator\": \"PAYER\",",
											"    \"initiatorType\": \"CONSUMER\"",
											"  },",
											"  \"note\": \"hej\"",
											"}",
											"",
											"var sPayload = JSON.stringify(objPayload)",
											"console.log(`sPayload: ${sPayload}`)",
											"pm.variables.set(\"quoteRequest\", sPayload);",
											"var token = KJUR.jws.JWS.sign(\"RS256\", sHeader, sPayload, pm.environment.get('SIMPAYER_JWS_KEY'));",
											"console.log(`token: ${token}`)",
											"",
											"// var encodedHeaders = btoa(sHeader)",
											"",
											"// var ofspiopSignature = {signature: vSignature, protectedHeader: encodedHeaders}",
											"// var token = JSON.stringify(ofspiopSignature)",
											"",
											"const [ protectedHeaderBase64, , signature ] = token.split('.');",
											"",
											"const signatureObject = {",
											"    signature: signature.replace('\"', ''),",
											"    protectedHeader: protectedHeaderBase64.replace('\"', '')",
											"};",
											"",
											"console.log(JSON.stringify(signatureObject))",
											"",
											"pm.variables.set('fspiopSignature',JSON.stringify(signatureObject))"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "95b03cae-e831-4149-9e93-6e6d9ae6deee",
										"exec": [
											"pm.test(\"Status code is 400\", function () {",
											"    pm.response.to.have.status(400);",
											"});",
											"",
											"var jsonData = pm.response.json();",
											"            ",
											"pm.test(\"Check Missing mandatory element error\", function () {",
											"    pm.expect(jsonData.errorInformation.errorDescription).to.include('Missing mandatory element ');",
											"});         ",
											"",
											"pm.test(\"Check Missing payer partyIdType\", function () {",
											"    pm.expect(jsonData.errorInformation.errorDescription).to.include('partyIdType');",
											"});            ",
											"            ",
											"pm.test(\"Check Error code 3102\", function () {",
											"    pm.expect(jsonData.errorInformation.errorCode).to.eql('3102');",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{SIMPAYER_BEARER_TOKEN}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Accept",
										"value": "application/vnd.interoperability.quotes+json;version=1.0"
									},
									{
										"key": "Content-Type",
										"value": "application/vnd.interoperability.quotes+json;version=1.0"
									},
									{
										"key": "Date",
										"value": "{{quoteDate}}"
									},
									{
										"key": "FSPIOP-Source",
										"value": "{{SIMPAYER_NAME}}"
									},
									{
										"key": "FSPIOP-Destination",
										"value": "{{SIMPAYEE_NAME}}"
									},
									{
										"key": "FSPIOP-Signature",
										"type": "text",
										"value": "{{fspiopSignature}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{{quoteRequest}}"
								},
								"url": {
									"raw": "{{HOST_QUOTING_SERVICE}}/quotes",
									"host": [
										"{{HOST_QUOTING_SERVICE}}"
									],
									"path": [
										"quotes"
									]
								}
							},
							"response": []
						},
						{
							"name": "Send Quote_SEND - 9- Destination FSP NOT FOUND",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "c7b7d06f-a332-49aa-9b1b-2a821fda903b",
										"exec": [
											"var navigator = {}; ",
											"var window = {}; ",
											"eval(pm.environment.get('jrsassign'));",
											"",
											"",
											"var uuid = require('uuid');",
											"var generatedUUID = uuid.v4();",
											"pm.environment.set('quoteId', generatedUUID);",
											"generatedUUID = uuid.v4();",
											"pm.environment.set('transactionId', generatedUUID);",
											"",
											"pm.variables.set('quoteDate', (new Date()).toUTCString());",
											"",
											"var oHeader = {alg: \"RS256\", \"FSPIOP-Source\":pm.environment.get('SIMPAYER_NAME'),\"FSPIOP-Destination\":pm.environment.get('SIMPAYEE_NAME'), \"FSPIOP-URI\":\"/quotes\", \"FSPIOP-HTTP-Method\":\"POST\", \"Date\":pm.variables.get('quoteDate')};",
											"var sHeader = JSON.stringify(oHeader);",
											"console.log(`sHeader: ${sHeader}`)",
											"",
											"var objPayload = {",
											"  \"quoteId\": pm.environment.get('quoteId'),",
											"  \"transactionId\": pm.environment.get('transactionId'),",
											"  \"payer\": {",
											"    \"partyIdInfo\": {",
											"      \"partyIdType\": \"MSISDN\",",
											"      \"partyIdentifier\": pm.variables.get('SIMPAYER_MSISDN'),",
											"      \"fspId\": pm.environment.get('SIMPAYER_NAME')",
											"    },",
											"    \"personalInfo\": {",
											"      \"complexName\": {",
											"        \"firstName\": \"Mats\",",
											"        \"lastName\": \"Hagman\"",
											"      },",
											"      \"dateOfBirth\": \"1983-10-25\"",
											"    }",
											"  },",
											"  \"payee\": {",
											"    \"partyIdInfo\": {",
											"      \"partyIdType\": \"MSISDN\",",
											"      \"partyIdentifier\": pm.environment.get('SIMPAYEE_MSISDN'),",
											"      \"fspId\": pm.environment.get('SIMPAYEE_NAME')",
											"    }",
											"  },",
											"  \"amountType\": \"SEND\",",
											"  \"amount\": {",
											"    \"amount\": \"60\",",
											"    \"currency\": pm.environment.get('SIMPAYER_CURRENCY')",
											"  },",
											"  \"transactionType\": {",
											"    \"scenario\": \"TRANSFER\",",
											"    \"initiator\": \"PAYER\",",
											"    \"initiatorType\": \"CONSUMER\"",
											"  },",
											"  \"note\": \"hej\"",
											"}",
											"",
											"var sPayload = JSON.stringify(objPayload)",
											"console.log(`sPayload: ${sPayload}`)",
											"pm.variables.set(\"quoteRequest\", sPayload);",
											"var token = KJUR.jws.JWS.sign(\"RS256\", sHeader, sPayload, pm.environment.get('SIMPAYER_JWS_KEY'));",
											"console.log(`token: ${token}`)",
											"",
											"// var encodedHeaders = btoa(sHeader)",
											"",
											"// var ofspiopSignature = {signature: vSignature, protectedHeader: encodedHeaders}",
											"// var token = JSON.stringify(ofspiopSignature)",
											"",
											"const [ protectedHeaderBase64, , signature ] = token.split('.');",
											"",
											"const signatureObject = {",
											"    signature: signature.replace('\"', ''),",
											"    protectedHeader: protectedHeaderBase64.replace('\"', '')",
											"};",
											"",
											"console.log(JSON.stringify(signatureObject))",
											"",
											"pm.variables.set('fspiopSignature',JSON.stringify(signatureObject))"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "3302cc72-1416-4dbb-8c1a-96d96d209a9d",
										"exec": [
											"pm.test(\"Status code is 202\", function () {",
											"    pm.response.to.have.status(202);",
											"});",
											"",
											"console.log(\"Test - FSP not found\")",
											"",
											"//Check Data on payer side",
											"setTimeout(function () {",
											"  pm.sendRequest(pm.environment.get(\"SIMPAYER_SDK_TESTAPI_URL\")+\"/callbacks/\"+pm.environment.get(\"quoteId\"), function (err, response)  {",
											"      if(response.responseSize !== 0) {",
											"            ",
											"            var jsonData = response.json().data;",
											"            ",
											"            pm.test(\"Check Destination FSP Error - Unsupported participant\", function () {",
											"                pm.expect(jsonData.errorInformation.errorDescription).to.include('Destination FSP Error - Unsupported participant ');",
											"            });",
											"            ",
											"            pm.test(\"Check Error code 3201\", function () {",
											"                pm.expect(jsonData.errorInformation.errorCode).to.eql('3201');",
											"            });",
											"            ",
											"      } else {",
											"          pm.test(\"Quote FAILED\", function () {",
											"            throw new Error('Did not receive response');",
											"          });",
											"",
											"      }",
											"       ",
											"  });",
											"}, pm.environment.get(\"SET_TIMEOUT_QUOTES\"))"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{SIMPAYER_BEARER_TOKEN}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Accept",
										"value": "application/vnd.interoperability.quotes+json;version=1.0"
									},
									{
										"key": "Content-Type",
										"value": "application/vnd.interoperability.quotes+json;version=1.0"
									},
									{
										"key": "Date",
										"value": "{{quoteDate}}"
									},
									{
										"key": "FSPIOP-Source",
										"value": "{{SIMPAYER_NAME}}"
									},
									{
										"key": "FSPIOP-Destination",
										"value": "payeefspNOTFOUND"
									},
									{
										"key": "FSPIOP-Signature",
										"type": "text",
										"value": "{{fspiopSignature}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{{quoteRequest}}"
								},
								"url": {
									"raw": "{{HOST_QUOTING_SERVICE}}/quotes",
									"host": [
										"{{HOST_QUOTING_SERVICE}}"
									],
									"path": [
										"quotes"
									]
								}
							},
							"response": []
						},
						{
							"name": "Send Quote_SEND - 10 - PayeePartyIdentifier NOT FOUND",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "97f302c9-2dd1-4494-a32b-960e6a8cedc9",
										"exec": [
											"var navigator = {}; ",
											"var window = {}; ",
											"eval(pm.environment.get('jrsassign'));",
											"",
											"",
											"var uuid = require('uuid');",
											"var generatedUUID = uuid.v4();",
											"pm.environment.set('quoteId', generatedUUID);",
											"generatedUUID = uuid.v4();",
											"pm.environment.set('transactionId', generatedUUID);",
											"",
											"pm.variables.set('quoteDate', (new Date()).toUTCString());",
											"",
											"var oHeader = {alg: \"RS256\", \"FSPIOP-Source\":pm.environment.get('SIMPAYER_NAME'),\"FSPIOP-Destination\":pm.environment.get('SIMPAYEE_NAME'), \"FSPIOP-URI\":\"/quotes\", \"FSPIOP-HTTP-Method\":\"POST\", \"Date\":pm.variables.get('quoteDate')};",
											"var sHeader = JSON.stringify(oHeader);",
											"console.log(`sHeader: ${sHeader}`)",
											"",
											"var objPayload = {",
											"  \"quoteId\": pm.environment.get('quoteId'),",
											"  \"transactionId\": pm.environment.get('transactionId'),",
											"  \"payer\": {",
											"    \"partyIdInfo\": {",
											"      \"partyIdType\": \"MSISDN\",",
											"      \"partyIdentifier\": \"\",",
											"      \"fspId\": pm.environment.get('SIMPAYER_NAME')",
											"    },",
											"    \"personalInfo\": {",
											"      \"complexName\": {",
											"        \"firstName\": \"Mats\",",
											"        \"lastName\": \"Hagman\"",
											"      },",
											"      \"dateOfBirth\": \"1983-10-25\"",
											"    }",
											"  },",
											"  \"payee\": {",
											"    \"partyIdInfo\": {",
											"      \"partyIdType\": \"MSISDN\",",
											"      \"partyIdentifier\": pm.environment.get('SIMPAYEE_MSISDN'),",
											"      \"fspId\": pm.environment.get('SIMPAYEE_NAME')",
											"    }",
											"  },",
											"  \"amountType\": \"SEND\",",
											"  \"amount\": {",
											"    \"amount\": \"60\",",
											"    \"currency\": pm.environment.get('SIMPAYER_CURRENCY')",
											"  },",
											"  \"transactionType\": {",
											"    \"scenario\": \"TRANSFER\",",
											"    \"initiator\": \"PAYER\",",
											"    \"initiatorType\": \"CONSUMER\"",
											"  },",
											"  \"note\": \"hej\"",
											"}",
											"",
											"var sPayload = JSON.stringify(objPayload)",
											"console.log(`sPayload: ${sPayload}`)",
											"pm.variables.set(\"quoteRequest\", sPayload);",
											"var token = KJUR.jws.JWS.sign(\"RS256\", sHeader, sPayload, pm.environment.get('SIMPAYER_JWS_KEY'));",
											"console.log(`token: ${token}`)",
											"",
											"// var encodedHeaders = btoa(sHeader)",
											"",
											"// var ofspiopSignature = {signature: vSignature, protectedHeader: encodedHeaders}",
											"// var token = JSON.stringify(ofspiopSignature)",
											"",
											"const [ protectedHeaderBase64, , signature ] = token.split('.');",
											"",
											"const signatureObject = {",
											"    signature: signature.replace('\"', ''),",
											"    protectedHeader: protectedHeaderBase64.replace('\"', '')",
											"};",
											"",
											"console.log(JSON.stringify(signatureObject))",
											"",
											"pm.variables.set('fspiopSignature',JSON.stringify(signatureObject))"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "746240bd-7996-4185-a4ef-cd64041bf620",
										"exec": [
											"pm.test(\"Status code is 400\", function () {",
											"    pm.response.to.have.status(400);",
											"});",
											"",
											"var jsonData = pm.response.json();",
											"            ",
											"pm.test(\"Check Generic Validation Error\", function () {",
											"    pm.expect(jsonData.errorInformation.errorDescription).to.include('Generic validation error');",
											"});          ",
											"",
											"pm.test(\"Check partyIdentifier is included in Error description\", function () {",
											"    pm.expect(jsonData.errorInformation.errorDescription).to.include('partyIdentifier');",
											"});     ",
											"            ",
											"pm.test(\"Check Error code 3100\", function () {",
											"    pm.expect(jsonData.errorInformation.errorCode).to.eql('3100');",
											"});",
											"",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{SIMPAYER_BEARER_TOKEN}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Accept",
										"value": "application/vnd.interoperability.quotes+json;version=1.0"
									},
									{
										"key": "Content-Type",
										"value": "application/vnd.interoperability.quotes+json;version=1.0"
									},
									{
										"key": "Date",
										"value": "{{quoteDate}}"
									},
									{
										"key": "FSPIOP-Source",
										"value": "{{SIMPAYER_NAME}}"
									},
									{
										"key": "FSPIOP-Destination",
										"value": "{{SIMPAYEE_NAME}}"
									},
									{
										"key": "FSPIOP-Signature",
										"value": "{{fspiopSignature}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{{quoteRequest}}"
								},
								"url": {
									"raw": "{{HOST_QUOTING_SERVICE}}/quotes",
									"host": [
										"{{HOST_QUOTING_SERVICE}}"
									],
									"path": [
										"quotes"
									]
								}
							},
							"response": []
						},
						{
							"name": "QuotesByID - 11 - Missing Condition Field",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "59203e73-a219-4f85-9382-ad9780ffe00c",
										"exec": [
											"var navigator = {}; ",
											"var window = {}; ",
											"eval(pm.environment.get('jrsassign'));",
											"",
											"",
											"var uuid = require('uuid');",
											"var generatedUUID = uuid.v4();",
											"pm.environment.set('quoteId', generatedUUID);",
											"generatedUUID = uuid.v4();",
											"pm.environment.set('transactionId', generatedUUID);",
											"",
											"pm.variables.set('quoteDate', (new Date()).toUTCString());",
											"pm.variables.set('payerName', 'PayerFirst PayerLast');",
											"pm.variables.set('payerMSISDN', '918381008987');",
											"",
											"pm.variables.set('expectedPayeeFirstName', 'GoldenFirst');",
											"pm.variables.set('expectedPayeeLastName', 'GoldenLast');",
											"pm.variables.set('expectedPayeeDOB', '2010-10-10');",
											"",
											"var oHeader = {alg: \"RS256\", \"FSPIOP-Source\":\"payerfsp\",\"FSPIOP-Destination\":\"payeefsp\", \"FSPIOP-URI\":\"/quotes\", \"FSPIOP-HTTP-Method\":\"POST\", \"Date\":pm.variables.get('quoteDate')};",
											"var sHeader = JSON.stringify(oHeader);",
											"console.log(`sHeader: ${sHeader}`)",
											"",
											"var objPayload = {",
											"  \"transferAmount\": {",
											"  \"amount\": \"11\",",
											"  \"currency\": \"XOF\" },",
											"  \"payeeReceiveAmount\": {",
											"  \"amount\": \"11\",",
											"  \"currency\": \"XOF\"   },",
											"  \"payeeFspCommission\": {",
											"   \"currency\": \"XOF\",",
											"   \"amount\": \"1\"",
											" },",
											"  \"expiration\": \"2019-10-14T20:19:20.741Z\",",
											"  \"ilpPacket\": \"AQAAAAAAAADIEHByaXZhdGUucGF5ZWVmc3CCAiB7InRyYW5zYWN0aW9uSWQiOiIyZGY3NzRlMi1mMWRiLTRmZjctYTQ5NS0yZGRkMzdhZjdjMmMiLCJxdW90ZUlkIjoiMDNhNjA1NTAtNmYyZi00NTU2LThlMDQtMDcwM2UzOWI4N2ZmIiwicGF5ZWUiOnsicGFydHlJZEluZm8iOnsicGFydHlJZFR5cGUiOiJNU0lTRE4iLCJwYXJ0eUlkZW50aWZpZXIiOiIyNzcxMzgwMzkxMyIsImZzcElkIjoicGF5ZWVmc3AifSwicGVyc29uYWxJbmZvIjp7ImNvbXBsZXhOYW1lIjp7fX19LCJwYXllciI6eyJwYXJ0eUlkSW5mbyI6eyJwYXJ0eUlkVHlwZSI6Ik1TSVNETiIsInBhcnR5SWRlbnRpZmllciI6IjI3NzEzODAzOTExIiwiZnNwSWQiOiJwYXllcmZzcCJ9LCJwZXJzb25hbEluZm8iOnsiY29tcGxleE5hbWUiOnt9fX0sImFtb3VudCI6eyJjdXJyZW5jeSI6IlVTRCIsImFtb3VudCI6IjIwMCJ9LCJ0cmFuc2FjdGlvblR5cGUiOnsic2NlbmFyaW8iOiJERVBPU0lUIiwic3ViU2NlbmFyaW8iOiJERVBPU0lUIiwiaW5pdGlhdG9yIjoiUEFZRVIiLCJpbml0aWF0b3JUeXBlIjoiQ09OU1VNRVIiLCJyZWZ1bmRJbmZvIjp7fX19\"",
											"} ",
											"",
											"var sPayload = JSON.stringify(objPayload)",
											"console.log(`sPayload: ${sPayload}`)",
											"pm.variables.set(\"quoteRequest\", sPayload);",
											"var token = KJUR.jws.JWS.sign(\"RS256\", sHeader, sPayload, pm.environment.get('payerfspJWSKey'));",
											"console.log(`token: ${token}`)",
											"",
											"// var encodedHeaders = btoa(sHeader)",
											"",
											"// var ofspiopSignature = {signature: vSignature, protectedHeader: encodedHeaders}",
											"// var token = JSON.stringify(ofspiopSignature)",
											"",
											"const [ protectedHeaderBase64, , signature ] = token.split('.');",
											"",
											"const signatureObject = {",
											"    signature: signature.replace('\"', ''),",
											"    protectedHeader: protectedHeaderBase64.replace('\"', '')",
											"};",
											"",
											"console.log(JSON.stringify(signatureObject))",
											"",
											"pm.variables.set('fspiopSignature',JSON.stringify(signatureObject))",
											"",
											"",
											"",
											"",
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "06f7511d-d2ee-4eeb-8a04-5960cf725805",
										"exec": [
											"pm.test(\"Status code is 400\", function () {",
											"    pm.response.to.have.status(400);",
											"});",
											"",
											"// TODO: uncommented before run in OSS env",
											"// var jsonData = pm.response.json();",
											"            ",
											"// pm.test(\"Check Missing conditional Field- condition is required\", function () {",
											"//     pm.expect(jsonData.errorInformation.errorDescription).to.include('Missing mandatory element');",
											"// });            ",
											"            ",
											"// pm.test(\"Check Error code 3102\", function () {",
											"//     pm.expect(jsonData.errorInformation.errorCode).to.eql('3102');",
											"// });",
											"",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{NORESPONSE_SIMPAYEE_BEARER_TOKEN}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [
									{
										"key": "Accept",
										"value": ""
									},
									{
										"key": "Accept-Encoding",
										"value": "gzip, deflate",
										"disabled": true
									},
									{
										"key": "Cache-Control",
										"value": "no-cache"
									},
									{
										"key": "Connection",
										"value": "keep-alive"
									},
									{
										"key": "Content-Length",
										"value": "1117",
										"disabled": true
									},
									{
										"key": "Content-Type",
										"name": "Content-Type",
										"value": "application/vnd.interoperability.quotes+json;version=1.0",
										"type": "text"
									},
									{
										"key": "Date",
										"value": "{{quoteDate}}"
									},
									{
										"key": "FSPIOP-Destination",
										"value": "{{SIMPAYER_NAME}}"
									},
									{
										"key": "FSPIOP-Source",
										"value": "{{NORESPONSE_SIMPAYEE_NAME}}"
									},
									{
										"key": "Host",
										"value": "http://localhost:3002",
										"disabled": true
									},
									{
										"key": "Postman-Token",
										"value": "a1c5eda9-20eb-4041-8e1a-134f266dee23,a25e5bc7-0cee-4720-9d34-ffd28d08c908",
										"disabled": true
									},
									{
										"key": "User-Agent",
										"value": "PostmanRuntime/7.17.1",
										"disabled": true
									},
									{
										"key": "cache-control",
										"value": "no-cache",
										"disabled": true
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{{quoteRequest}}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{HOST_QUOTING_SERVICE}}/quotes/febf8cff-f0b8-4a09-9a17-e22401fe4332",
									"host": [
										"{{HOST_QUOTING_SERVICE}}"
									],
									"path": [
										"quotes",
										"febf8cff-f0b8-4a09-9a17-e22401fe4332"
									]
								}
							},
							"response": []
						},
						{
							"name": "QuotedById - 13a- 400- Missing Accept header",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "0e45094e-0df9-4ae8-8cbb-3580f40a748b",
										"exec": [
											"pm.test(\"Status code is 400\", function () {",
											"    pm.response.to.have.status(400);",
											"});",
											"",
											"var jsonData = pm.response.json();",
											"            ",
											"pm.test(\"Check Malformed syntax - Invalid accept header\", function () {",
											"    pm.expect(jsonData.errorInformation.errorDescription).to.include('Malformed syntax - Invalid accept header');",
											"});            ",
											"            ",
											"pm.test(\"Check Error code 3101\", function () {",
											"    pm.expect(jsonData.errorInformation.errorCode).to.eql('3101');",
											"});"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "6f609914-cb40-4916-adb4-d11d69d9f7e7",
										"exec": [
											"pm.environment.set('quoteDate', (new Date()).toUTCString());"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{SIMPAYER_BEARER_TOKEN}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/vnd.interoperability.quotes+json;version=1.0"
									},
									{
										"key": "Date",
										"value": "{{quoteDate}}"
									},
									{
										"key": "FSPIOP-Source",
										"type": "text",
										"value": "{{SIMPAYER_NAME}}"
									},
									{
										"key": "FSPIOP-Destination",
										"type": "text",
										"value": "{{SIMPAYEE_NAME}}"
									}
								],
								"url": {
									"raw": "{{HOST_QUOTING_SERVICE}}/quotes/07e92ea7-d655-4f88-925c-4aeefcee80f6",
									"host": [
										"{{HOST_QUOTING_SERVICE}}"
									],
									"path": [
										"quotes",
										"07e92ea7-d655-4f88-925c-4aeefcee80f6"
									]
								},
								"description": "The HTTP request GET /quotes/<ID> is used to get information regarding an earlier created or requested quote. The <ID> in the URI should contain the quoteId that was used for the creation of the quote."
							},
							"response": []
						},
						{
							"name": "QuotesById - 13b - 400-Missing FSPIOP-Source header",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "aae6eeb8-79cf-4acc-84de-76298605de46",
										"exec": [
											"if (pm.environment.get('WS02_OAUTH_ENABLED') === 'true') {",
											"    pm.test(\"Status code is 403\", function () {",
											"        pm.response.to.have.status(403);",
											"    });",
											"} else {",
											"    pm.test(\"Status code is 400\", function () {",
											"        pm.response.to.have.status(400);",
											"    });",
											"",
											"    var jsonData = pm.response.json();",
											"",
											"    pm.test(\"Missing mandatory element error\", function () {",
											"        pm.expect(jsonData.errorInformation.errorDescription).to.include('Missing mandatory element ');",
											"    });",
											"",
											"    pm.test(\"Error message fspiop-source is required\", function () {",
											"        pm.expect(jsonData.errorInformation.errorDescription).to.include('fspiop-source');",
											"    });",
											"",
											"    pm.test(\"Check Error code 3102\", function () {",
											"        pm.expect(jsonData.errorInformation.errorCode).to.eql('3102');",
											"    });",
											"}"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "391c3e93-9c9e-4bb2-bf0d-d554439c70bf",
										"exec": [
											"pm.environment.set('quoteDate', (new Date()).toUTCString());"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{SIMPAYER_BEARER_TOKEN}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Accept",
										"value": "application/vnd.interoperability.quotes+json;version=1.0"
									},
									{
										"key": "Content-Type",
										"value": "application/vnd.interoperability.quotes+json;version=1.0"
									},
									{
										"key": "Date",
										"value": "{{quoteDate}}"
									},
									{
										"key": "FSPIOP-Destination",
										"type": "text",
										"value": "{{SIMPAYEE_NAME}}"
									}
								],
								"url": {
									"raw": "{{HOST_QUOTING_SERVICE}}/quotes/07e92ea7-d655-4f88-925c-4aeefcee80f6",
									"host": [
										"{{HOST_QUOTING_SERVICE}}"
									],
									"path": [
										"quotes",
										"07e92ea7-d655-4f88-925c-4aeefcee80f6"
									]
								},
								"description": "The HTTP request GET /quotes/<ID> is used to get information regarding an earlier created or requested quote. The <ID> in the URI should contain the quoteId that was used for the creation of the quote."
							},
							"response": []
						},
						{
							"name": "QuotesById - 13c - 400-Missing Date header (BUG)",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "96094d42-343d-427e-8e68-a42a5b95a74a",
										"exec": [
											"pm.test(\"Status code is 400\", function () {",
											"    pm.response.to.have.status(400);",
											"});",
											"",
											"var jsonData = pm.response.json();",
											"            ",
											"pm.test(\"Missing mandatory element error\", function () {",
											"    pm.expect(jsonData.errorInformation.errorDescription).to.include('Missing mandatory element ');",
											"});",
											"",
											"pm.test(\"Error message date is required\", function () {",
											"    pm.expect(jsonData.errorInformation.errorDescription).to.include('date');",
											"}); ",
											"            ",
											"pm.test(\"Check Error code 3102\", function () {",
											"    pm.expect(jsonData.errorInformation.errorCode).to.eql('3102');",
											"});"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "49571739-60bd-4a31-8aaf-e95830a63b7d",
										"exec": [
											"pm.environment.set('quoteDate', (new Date()).toUTCString());"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{SIMPAYER_BEARER_TOKEN}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Accept",
										"value": "application/vnd.interoperability.quotes+json;version=1.0"
									},
									{
										"key": "Content-Type",
										"value": "application/vnd.interoperability.quotes+json;version=1.0"
									},
									{
										"key": "FSPIOP-Source",
										"type": "text",
										"value": "{{SIMPAYER_NAME}}"
									},
									{
										"key": "FSPIOP-Destination",
										"type": "text",
										"value": "{{SIMPAYEE_NAME}}"
									}
								],
								"url": {
									"raw": "{{HOST_QUOTING_SERVICE}}/quotes/07e92ea7-d655-4f88-925c-4aeefcee80f6",
									"host": [
										"{{HOST_QUOTING_SERVICE}}"
									],
									"path": [
										"quotes",
										"07e92ea7-d655-4f88-925c-4aeefcee80f6"
									]
								},
								"description": "The HTTP request GET /quotes/<ID> is used to get information regarding an earlier created or requested quote. The <ID> in the URI should contain the quoteId that was used for the creation of the quote."
							},
							"response": []
						},
						{
							"name": "Send Quote_SEND - 14 - Incorrect Switch Version Header",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "a1d1d952-2fb8-4c78-83bb-ffdd1b95f2d3",
										"exec": [
											"var navigator = {}; ",
											"var window = {}; ",
											"eval(pm.environment.get('jrsassign'));",
											"",
											"",
											"var uuid = require('uuid');",
											"var generatedUUID = uuid.v4();",
											"pm.environment.set('quoteId', generatedUUID);",
											"generatedUUID = uuid.v4();",
											"pm.environment.set('transactionId', generatedUUID);",
											"",
											"pm.variables.set('quoteDate', (new Date()).toUTCString());",
											"",
											"var oHeader = {alg: \"RS256\", \"FSPIOP-Source\":pm.environment.get('SIMPAYER_NAME'),\"FSPIOP-Destination\":pm.environment.get('SIMPAYEE_NAME'), \"FSPIOP-URI\":\"/quotes\", \"FSPIOP-HTTP-Method\":\"POST\", \"Date\":pm.variables.get('quoteDate')};",
											"var sHeader = JSON.stringify(oHeader);",
											"console.log(`sHeader: ${sHeader}`)",
											"",
											"var objPayload = {",
											"  \"quoteId\": pm.environment.get('quoteId'),",
											"  \"transactionId\": pm.environment.get('transactionId'),",
											"  \"payer\": {",
											"    \"partyIdInfo\": {",
											"      \"partyIdType\": \"MSISDN\",",
											"      \"partyIdentifier\": pm.variables.get('SIMPAYER_MSISDN'),",
											"      \"fspId\": pm.environment.get('SIMPAYER_NAME')",
											"    },",
											"    \"personalInfo\": {",
											"      \"complexName\": {",
											"        \"firstName\": \"Mats\",",
											"        \"lastName\": \"Hagman\"",
											"      },",
											"      \"dateOfBirth\": \"1983-10-25\"",
											"    }",
											"  },",
											"  \"payee\": {",
											"    \"partyIdInfo\": {",
											"      \"partyIdType\": \"MSISDN\",",
											"      \"partyIdentifier\": pm.environment.get('SIMPAYEE_MSISDN'),",
											"      \"fspId\": pm.environment.get('SIMPAYEE_NAME')",
											"    }",
											"  },",
											"  \"amountType\": \"SEND\",",
											"  \"amount\": {",
											"    \"amount\": \"60\",",
											"    \"currency\": pm.environment.get('SIMPAYER_CURRENCY')",
											"  },",
											"  \"transactionType\": {",
											"    \"scenario\": \"TRANSFER\",",
											"    \"initiator\": \"PAYER\",",
											"    \"initiatorType\": \"CONSUMER\"",
											"  },",
											"  \"note\": \"hej\"",
											"}",
											"",
											"var sPayload = JSON.stringify(objPayload)",
											"console.log(`sPayload: ${sPayload}`)",
											"pm.variables.set(\"quoteRequest\", sPayload);",
											"var token = KJUR.jws.JWS.sign(\"RS256\", sHeader, sPayload, pm.environment.get('SIMPAYER_JWS_KEY'));",
											"console.log(`token: ${token}`)",
											"",
											"// var encodedHeaders = btoa(sHeader)",
											"",
											"// var ofspiopSignature = {signature: vSignature, protectedHeader: encodedHeaders}",
											"// var token = JSON.stringify(ofspiopSignature)",
											"",
											"const [ protectedHeaderBase64, , signature ] = token.split('.');",
											"",
											"const signatureObject = {",
											"    signature: signature.replace('\"', ''),",
											"    protectedHeader: protectedHeaderBase64.replace('\"', '')",
											"};",
											"",
											"console.log(JSON.stringify(signatureObject))",
											"",
											"pm.variables.set('fspiopSignature',JSON.stringify(signatureObject))"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "7ac5930b-dda5-4b19-8809-0fc75a92f682",
										"exec": [
											"pm.test(\"Status code is 406\", function () {",
											"    pm.response.to.have.status(406);",
											"});",
											"",
											"var jsonData = pm.response.json();",
											"            ",
											"pm.test(\"Check Unacceptable version requested\", function () {",
											"    pm.expect(jsonData.errorInformation.errorDescription).to.include('Unacceptable version requested');",
											"});            ",
											"            ",
											"pm.test(\"Check Error code 3001\", function () {",
											"    pm.expect(jsonData.errorInformation.errorCode).to.eql('3001');",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{SIMPAYER_BEARER_TOKEN}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Accept",
										"value": "application/vnd.interoperability.quotes+json;version=1.0"
									},
									{
										"key": "Content-Type",
										"value": "application/vnd.interoperability.quotes+json;version=9.0"
									},
									{
										"key": "Date",
										"value": "{{quoteDate}}"
									},
									{
										"key": "FSPIOP-Source",
										"value": "{{SIMPAYER_NAME}}"
									},
									{
										"key": "FSPIOP-Destination",
										"value": "{{SIMPAYEE_NAME}}"
									},
									{
										"key": "FSPIOP-Signature",
										"value": "{{fspiopSignature}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{{quoteRequest}}"
								},
								"url": {
									"raw": "{{HOST_QUOTING_SERVICE}}/quotes",
									"host": [
										"{{HOST_QUOTING_SERVICE}}"
									],
									"path": [
										"quotes"
									]
								},
								"description": "Check POST/Quote  with incorrect switch version header\n\nExpectation : 400 with error code 3001"
							},
							"response": []
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				},
				{
					"name": "Check Settlements Error #956",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "0ebdd14c-c9ef-44df-aa62-1a0d35093bdc",
								"exec": [
									"const jsonData = pm.response.json();",
									"",
									"pm.test(\"Status code is 400\", function () {",
									"    pm.response.to.have.status(400);",
									"});",
									"",
									"pm.test(\"Check Malformed syntax in settlements\", function () {",
									"    pm.expect(jsonData.errorInformation.errorDescription).to.include('Malformed syntax');",
									"});",
									"",
									"pm.test(\"Check Error code 3101\", function () {",
									"    pm.expect(jsonData.errorInformation.errorCode).to.eql('3101');",
									"});",
									"",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{HUB_OPERATOR_BEARER_TOKEN}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{HOST_CENTRAL_SETTLEMENT}}{{BASE_CENTRAL_SETTLEMENT}}/settlementWindows?participantId=0&state=open",
							"host": [
								"{{HOST_CENTRAL_SETTLEMENT}}{{BASE_CENTRAL_SETTLEMENT}}"
							],
							"path": [
								"settlementWindows"
							],
							"query": [
								{
									"key": "participantId",
									"value": "0"
								},
								{
									"key": "state",
									"value": "open",
									"description": "Available values : OPEN, CLOSED, PENDING_SETTLEMENT, SETTLED, NOT_SETTLED"
								},
								{
									"key": "fromDateTime",
									"value": "",
									"disabled": true
								},
								{
									"key": "toDateTime",
									"value": "",
									"disabled": true
								}
							]
						},
						"description": "State, OPEN is case sensitive.\nTocheck invalid request I have provided state = \"open\""
					},
					"response": []
				},
				{
					"name": "Check FSPIOP Headers from Switch #883",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "c75c043c-2e97-457c-be67-17dbe2411301",
								"exec": [
									"pm.test(\"Status code is 202\", function () {",
									"    pm.response.to.have.status(202);",
									"});",
									"",
									"",
									"setTimeout(function () {",
									"  partyId = pm.variables.get(\"InexistentPartyId\");",
									"  pm.sendRequest(pm.environment.get(\"SIMPAYER_SDK_TESTAPI_URL\")+\"/callbacks/\"+pm.variables.get(\"InexistentPartyId\"), function (err, response) {",
									"      responseBody = response.json();",
									"      pm.test(\"Expect simulator to return response\", () => {",
									"          pm.expect(response.responseSize).to.be.above(0);",
									"      })",
									"      pm.test(`Expect FSPIO-URI header to be /parties/MSISDN/${partyId}/error`, function () {",
									"          pm.expect(responseBody.headers).to.have.property(\"fspiop-uri\");",
									"          pm.expect(responseBody.headers[\"fspiop-uri\"]).to.equal(`/parties/MSISDN/${partyId}/error`);",
									"        });",
									"        pm.test(\"Expected FSPIO-HTTP-Method header to be PUT\", function () {",
									"            pm.expect(responseBody.headers).to.have.property(\"fspiop-http-method\");",
									"            pm.expect(responseBody.headers[\"fspiop-http-method\"]).to.equal(\"PUT\");",
									"        });",
									"        pm.test(\"Expected error code is 3204\", function () {",
									"            pm.expect(responseBody.data.errorInformation.errorCode).to.equal(\"3204\");",
									"        });",
									"        pm.test(\"Expected error description - party not Found\", function () {",
									"            pm.expect(responseBody.data.errorInformation.errorDescription).to.equal(\"Party not found\");",
									"        });",
									"    });",
									"}, 2000)",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "53ffd154-b743-4765-91e7-c8c7a6ca0393",
								"exec": [
									"pm.environment.set('dateHeader', (new Date()).toUTCString());",
									"pm.variables.set('InexistentPartyId', 1999999)",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{SIMPAYER_BEARER_TOKEN}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "Accept",
								"type": "text",
								"value": "application/vnd.interoperability.parties+json;version=1.0"
							},
							{
								"key": "Date",
								"type": "text",
								"value": "{{dateHeader}}"
							},
							{
								"key": "FSPIOP-Source",
								"type": "text",
								"value": "{{SIMPAYER_NAME}}"
							},
							{
								"key": "Content-Type",
								"type": "text",
								"value": "application/vnd.interoperability.parties+json;version=1.0"
							}
						],
						"url": {
							"raw": "{{HOST_ACCOUNT_LOOKUP_SERVICE}}/parties/MSISDN/{{InexistentPartyId}}",
							"host": [
								"{{HOST_ACCOUNT_LOOKUP_SERVICE}}"
							],
							"path": [
								"parties",
								"MSISDN",
								"{{InexistentPartyId}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Check FSPIOP Headers from ML-API-Adapter #1032",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "123a1fd9-09a6-4601-95ee-25c6fdee7f92",
								"exec": [
									"pm.test(\"Status code is 202\", () => {",
									"    pm.response.to.have.status(202);",
									"});",
									"",
									"//Check the callback response that Switch forwards to payerfsp",
									"setTimeout(function () {",
									"  pm.sendRequest(pm.environment.get(\"SIMPAYER_SDK_TESTAPI_URL\")+\"/callbacks/\"+pm.environment.get(\"transfer_ID\"), function (err, response) {",
									"          if(response.responseSize !== 0) {",
									"            //Checking headers",
									"            var headers = response.json().headers;",
									"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-source is switch `, function () {",
									"                pm.expect(headers['fspiop-source']).to.eql('switch');",
									"            });",
									"            ",
									"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-destination is payerfsp`, function () {",
									"                pm.expect(headers['fspiop-destination']).to.eql(pm.environment.get('SIMPAYER_NAME'));",
									"            });",
									"            ",
									"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} content-type should be application/vnd.interoperability.transfers+json;version=1.0`, function () {",
									"                pm.expect(headers['content-type']).to.eql('application/vnd.interoperability.transfers+json;version=1.0');",
									"            });",
									"            ",
									"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} accept is empty`, function () {",
									"                pm.expect(headers['accept']).to.eql(undefined);",
									"            });",
									"            ",
									"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-signature is not empty`, function () {",
									"                    pm.expect(headers['fspiop-signature']).not.eql(undefined);",
									"                });",
									"            ",
									"            ",
									"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-uri includes /transfers/${pm.environment.get(\"transfer_ID\")}`, function () {",
									"                console.log(headers['fspiop-uri'])",
									"                pm.expect(headers['fspiop-uri']).to.eql('/transfers/'+ pm.environment.get(\"transfer_ID\")+'/error');",
									"            });",
									"            ",
									"            pm.test(`${pm.environment.get('SIMPAYER_NAME')} fspiop-http-method is PUT`, function () {",
									"                pm.expect(headers['fspiop-http-method']).to.eql('PUT');",
									"            });",
									"            ",
									"            var jsonData = response.json().data;",
									"",
									"            pm.test(\"Response data does not have transferId\", function () {",
									"               pm.expect(jsonData.transferId).to.eql(undefined);",
									"            });",
									"",
									"            pm.test(\"Error code is 3100\", function () {",
									"                pm.expect(jsonData.errorInformation.errorCode).to.eql('3100');",
									"            });",
									"          } else {",
									"              pm.test(\"Transfer FAILED\", function () {",
									"                throw new Error('Did not receive response on payer side');",
									"              });",
									"              // postman.setNextRequest(null)",
									"          }",
									"   });",
									"}, pm.environment.get(\"SET_TIMEOUT_TRANSFERS\"))",
									"",
									"",
									"",
									"",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "1a331214-bd7f-4ac7-a291-d011f7416a9c",
								"exec": [
									"var navigator = {}; //fake a navigator object for the lib",
									"var window = {}; //fake a window object for the lib",
									"eval(pm.environment.get('jrsassign'));",
									"",
									"var uuid = require('uuid');",
									"var generatedUUID = uuid.v4();",
									"pm.environment.set('transfer_ID', generatedUUID);",
									"pm.variables.set('transferDate', (new Date()).toUTCString());",
									"pm.environment.set(\"transferExpiration\",new Date(new Date().getTime() + 200))",
									"",
									"var oHeader = {alg: \"RS256\", \"FSPIOP-Source\": pm.environment.get('SIMPAYER_NAME'),\"FSPIOP-Destination\": pm.environment.get('SIMPAYEE_NAME'), \"FSPIOP-URI\":\"/transfers\", \"FSPIOP-HTTP-Method\":\"POST\", \"Date\":pm.variables.get('transferDate')};",
									"var sHeader = JSON.stringify(oHeader);",
									"console.log(`sHeader: ${sHeader}`)",
									"",
									"var objPayload = {",
									"  \"transferId\": pm.environment.get('transfer_ID'),",
									"  \"payerFsp\": pm.environment.get('SIMPAYER_NAME'),",
									"  \"payeeFsp\": \"payeefspNOTFOUND\",",
									"  \"amount\": {",
									"    \"amount\": \"10\",",
									"    \"currency\": pm.environment.get('SIMPAYER_CURRENCY')",
									"  },",
									"  \"expiration\": pm.environment.get('transferExpiration'),",
									"  \"ilpPacket\": pm.environment.get('ilpPacket'),",
									"  \"condition\": pm.environment.get('condition')",
									"}",
									"var sPayload = JSON.stringify(objPayload)",
									"console.log(`sPayload: ${sPayload}`)",
									"pm.variables.set(\"transferRequest\", sPayload);",
									"var token = KJUR.jws.JWS.sign(\"RS256\", sHeader, sPayload, pm.environment.get('SIMPAYER_JWS_KEY'));",
									"//console.log(`token: ${token}`)",
									"",
									"// var encodedHeaders = btoa(sHeader)",
									"",
									"// var ofspiopSignature = {signature: vSignature, protectedHeader: encodedHeaders}",
									"// var token = JSON.stringify(ofspiopSignature)",
									"",
									"const [ protectedHeaderBase64, , signature ] = token.split('.');",
									"",
									"const signatureObject = {",
									"    signature: signature.replace('\"', ''),",
									"    protectedHeader: protectedHeaderBase64.replace('\"', '')",
									"};",
									"",
									"console.log(JSON.stringify(signatureObject))",
									"",
									"pm.variables.set('fspiopSignature',JSON.stringify(signatureObject))"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{SIMPAYER_BEARER_TOKEN}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Accept",
								"value": "application/vnd.interoperability.transfers+json;version=1.0"
							},
							{
								"key": "Content-Type",
								"value": "application/vnd.interoperability.transfers+json;version=1.0"
							},
							{
								"key": "Date",
								"value": "{{transferDate}}"
							},
							{
								"key": "FSPIOP-Source",
								"value": "{{SIMPAYER_NAME}}"
							},
							{
								"key": "FSPIOP-Destination",
								"value": "payeefspNOTFOUND"
							},
							{
								"key": "FSPIOP-Signature",
								"type": "text",
								"value": "{{fspiop-signature}}"
							},
							{
								"key": "FSPIOP-URI",
								"type": "text",
								"value": "/transfers"
							},
							{
								"key": "FSPIOP-HTTP-Method",
								"type": "text",
								"value": "POST"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{{transferRequest}}"
						},
						"url": {
							"raw": "{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}/transfers",
							"host": [
								"{{HOST_SWITCH_TRANSFERS}}{{BASE_PATH_SWITCH_TRANSFERS}}"
							],
							"path": [
								"transfers"
							]
						}
					},
					"response": []
				}
			],
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"id": "9c11d2b0-6340-4cc4-9f07-d265152fd225",
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				},
				{
					"listen": "test",
					"script": {
						"id": "c0db29e9-811d-455b-bfaf-1a6b8847934a",
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "tear_down_setup",
			"item": [
				{
					"name": "remove-un_necessary-environment-vars",
					"item": [
						{
							"name": "Sample request",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "591662fd-0294-4c81-ad49-bd5362570df6",
										"exec": [
											"pm.environment.unset('jrsassign');"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "google.com",
									"host": [
										"google",
										"com"
									]
								}
							},
							"response": []
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				}
			],
			"protocolProfileBehavior": {}
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"id": "42e4df56-e53a-4217-80ec-6b45e45c2a36",
				"type": "text/javascript",
				"exec": [
					"if (pm.environment.get('WS02_OAUTH_ENABLED') === 'true') {",
					"",
					"    // Get Token for Hub Operator",
					"    let authHeader = btoa(`${pm.environment.get('HUB_OPERATOR_CONSUMER_KEY')}:${pm.environment.get('HUB_OPERATOR_CONSUMER_SECRET')}`);",
					"    let getTokenRequest = {",
					"        url: pm.environment.get(\"HOST_SWITCH\") + '/token/',",
					"        method: 'POST',",
					"        header: {",
					"            \"Authorization\": `Basic ${authHeader}`,",
					"            'Content-Type': 'application/x-www-form-urlencoded',",
					"        },",
					"        body: {",
					"            mode: 'urlencoded',",
					"            urlencoded: [",
					"                { key: \"grant_type\", value: \"client_credentials\", disabled: false },",
					"            ]",
					"        }",
					"    };",
					"    pm.sendRequest(getTokenRequest, function (err, response) {",
					"        var jsonData = response.json();",
					"        pm.environment.set('HUB_OPERATOR_BEARER_TOKEN', jsonData.access_token);",
					"    });",
					"",
					"    // Get Token for Payerfsp",
					"    authHeader = btoa(`${pm.environment.get('SIMPAYER_CONSUMER_KEY')}:${pm.environment.get('SIMPAYER_CONSUMER_SECRET')}`);",
					"    getTokenRequest = {",
					"        url: pm.environment.get(\"HOST_SWITCH\") + '/token/',",
					"        method: 'POST',",
					"        header: {",
					"            \"Authorization\": `Basic ${authHeader}`,",
					"            'Content-Type': 'application/x-www-form-urlencoded',",
					"        },",
					"        body: {",
					"            mode: 'urlencoded',",
					"            urlencoded: [",
					"                { key: \"grant_type\", value: \"client_credentials\", disabled: false },",
					"            ]",
					"        }",
					"    };",
					"    pm.sendRequest(getTokenRequest, function (err, response) {",
					"        var jsonData = response.json();",
					"        pm.environment.set('SIMPAYER_BEARER_TOKEN', jsonData.access_token);",
					"    });",
					"",
					"    // Get Token for Payeefsp",
					"    authHeader = btoa(`${pm.environment.get('SIMPAYEE_CONSUMER_KEY')}:${pm.environment.get('SIMPAYEE_CONSUMER_SECRET')}`);",
					"    getTokenRequest = {",
					"        url: pm.environment.get(\"HOST_SWITCH\") + '/token/',",
					"        method: 'POST',",
					"        header: {",
					"            \"Authorization\": `Basic ${authHeader}`,",
					"            'Content-Type': 'application/x-www-form-urlencoded',",
					"        },",
					"        body: {",
					"            mode: 'urlencoded',",
					"            urlencoded: [",
					"                { key: \"grant_type\", value: \"client_credentials\", disabled: false },",
					"            ]",
					"        }",
					"    };",
					"    pm.sendRequest(getTokenRequest, function (err, response) {",
					"        var jsonData = response.json();",
					"        pm.environment.set('SIMPAYEE_BEARER_TOKEN', jsonData.access_token);",
					"    });",
					"",
					"    // Get Token for Testfsp1",
					"    authHeader = btoa(`${pm.environment.get('SIM1_CONSUMER_KEY')}:${pm.environment.get('SIM1_CONSUMER_SECRET')}`);",
					"    getTokenRequest = {",
					"        url: pm.environment.get(\"HOST_SWITCH\") + '/token/',",
					"        method: 'POST',",
					"        header: {",
					"            \"Authorization\": `Basic ${authHeader}`,",
					"            'Content-Type': 'application/x-www-form-urlencoded',",
					"        },",
					"        body: {",
					"            mode: 'urlencoded',",
					"            urlencoded: [",
					"                { key: \"grant_type\", value: \"client_credentials\", disabled: false },",
					"            ]",
					"        }",
					"    };",
					"    pm.sendRequest(getTokenRequest, function (err, response) {",
					"        var jsonData = response.json();",
					"        pm.environment.set('SIM1_BEARER_TOKEN', jsonData.access_token);",
					"    });",
					"",
					"    // Get Token for Testfsp2",
					"    authHeader = btoa(`${pm.environment.get('SIM2_CONSUMER_KEY')}:${pm.environment.get('SIM2_CONSUMER_SECRET')}`);",
					"    getTokenRequest = {",
					"        url: pm.environment.get(\"HOST_SWITCH\") + '/token/',",
					"        method: 'POST',",
					"        header: {",
					"            \"Authorization\": `Basic ${authHeader}`,",
					"            'Content-Type': 'application/x-www-form-urlencoded',",
					"        },",
					"        body: {",
					"            mode: 'urlencoded',",
					"            urlencoded: [",
					"                { key: \"grant_type\", value: \"client_credentials\", disabled: false },",
					"            ]",
					"        }",
					"    };",
					"    pm.sendRequest(getTokenRequest, function (err, response) {",
					"        var jsonData = response.json();",
					"        pm.environment.set('SIM2_BEARER_TOKEN', jsonData.access_token);",
					"    });",
					"",
					"    // Get Token for NoResponsePayeeFSP",
					"    authHeader = btoa(`${pm.environment.get('NORESPONSE_SIMPAYEE_CONSUMER_KEY')}:${pm.environment.get('NORESPONSE_SIMPAYEE_CONSUMER_SECRET')}`);",
					"    getTokenRequest = {",
					"        url: pm.environment.get(\"HOST_SWITCH\") + '/token/',",
					"        method: 'POST',",
					"        header: {",
					"            \"Authorization\": `Basic ${authHeader}`,",
					"            'Content-Type': 'application/x-www-form-urlencoded',",
					"        },",
					"        body: {",
					"            mode: 'urlencoded',",
					"            urlencoded: [",
					"                { key: \"grant_type\", value: \"client_credentials\", disabled: false },",
					"            ]",
					"        }",
					"    };",
					"    pm.sendRequest(getTokenRequest, function (err, response) {",
					"        var jsonData = response.json();",
					"        pm.environment.set('NORESPONSE_SIMPAYEE_BEARER_TOKEN', jsonData.access_token);",
					"    });",
					"",
					"}",
					"",
					"if(!pm.environment.get('jrsassign')) {",
					"    pm.sendRequest('http://kjur.github.io/jsrsasign/jsrsasign-latest-all-min.js', function (err, response) {",
					"        pm.environment.set('jrsassign', response.text());",
					"    });",
					"}"
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"id": "e74e635e-cc8e-40b3-b7ed-1b49b188c867",
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"protocolProfileBehavior": {}
}